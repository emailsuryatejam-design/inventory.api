(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const x of document.querySelectorAll('link[rel="modulepreload"]'))d(x);new MutationObserver(x=>{for(const f of x)if(f.type==="childList")for(const p of f.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&d(p)}).observe(document,{childList:!0,subtree:!0});function o(x){const f={};return x.integrity&&(f.integrity=x.integrity),x.referrerPolicy&&(f.referrerPolicy=x.referrerPolicy),x.crossOrigin==="use-credentials"?f.credentials="include":x.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function d(x){if(x.ep)return;x.ep=!0;const f=o(x);fetch(x.href,f)}})();var dd={exports:{}},Wl={};var B0;function Tg(){if(B0)return Wl;B0=1;var l=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function o(d,x,f){var p=null;if(f!==void 0&&(p=""+f),x.key!==void 0&&(p=""+x.key),"key"in x){f={};for(var j in x)j!=="key"&&(f[j]=x[j])}else f=x;return x=f.ref,{$$typeof:l,type:d,key:p,ref:x!==void 0?x:null,props:f}}return Wl.Fragment=i,Wl.jsx=o,Wl.jsxs=o,Wl}var H0;function Eg(){return H0||(H0=1,dd.exports=Tg()),dd.exports}var t=Eg(),ud={exports:{}},Ce={};var G0;function Og(){if(G0)return Ce;G0=1;var l=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),p=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),g=Symbol.iterator;function T(C){return C===null||typeof C!="object"?null:(C=g&&C[g]||C["@@iterator"],typeof C=="function"?C:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,E={};function k(C,G,Y){this.props=C,this.context=G,this.refs=E,this.updater=Y||_}k.prototype.isReactComponent={},k.prototype.setState=function(C,G){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,G,"setState")},k.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function w(){}w.prototype=k.prototype;function B(C,G,Y){this.props=C,this.context=G,this.refs=E,this.updater=Y||_}var Q=B.prototype=new w;Q.constructor=B,A(Q,k.prototype),Q.isPureReactComponent=!0;var L=Array.isArray;function ne(){}var J={H:null,A:null,T:null,S:null},ye=Object.prototype.hasOwnProperty;function X(C,G,Y){var R=Y.ref;return{$$typeof:l,type:C,key:G,ref:R!==void 0?R:null,props:Y}}function ae(C,G){return X(C.type,G,C.props)}function se(C){return typeof C=="object"&&C!==null&&C.$$typeof===l}function K(C){var G={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(Y){return G[Y]})}var me=/\/+/g;function Z(C,G){return typeof C=="object"&&C!==null&&C.key!=null?K(""+C.key):G.toString(36)}function ce(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(ne,ne):(C.status="pending",C.then(function(G){C.status==="pending"&&(C.status="fulfilled",C.value=G)},function(G){C.status==="pending"&&(C.status="rejected",C.reason=G)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function M(C,G,Y,R,le){var de=typeof C;(de==="undefined"||de==="boolean")&&(C=null);var he=!1;if(C===null)he=!0;else switch(de){case"bigint":case"string":case"number":he=!0;break;case"object":switch(C.$$typeof){case l:case i:he=!0;break;case v:return he=C._init,M(he(C._payload),G,Y,R,le)}}if(he)return le=le(C),he=R===""?"."+Z(C,0):R,L(le)?(Y="",he!=null&&(Y=he.replace(me,"$&/")+"/"),M(le,G,Y,"",function(rt){return rt})):le!=null&&(se(le)&&(le=ae(le,Y+(le.key==null||C&&C.key===le.key?"":(""+le.key).replace(me,"$&/")+"/")+he)),G.push(le)),1;he=0;var Le=R===""?".":R+":";if(L(C))for(var we=0;we<C.length;we++)R=C[we],de=Le+Z(R,we),he+=M(R,G,Y,de,le);else if(we=T(C),typeof we=="function")for(C=we.call(C),we=0;!(R=C.next()).done;)R=R.value,de=Le+Z(R,we++),he+=M(R,G,Y,de,le);else if(de==="object"){if(typeof C.then=="function")return M(ce(C),G,Y,R,le);throw G=String(C),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return he}function P(C,G,Y){if(C==null)return C;var R=[],le=0;return M(C,R,"","",function(de){return G.call(Y,de,le++)}),R}function ie(C){if(C._status===-1){var G=C._result;G=G(),G.then(function(Y){(C._status===0||C._status===-1)&&(C._status=1,C._result=Y)},function(Y){(C._status===0||C._status===-1)&&(C._status=2,C._result=Y)}),C._status===-1&&(C._status=0,C._result=G)}if(C._status===1)return C._result.default;throw C._result}var xe=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},be={map:P,forEach:function(C,G,Y){P(C,function(){G.apply(this,arguments)},Y)},count:function(C){var G=0;return P(C,function(){G++}),G},toArray:function(C){return P(C,function(G){return G})||[]},only:function(C){if(!se(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return Ce.Activity=b,Ce.Children=be,Ce.Component=k,Ce.Fragment=o,Ce.Profiler=x,Ce.PureComponent=B,Ce.StrictMode=d,Ce.Suspense=h,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=J,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(C){return J.H.useMemoCache(C)}},Ce.cache=function(C){return function(){return C.apply(null,arguments)}},Ce.cacheSignal=function(){return null},Ce.cloneElement=function(C,G,Y){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var R=A({},C.props),le=C.key;if(G!=null)for(de in G.key!==void 0&&(le=""+G.key),G)!ye.call(G,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&G.ref===void 0||(R[de]=G[de]);var de=arguments.length-2;if(de===1)R.children=Y;else if(1<de){for(var he=Array(de),Le=0;Le<de;Le++)he[Le]=arguments[Le+2];R.children=he}return X(C.type,le,R)},Ce.createContext=function(C){return C={$$typeof:p,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:f,_context:C},C},Ce.createElement=function(C,G,Y){var R,le={},de=null;if(G!=null)for(R in G.key!==void 0&&(de=""+G.key),G)ye.call(G,R)&&R!=="key"&&R!=="__self"&&R!=="__source"&&(le[R]=G[R]);var he=arguments.length-2;if(he===1)le.children=Y;else if(1<he){for(var Le=Array(he),we=0;we<he;we++)Le[we]=arguments[we+2];le.children=Le}if(C&&C.defaultProps)for(R in he=C.defaultProps,he)le[R]===void 0&&(le[R]=he[R]);return X(C,de,le)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(C){return{$$typeof:j,render:C}},Ce.isValidElement=se,Ce.lazy=function(C){return{$$typeof:v,_payload:{_status:-1,_result:C},_init:ie}},Ce.memo=function(C,G){return{$$typeof:y,type:C,compare:G===void 0?null:G}},Ce.startTransition=function(C){var G=J.T,Y={};J.T=Y;try{var R=C(),le=J.S;le!==null&&le(Y,R),typeof R=="object"&&R!==null&&typeof R.then=="function"&&R.then(ne,xe)}catch(de){xe(de)}finally{G!==null&&Y.types!==null&&(G.types=Y.types),J.T=G}},Ce.unstable_useCacheRefresh=function(){return J.H.useCacheRefresh()},Ce.use=function(C){return J.H.use(C)},Ce.useActionState=function(C,G,Y){return J.H.useActionState(C,G,Y)},Ce.useCallback=function(C,G){return J.H.useCallback(C,G)},Ce.useContext=function(C){return J.H.useContext(C)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(C,G){return J.H.useDeferredValue(C,G)},Ce.useEffect=function(C,G){return J.H.useEffect(C,G)},Ce.useEffectEvent=function(C){return J.H.useEffectEvent(C)},Ce.useId=function(){return J.H.useId()},Ce.useImperativeHandle=function(C,G,Y){return J.H.useImperativeHandle(C,G,Y)},Ce.useInsertionEffect=function(C,G){return J.H.useInsertionEffect(C,G)},Ce.useLayoutEffect=function(C,G){return J.H.useLayoutEffect(C,G)},Ce.useMemo=function(C,G){return J.H.useMemo(C,G)},Ce.useOptimistic=function(C,G){return J.H.useOptimistic(C,G)},Ce.useReducer=function(C,G,Y){return J.H.useReducer(C,G,Y)},Ce.useRef=function(C){return J.H.useRef(C)},Ce.useState=function(C){return J.H.useState(C)},Ce.useSyncExternalStore=function(C,G,Y){return J.H.useSyncExternalStore(C,G,Y)},Ce.useTransition=function(){return J.H.useTransition()},Ce.version="19.2.4",Ce}var $0;function Rd(){return $0||($0=1,ud.exports=Og()),ud.exports}var u=Rd(),md={exports:{}},Pl={},xd={exports:{}},fd={};var Y0;function Rg(){return Y0||(Y0=1,(function(l){function i(M,P){var ie=M.length;M.push(P);e:for(;0<ie;){var xe=ie-1>>>1,be=M[xe];if(0<x(be,P))M[xe]=P,M[ie]=be,ie=xe;else break e}}function o(M){return M.length===0?null:M[0]}function d(M){if(M.length===0)return null;var P=M[0],ie=M.pop();if(ie!==P){M[0]=ie;e:for(var xe=0,be=M.length,C=be>>>1;xe<C;){var G=2*(xe+1)-1,Y=M[G],R=G+1,le=M[R];if(0>x(Y,ie))R<be&&0>x(le,Y)?(M[xe]=le,M[R]=ie,xe=R):(M[xe]=Y,M[G]=ie,xe=G);else if(R<be&&0>x(le,ie))M[xe]=le,M[R]=ie,xe=R;else break e}}return P}function x(M,P){var ie=M.sortIndex-P.sortIndex;return ie!==0?ie:M.id-P.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;l.unstable_now=function(){return f.now()}}else{var p=Date,j=p.now();l.unstable_now=function(){return p.now()-j}}var h=[],y=[],v=1,b=null,g=3,T=!1,_=!1,A=!1,E=!1,k=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function Q(M){for(var P=o(y);P!==null;){if(P.callback===null)d(y);else if(P.startTime<=M)d(y),P.sortIndex=P.expirationTime,i(h,P);else break;P=o(y)}}function L(M){if(A=!1,Q(M),!_)if(o(h)!==null)_=!0,ne||(ne=!0,K());else{var P=o(y);P!==null&&ce(L,P.startTime-M)}}var ne=!1,J=-1,ye=5,X=-1;function ae(){return E?!0:!(l.unstable_now()-X<ye)}function se(){if(E=!1,ne){var M=l.unstable_now();X=M;var P=!0;try{e:{_=!1,A&&(A=!1,w(J),J=-1),T=!0;var ie=g;try{t:{for(Q(M),b=o(h);b!==null&&!(b.expirationTime>M&&ae());){var xe=b.callback;if(typeof xe=="function"){b.callback=null,g=b.priorityLevel;var be=xe(b.expirationTime<=M);if(M=l.unstable_now(),typeof be=="function"){b.callback=be,Q(M),P=!0;break t}b===o(h)&&d(h),Q(M)}else d(h);b=o(h)}if(b!==null)P=!0;else{var C=o(y);C!==null&&ce(L,C.startTime-M),P=!1}}break e}finally{b=null,g=ie,T=!1}P=void 0}}finally{P?K():ne=!1}}}var K;if(typeof B=="function")K=function(){B(se)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,Z=me.port2;me.port1.onmessage=se,K=function(){Z.postMessage(null)}}else K=function(){k(se,0)};function ce(M,P){J=k(function(){M(l.unstable_now())},P)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(M){M.callback=null},l.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ye=0<M?Math.floor(1e3/M):5},l.unstable_getCurrentPriorityLevel=function(){return g},l.unstable_next=function(M){switch(g){case 1:case 2:case 3:var P=3;break;default:P=g}var ie=g;g=P;try{return M()}finally{g=ie}},l.unstable_requestPaint=function(){E=!0},l.unstable_runWithPriority=function(M,P){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var ie=g;g=M;try{return P()}finally{g=ie}},l.unstable_scheduleCallback=function(M,P,ie){var xe=l.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?xe+ie:xe):ie=xe,M){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=ie+be,M={id:v++,callback:P,priorityLevel:M,startTime:ie,expirationTime:be,sortIndex:-1},ie>xe?(M.sortIndex=ie,i(y,M),o(h)===null&&M===o(y)&&(A?(w(J),J=-1):A=!0,ce(L,ie-xe))):(M.sortIndex=be,i(h,M),_||T||(_=!0,ne||(ne=!0,K()))),M},l.unstable_shouldYield=ae,l.unstable_wrapCallback=function(M){var P=g;return function(){var ie=g;g=P;try{return M.apply(this,arguments)}finally{g=ie}}}})(fd)),fd}var V0;function Ag(){return V0||(V0=1,xd.exports=Rg()),xd.exports}var hd={exports:{}},At={};var Q0;function Dg(){if(Q0)return At;Q0=1;var l=Rd();function i(h){var y="https://react.dev/errors/"+h;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+h+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var d={d:{f:o,r:function(){throw Error(i(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},x=Symbol.for("react.portal");function f(h,y,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:x,key:b==null?null:""+b,children:h,containerInfo:y,implementation:v}}var p=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function j(h,y){if(h==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return At.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=d,At.createPortal=function(h,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(i(299));return f(h,y,null,v)},At.flushSync=function(h){var y=p.T,v=d.p;try{if(p.T=null,d.p=2,h)return h()}finally{p.T=y,d.p=v,d.d.f()}},At.preconnect=function(h,y){typeof h=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,d.d.C(h,y))},At.prefetchDNS=function(h){typeof h=="string"&&d.d.D(h)},At.preinit=function(h,y){if(typeof h=="string"&&y&&typeof y.as=="string"){var v=y.as,b=j(v,y.crossOrigin),g=typeof y.integrity=="string"?y.integrity:void 0,T=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?d.d.S(h,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:b,integrity:g,fetchPriority:T}):v==="script"&&d.d.X(h,{crossOrigin:b,integrity:g,fetchPriority:T,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},At.preinitModule=function(h,y){if(typeof h=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=j(y.as,y.crossOrigin);d.d.M(h,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&d.d.M(h)},At.preload=function(h,y){if(typeof h=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,b=j(v,y.crossOrigin);d.d.L(h,v,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},At.preloadModule=function(h,y){if(typeof h=="string")if(y){var v=j(y.as,y.crossOrigin);d.d.m(h,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else d.d.m(h)},At.requestFormReset=function(h){d.d.r(h)},At.unstable_batchedUpdates=function(h,y){return h(y)},At.useFormState=function(h,y,v){return p.H.useFormState(h,y,v)},At.useFormStatus=function(){return p.H.useHostTransitionStatus()},At.version="19.2.4",At}var Z0;function jf(){if(Z0)return hd.exports;Z0=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(i){console.error(i)}}return l(),hd.exports=Dg(),hd.exports}var X0;function Mg(){if(X0)return Pl;X0=1;var l=Ag(),i=Rd(),o=jf();function d(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)a+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function x(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var a=e,s=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,(a.flags&4098)!==0&&(s=a.return),e=a.return;while(e)}return a.tag===3?s:null}function p(e){if(e.tag===13){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function j(e){if(e.tag===31){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function h(e){if(f(e)!==e)throw Error(d(188))}function y(e){var a=e.alternate;if(!a){if(a=f(e),a===null)throw Error(d(188));return a!==e?null:e}for(var s=e,n=a;;){var r=s.return;if(r===null)break;var c=r.alternate;if(c===null){if(n=r.return,n!==null){s=n;continue}break}if(r.child===c.child){for(c=r.child;c;){if(c===s)return h(r),e;if(c===n)return h(r),a;c=c.sibling}throw Error(d(188))}if(s.return!==n.return)s=r,n=c;else{for(var m=!1,N=r.child;N;){if(N===s){m=!0,s=r,n=c;break}if(N===n){m=!0,n=r,s=c;break}N=N.sibling}if(!m){for(N=c.child;N;){if(N===s){m=!0,s=c,n=r;break}if(N===n){m=!0,n=c,s=r;break}N=N.sibling}if(!m)throw Error(d(189))}}if(s.alternate!==n)throw Error(d(190))}if(s.tag!==3)throw Error(d(188));return s.stateNode.current===s?e:a}function v(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e;for(e=e.child;e!==null;){if(a=v(e),a!==null)return a;e=e.sibling}return null}var b=Object.assign,g=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),B=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),ye=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),ae=Symbol.for("react.memo_cache_sentinel"),se=Symbol.iterator;function K(e){return e===null||typeof e!="object"?null:(e=se&&e[se]||e["@@iterator"],typeof e=="function"?e:null)}var me=Symbol.for("react.client.reference");function Z(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===me?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case A:return"Fragment";case k:return"Profiler";case E:return"StrictMode";case L:return"Suspense";case ne:return"SuspenseList";case X:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case _:return"Portal";case B:return e.displayName||"Context";case w:return(e._context.displayName||"Context")+".Consumer";case Q:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case J:return a=e.displayName||null,a!==null?a:Z(e.type)||"Memo";case ye:a=e._payload,e=e._init;try{return Z(e(a))}catch{}}return null}var ce=Array.isArray,M=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},xe=[],be=-1;function C(e){return{current:e}}function G(e){0>be||(e.current=xe[be],xe[be]=null,be--)}function Y(e,a){be++,xe[be]=e.current,e.current=a}var R=C(null),le=C(null),de=C(null),he=C(null);function Le(e,a){switch(Y(de,a),Y(le,e),Y(R,null),a.nodeType){case 9:case 11:e=(e=a.documentElement)&&(e=e.namespaceURI)?c0(e):0;break;default:if(e=a.tagName,a=a.namespaceURI)a=c0(a),e=o0(a,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}G(R),Y(R,e)}function we(){G(R),G(le),G(de)}function rt(e){e.memoizedState!==null&&Y(he,e);var a=R.current,s=o0(a,e.type);a!==s&&(Y(le,e),Y(R,s))}function Ot(e){le.current===e&&(G(R),G(le)),he.current===e&&(G(he),Kl._currentValue=ie)}var Rt,wt;function Ae(e){if(Rt===void 0)try{throw Error()}catch(s){var a=s.stack.trim().match(/\n( *(at )?)/);Rt=a&&a[1]||"",wt=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rt+e+wt}var re=!1;function S(e,a){if(!e||re)return"";re=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(a){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(V){var H=V}Reflect.construct(e,[],te)}else{try{te.call()}catch(V){H=V}e.call(te.prototype)}}else{try{throw Error()}catch(V){H=V}(te=e())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(V){if(V&&H&&typeof V.stack=="string")return[V.stack,H.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var c=n.DetermineComponentFrameRoot(),m=c[0],N=c[1];if(m&&N){var z=m.split(`
`),U=N.split(`
`);for(r=n=0;n<z.length&&!z[n].includes("DetermineComponentFrameRoot");)n++;for(;r<U.length&&!U[r].includes("DetermineComponentFrameRoot");)r++;if(n===z.length||r===U.length)for(n=z.length-1,r=U.length-1;1<=n&&0<=r&&z[n]!==U[r];)r--;for(;1<=n&&0<=r;n--,r--)if(z[n]!==U[r]){if(n!==1||r!==1)do if(n--,r--,0>r||z[n]!==U[r]){var W=`
`+z[n].replace(" at new "," at ");return e.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",e.displayName)),W}while(1<=n&&0<=r);break}}}finally{re=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Ae(s):""}function F(e,a){switch(e.tag){case 26:case 27:case 5:return Ae(e.type);case 16:return Ae("Lazy");case 13:return e.child!==a&&a!==null?Ae("Suspense Fallback"):Ae("Suspense");case 19:return Ae("SuspenseList");case 0:case 15:return S(e.type,!1);case 11:return S(e.type.render,!1);case 1:return S(e.type,!0);case 31:return Ae("Activity");default:return""}}function fe(e){try{var a="",s=null;do a+=F(e,s),s=e,e=e.return;while(e);return a}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var Se=Object.prototype.hasOwnProperty,Qt=l.unstable_scheduleCallback,mt=l.unstable_cancelCallback,ba=l.unstable_shouldYield,I=l.unstable_requestPaint,Ne=l.unstable_now,at=l.unstable_getCurrentPriorityLevel,$=l.unstable_ImmediatePriority,ve=l.unstable_UserBlockingPriority,Ge=l.unstable_NormalPriority,xt=l.unstable_LowPriority,on=l.unstable_IdlePriority,ll=l.log,mh=l.unstable_setDisableYieldValue,rl=null,Zt=null;function es(e){if(typeof ll=="function"&&mh(e),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(rl,e)}catch{}}var Xt=Math.clz32?Math.clz32:hh,xh=Math.log,fh=Math.LN2;function hh(e){return e>>>=0,e===0?32:31-(xh(e)/fh|0)|0}var hr=256,pr=262144,gr=4194304;function Ms(e){var a=e&42;if(a!==0)return a;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function yr(e,a,s){var n=e.pendingLanes;if(n===0)return 0;var r=0,c=e.suspendedLanes,m=e.pingedLanes;e=e.warmLanes;var N=n&134217727;return N!==0?(n=N&~c,n!==0?r=Ms(n):(m&=N,m!==0?r=Ms(m):s||(s=N&~e,s!==0&&(r=Ms(s))))):(N=n&~c,N!==0?r=Ms(N):m!==0?r=Ms(m):s||(s=n&~e,s!==0&&(r=Ms(s)))),r===0?0:a!==0&&a!==r&&(a&c)===0&&(c=r&-r,s=a&-a,c>=s||c===32&&(s&4194048)!==0)?a:r}function il(e,a){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&a)===0}function ph(e,a){switch(e){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yd(){var e=gr;return gr<<=1,(gr&62914560)===0&&(gr=4194304),e}function Ii(e){for(var a=[],s=0;31>s;s++)a.push(e);return a}function cl(e,a){e.pendingLanes|=a,a!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function gh(e,a,s,n,r,c){var m=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var N=e.entanglements,z=e.expirationTimes,U=e.hiddenUpdates;for(s=m&~s;0<s;){var W=31-Xt(s),te=1<<W;N[W]=0,z[W]=-1;var H=U[W];if(H!==null)for(U[W]=null,W=0;W<H.length;W++){var V=H[W];V!==null&&(V.lane&=-536870913)}s&=~te}n!==0&&Vd(e,n,0),c!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=c&~(m&~a))}function Vd(e,a,s){e.pendingLanes|=a,e.suspendedLanes&=~a;var n=31-Xt(a);e.entangledLanes|=a,e.entanglements[n]=e.entanglements[n]|1073741824|s&261930}function Qd(e,a){var s=e.entangledLanes|=a;for(e=e.entanglements;s;){var n=31-Xt(s),r=1<<n;r&a|e[n]&a&&(e[n]|=a),s&=~r}}function Zd(e,a){var s=a&-a;return s=(s&42)!==0?1:Wi(s),(s&(e.suspendedLanes|a))!==0?0:s}function Wi(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Pi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Xd(){var e=P.p;return e!==0?e:(e=window.event,e===void 0?32:R0(e.type))}function Kd(e,a){var s=P.p;try{return P.p=e,a()}finally{P.p=s}}var ts=Math.random().toString(36).slice(2),kt="__reactFiber$"+ts,Mt="__reactProps$"+ts,dn="__reactContainer$"+ts,ec="__reactEvents$"+ts,yh="__reactListeners$"+ts,bh="__reactHandles$"+ts,Jd="__reactResources$"+ts,ol="__reactMarker$"+ts;function tc(e){delete e[kt],delete e[Mt],delete e[ec],delete e[yh],delete e[bh]}function un(e){var a=e[kt];if(a)return a;for(var s=e.parentNode;s;){if(a=s[dn]||s[kt]){if(s=a.alternate,a.child!==null||s!==null&&s.child!==null)for(e=p0(e);e!==null;){if(s=e[kt])return s;e=p0(e)}return a}e=s,s=e.parentNode}return null}function mn(e){if(e=e[kt]||e[dn]){var a=e.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return e}return null}function dl(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e.stateNode;throw Error(d(33))}function xn(e){var a=e[Jd];return a||(a=e[Jd]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function jt(e){e[ol]=!0}var Fd=new Set,Id={};function Ls(e,a){fn(e,a),fn(e+"Capture",a)}function fn(e,a){for(Id[e]=a,e=0;e<a.length;e++)Fd.add(a[e])}var vh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wd={},Pd={};function jh(e){return Se.call(Pd,e)?!0:Se.call(Wd,e)?!1:vh.test(e)?Pd[e]=!0:(Wd[e]=!0,!1)}function br(e,a,s){if(jh(a))if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(a);return;case"boolean":var n=a.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(a);return}}e.setAttribute(a,""+s)}}function vr(e,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttribute(a,""+s)}}function Oa(e,a,s,n){if(n===null)e.removeAttribute(s);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(a,s,""+n)}}function sa(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function eu(e){var a=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Nh(e,a,s){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,a);if(!e.hasOwnProperty(a)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,c=n.set;return Object.defineProperty(e,a,{configurable:!0,get:function(){return r.call(this)},set:function(m){s=""+m,c.call(this,m)}}),Object.defineProperty(e,a,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(m){s=""+m},stopTracking:function(){e._valueTracker=null,delete e[a]}}}}function ac(e){if(!e._valueTracker){var a=eu(e)?"checked":"value";e._valueTracker=Nh(e,a,""+e[a])}}function tu(e){if(!e)return!1;var a=e._valueTracker;if(!a)return!0;var s=a.getValue(),n="";return e&&(n=eu(e)?e.checked?"true":"false":e.value),e=n,e!==s?(a.setValue(e),!0):!1}function jr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var _h=/[\n"\\]/g;function na(e){return e.replace(_h,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function sc(e,a,s,n,r,c,m,N){e.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.type=m:e.removeAttribute("type"),a!=null?m==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+sa(a)):e.value!==""+sa(a)&&(e.value=""+sa(a)):m!=="submit"&&m!=="reset"||e.removeAttribute("value"),a!=null?nc(e,m,sa(a)):s!=null?nc(e,m,sa(s)):n!=null&&e.removeAttribute("value"),r==null&&c!=null&&(e.defaultChecked=!!c),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?e.name=""+sa(N):e.removeAttribute("name")}function au(e,a,s,n,r,c,m,N){if(c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.type=c),a!=null||s!=null){if(!(c!=="submit"&&c!=="reset"||a!=null)){ac(e);return}s=s!=null?""+sa(s):"",a=a!=null?""+sa(a):s,N||a===e.value||(e.value=a),e.defaultValue=a}n=n??r,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=N?e.checked:!!n,e.defaultChecked=!!n,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.name=m),ac(e)}function nc(e,a,s){a==="number"&&jr(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function hn(e,a,s,n){if(e=e.options,a){a={};for(var r=0;r<s.length;r++)a["$"+s[r]]=!0;for(s=0;s<e.length;s++)r=a.hasOwnProperty("$"+e[s].value),e[s].selected!==r&&(e[s].selected=r),r&&n&&(e[s].defaultSelected=!0)}else{for(s=""+sa(s),a=null,r=0;r<e.length;r++){if(e[r].value===s){e[r].selected=!0,n&&(e[r].defaultSelected=!0);return}a!==null||e[r].disabled||(a=e[r])}a!==null&&(a.selected=!0)}}function su(e,a,s){if(a!=null&&(a=""+sa(a),a!==e.value&&(e.value=a),s==null)){e.defaultValue!==a&&(e.defaultValue=a);return}e.defaultValue=s!=null?""+sa(s):""}function nu(e,a,s,n){if(a==null){if(n!=null){if(s!=null)throw Error(d(92));if(ce(n)){if(1<n.length)throw Error(d(93));n=n[0]}s=n}s==null&&(s=""),a=s}s=sa(a),e.defaultValue=s,n=e.textContent,n===s&&n!==""&&n!==null&&(e.value=n),ac(e)}function pn(e,a){if(a){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=a;return}}e.textContent=a}var Sh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lu(e,a,s){var n=a.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?n?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="":n?e.setProperty(a,s):typeof s!="number"||s===0||Sh.has(a)?a==="float"?e.cssFloat=s:e[a]=(""+s).trim():e[a]=s+"px"}function ru(e,a,s){if(a!=null&&typeof a!="object")throw Error(d(62));if(e=e.style,s!=null){for(var n in s)!s.hasOwnProperty(n)||a!=null&&a.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var r in a)n=a[r],a.hasOwnProperty(r)&&s[r]!==n&&lu(e,r,n)}else for(var c in a)a.hasOwnProperty(c)&&lu(e,c,a[c])}function lc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nr(e){return kh.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ra(){}var rc=null;function ic(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var gn=null,yn=null;function iu(e){var a=mn(e);if(a&&(e=a.stateNode)){var s=e[Mt]||null;e:switch(e=a.stateNode,a.type){case"input":if(sc(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),a=s.name,s.type==="radio"&&a!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+na(""+a)+'"][type="radio"]'),a=0;a<s.length;a++){var n=s[a];if(n!==e&&n.form===e.form){var r=n[Mt]||null;if(!r)throw Error(d(90));sc(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(a=0;a<s.length;a++)n=s[a],n.form===e.form&&tu(n)}break e;case"textarea":su(e,s.value,s.defaultValue);break e;case"select":a=s.value,a!=null&&hn(e,!!s.multiple,a,!1)}}}var cc=!1;function cu(e,a,s){if(cc)return e(a,s);cc=!0;try{var n=e(a);return n}finally{if(cc=!1,(gn!==null||yn!==null)&&(oi(),gn&&(a=gn,e=yn,yn=gn=null,iu(a),e)))for(a=0;a<e.length;a++)iu(e[a])}}function ul(e,a){var s=e.stateNode;if(s===null)return null;var n=s[Mt]||null;if(n===null)return null;s=n[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(d(231,a,typeof s));return s}var Aa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oc=!1;if(Aa)try{var ml={};Object.defineProperty(ml,"passive",{get:function(){oc=!0}}),window.addEventListener("test",ml,ml),window.removeEventListener("test",ml,ml)}catch{oc=!1}var as=null,dc=null,_r=null;function ou(){if(_r)return _r;var e,a=dc,s=a.length,n,r="value"in as?as.value:as.textContent,c=r.length;for(e=0;e<s&&a[e]===r[e];e++);var m=s-e;for(n=1;n<=m&&a[s-n]===r[c-n];n++);return _r=r.slice(e,1<n?1-n:void 0)}function Sr(e){var a=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&a===13&&(e=13)):e=a,e===10&&(e=13),32<=e||e===13?e:0}function wr(){return!0}function du(){return!1}function Lt(e){function a(s,n,r,c,m){this._reactName=s,this._targetInst=r,this.type=n,this.nativeEvent=c,this.target=m,this.currentTarget=null;for(var N in e)e.hasOwnProperty(N)&&(s=e[N],this[N]=s?s(c):c[N]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?wr:du,this.isPropagationStopped=du,this}return b(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=wr)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=wr)},persist:function(){},isPersistent:wr}),a}var qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kr=Lt(qs),xl=b({},qs,{view:0,detail:0}),Ch=Lt(xl),uc,mc,fl,Cr=b({},xl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fl&&(fl&&e.type==="mousemove"?(uc=e.screenX-fl.screenX,mc=e.screenY-fl.screenY):mc=uc=0,fl=e),uc)},movementY:function(e){return"movementY"in e?e.movementY:mc}}),uu=Lt(Cr),zh=b({},Cr,{dataTransfer:0}),Th=Lt(zh),Eh=b({},xl,{relatedTarget:0}),xc=Lt(Eh),Oh=b({},qs,{animationName:0,elapsedTime:0,pseudoElement:0}),Rh=Lt(Oh),Ah=b({},qs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Dh=Lt(Ah),Mh=b({},qs,{data:0}),mu=Lt(Mh),Lh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bh(e){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(e):(e=Uh[e])?!!a[e]:!1}function fc(){return Bh}var Hh=b({},xl,{key:function(e){if(e.key){var a=Lh[e.key]||e.key;if(a!=="Unidentified")return a}return e.type==="keypress"?(e=Sr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?qh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fc,charCode:function(e){return e.type==="keypress"?Sr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Sr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Gh=Lt(Hh),$h=b({},Cr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xu=Lt($h),Yh=b({},xl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fc}),Vh=Lt(Yh),Qh=b({},qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zh=Lt(Qh),Xh=b({},Cr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Kh=Lt(Xh),Jh=b({},qs,{newState:0,oldState:0}),Fh=Lt(Jh),Ih=[9,13,27,32],hc=Aa&&"CompositionEvent"in window,hl=null;Aa&&"documentMode"in document&&(hl=document.documentMode);var Wh=Aa&&"TextEvent"in window&&!hl,fu=Aa&&(!hc||hl&&8<hl&&11>=hl),hu=" ",pu=!1;function gu(e,a){switch(e){case"keyup":return Ih.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var bn=!1;function Ph(e,a){switch(e){case"compositionend":return yu(a);case"keypress":return a.which!==32?null:(pu=!0,hu);case"textInput":return e=a.data,e===hu&&pu?null:e;default:return null}}function ep(e,a){if(bn)return e==="compositionend"||!hc&&gu(e,a)?(e=ou(),_r=dc=as=null,bn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return fu&&a.locale!=="ko"?null:a.data;default:return null}}var tp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bu(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a==="input"?!!tp[e.type]:a==="textarea"}function vu(e,a,s,n){gn?yn?yn.push(n):yn=[n]:gn=n,a=pi(a,"onChange"),0<a.length&&(s=new kr("onChange","change",null,s,n),e.push({event:s,listeners:a}))}var pl=null,gl=null;function ap(e){a0(e,0)}function zr(e){var a=dl(e);if(tu(a))return e}function ju(e,a){if(e==="change")return a}var Nu=!1;if(Aa){var pc;if(Aa){var gc="oninput"in document;if(!gc){var _u=document.createElement("div");_u.setAttribute("oninput","return;"),gc=typeof _u.oninput=="function"}pc=gc}else pc=!1;Nu=pc&&(!document.documentMode||9<document.documentMode)}function Su(){pl&&(pl.detachEvent("onpropertychange",wu),gl=pl=null)}function wu(e){if(e.propertyName==="value"&&zr(gl)){var a=[];vu(a,gl,e,ic(e)),cu(ap,a)}}function sp(e,a,s){e==="focusin"?(Su(),pl=a,gl=s,pl.attachEvent("onpropertychange",wu)):e==="focusout"&&Su()}function np(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zr(gl)}function lp(e,a){if(e==="click")return zr(a)}function rp(e,a){if(e==="input"||e==="change")return zr(a)}function ip(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}var Kt=typeof Object.is=="function"?Object.is:ip;function yl(e,a){if(Kt(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var s=Object.keys(e),n=Object.keys(a);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var r=s[n];if(!Se.call(a,r)||!Kt(e[r],a[r]))return!1}return!0}function ku(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Cu(e,a){var s=ku(e);e=0;for(var n;s;){if(s.nodeType===3){if(n=e+s.textContent.length,e<=a&&n>=a)return{node:s,offset:a-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=ku(s)}}function zu(e,a){return e&&a?e===a?!0:e&&e.nodeType===3?!1:a&&a.nodeType===3?zu(e,a.parentNode):"contains"in e?e.contains(a):e.compareDocumentPosition?!!(e.compareDocumentPosition(a)&16):!1:!1}function Tu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var a=jr(e.document);a instanceof e.HTMLIFrameElement;){try{var s=typeof a.contentWindow.location.href=="string"}catch{s=!1}if(s)e=a.contentWindow;else break;a=jr(e.document)}return a}function yc(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a&&(a==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||a==="textarea"||e.contentEditable==="true")}var cp=Aa&&"documentMode"in document&&11>=document.documentMode,vn=null,bc=null,bl=null,vc=!1;function Eu(e,a,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;vc||vn==null||vn!==jr(n)||(n=vn,"selectionStart"in n&&yc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),bl&&yl(bl,n)||(bl=n,n=pi(bc,"onSelect"),0<n.length&&(a=new kr("onSelect","select",null,a,s),e.push({event:a,listeners:n}),a.target=vn)))}function Us(e,a){var s={};return s[e.toLowerCase()]=a.toLowerCase(),s["Webkit"+e]="webkit"+a,s["Moz"+e]="moz"+a,s}var jn={animationend:Us("Animation","AnimationEnd"),animationiteration:Us("Animation","AnimationIteration"),animationstart:Us("Animation","AnimationStart"),transitionrun:Us("Transition","TransitionRun"),transitionstart:Us("Transition","TransitionStart"),transitioncancel:Us("Transition","TransitionCancel"),transitionend:Us("Transition","TransitionEnd")},jc={},Ou={};Aa&&(Ou=document.createElement("div").style,"AnimationEvent"in window||(delete jn.animationend.animation,delete jn.animationiteration.animation,delete jn.animationstart.animation),"TransitionEvent"in window||delete jn.transitionend.transition);function Bs(e){if(jc[e])return jc[e];if(!jn[e])return e;var a=jn[e],s;for(s in a)if(a.hasOwnProperty(s)&&s in Ou)return jc[e]=a[s];return e}var Ru=Bs("animationend"),Au=Bs("animationiteration"),Du=Bs("animationstart"),op=Bs("transitionrun"),dp=Bs("transitionstart"),up=Bs("transitioncancel"),Mu=Bs("transitionend"),Lu=new Map,Nc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Nc.push("scrollEnd");function va(e,a){Lu.set(e,a),Ls(a,[e])}var Tr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},la=[],Nn=0,_c=0;function Er(){for(var e=Nn,a=_c=Nn=0;a<e;){var s=la[a];la[a++]=null;var n=la[a];la[a++]=null;var r=la[a];la[a++]=null;var c=la[a];if(la[a++]=null,n!==null&&r!==null){var m=n.pending;m===null?r.next=r:(r.next=m.next,m.next=r),n.pending=r}c!==0&&qu(s,r,c)}}function Or(e,a,s,n){la[Nn++]=e,la[Nn++]=a,la[Nn++]=s,la[Nn++]=n,_c|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function Sc(e,a,s,n){return Or(e,a,s,n),Rr(e)}function Hs(e,a){return Or(e,null,null,a),Rr(e)}function qu(e,a,s){e.lanes|=s;var n=e.alternate;n!==null&&(n.lanes|=s);for(var r=!1,c=e.return;c!==null;)c.childLanes|=s,n=c.alternate,n!==null&&(n.childLanes|=s),c.tag===22&&(e=c.stateNode,e===null||e._visibility&1||(r=!0)),e=c,c=c.return;return e.tag===3?(c=e.stateNode,r&&a!==null&&(r=31-Xt(s),e=c.hiddenUpdates,n=e[r],n===null?e[r]=[a]:n.push(a),a.lane=s|536870912),c):null}function Rr(e){if(50<Gl)throw Gl=0,Do=null,Error(d(185));for(var a=e.return;a!==null;)e=a,a=e.return;return e.tag===3?e.stateNode:null}var _n={};function mp(e,a,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(e,a,s,n){return new mp(e,a,s,n)}function wc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Da(e,a){var s=e.alternate;return s===null?(s=Jt(e.tag,a,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=a,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,a=e.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Uu(e,a){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=a,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,a=s.dependencies,e.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),e}function Ar(e,a,s,n,r,c){var m=0;if(n=e,typeof e=="function")wc(e)&&(m=1);else if(typeof e=="string")m=gg(e,s,R.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case X:return e=Jt(31,s,a,r),e.elementType=X,e.lanes=c,e;case A:return Gs(s.children,r,c,a);case E:m=8,r|=24;break;case k:return e=Jt(12,s,a,r|2),e.elementType=k,e.lanes=c,e;case L:return e=Jt(13,s,a,r),e.elementType=L,e.lanes=c,e;case ne:return e=Jt(19,s,a,r),e.elementType=ne,e.lanes=c,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case B:m=10;break e;case w:m=9;break e;case Q:m=11;break e;case J:m=14;break e;case ye:m=16,n=null;break e}m=29,s=Error(d(130,e===null?"null":typeof e,"")),n=null}return a=Jt(m,s,a,r),a.elementType=e,a.type=n,a.lanes=c,a}function Gs(e,a,s,n){return e=Jt(7,e,n,a),e.lanes=s,e}function kc(e,a,s){return e=Jt(6,e,null,a),e.lanes=s,e}function Bu(e){var a=Jt(18,null,null,0);return a.stateNode=e,a}function Cc(e,a,s){return a=Jt(4,e.children!==null?e.children:[],e.key,a),a.lanes=s,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}var Hu=new WeakMap;function ra(e,a){if(typeof e=="object"&&e!==null){var s=Hu.get(e);return s!==void 0?s:(a={value:e,source:a,stack:fe(a)},Hu.set(e,a),a)}return{value:e,source:a,stack:fe(a)}}var Sn=[],wn=0,Dr=null,vl=0,ia=[],ca=0,ss=null,Sa=1,wa="";function Ma(e,a){Sn[wn++]=vl,Sn[wn++]=Dr,Dr=e,vl=a}function Gu(e,a,s){ia[ca++]=Sa,ia[ca++]=wa,ia[ca++]=ss,ss=e;var n=Sa;e=wa;var r=32-Xt(n)-1;n&=~(1<<r),s+=1;var c=32-Xt(a)+r;if(30<c){var m=r-r%5;c=(n&(1<<m)-1).toString(32),n>>=m,r-=m,Sa=1<<32-Xt(a)+r|s<<r|n,wa=c+e}else Sa=1<<c|s<<r|n,wa=e}function zc(e){e.return!==null&&(Ma(e,1),Gu(e,1,0))}function Tc(e){for(;e===Dr;)Dr=Sn[--wn],Sn[wn]=null,vl=Sn[--wn],Sn[wn]=null;for(;e===ss;)ss=ia[--ca],ia[ca]=null,wa=ia[--ca],ia[ca]=null,Sa=ia[--ca],ia[ca]=null}function $u(e,a){ia[ca++]=Sa,ia[ca++]=wa,ia[ca++]=ss,Sa=a.id,wa=a.overflow,ss=e}var Ct=null,Pe=null,qe=!1,ns=null,oa=!1,Ec=Error(d(519));function ls(e){var a=Error(d(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw jl(ra(a,e)),Ec}function Yu(e){var a=e.stateNode,s=e.type,n=e.memoizedProps;switch(a[kt]=e,a[Mt]=n,s){case"dialog":Re("cancel",a),Re("close",a);break;case"iframe":case"object":case"embed":Re("load",a);break;case"video":case"audio":for(s=0;s<Yl.length;s++)Re(Yl[s],a);break;case"source":Re("error",a);break;case"img":case"image":case"link":Re("error",a),Re("load",a);break;case"details":Re("toggle",a);break;case"input":Re("invalid",a),au(a,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":Re("invalid",a);break;case"textarea":Re("invalid",a),nu(a,n.value,n.defaultValue,n.children)}s=n.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||a.textContent===""+s||n.suppressHydrationWarning===!0||r0(a.textContent,s)?(n.popover!=null&&(Re("beforetoggle",a),Re("toggle",a)),n.onScroll!=null&&Re("scroll",a),n.onScrollEnd!=null&&Re("scrollend",a),n.onClick!=null&&(a.onclick=Ra),a=!0):a=!1,a||ls(e,!0)}function Vu(e){for(Ct=e.return;Ct;)switch(Ct.tag){case 5:case 31:case 13:oa=!1;return;case 27:case 3:oa=!0;return;default:Ct=Ct.return}}function kn(e){if(e!==Ct)return!1;if(!qe)return Vu(e),qe=!0,!1;var a=e.tag,s;if((s=a!==3&&a!==27)&&((s=a===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Jo(e.type,e.memoizedProps)),s=!s),s&&Pe&&ls(e),Vu(e),a===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));Pe=h0(e)}else if(a===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));Pe=h0(e)}else a===27?(a=Pe,bs(e.type)?(e=ed,ed=null,Pe=e):Pe=a):Pe=Ct?ua(e.stateNode.nextSibling):null;return!0}function $s(){Pe=Ct=null,qe=!1}function Oc(){var e=ns;return e!==null&&(Ht===null?Ht=e:Ht.push.apply(Ht,e),ns=null),e}function jl(e){ns===null?ns=[e]:ns.push(e)}var Rc=C(null),Ys=null,La=null;function rs(e,a,s){Y(Rc,a._currentValue),a._currentValue=s}function qa(e){e._currentValue=Rc.current,G(Rc)}function Ac(e,a,s){for(;e!==null;){var n=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,n!==null&&(n.childLanes|=a)):n!==null&&(n.childLanes&a)!==a&&(n.childLanes|=a),e===s)break;e=e.return}}function Dc(e,a,s,n){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var c=r.dependencies;if(c!==null){var m=r.child;c=c.firstContext;e:for(;c!==null;){var N=c;c=r;for(var z=0;z<a.length;z++)if(N.context===a[z]){c.lanes|=s,N=c.alternate,N!==null&&(N.lanes|=s),Ac(c.return,s,e),n||(m=null);break e}c=N.next}}else if(r.tag===18){if(m=r.return,m===null)throw Error(d(341));m.lanes|=s,c=m.alternate,c!==null&&(c.lanes|=s),Ac(m,s,e),m=null}else m=r.child;if(m!==null)m.return=r;else for(m=r;m!==null;){if(m===e){m=null;break}if(r=m.sibling,r!==null){r.return=m.return,m=r;break}m=m.return}r=m}}function Cn(e,a,s,n){e=null;for(var r=a,c=!1;r!==null;){if(!c){if((r.flags&524288)!==0)c=!0;else if((r.flags&262144)!==0)break}if(r.tag===10){var m=r.alternate;if(m===null)throw Error(d(387));if(m=m.memoizedProps,m!==null){var N=r.type;Kt(r.pendingProps.value,m.value)||(e!==null?e.push(N):e=[N])}}else if(r===he.current){if(m=r.alternate,m===null)throw Error(d(387));m.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(Kl):e=[Kl])}r=r.return}e!==null&&Dc(a,e,s,n),a.flags|=262144}function Mr(e){for(e=e.firstContext;e!==null;){if(!Kt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Vs(e){Ys=e,La=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function zt(e){return Qu(Ys,e)}function Lr(e,a){return Ys===null&&Vs(e),Qu(e,a)}function Qu(e,a){var s=a._currentValue;if(a={context:a,memoizedValue:s,next:null},La===null){if(e===null)throw Error(d(308));La=a,e.dependencies={lanes:0,firstContext:a},e.flags|=524288}else La=La.next=a;return s}var xp=typeof AbortController<"u"?AbortController:function(){var e=[],a=this.signal={aborted:!1,addEventListener:function(s,n){e.push(n)}};this.abort=function(){a.aborted=!0,e.forEach(function(s){return s()})}},fp=l.unstable_scheduleCallback,hp=l.unstable_NormalPriority,ft={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mc(){return{controller:new xp,data:new Map,refCount:0}}function Nl(e){e.refCount--,e.refCount===0&&fp(hp,function(){e.controller.abort()})}var _l=null,Lc=0,zn=0,Tn=null;function pp(e,a){if(_l===null){var s=_l=[];Lc=0,zn=Ho(),Tn={status:"pending",value:void 0,then:function(n){s.push(n)}}}return Lc++,a.then(Zu,Zu),a}function Zu(){if(--Lc===0&&_l!==null){Tn!==null&&(Tn.status="fulfilled");var e=_l;_l=null,zn=0,Tn=null;for(var a=0;a<e.length;a++)(0,e[a])()}}function gp(e,a){var s=[],n={status:"pending",value:null,reason:null,then:function(r){s.push(r)}};return e.then(function(){n.status="fulfilled",n.value=a;for(var r=0;r<s.length;r++)(0,s[r])(a)},function(r){for(n.status="rejected",n.reason=r,r=0;r<s.length;r++)(0,s[r])(void 0)}),n}var Xu=M.S;M.S=function(e,a){Ex=Ne(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&pp(e,a),Xu!==null&&Xu(e,a)};var Qs=C(null);function qc(){var e=Qs.current;return e!==null?e:We.pooledCache}function qr(e,a){a===null?Y(Qs,Qs.current):Y(Qs,a.pool)}function Ku(){var e=qc();return e===null?null:{parent:ft._currentValue,pool:e}}var En=Error(d(460)),Uc=Error(d(474)),Ur=Error(d(542)),Br={then:function(){}};function Ju(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Fu(e,a,s){switch(s=e[s],s===void 0?e.push(a):s!==a&&(a.then(Ra,Ra),a=s),a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,Wu(e),e;default:if(typeof a.status=="string")a.then(Ra,Ra);else{if(e=We,e!==null&&100<e.shellSuspendCounter)throw Error(d(482));e=a,e.status="pending",e.then(function(n){if(a.status==="pending"){var r=a;r.status="fulfilled",r.value=n}},function(n){if(a.status==="pending"){var r=a;r.status="rejected",r.reason=n}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,Wu(e),e}throw Xs=a,En}}function Zs(e){try{var a=e._init;return a(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(Xs=s,En):s}}var Xs=null;function Iu(){if(Xs===null)throw Error(d(459));var e=Xs;return Xs=null,e}function Wu(e){if(e===En||e===Ur)throw Error(d(483))}var On=null,Sl=0;function Hr(e){var a=Sl;return Sl+=1,On===null&&(On=[]),Fu(On,e,a)}function wl(e,a){a=a.props.ref,e.ref=a!==void 0?a:null}function Gr(e,a){throw a.$$typeof===g?Error(d(525)):(e=Object.prototype.toString.call(a),Error(d(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e)))}function Pu(e){function a(D,O){if(e){var q=D.deletions;q===null?(D.deletions=[O],D.flags|=16):q.push(O)}}function s(D,O){if(!e)return null;for(;O!==null;)a(D,O),O=O.sibling;return null}function n(D){for(var O=new Map;D!==null;)D.key!==null?O.set(D.key,D):O.set(D.index,D),D=D.sibling;return O}function r(D,O){return D=Da(D,O),D.index=0,D.sibling=null,D}function c(D,O,q){return D.index=q,e?(q=D.alternate,q!==null?(q=q.index,q<O?(D.flags|=67108866,O):q):(D.flags|=67108866,O)):(D.flags|=1048576,O)}function m(D){return e&&D.alternate===null&&(D.flags|=67108866),D}function N(D,O,q,ee){return O===null||O.tag!==6?(O=kc(q,D.mode,ee),O.return=D,O):(O=r(O,q),O.return=D,O)}function z(D,O,q,ee){var je=q.type;return je===A?W(D,O,q.props.children,ee,q.key):O!==null&&(O.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===ye&&Zs(je)===O.type)?(O=r(O,q.props),wl(O,q),O.return=D,O):(O=Ar(q.type,q.key,q.props,null,D.mode,ee),wl(O,q),O.return=D,O)}function U(D,O,q,ee){return O===null||O.tag!==4||O.stateNode.containerInfo!==q.containerInfo||O.stateNode.implementation!==q.implementation?(O=Cc(q,D.mode,ee),O.return=D,O):(O=r(O,q.children||[]),O.return=D,O)}function W(D,O,q,ee,je){return O===null||O.tag!==7?(O=Gs(q,D.mode,ee,je),O.return=D,O):(O=r(O,q),O.return=D,O)}function te(D,O,q){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=kc(""+O,D.mode,q),O.return=D,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case T:return q=Ar(O.type,O.key,O.props,null,D.mode,q),wl(q,O),q.return=D,q;case _:return O=Cc(O,D.mode,q),O.return=D,O;case ye:return O=Zs(O),te(D,O,q)}if(ce(O)||K(O))return O=Gs(O,D.mode,q,null),O.return=D,O;if(typeof O.then=="function")return te(D,Hr(O),q);if(O.$$typeof===B)return te(D,Lr(D,O),q);Gr(D,O)}return null}function H(D,O,q,ee){var je=O!==null?O.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return je!==null?null:N(D,O,""+q,ee);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case T:return q.key===je?z(D,O,q,ee):null;case _:return q.key===je?U(D,O,q,ee):null;case ye:return q=Zs(q),H(D,O,q,ee)}if(ce(q)||K(q))return je!==null?null:W(D,O,q,ee,null);if(typeof q.then=="function")return H(D,O,Hr(q),ee);if(q.$$typeof===B)return H(D,O,Lr(D,q),ee);Gr(D,q)}return null}function V(D,O,q,ee,je){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return D=D.get(q)||null,N(O,D,""+ee,je);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case T:return D=D.get(ee.key===null?q:ee.key)||null,z(O,D,ee,je);case _:return D=D.get(ee.key===null?q:ee.key)||null,U(O,D,ee,je);case ye:return ee=Zs(ee),V(D,O,q,ee,je)}if(ce(ee)||K(ee))return D=D.get(q)||null,W(O,D,ee,je,null);if(typeof ee.then=="function")return V(D,O,q,Hr(ee),je);if(ee.$$typeof===B)return V(D,O,q,Lr(O,ee),je);Gr(O,ee)}return null}function pe(D,O,q,ee){for(var je=null,Be=null,ge=O,Te=O=0,Me=null;ge!==null&&Te<q.length;Te++){ge.index>Te?(Me=ge,ge=null):Me=ge.sibling;var He=H(D,ge,q[Te],ee);if(He===null){ge===null&&(ge=Me);break}e&&ge&&He.alternate===null&&a(D,ge),O=c(He,O,Te),Be===null?je=He:Be.sibling=He,Be=He,ge=Me}if(Te===q.length)return s(D,ge),qe&&Ma(D,Te),je;if(ge===null){for(;Te<q.length;Te++)ge=te(D,q[Te],ee),ge!==null&&(O=c(ge,O,Te),Be===null?je=ge:Be.sibling=ge,Be=ge);return qe&&Ma(D,Te),je}for(ge=n(ge);Te<q.length;Te++)Me=V(ge,D,Te,q[Te],ee),Me!==null&&(e&&Me.alternate!==null&&ge.delete(Me.key===null?Te:Me.key),O=c(Me,O,Te),Be===null?je=Me:Be.sibling=Me,Be=Me);return e&&ge.forEach(function(Ss){return a(D,Ss)}),qe&&Ma(D,Te),je}function _e(D,O,q,ee){if(q==null)throw Error(d(151));for(var je=null,Be=null,ge=O,Te=O=0,Me=null,He=q.next();ge!==null&&!He.done;Te++,He=q.next()){ge.index>Te?(Me=ge,ge=null):Me=ge.sibling;var Ss=H(D,ge,He.value,ee);if(Ss===null){ge===null&&(ge=Me);break}e&&ge&&Ss.alternate===null&&a(D,ge),O=c(Ss,O,Te),Be===null?je=Ss:Be.sibling=Ss,Be=Ss,ge=Me}if(He.done)return s(D,ge),qe&&Ma(D,Te),je;if(ge===null){for(;!He.done;Te++,He=q.next())He=te(D,He.value,ee),He!==null&&(O=c(He,O,Te),Be===null?je=He:Be.sibling=He,Be=He);return qe&&Ma(D,Te),je}for(ge=n(ge);!He.done;Te++,He=q.next())He=V(ge,D,Te,He.value,ee),He!==null&&(e&&He.alternate!==null&&ge.delete(He.key===null?Te:He.key),O=c(He,O,Te),Be===null?je=He:Be.sibling=He,Be=He);return e&&ge.forEach(function(zg){return a(D,zg)}),qe&&Ma(D,Te),je}function Fe(D,O,q,ee){if(typeof q=="object"&&q!==null&&q.type===A&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case T:e:{for(var je=q.key;O!==null;){if(O.key===je){if(je=q.type,je===A){if(O.tag===7){s(D,O.sibling),ee=r(O,q.props.children),ee.return=D,D=ee;break e}}else if(O.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===ye&&Zs(je)===O.type){s(D,O.sibling),ee=r(O,q.props),wl(ee,q),ee.return=D,D=ee;break e}s(D,O);break}else a(D,O);O=O.sibling}q.type===A?(ee=Gs(q.props.children,D.mode,ee,q.key),ee.return=D,D=ee):(ee=Ar(q.type,q.key,q.props,null,D.mode,ee),wl(ee,q),ee.return=D,D=ee)}return m(D);case _:e:{for(je=q.key;O!==null;){if(O.key===je)if(O.tag===4&&O.stateNode.containerInfo===q.containerInfo&&O.stateNode.implementation===q.implementation){s(D,O.sibling),ee=r(O,q.children||[]),ee.return=D,D=ee;break e}else{s(D,O);break}else a(D,O);O=O.sibling}ee=Cc(q,D.mode,ee),ee.return=D,D=ee}return m(D);case ye:return q=Zs(q),Fe(D,O,q,ee)}if(ce(q))return pe(D,O,q,ee);if(K(q)){if(je=K(q),typeof je!="function")throw Error(d(150));return q=je.call(q),_e(D,O,q,ee)}if(typeof q.then=="function")return Fe(D,O,Hr(q),ee);if(q.$$typeof===B)return Fe(D,O,Lr(D,q),ee);Gr(D,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,O!==null&&O.tag===6?(s(D,O.sibling),ee=r(O,q),ee.return=D,D=ee):(s(D,O),ee=kc(q,D.mode,ee),ee.return=D,D=ee),m(D)):s(D,O)}return function(D,O,q,ee){try{Sl=0;var je=Fe(D,O,q,ee);return On=null,je}catch(ge){if(ge===En||ge===Ur)throw ge;var Be=Jt(29,ge,null,D.mode);return Be.lanes=ee,Be.return=D,Be}}}var Ks=Pu(!0),em=Pu(!1),is=!1;function Bc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hc(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function cs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function os(e,a,s){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,($e&2)!==0){var r=n.pending;return r===null?a.next=a:(a.next=r.next,r.next=a),n.pending=a,a=Rr(e),qu(e,null,s),a}return Or(e,n,a,s),Rr(e)}function kl(e,a,s){if(a=a.updateQueue,a!==null&&(a=a.shared,(s&4194048)!==0)){var n=a.lanes;n&=e.pendingLanes,s|=n,a.lanes=s,Qd(e,s)}}function Gc(e,a){var s=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var r=null,c=null;if(s=s.firstBaseUpdate,s!==null){do{var m={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};c===null?r=c=m:c=c.next=m,s=s.next}while(s!==null);c===null?r=c=a:c=c.next=a}else r=c=a;s={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:c,shared:n.shared,callbacks:n.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=a:e.next=a,s.lastBaseUpdate=a}var $c=!1;function Cl(){if($c){var e=Tn;if(e!==null)throw e}}function zl(e,a,s,n){$c=!1;var r=e.updateQueue;is=!1;var c=r.firstBaseUpdate,m=r.lastBaseUpdate,N=r.shared.pending;if(N!==null){r.shared.pending=null;var z=N,U=z.next;z.next=null,m===null?c=U:m.next=U,m=z;var W=e.alternate;W!==null&&(W=W.updateQueue,N=W.lastBaseUpdate,N!==m&&(N===null?W.firstBaseUpdate=U:N.next=U,W.lastBaseUpdate=z))}if(c!==null){var te=r.baseState;m=0,W=U=z=null,N=c;do{var H=N.lane&-536870913,V=H!==N.lane;if(V?(De&H)===H:(n&H)===H){H!==0&&H===zn&&($c=!0),W!==null&&(W=W.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var pe=e,_e=N;H=a;var Fe=s;switch(_e.tag){case 1:if(pe=_e.payload,typeof pe=="function"){te=pe.call(Fe,te,H);break e}te=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=_e.payload,H=typeof pe=="function"?pe.call(Fe,te,H):pe,H==null)break e;te=b({},te,H);break e;case 2:is=!0}}H=N.callback,H!==null&&(e.flags|=64,V&&(e.flags|=8192),V=r.callbacks,V===null?r.callbacks=[H]:V.push(H))}else V={lane:H,tag:N.tag,payload:N.payload,callback:N.callback,next:null},W===null?(U=W=V,z=te):W=W.next=V,m|=H;if(N=N.next,N===null){if(N=r.shared.pending,N===null)break;V=N,N=V.next,V.next=null,r.lastBaseUpdate=V,r.shared.pending=null}}while(!0);W===null&&(z=te),r.baseState=z,r.firstBaseUpdate=U,r.lastBaseUpdate=W,c===null&&(r.shared.lanes=0),fs|=m,e.lanes=m,e.memoizedState=te}}function tm(e,a){if(typeof e!="function")throw Error(d(191,e));e.call(a)}function am(e,a){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)tm(s[e],a)}var Rn=C(null),$r=C(0);function sm(e,a){e=Za,Y($r,e),Y(Rn,a),Za=e|a.baseLanes}function Yc(){Y($r,Za),Y(Rn,Rn.current)}function Vc(){Za=$r.current,G(Rn),G($r)}var Ft=C(null),da=null;function ds(e){var a=e.alternate;Y(dt,dt.current&1),Y(Ft,e),da===null&&(a===null||Rn.current!==null||a.memoizedState!==null)&&(da=e)}function Qc(e){Y(dt,dt.current),Y(Ft,e),da===null&&(da=e)}function nm(e){e.tag===22?(Y(dt,dt.current),Y(Ft,e),da===null&&(da=e)):us()}function us(){Y(dt,dt.current),Y(Ft,Ft.current)}function It(e){G(Ft),da===e&&(da=null),G(dt)}var dt=C(0);function Yr(e){for(var a=e;a!==null;){if(a.tag===13){var s=a.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||Wo(s)||Po(s)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ua=0,ze=null,Ke=null,ht=null,Vr=!1,An=!1,Js=!1,Qr=0,Tl=0,Dn=null,yp=0;function it(){throw Error(d(321))}function Zc(e,a){if(a===null)return!1;for(var s=0;s<a.length&&s<e.length;s++)if(!Kt(e[s],a[s]))return!1;return!0}function Xc(e,a,s,n,r,c){return Ua=c,ze=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,M.H=e===null||e.memoizedState===null?Gm:co,Js=!1,c=s(n,r),Js=!1,An&&(c=rm(a,s,n,r)),lm(e),c}function lm(e){M.H=Rl;var a=Ke!==null&&Ke.next!==null;if(Ua=0,ht=Ke=ze=null,Vr=!1,Tl=0,Dn=null,a)throw Error(d(300));e===null||pt||(e=e.dependencies,e!==null&&Mr(e)&&(pt=!0))}function rm(e,a,s,n){ze=e;var r=0;do{if(An&&(Dn=null),Tl=0,An=!1,25<=r)throw Error(d(301));if(r+=1,ht=Ke=null,e.updateQueue!=null){var c=e.updateQueue;c.lastEffect=null,c.events=null,c.stores=null,c.memoCache!=null&&(c.memoCache.index=0)}M.H=$m,c=a(s,n)}while(An);return c}function bp(){var e=M.H,a=e.useState()[0];return a=typeof a.then=="function"?El(a):a,e=e.useState()[0],(Ke!==null?Ke.memoizedState:null)!==e&&(ze.flags|=1024),a}function Kc(){var e=Qr!==0;return Qr=0,e}function Jc(e,a,s){a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~s}function Fc(e){if(Vr){for(e=e.memoizedState;e!==null;){var a=e.queue;a!==null&&(a.pending=null),e=e.next}Vr=!1}Ua=0,ht=Ke=ze=null,An=!1,Tl=Qr=0,Dn=null}function Dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?ze.memoizedState=ht=e:ht=ht.next=e,ht}function ut(){if(Ke===null){var e=ze.alternate;e=e!==null?e.memoizedState:null}else e=Ke.next;var a=ht===null?ze.memoizedState:ht.next;if(a!==null)ht=a,Ke=e;else{if(e===null)throw ze.alternate===null?Error(d(467)):Error(d(310));Ke=e,e={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},ht===null?ze.memoizedState=ht=e:ht=ht.next=e}return ht}function Zr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function El(e){var a=Tl;return Tl+=1,Dn===null&&(Dn=[]),e=Fu(Dn,e,a),a=ze,(ht===null?a.memoizedState:ht.next)===null&&(a=a.alternate,M.H=a===null||a.memoizedState===null?Gm:co),e}function Xr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return El(e);if(e.$$typeof===B)return zt(e)}throw Error(d(438,String(e)))}function Ic(e){var a=null,s=ze.updateQueue;if(s!==null&&(a=s.memoCache),a==null){var n=ze.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(a={data:n.data.map(function(r){return r.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),s===null&&(s=Zr(),ze.updateQueue=s),s.memoCache=a,s=a.data[a.index],s===void 0)for(s=a.data[a.index]=Array(e),n=0;n<e;n++)s[n]=ae;return a.index++,s}function Ba(e,a){return typeof a=="function"?a(e):a}function Kr(e){var a=ut();return Wc(a,Ke,e)}function Wc(e,a,s){var n=e.queue;if(n===null)throw Error(d(311));n.lastRenderedReducer=s;var r=e.baseQueue,c=n.pending;if(c!==null){if(r!==null){var m=r.next;r.next=c.next,c.next=m}a.baseQueue=r=c,n.pending=null}if(c=e.baseState,r===null)e.memoizedState=c;else{a=r.next;var N=m=null,z=null,U=a,W=!1;do{var te=U.lane&-536870913;if(te!==U.lane?(De&te)===te:(Ua&te)===te){var H=U.revertLane;if(H===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),te===zn&&(W=!0);else if((Ua&H)===H){U=U.next,H===zn&&(W=!0);continue}else te={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},z===null?(N=z=te,m=c):z=z.next=te,ze.lanes|=H,fs|=H;te=U.action,Js&&s(c,te),c=U.hasEagerState?U.eagerState:s(c,te)}else H={lane:te,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},z===null?(N=z=H,m=c):z=z.next=H,ze.lanes|=te,fs|=te;U=U.next}while(U!==null&&U!==a);if(z===null?m=c:z.next=N,!Kt(c,e.memoizedState)&&(pt=!0,W&&(s=Tn,s!==null)))throw s;e.memoizedState=c,e.baseState=m,e.baseQueue=z,n.lastRenderedState=c}return r===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function Pc(e){var a=ut(),s=a.queue;if(s===null)throw Error(d(311));s.lastRenderedReducer=e;var n=s.dispatch,r=s.pending,c=a.memoizedState;if(r!==null){s.pending=null;var m=r=r.next;do c=e(c,m.action),m=m.next;while(m!==r);Kt(c,a.memoizedState)||(pt=!0),a.memoizedState=c,a.baseQueue===null&&(a.baseState=c),s.lastRenderedState=c}return[c,n]}function im(e,a,s){var n=ze,r=ut(),c=qe;if(c){if(s===void 0)throw Error(d(407));s=s()}else s=a();var m=!Kt((Ke||r).memoizedState,s);if(m&&(r.memoizedState=s,pt=!0),r=r.queue,ao(dm.bind(null,n,r,e),[e]),r.getSnapshot!==a||m||ht!==null&&ht.memoizedState.tag&1){if(n.flags|=2048,Mn(9,{destroy:void 0},om.bind(null,n,r,s,a),null),We===null)throw Error(d(349));c||(Ua&127)!==0||cm(n,a,s)}return s}function cm(e,a,s){e.flags|=16384,e={getSnapshot:a,value:s},a=ze.updateQueue,a===null?(a=Zr(),ze.updateQueue=a,a.stores=[e]):(s=a.stores,s===null?a.stores=[e]:s.push(e))}function om(e,a,s,n){a.value=s,a.getSnapshot=n,um(a)&&mm(e)}function dm(e,a,s){return s(function(){um(a)&&mm(e)})}function um(e){var a=e.getSnapshot;e=e.value;try{var s=a();return!Kt(e,s)}catch{return!0}}function mm(e){var a=Hs(e,2);a!==null&&Gt(a,e,2)}function eo(e){var a=Dt();if(typeof e=="function"){var s=e;if(e=s(),Js){es(!0);try{s()}finally{es(!1)}}}return a.memoizedState=a.baseState=e,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ba,lastRenderedState:e},a}function xm(e,a,s,n){return e.baseState=s,Wc(e,Ke,typeof n=="function"?n:Ba)}function vp(e,a,s,n,r){if(Ir(e))throw Error(d(485));if(e=a.action,e!==null){var c={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){c.listeners.push(m)}};M.T!==null?s(!0):c.isTransition=!1,n(c),s=a.pending,s===null?(c.next=a.pending=c,fm(a,c)):(c.next=s.next,a.pending=s.next=c)}}function fm(e,a){var s=a.action,n=a.payload,r=e.state;if(a.isTransition){var c=M.T,m={};M.T=m;try{var N=s(r,n),z=M.S;z!==null&&z(m,N),hm(e,a,N)}catch(U){to(e,a,U)}finally{c!==null&&m.types!==null&&(c.types=m.types),M.T=c}}else try{c=s(r,n),hm(e,a,c)}catch(U){to(e,a,U)}}function hm(e,a,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(n){pm(e,a,n)},function(n){return to(e,a,n)}):pm(e,a,s)}function pm(e,a,s){a.status="fulfilled",a.value=s,gm(a),e.state=s,a=e.pending,a!==null&&(s=a.next,s===a?e.pending=null:(s=s.next,a.next=s,fm(e,s)))}function to(e,a,s){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do a.status="rejected",a.reason=s,gm(a),a=a.next;while(a!==n)}e.action=null}function gm(e){e=e.listeners;for(var a=0;a<e.length;a++)(0,e[a])()}function ym(e,a){return a}function bm(e,a){if(qe){var s=We.formState;if(s!==null){e:{var n=ze;if(qe){if(Pe){t:{for(var r=Pe,c=oa;r.nodeType!==8;){if(!c){r=null;break t}if(r=ua(r.nextSibling),r===null){r=null;break t}}c=r.data,r=c==="F!"||c==="F"?r:null}if(r){Pe=ua(r.nextSibling),n=r.data==="F!";break e}}ls(n)}n=!1}n&&(a=s[0])}}return s=Dt(),s.memoizedState=s.baseState=a,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ym,lastRenderedState:a},s.queue=n,s=Um.bind(null,ze,n),n.dispatch=s,n=eo(!1),c=io.bind(null,ze,!1,n.queue),n=Dt(),r={state:a,dispatch:null,action:e,pending:null},n.queue=r,s=vp.bind(null,ze,r,c,s),r.dispatch=s,n.memoizedState=e,[a,s,!1]}function vm(e){var a=ut();return jm(a,Ke,e)}function jm(e,a,s){if(a=Wc(e,a,ym)[0],e=Kr(Ba)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var n=El(a)}catch(m){throw m===En?Ur:m}else n=a;a=ut();var r=a.queue,c=r.dispatch;return s!==a.memoizedState&&(ze.flags|=2048,Mn(9,{destroy:void 0},jp.bind(null,r,s),null)),[n,c,e]}function jp(e,a){e.action=a}function Nm(e){var a=ut(),s=Ke;if(s!==null)return jm(a,s,e);ut(),a=a.memoizedState,s=ut();var n=s.queue.dispatch;return s.memoizedState=e,[a,n,!1]}function Mn(e,a,s,n){return e={tag:e,create:s,deps:n,inst:a,next:null},a=ze.updateQueue,a===null&&(a=Zr(),ze.updateQueue=a),s=a.lastEffect,s===null?a.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,a.lastEffect=e),e}function _m(){return ut().memoizedState}function Jr(e,a,s,n){var r=Dt();ze.flags|=e,r.memoizedState=Mn(1|a,{destroy:void 0},s,n===void 0?null:n)}function Fr(e,a,s,n){var r=ut();n=n===void 0?null:n;var c=r.memoizedState.inst;Ke!==null&&n!==null&&Zc(n,Ke.memoizedState.deps)?r.memoizedState=Mn(a,c,s,n):(ze.flags|=e,r.memoizedState=Mn(1|a,c,s,n))}function Sm(e,a){Jr(8390656,8,e,a)}function ao(e,a){Fr(2048,8,e,a)}function Np(e){ze.flags|=4;var a=ze.updateQueue;if(a===null)a=Zr(),ze.updateQueue=a,a.events=[e];else{var s=a.events;s===null?a.events=[e]:s.push(e)}}function wm(e){var a=ut().memoizedState;return Np({ref:a,nextImpl:e}),function(){if(($e&2)!==0)throw Error(d(440));return a.impl.apply(void 0,arguments)}}function km(e,a){return Fr(4,2,e,a)}function Cm(e,a){return Fr(4,4,e,a)}function zm(e,a){if(typeof a=="function"){e=e();var s=a(e);return function(){typeof s=="function"?s():a(null)}}if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function Tm(e,a,s){s=s!=null?s.concat([e]):null,Fr(4,4,zm.bind(null,a,e),s)}function so(){}function Em(e,a){var s=ut();a=a===void 0?null:a;var n=s.memoizedState;return a!==null&&Zc(a,n[1])?n[0]:(s.memoizedState=[e,a],e)}function Om(e,a){var s=ut();a=a===void 0?null:a;var n=s.memoizedState;if(a!==null&&Zc(a,n[1]))return n[0];if(n=e(),Js){es(!0);try{e()}finally{es(!1)}}return s.memoizedState=[n,a],n}function no(e,a,s){return s===void 0||(Ua&1073741824)!==0&&(De&261930)===0?e.memoizedState=a:(e.memoizedState=s,e=Rx(),ze.lanes|=e,fs|=e,s)}function Rm(e,a,s,n){return Kt(s,a)?s:Rn.current!==null?(e=no(e,s,n),Kt(e,a)||(pt=!0),e):(Ua&42)===0||(Ua&1073741824)!==0&&(De&261930)===0?(pt=!0,e.memoizedState=s):(e=Rx(),ze.lanes|=e,fs|=e,a)}function Am(e,a,s,n,r){var c=P.p;P.p=c!==0&&8>c?c:8;var m=M.T,N={};M.T=N,io(e,!1,a,s);try{var z=r(),U=M.S;if(U!==null&&U(N,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var W=gp(z,n);Ol(e,a,W,ea(e))}else Ol(e,a,n,ea(e))}catch(te){Ol(e,a,{then:function(){},status:"rejected",reason:te},ea())}finally{P.p=c,m!==null&&N.types!==null&&(m.types=N.types),M.T=m}}function _p(){}function lo(e,a,s,n){if(e.tag!==5)throw Error(d(476));var r=Dm(e).queue;Am(e,r,a,ie,s===null?_p:function(){return Mm(e),s(n)})}function Dm(e){var a=e.memoizedState;if(a!==null)return a;a={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ba,lastRenderedState:ie},next:null};var s={};return a.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ba,lastRenderedState:s},next:null},e.memoizedState=a,e=e.alternate,e!==null&&(e.memoizedState=a),a}function Mm(e){var a=Dm(e);a.next===null&&(a=e.alternate.memoizedState),Ol(e,a.next.queue,{},ea())}function ro(){return zt(Kl)}function Lm(){return ut().memoizedState}function qm(){return ut().memoizedState}function Sp(e){for(var a=e.return;a!==null;){switch(a.tag){case 24:case 3:var s=ea();e=cs(s);var n=os(a,e,s);n!==null&&(Gt(n,a,s),kl(n,a,s)),a={cache:Mc()},e.payload=a;return}a=a.return}}function wp(e,a,s){var n=ea();s={lane:n,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Ir(e)?Bm(a,s):(s=Sc(e,a,s,n),s!==null&&(Gt(s,e,n),Hm(s,a,n)))}function Um(e,a,s){var n=ea();Ol(e,a,s,n)}function Ol(e,a,s,n){var r={lane:n,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Ir(e))Bm(a,r);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=a.lastRenderedReducer,c!==null))try{var m=a.lastRenderedState,N=c(m,s);if(r.hasEagerState=!0,r.eagerState=N,Kt(N,m))return Or(e,a,r,0),We===null&&Er(),!1}catch{}if(s=Sc(e,a,r,n),s!==null)return Gt(s,e,n),Hm(s,a,n),!0}return!1}function io(e,a,s,n){if(n={lane:2,revertLane:Ho(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ir(e)){if(a)throw Error(d(479))}else a=Sc(e,s,n,2),a!==null&&Gt(a,e,2)}function Ir(e){var a=e.alternate;return e===ze||a!==null&&a===ze}function Bm(e,a){An=Vr=!0;var s=e.pending;s===null?a.next=a:(a.next=s.next,s.next=a),e.pending=a}function Hm(e,a,s){if((s&4194048)!==0){var n=a.lanes;n&=e.pendingLanes,s|=n,a.lanes=s,Qd(e,s)}}var Rl={readContext:zt,use:Xr,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useLayoutEffect:it,useInsertionEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useSyncExternalStore:it,useId:it,useHostTransitionStatus:it,useFormState:it,useActionState:it,useOptimistic:it,useMemoCache:it,useCacheRefresh:it};Rl.useEffectEvent=it;var Gm={readContext:zt,use:Xr,useCallback:function(e,a){return Dt().memoizedState=[e,a===void 0?null:a],e},useContext:zt,useEffect:Sm,useImperativeHandle:function(e,a,s){s=s!=null?s.concat([e]):null,Jr(4194308,4,zm.bind(null,a,e),s)},useLayoutEffect:function(e,a){return Jr(4194308,4,e,a)},useInsertionEffect:function(e,a){Jr(4,2,e,a)},useMemo:function(e,a){var s=Dt();a=a===void 0?null:a;var n=e();if(Js){es(!0);try{e()}finally{es(!1)}}return s.memoizedState=[n,a],n},useReducer:function(e,a,s){var n=Dt();if(s!==void 0){var r=s(a);if(Js){es(!0);try{s(a)}finally{es(!1)}}}else r=a;return n.memoizedState=n.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},n.queue=e,e=e.dispatch=wp.bind(null,ze,e),[n.memoizedState,e]},useRef:function(e){var a=Dt();return e={current:e},a.memoizedState=e},useState:function(e){e=eo(e);var a=e.queue,s=Um.bind(null,ze,a);return a.dispatch=s,[e.memoizedState,s]},useDebugValue:so,useDeferredValue:function(e,a){var s=Dt();return no(s,e,a)},useTransition:function(){var e=eo(!1);return e=Am.bind(null,ze,e.queue,!0,!1),Dt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,a,s){var n=ze,r=Dt();if(qe){if(s===void 0)throw Error(d(407));s=s()}else{if(s=a(),We===null)throw Error(d(349));(De&127)!==0||cm(n,a,s)}r.memoizedState=s;var c={value:s,getSnapshot:a};return r.queue=c,Sm(dm.bind(null,n,c,e),[e]),n.flags|=2048,Mn(9,{destroy:void 0},om.bind(null,n,c,s,a),null),s},useId:function(){var e=Dt(),a=We.identifierPrefix;if(qe){var s=wa,n=Sa;s=(n&~(1<<32-Xt(n)-1)).toString(32)+s,a="_"+a+"R_"+s,s=Qr++,0<s&&(a+="H"+s.toString(32)),a+="_"}else s=yp++,a="_"+a+"r_"+s.toString(32)+"_";return e.memoizedState=a},useHostTransitionStatus:ro,useFormState:bm,useActionState:bm,useOptimistic:function(e){var a=Dt();a.memoizedState=a.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=s,a=io.bind(null,ze,!0,s),s.dispatch=a,[e,a]},useMemoCache:Ic,useCacheRefresh:function(){return Dt().memoizedState=Sp.bind(null,ze)},useEffectEvent:function(e){var a=Dt(),s={impl:e};return a.memoizedState=s,function(){if(($e&2)!==0)throw Error(d(440));return s.impl.apply(void 0,arguments)}}},co={readContext:zt,use:Xr,useCallback:Em,useContext:zt,useEffect:ao,useImperativeHandle:Tm,useInsertionEffect:km,useLayoutEffect:Cm,useMemo:Om,useReducer:Kr,useRef:_m,useState:function(){return Kr(Ba)},useDebugValue:so,useDeferredValue:function(e,a){var s=ut();return Rm(s,Ke.memoizedState,e,a)},useTransition:function(){var e=Kr(Ba)[0],a=ut().memoizedState;return[typeof e=="boolean"?e:El(e),a]},useSyncExternalStore:im,useId:Lm,useHostTransitionStatus:ro,useFormState:vm,useActionState:vm,useOptimistic:function(e,a){var s=ut();return xm(s,Ke,e,a)},useMemoCache:Ic,useCacheRefresh:qm};co.useEffectEvent=wm;var $m={readContext:zt,use:Xr,useCallback:Em,useContext:zt,useEffect:ao,useImperativeHandle:Tm,useInsertionEffect:km,useLayoutEffect:Cm,useMemo:Om,useReducer:Pc,useRef:_m,useState:function(){return Pc(Ba)},useDebugValue:so,useDeferredValue:function(e,a){var s=ut();return Ke===null?no(s,e,a):Rm(s,Ke.memoizedState,e,a)},useTransition:function(){var e=Pc(Ba)[0],a=ut().memoizedState;return[typeof e=="boolean"?e:El(e),a]},useSyncExternalStore:im,useId:Lm,useHostTransitionStatus:ro,useFormState:Nm,useActionState:Nm,useOptimistic:function(e,a){var s=ut();return Ke!==null?xm(s,Ke,e,a):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:Ic,useCacheRefresh:qm};$m.useEffectEvent=wm;function oo(e,a,s,n){a=e.memoizedState,s=s(n,a),s=s==null?a:b({},a,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var uo={enqueueSetState:function(e,a,s){e=e._reactInternals;var n=ea(),r=cs(n);r.payload=a,s!=null&&(r.callback=s),a=os(e,r,n),a!==null&&(Gt(a,e,n),kl(a,e,n))},enqueueReplaceState:function(e,a,s){e=e._reactInternals;var n=ea(),r=cs(n);r.tag=1,r.payload=a,s!=null&&(r.callback=s),a=os(e,r,n),a!==null&&(Gt(a,e,n),kl(a,e,n))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var s=ea(),n=cs(s);n.tag=2,a!=null&&(n.callback=a),a=os(e,n,s),a!==null&&(Gt(a,e,s),kl(a,e,s))}};function Ym(e,a,s,n,r,c,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,c,m):a.prototype&&a.prototype.isPureReactComponent?!yl(s,n)||!yl(r,c):!0}function Vm(e,a,s,n){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(s,n),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(s,n),a.state!==e&&uo.enqueueReplaceState(a,a.state,null)}function Fs(e,a){var s=a;if("ref"in a){s={};for(var n in a)n!=="ref"&&(s[n]=a[n])}if(e=e.defaultProps){s===a&&(s=b({},s));for(var r in e)s[r]===void 0&&(s[r]=e[r])}return s}function Qm(e){Tr(e)}function Zm(e){console.error(e)}function Xm(e){Tr(e)}function Wr(e,a){try{var s=e.onUncaughtError;s(a.value,{componentStack:a.stack})}catch(n){setTimeout(function(){throw n})}}function Km(e,a,s){try{var n=e.onCaughtError;n(s.value,{componentStack:s.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function mo(e,a,s){return s=cs(s),s.tag=3,s.payload={element:null},s.callback=function(){Wr(e,a)},s}function Jm(e){return e=cs(e),e.tag=3,e}function Fm(e,a,s,n){var r=s.type.getDerivedStateFromError;if(typeof r=="function"){var c=n.value;e.payload=function(){return r(c)},e.callback=function(){Km(a,s,n)}}var m=s.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(e.callback=function(){Km(a,s,n),typeof r!="function"&&(hs===null?hs=new Set([this]):hs.add(this));var N=n.stack;this.componentDidCatch(n.value,{componentStack:N!==null?N:""})})}function kp(e,a,s,n,r){if(s.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(a=s.alternate,a!==null&&Cn(a,s,r,!0),s=Ft.current,s!==null){switch(s.tag){case 31:case 13:return da===null?di():s.alternate===null&&ct===0&&(ct=3),s.flags&=-257,s.flags|=65536,s.lanes=r,n===Br?s.flags|=16384:(a=s.updateQueue,a===null?s.updateQueue=new Set([n]):a.add(n),qo(e,n,r)),!1;case 22:return s.flags|=65536,n===Br?s.flags|=16384:(a=s.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([n])},s.updateQueue=a):(s=a.retryQueue,s===null?a.retryQueue=new Set([n]):s.add(n)),qo(e,n,r)),!1}throw Error(d(435,s.tag))}return qo(e,n,r),di(),!1}if(qe)return a=Ft.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=r,n!==Ec&&(e=Error(d(422),{cause:n}),jl(ra(e,s)))):(n!==Ec&&(a=Error(d(423),{cause:n}),jl(ra(a,s))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,n=ra(n,s),r=mo(e.stateNode,n,r),Gc(e,r),ct!==4&&(ct=2)),!1;var c=Error(d(520),{cause:n});if(c=ra(c,s),Hl===null?Hl=[c]:Hl.push(c),ct!==4&&(ct=2),a===null)return!0;n=ra(n,s),s=a;do{switch(s.tag){case 3:return s.flags|=65536,e=r&-r,s.lanes|=e,e=mo(s.stateNode,n,e),Gc(s,e),!1;case 1:if(a=s.type,c=s.stateNode,(s.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(hs===null||!hs.has(c))))return s.flags|=65536,r&=-r,s.lanes|=r,r=Jm(r),Fm(r,e,s,n),Gc(s,r),!1}s=s.return}while(s!==null);return!1}var xo=Error(d(461)),pt=!1;function Tt(e,a,s,n){a.child=e===null?em(a,null,s,n):Ks(a,e.child,s,n)}function Im(e,a,s,n,r){s=s.render;var c=a.ref;if("ref"in n){var m={};for(var N in n)N!=="ref"&&(m[N]=n[N])}else m=n;return Vs(a),n=Xc(e,a,s,m,c,r),N=Kc(),e!==null&&!pt?(Jc(e,a,r),Ha(e,a,r)):(qe&&N&&zc(a),a.flags|=1,Tt(e,a,n,r),a.child)}function Wm(e,a,s,n,r){if(e===null){var c=s.type;return typeof c=="function"&&!wc(c)&&c.defaultProps===void 0&&s.compare===null?(a.tag=15,a.type=c,Pm(e,a,c,n,r)):(e=Ar(s.type,null,n,a,a.mode,r),e.ref=a.ref,e.return=a,a.child=e)}if(c=e.child,!jo(e,r)){var m=c.memoizedProps;if(s=s.compare,s=s!==null?s:yl,s(m,n)&&e.ref===a.ref)return Ha(e,a,r)}return a.flags|=1,e=Da(c,n),e.ref=a.ref,e.return=a,a.child=e}function Pm(e,a,s,n,r){if(e!==null){var c=e.memoizedProps;if(yl(c,n)&&e.ref===a.ref)if(pt=!1,a.pendingProps=n=c,jo(e,r))(e.flags&131072)!==0&&(pt=!0);else return a.lanes=e.lanes,Ha(e,a,r)}return fo(e,a,s,n,r)}function ex(e,a,s,n){var r=n.children,c=e!==null?e.memoizedState:null;if(e===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if((a.flags&128)!==0){if(c=c!==null?c.baseLanes|s:s,e!==null){for(n=a.child=e.child,r=0;n!==null;)r=r|n.lanes|n.childLanes,n=n.sibling;n=r&~c}else n=0,a.child=null;return tx(e,a,c,s,n)}if((s&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},e!==null&&qr(a,c!==null?c.cachePool:null),c!==null?sm(a,c):Yc(),nm(a);else return n=a.lanes=536870912,tx(e,a,c!==null?c.baseLanes|s:s,s,n)}else c!==null?(qr(a,c.cachePool),sm(a,c),us(),a.memoizedState=null):(e!==null&&qr(a,null),Yc(),us());return Tt(e,a,r,s),a.child}function Al(e,a){return e!==null&&e.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function tx(e,a,s,n,r){var c=qc();return c=c===null?null:{parent:ft._currentValue,pool:c},a.memoizedState={baseLanes:s,cachePool:c},e!==null&&qr(a,null),Yc(),nm(a),e!==null&&Cn(e,a,n,!0),a.childLanes=r,null}function Pr(e,a){return a=ti({mode:a.mode,children:a.children},e.mode),a.ref=e.ref,e.child=a,a.return=e,a}function ax(e,a,s){return Ks(a,e.child,null,s),e=Pr(a,a.pendingProps),e.flags|=2,It(a),a.memoizedState=null,e}function Cp(e,a,s){var n=a.pendingProps,r=(a.flags&128)!==0;if(a.flags&=-129,e===null){if(qe){if(n.mode==="hidden")return e=Pr(a,n),a.lanes=536870912,Al(null,e);if(Qc(a),(e=Pe)?(e=f0(e,oa),e=e!==null&&e.data==="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:ss!==null?{id:Sa,overflow:wa}:null,retryLane:536870912,hydrationErrors:null},s=Bu(e),s.return=a,a.child=s,Ct=a,Pe=null)):e=null,e===null)throw ls(a);return a.lanes=536870912,null}return Pr(a,n)}var c=e.memoizedState;if(c!==null){var m=c.dehydrated;if(Qc(a),r)if(a.flags&256)a.flags&=-257,a=ax(e,a,s);else if(a.memoizedState!==null)a.child=e.child,a.flags|=128,a=null;else throw Error(d(558));else if(pt||Cn(e,a,s,!1),r=(s&e.childLanes)!==0,pt||r){if(n=We,n!==null&&(m=Zd(n,s),m!==0&&m!==c.retryLane))throw c.retryLane=m,Hs(e,m),Gt(n,e,m),xo;di(),a=ax(e,a,s)}else e=c.treeContext,Pe=ua(m.nextSibling),Ct=a,qe=!0,ns=null,oa=!1,e!==null&&$u(a,e),a=Pr(a,n),a.flags|=4096;return a}return e=Da(e.child,{mode:n.mode,children:n.children}),e.ref=a.ref,a.child=e,e.return=a,e}function ei(e,a){var s=a.ref;if(s===null)e!==null&&e.ref!==null&&(a.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(d(284));(e===null||e.ref!==s)&&(a.flags|=4194816)}}function fo(e,a,s,n,r){return Vs(a),s=Xc(e,a,s,n,void 0,r),n=Kc(),e!==null&&!pt?(Jc(e,a,r),Ha(e,a,r)):(qe&&n&&zc(a),a.flags|=1,Tt(e,a,s,r),a.child)}function sx(e,a,s,n,r,c){return Vs(a),a.updateQueue=null,s=rm(a,n,s,r),lm(e),n=Kc(),e!==null&&!pt?(Jc(e,a,c),Ha(e,a,c)):(qe&&n&&zc(a),a.flags|=1,Tt(e,a,s,c),a.child)}function nx(e,a,s,n,r){if(Vs(a),a.stateNode===null){var c=_n,m=s.contextType;typeof m=="object"&&m!==null&&(c=zt(m)),c=new s(n,c),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=uo,a.stateNode=c,c._reactInternals=a,c=a.stateNode,c.props=n,c.state=a.memoizedState,c.refs={},Bc(a),m=s.contextType,c.context=typeof m=="object"&&m!==null?zt(m):_n,c.state=a.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(oo(a,s,m,n),c.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(m=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),m!==c.state&&uo.enqueueReplaceState(c,c.state,null),zl(a,n,c,r),Cl(),c.state=a.memoizedState),typeof c.componentDidMount=="function"&&(a.flags|=4194308),n=!0}else if(e===null){c=a.stateNode;var N=a.memoizedProps,z=Fs(s,N);c.props=z;var U=c.context,W=s.contextType;m=_n,typeof W=="object"&&W!==null&&(m=zt(W));var te=s.getDerivedStateFromProps;W=typeof te=="function"||typeof c.getSnapshotBeforeUpdate=="function",N=a.pendingProps!==N,W||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(N||U!==m)&&Vm(a,c,n,m),is=!1;var H=a.memoizedState;c.state=H,zl(a,n,c,r),Cl(),U=a.memoizedState,N||H!==U||is?(typeof te=="function"&&(oo(a,s,te,n),U=a.memoizedState),(z=is||Ym(a,s,z,n,H,U,m))?(W||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(a.flags|=4194308)):(typeof c.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=n,a.memoizedState=U),c.props=n,c.state=U,c.context=m,n=z):(typeof c.componentDidMount=="function"&&(a.flags|=4194308),n=!1)}else{c=a.stateNode,Hc(e,a),m=a.memoizedProps,W=Fs(s,m),c.props=W,te=a.pendingProps,H=c.context,U=s.contextType,z=_n,typeof U=="object"&&U!==null&&(z=zt(U)),N=s.getDerivedStateFromProps,(U=typeof N=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(m!==te||H!==z)&&Vm(a,c,n,z),is=!1,H=a.memoizedState,c.state=H,zl(a,n,c,r),Cl();var V=a.memoizedState;m!==te||H!==V||is||e!==null&&e.dependencies!==null&&Mr(e.dependencies)?(typeof N=="function"&&(oo(a,s,N,n),V=a.memoizedState),(W=is||Ym(a,s,W,n,H,V,z)||e!==null&&e.dependencies!==null&&Mr(e.dependencies))?(U||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(n,V,z),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(n,V,z)),typeof c.componentDidUpdate=="function"&&(a.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof c.componentDidUpdate!="function"||m===e.memoizedProps&&H===e.memoizedState||(a.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&H===e.memoizedState||(a.flags|=1024),a.memoizedProps=n,a.memoizedState=V),c.props=n,c.state=V,c.context=z,n=W):(typeof c.componentDidUpdate!="function"||m===e.memoizedProps&&H===e.memoizedState||(a.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&H===e.memoizedState||(a.flags|=1024),n=!1)}return c=n,ei(e,a),n=(a.flags&128)!==0,c||n?(c=a.stateNode,s=n&&typeof s.getDerivedStateFromError!="function"?null:c.render(),a.flags|=1,e!==null&&n?(a.child=Ks(a,e.child,null,r),a.child=Ks(a,null,s,r)):Tt(e,a,s,r),a.memoizedState=c.state,e=a.child):e=Ha(e,a,r),e}function lx(e,a,s,n){return $s(),a.flags|=256,Tt(e,a,s,n),a.child}var ho={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function po(e){return{baseLanes:e,cachePool:Ku()}}function go(e,a,s){return e=e!==null?e.childLanes&~s:0,a&&(e|=Pt),e}function rx(e,a,s){var n=a.pendingProps,r=!1,c=(a.flags&128)!==0,m;if((m=c)||(m=e!==null&&e.memoizedState===null?!1:(dt.current&2)!==0),m&&(r=!0,a.flags&=-129),m=(a.flags&32)!==0,a.flags&=-33,e===null){if(qe){if(r?ds(a):us(),(e=Pe)?(e=f0(e,oa),e=e!==null&&e.data!=="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:ss!==null?{id:Sa,overflow:wa}:null,retryLane:536870912,hydrationErrors:null},s=Bu(e),s.return=a,a.child=s,Ct=a,Pe=null)):e=null,e===null)throw ls(a);return Po(e)?a.lanes=32:a.lanes=536870912,null}var N=n.children;return n=n.fallback,r?(us(),r=a.mode,N=ti({mode:"hidden",children:N},r),n=Gs(n,r,s,null),N.return=a,n.return=a,N.sibling=n,a.child=N,n=a.child,n.memoizedState=po(s),n.childLanes=go(e,m,s),a.memoizedState=ho,Al(null,n)):(ds(a),yo(a,N))}var z=e.memoizedState;if(z!==null&&(N=z.dehydrated,N!==null)){if(c)a.flags&256?(ds(a),a.flags&=-257,a=bo(e,a,s)):a.memoizedState!==null?(us(),a.child=e.child,a.flags|=128,a=null):(us(),N=n.fallback,r=a.mode,n=ti({mode:"visible",children:n.children},r),N=Gs(N,r,s,null),N.flags|=2,n.return=a,N.return=a,n.sibling=N,a.child=n,Ks(a,e.child,null,s),n=a.child,n.memoizedState=po(s),n.childLanes=go(e,m,s),a.memoizedState=ho,a=Al(null,n));else if(ds(a),Po(N)){if(m=N.nextSibling&&N.nextSibling.dataset,m)var U=m.dgst;m=U,n=Error(d(419)),n.stack="",n.digest=m,jl({value:n,source:null,stack:null}),a=bo(e,a,s)}else if(pt||Cn(e,a,s,!1),m=(s&e.childLanes)!==0,pt||m){if(m=We,m!==null&&(n=Zd(m,s),n!==0&&n!==z.retryLane))throw z.retryLane=n,Hs(e,n),Gt(m,e,n),xo;Wo(N)||di(),a=bo(e,a,s)}else Wo(N)?(a.flags|=192,a.child=e.child,a=null):(e=z.treeContext,Pe=ua(N.nextSibling),Ct=a,qe=!0,ns=null,oa=!1,e!==null&&$u(a,e),a=yo(a,n.children),a.flags|=4096);return a}return r?(us(),N=n.fallback,r=a.mode,z=e.child,U=z.sibling,n=Da(z,{mode:"hidden",children:n.children}),n.subtreeFlags=z.subtreeFlags&65011712,U!==null?N=Da(U,N):(N=Gs(N,r,s,null),N.flags|=2),N.return=a,n.return=a,n.sibling=N,a.child=n,Al(null,n),n=a.child,N=e.child.memoizedState,N===null?N=po(s):(r=N.cachePool,r!==null?(z=ft._currentValue,r=r.parent!==z?{parent:z,pool:z}:r):r=Ku(),N={baseLanes:N.baseLanes|s,cachePool:r}),n.memoizedState=N,n.childLanes=go(e,m,s),a.memoizedState=ho,Al(e.child,n)):(ds(a),s=e.child,e=s.sibling,s=Da(s,{mode:"visible",children:n.children}),s.return=a,s.sibling=null,e!==null&&(m=a.deletions,m===null?(a.deletions=[e],a.flags|=16):m.push(e)),a.child=s,a.memoizedState=null,s)}function yo(e,a){return a=ti({mode:"visible",children:a},e.mode),a.return=e,e.child=a}function ti(e,a){return e=Jt(22,e,null,a),e.lanes=0,e}function bo(e,a,s){return Ks(a,e.child,null,s),e=yo(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function ix(e,a,s){e.lanes|=a;var n=e.alternate;n!==null&&(n.lanes|=a),Ac(e.return,a,s)}function vo(e,a,s,n,r,c){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:r,treeForkCount:c}:(m.isBackwards=a,m.rendering=null,m.renderingStartTime=0,m.last=n,m.tail=s,m.tailMode=r,m.treeForkCount=c)}function cx(e,a,s){var n=a.pendingProps,r=n.revealOrder,c=n.tail;n=n.children;var m=dt.current,N=(m&2)!==0;if(N?(m=m&1|2,a.flags|=128):m&=1,Y(dt,m),Tt(e,a,n,s),n=qe?vl:0,!N&&e!==null&&(e.flags&128)!==0)e:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ix(e,s,a);else if(e.tag===19)ix(e,s,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break e;for(;e.sibling===null;){if(e.return===null||e.return===a)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(r){case"forwards":for(s=a.child,r=null;s!==null;)e=s.alternate,e!==null&&Yr(e)===null&&(r=s),s=s.sibling;s=r,s===null?(r=a.child,a.child=null):(r=s.sibling,s.sibling=null),vo(a,!1,r,s,c,n);break;case"backwards":case"unstable_legacy-backwards":for(s=null,r=a.child,a.child=null;r!==null;){if(e=r.alternate,e!==null&&Yr(e)===null){a.child=r;break}e=r.sibling,r.sibling=s,s=r,r=e}vo(a,!0,s,null,c,n);break;case"together":vo(a,!1,null,null,void 0,n);break;default:a.memoizedState=null}return a.child}function Ha(e,a,s){if(e!==null&&(a.dependencies=e.dependencies),fs|=a.lanes,(s&a.childLanes)===0)if(e!==null){if(Cn(e,a,s,!1),(s&a.childLanes)===0)return null}else return null;if(e!==null&&a.child!==e.child)throw Error(d(153));if(a.child!==null){for(e=a.child,s=Da(e,e.pendingProps),a.child=s,s.return=a;e.sibling!==null;)e=e.sibling,s=s.sibling=Da(e,e.pendingProps),s.return=a;s.sibling=null}return a.child}function jo(e,a){return(e.lanes&a)!==0?!0:(e=e.dependencies,!!(e!==null&&Mr(e)))}function zp(e,a,s){switch(a.tag){case 3:Le(a,a.stateNode.containerInfo),rs(a,ft,e.memoizedState.cache),$s();break;case 27:case 5:rt(a);break;case 4:Le(a,a.stateNode.containerInfo);break;case 10:rs(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Qc(a),null;break;case 13:var n=a.memoizedState;if(n!==null)return n.dehydrated!==null?(ds(a),a.flags|=128,null):(s&a.child.childLanes)!==0?rx(e,a,s):(ds(a),e=Ha(e,a,s),e!==null?e.sibling:null);ds(a);break;case 19:var r=(e.flags&128)!==0;if(n=(s&a.childLanes)!==0,n||(Cn(e,a,s,!1),n=(s&a.childLanes)!==0),r){if(n)return cx(e,a,s);a.flags|=128}if(r=a.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Y(dt,dt.current),n)break;return null;case 22:return a.lanes=0,ex(e,a,s,a.pendingProps);case 24:rs(a,ft,e.memoizedState.cache)}return Ha(e,a,s)}function ox(e,a,s){if(e!==null)if(e.memoizedProps!==a.pendingProps)pt=!0;else{if(!jo(e,s)&&(a.flags&128)===0)return pt=!1,zp(e,a,s);pt=(e.flags&131072)!==0}else pt=!1,qe&&(a.flags&1048576)!==0&&Gu(a,vl,a.index);switch(a.lanes=0,a.tag){case 16:e:{var n=a.pendingProps;if(e=Zs(a.elementType),a.type=e,typeof e=="function")wc(e)?(n=Fs(e,n),a.tag=1,a=nx(null,a,e,n,s)):(a.tag=0,a=fo(null,a,e,n,s));else{if(e!=null){var r=e.$$typeof;if(r===Q){a.tag=11,a=Im(null,a,e,n,s);break e}else if(r===J){a.tag=14,a=Wm(null,a,e,n,s);break e}}throw a=Z(e)||e,Error(d(306,a,""))}}return a;case 0:return fo(e,a,a.type,a.pendingProps,s);case 1:return n=a.type,r=Fs(n,a.pendingProps),nx(e,a,n,r,s);case 3:e:{if(Le(a,a.stateNode.containerInfo),e===null)throw Error(d(387));n=a.pendingProps;var c=a.memoizedState;r=c.element,Hc(e,a),zl(a,n,null,s);var m=a.memoizedState;if(n=m.cache,rs(a,ft,n),n!==c.cache&&Dc(a,[ft],s,!0),Cl(),n=m.element,c.isDehydrated)if(c={element:n,isDehydrated:!1,cache:m.cache},a.updateQueue.baseState=c,a.memoizedState=c,a.flags&256){a=lx(e,a,n,s);break e}else if(n!==r){r=ra(Error(d(424)),a),jl(r),a=lx(e,a,n,s);break e}else for(e=a.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Pe=ua(e.firstChild),Ct=a,qe=!0,ns=null,oa=!0,s=em(a,null,n,s),a.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if($s(),n===r){a=Ha(e,a,s);break e}Tt(e,a,n,s)}a=a.child}return a;case 26:return ei(e,a),e===null?(s=v0(a.type,null,a.pendingProps,null))?a.memoizedState=s:qe||(s=a.type,e=a.pendingProps,n=gi(de.current).createElement(s),n[kt]=a,n[Mt]=e,Et(n,s,e),jt(n),a.stateNode=n):a.memoizedState=v0(a.type,e.memoizedProps,a.pendingProps,e.memoizedState),null;case 27:return rt(a),e===null&&qe&&(n=a.stateNode=g0(a.type,a.pendingProps,de.current),Ct=a,oa=!0,r=Pe,bs(a.type)?(ed=r,Pe=ua(n.firstChild)):Pe=r),Tt(e,a,a.pendingProps.children,s),ei(e,a),e===null&&(a.flags|=4194304),a.child;case 5:return e===null&&qe&&((r=n=Pe)&&(n=ng(n,a.type,a.pendingProps,oa),n!==null?(a.stateNode=n,Ct=a,Pe=ua(n.firstChild),oa=!1,r=!0):r=!1),r||ls(a)),rt(a),r=a.type,c=a.pendingProps,m=e!==null?e.memoizedProps:null,n=c.children,Jo(r,c)?n=null:m!==null&&Jo(r,m)&&(a.flags|=32),a.memoizedState!==null&&(r=Xc(e,a,bp,null,null,s),Kl._currentValue=r),ei(e,a),Tt(e,a,n,s),a.child;case 6:return e===null&&qe&&((e=s=Pe)&&(s=lg(s,a.pendingProps,oa),s!==null?(a.stateNode=s,Ct=a,Pe=null,e=!0):e=!1),e||ls(a)),null;case 13:return rx(e,a,s);case 4:return Le(a,a.stateNode.containerInfo),n=a.pendingProps,e===null?a.child=Ks(a,null,n,s):Tt(e,a,n,s),a.child;case 11:return Im(e,a,a.type,a.pendingProps,s);case 7:return Tt(e,a,a.pendingProps,s),a.child;case 8:return Tt(e,a,a.pendingProps.children,s),a.child;case 12:return Tt(e,a,a.pendingProps.children,s),a.child;case 10:return n=a.pendingProps,rs(a,a.type,n.value),Tt(e,a,n.children,s),a.child;case 9:return r=a.type._context,n=a.pendingProps.children,Vs(a),r=zt(r),n=n(r),a.flags|=1,Tt(e,a,n,s),a.child;case 14:return Wm(e,a,a.type,a.pendingProps,s);case 15:return Pm(e,a,a.type,a.pendingProps,s);case 19:return cx(e,a,s);case 31:return Cp(e,a,s);case 22:return ex(e,a,s,a.pendingProps);case 24:return Vs(a),n=zt(ft),e===null?(r=qc(),r===null&&(r=We,c=Mc(),r.pooledCache=c,c.refCount++,c!==null&&(r.pooledCacheLanes|=s),r=c),a.memoizedState={parent:n,cache:r},Bc(a),rs(a,ft,r)):((e.lanes&s)!==0&&(Hc(e,a),zl(a,null,null,s),Cl()),r=e.memoizedState,c=a.memoizedState,r.parent!==n?(r={parent:n,cache:n},a.memoizedState=r,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=r),rs(a,ft,n)):(n=c.cache,rs(a,ft,n),n!==r.cache&&Dc(a,[ft],s,!0))),Tt(e,a,a.pendingProps.children,s),a.child;case 29:throw a.pendingProps}throw Error(d(156,a.tag))}function Ga(e){e.flags|=4}function No(e,a,s,n,r){if((a=(e.mode&32)!==0)&&(a=!1),a){if(e.flags|=16777216,(r&335544128)===r)if(e.stateNode.complete)e.flags|=8192;else if(Lx())e.flags|=8192;else throw Xs=Br,Uc}else e.flags&=-16777217}function dx(e,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!w0(a))if(Lx())e.flags|=8192;else throw Xs=Br,Uc}function ai(e,a){a!==null&&(e.flags|=4),e.flags&16384&&(a=e.tag!==22?Yd():536870912,e.lanes|=a,Bn|=a)}function Dl(e,a){if(!qe)switch(e.tailMode){case"hidden":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function et(e){var a=e.alternate!==null&&e.alternate.child===e.child,s=0,n=0;if(a)for(var r=e.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags&65011712,n|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=n,e.childLanes=s,a}function Tp(e,a,s){var n=a.pendingProps;switch(Tc(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(a),null;case 1:return et(a),null;case 3:return s=a.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),a.memoizedState.cache!==n&&(a.flags|=2048),qa(ft),we(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(kn(a)?Ga(a):e===null||e.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Oc())),et(a),null;case 26:var r=a.type,c=a.memoizedState;return e===null?(Ga(a),c!==null?(et(a),dx(a,c)):(et(a),No(a,r,null,n,s))):c?c!==e.memoizedState?(Ga(a),et(a),dx(a,c)):(et(a),a.flags&=-16777217):(e=e.memoizedProps,e!==n&&Ga(a),et(a),No(a,r,e,n,s)),null;case 27:if(Ot(a),s=de.current,r=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==n&&Ga(a);else{if(!n){if(a.stateNode===null)throw Error(d(166));return et(a),null}e=R.current,kn(a)?Yu(a):(e=g0(r,n,s),a.stateNode=e,Ga(a))}return et(a),null;case 5:if(Ot(a),r=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==n&&Ga(a);else{if(!n){if(a.stateNode===null)throw Error(d(166));return et(a),null}if(c=R.current,kn(a))Yu(a);else{var m=gi(de.current);switch(c){case 1:c=m.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:c=m.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":c=m.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":c=m.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":c=m.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof n.is=="string"?m.createElement("select",{is:n.is}):m.createElement("select"),n.multiple?c.multiple=!0:n.size&&(c.size=n.size);break;default:c=typeof n.is=="string"?m.createElement(r,{is:n.is}):m.createElement(r)}}c[kt]=a,c[Mt]=n;e:for(m=a.child;m!==null;){if(m.tag===5||m.tag===6)c.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===a)break e;for(;m.sibling===null;){if(m.return===null||m.return===a)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}a.stateNode=c;e:switch(Et(c,r,n),r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Ga(a)}}return et(a),No(a,a.type,e===null?null:e.memoizedProps,a.pendingProps,s),null;case 6:if(e&&a.stateNode!=null)e.memoizedProps!==n&&Ga(a);else{if(typeof n!="string"&&a.stateNode===null)throw Error(d(166));if(e=de.current,kn(a)){if(e=a.stateNode,s=a.memoizedProps,n=null,r=Ct,r!==null)switch(r.tag){case 27:case 5:n=r.memoizedProps}e[kt]=a,e=!!(e.nodeValue===s||n!==null&&n.suppressHydrationWarning===!0||r0(e.nodeValue,s)),e||ls(a,!0)}else e=gi(e).createTextNode(n),e[kt]=a,a.stateNode=e}return et(a),null;case 31:if(s=a.memoizedState,e===null||e.memoizedState!==null){if(n=kn(a),s!==null){if(e===null){if(!n)throw Error(d(318));if(e=a.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(557));e[kt]=a}else $s(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;et(a),e=!1}else s=Oc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return a.flags&256?(It(a),a):(It(a),null);if((a.flags&128)!==0)throw Error(d(558))}return et(a),null;case 13:if(n=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=kn(a),n!==null&&n.dehydrated!==null){if(e===null){if(!r)throw Error(d(318));if(r=a.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(d(317));r[kt]=a}else $s(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;et(a),r=!1}else r=Oc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return a.flags&256?(It(a),a):(It(a),null)}return It(a),(a.flags&128)!==0?(a.lanes=s,a):(s=n!==null,e=e!==null&&e.memoizedState!==null,s&&(n=a.child,r=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(r=n.alternate.memoizedState.cachePool.pool),c=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),c!==r&&(n.flags|=2048)),s!==e&&s&&(a.child.flags|=8192),ai(a,a.updateQueue),et(a),null);case 4:return we(),e===null&&Vo(a.stateNode.containerInfo),et(a),null;case 10:return qa(a.type),et(a),null;case 19:if(G(dt),n=a.memoizedState,n===null)return et(a),null;if(r=(a.flags&128)!==0,c=n.rendering,c===null)if(r)Dl(n,!1);else{if(ct!==0||e!==null&&(e.flags&128)!==0)for(e=a.child;e!==null;){if(c=Yr(e),c!==null){for(a.flags|=128,Dl(n,!1),e=c.updateQueue,a.updateQueue=e,ai(a,e),a.subtreeFlags=0,e=s,s=a.child;s!==null;)Uu(s,e),s=s.sibling;return Y(dt,dt.current&1|2),qe&&Ma(a,n.treeForkCount),a.child}e=e.sibling}n.tail!==null&&Ne()>ii&&(a.flags|=128,r=!0,Dl(n,!1),a.lanes=4194304)}else{if(!r)if(e=Yr(c),e!==null){if(a.flags|=128,r=!0,e=e.updateQueue,a.updateQueue=e,ai(a,e),Dl(n,!0),n.tail===null&&n.tailMode==="hidden"&&!c.alternate&&!qe)return et(a),null}else 2*Ne()-n.renderingStartTime>ii&&s!==536870912&&(a.flags|=128,r=!0,Dl(n,!1),a.lanes=4194304);n.isBackwards?(c.sibling=a.child,a.child=c):(e=n.last,e!==null?e.sibling=c:a.child=c,n.last=c)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=Ne(),e.sibling=null,s=dt.current,Y(dt,r?s&1|2:s&1),qe&&Ma(a,n.treeForkCount),e):(et(a),null);case 22:case 23:return It(a),Vc(),n=a.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(a.flags|=8192):n&&(a.flags|=8192),n?(s&536870912)!==0&&(a.flags&128)===0&&(et(a),a.subtreeFlags&6&&(a.flags|=8192)):et(a),s=a.updateQueue,s!==null&&ai(a,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==s&&(a.flags|=2048),e!==null&&G(Qs),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),a.memoizedState.cache!==s&&(a.flags|=2048),qa(ft),et(a),null;case 25:return null;case 30:return null}throw Error(d(156,a.tag))}function Ep(e,a){switch(Tc(a),a.tag){case 1:return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return qa(ft),we(),e=a.flags,(e&65536)!==0&&(e&128)===0?(a.flags=e&-65537|128,a):null;case 26:case 27:case 5:return Ot(a),null;case 31:if(a.memoizedState!==null){if(It(a),a.alternate===null)throw Error(d(340));$s()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 13:if(It(a),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(d(340));$s()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return G(dt),null;case 4:return we(),null;case 10:return qa(a.type),null;case 22:case 23:return It(a),Vc(),e!==null&&G(Qs),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 24:return qa(ft),null;case 25:return null;default:return null}}function ux(e,a){switch(Tc(a),a.tag){case 3:qa(ft),we();break;case 26:case 27:case 5:Ot(a);break;case 4:we();break;case 31:a.memoizedState!==null&&It(a);break;case 13:It(a);break;case 19:G(dt);break;case 10:qa(a.type);break;case 22:case 23:It(a),Vc(),e!==null&&G(Qs);break;case 24:qa(ft)}}function Ml(e,a){try{var s=a.updateQueue,n=s!==null?s.lastEffect:null;if(n!==null){var r=n.next;s=r;do{if((s.tag&e)===e){n=void 0;var c=s.create,m=s.inst;n=c(),m.destroy=n}s=s.next}while(s!==r)}}catch(N){Ze(a,a.return,N)}}function ms(e,a,s){try{var n=a.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var c=r.next;n=c;do{if((n.tag&e)===e){var m=n.inst,N=m.destroy;if(N!==void 0){m.destroy=void 0,r=a;var z=s,U=N;try{U()}catch(W){Ze(r,z,W)}}}n=n.next}while(n!==c)}}catch(W){Ze(a,a.return,W)}}function mx(e){var a=e.updateQueue;if(a!==null){var s=e.stateNode;try{am(a,s)}catch(n){Ze(e,e.return,n)}}}function xx(e,a,s){s.props=Fs(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(n){Ze(e,a,n)}}function Ll(e,a){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof s=="function"?e.refCleanup=s(n):s.current=n}}catch(r){Ze(e,a,r)}}function ka(e,a){var s=e.ref,n=e.refCleanup;if(s!==null)if(typeof n=="function")try{n()}catch(r){Ze(e,a,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(r){Ze(e,a,r)}else s.current=null}function fx(e){var a=e.type,s=e.memoizedProps,n=e.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":s.autoFocus&&n.focus();break e;case"img":s.src?n.src=s.src:s.srcSet&&(n.srcset=s.srcSet)}}catch(r){Ze(e,e.return,r)}}function _o(e,a,s){try{var n=e.stateNode;Wp(n,e.type,s,a),n[Mt]=a}catch(r){Ze(e,e.return,r)}}function hx(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&bs(e.type)||e.tag===4}function So(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||hx(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&bs(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wo(e,a,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,a?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,a):(a=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.appendChild(e),s=s._reactRootContainer,s!=null||a.onclick!==null||(a.onclick=Ra));else if(n!==4&&(n===27&&bs(e.type)&&(s=e.stateNode,a=null),e=e.child,e!==null))for(wo(e,a,s),e=e.sibling;e!==null;)wo(e,a,s),e=e.sibling}function si(e,a,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,a?s.insertBefore(e,a):s.appendChild(e);else if(n!==4&&(n===27&&bs(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(si(e,a,s),e=e.sibling;e!==null;)si(e,a,s),e=e.sibling}function px(e){var a=e.stateNode,s=e.memoizedProps;try{for(var n=e.type,r=a.attributes;r.length;)a.removeAttributeNode(r[0]);Et(a,n,s),a[kt]=e,a[Mt]=s}catch(c){Ze(e,e.return,c)}}var $a=!1,gt=!1,ko=!1,gx=typeof WeakSet=="function"?WeakSet:Set,Nt=null;function Op(e,a){if(e=e.containerInfo,Xo=Si,e=Tu(e),yc(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var r=n.anchorOffset,c=n.focusNode;n=n.focusOffset;try{s.nodeType,c.nodeType}catch{s=null;break e}var m=0,N=-1,z=-1,U=0,W=0,te=e,H=null;t:for(;;){for(var V;te!==s||r!==0&&te.nodeType!==3||(N=m+r),te!==c||n!==0&&te.nodeType!==3||(z=m+n),te.nodeType===3&&(m+=te.nodeValue.length),(V=te.firstChild)!==null;)H=te,te=V;for(;;){if(te===e)break t;if(H===s&&++U===r&&(N=m),H===c&&++W===n&&(z=m),(V=te.nextSibling)!==null)break;te=H,H=te.parentNode}te=V}s=N===-1||z===-1?null:{start:N,end:z}}else s=null}s=s||{start:0,end:0}}else s=null;for(Ko={focusedElem:e,selectionRange:s},Si=!1,Nt=a;Nt!==null;)if(a=Nt,e=a.child,(a.subtreeFlags&1028)!==0&&e!==null)e.return=a,Nt=e;else for(;Nt!==null;){switch(a=Nt,c=a.alternate,e=a.flags,a.tag){case 0:if((e&4)!==0&&(e=a.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)r=e[s],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&c!==null){e=void 0,s=a,r=c.memoizedProps,c=c.memoizedState,n=s.stateNode;try{var pe=Fs(s.type,r);e=n.getSnapshotBeforeUpdate(pe,c),n.__reactInternalSnapshotBeforeUpdate=e}catch(_e){Ze(s,s.return,_e)}}break;case 3:if((e&1024)!==0){if(e=a.stateNode.containerInfo,s=e.nodeType,s===9)Io(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Io(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(d(163))}if(e=a.sibling,e!==null){e.return=a.return,Nt=e;break}Nt=a.return}}function yx(e,a,s){var n=s.flags;switch(s.tag){case 0:case 11:case 15:Va(e,s),n&4&&Ml(5,s);break;case 1:if(Va(e,s),n&4)if(e=s.stateNode,a===null)try{e.componentDidMount()}catch(m){Ze(s,s.return,m)}else{var r=Fs(s.type,a.memoizedProps);a=a.memoizedState;try{e.componentDidUpdate(r,a,e.__reactInternalSnapshotBeforeUpdate)}catch(m){Ze(s,s.return,m)}}n&64&&mx(s),n&512&&Ll(s,s.return);break;case 3:if(Va(e,s),n&64&&(e=s.updateQueue,e!==null)){if(a=null,s.child!==null)switch(s.child.tag){case 27:case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}try{am(e,a)}catch(m){Ze(s,s.return,m)}}break;case 27:a===null&&n&4&&px(s);case 26:case 5:Va(e,s),a===null&&n&4&&fx(s),n&512&&Ll(s,s.return);break;case 12:Va(e,s);break;case 31:Va(e,s),n&4&&jx(e,s);break;case 13:Va(e,s),n&4&&Nx(e,s),n&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=Hp.bind(null,s),rg(e,s))));break;case 22:if(n=s.memoizedState!==null||$a,!n){a=a!==null&&a.memoizedState!==null||gt,r=$a;var c=gt;$a=n,(gt=a)&&!c?Qa(e,s,(s.subtreeFlags&8772)!==0):Va(e,s),$a=r,gt=c}break;case 30:break;default:Va(e,s)}}function bx(e){var a=e.alternate;a!==null&&(e.alternate=null,bx(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&tc(a)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var st=null,qt=!1;function Ya(e,a,s){for(s=s.child;s!==null;)vx(e,a,s),s=s.sibling}function vx(e,a,s){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(rl,s)}catch{}switch(s.tag){case 26:gt||ka(s,a),Ya(e,a,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:gt||ka(s,a);var n=st,r=qt;bs(s.type)&&(st=s.stateNode,qt=!1),Ya(e,a,s),Ql(s.stateNode),st=n,qt=r;break;case 5:gt||ka(s,a);case 6:if(n=st,r=qt,st=null,Ya(e,a,s),st=n,qt=r,st!==null)if(qt)try{(st.nodeType===9?st.body:st.nodeName==="HTML"?st.ownerDocument.body:st).removeChild(s.stateNode)}catch(c){Ze(s,a,c)}else try{st.removeChild(s.stateNode)}catch(c){Ze(s,a,c)}break;case 18:st!==null&&(qt?(e=st,m0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),Xn(e)):m0(st,s.stateNode));break;case 4:n=st,r=qt,st=s.stateNode.containerInfo,qt=!0,Ya(e,a,s),st=n,qt=r;break;case 0:case 11:case 14:case 15:ms(2,s,a),gt||ms(4,s,a),Ya(e,a,s);break;case 1:gt||(ka(s,a),n=s.stateNode,typeof n.componentWillUnmount=="function"&&xx(s,a,n)),Ya(e,a,s);break;case 21:Ya(e,a,s);break;case 22:gt=(n=gt)||s.memoizedState!==null,Ya(e,a,s),gt=n;break;default:Ya(e,a,s)}}function jx(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Xn(e)}catch(s){Ze(a,a.return,s)}}}function Nx(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Xn(e)}catch(s){Ze(a,a.return,s)}}function Rp(e){switch(e.tag){case 31:case 13:case 19:var a=e.stateNode;return a===null&&(a=e.stateNode=new gx),a;case 22:return e=e.stateNode,a=e._retryCache,a===null&&(a=e._retryCache=new gx),a;default:throw Error(d(435,e.tag))}}function ni(e,a){var s=Rp(e);a.forEach(function(n){if(!s.has(n)){s.add(n);var r=Gp.bind(null,e,n);n.then(r,r)}})}function Ut(e,a){var s=a.deletions;if(s!==null)for(var n=0;n<s.length;n++){var r=s[n],c=e,m=a,N=m;e:for(;N!==null;){switch(N.tag){case 27:if(bs(N.type)){st=N.stateNode,qt=!1;break e}break;case 5:st=N.stateNode,qt=!1;break e;case 3:case 4:st=N.stateNode.containerInfo,qt=!0;break e}N=N.return}if(st===null)throw Error(d(160));vx(c,m,r),st=null,qt=!1,c=r.alternate,c!==null&&(c.return=null),r.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)_x(a,e),a=a.sibling}var ja=null;function _x(e,a){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ut(a,e),Bt(e),n&4&&(ms(3,e,e.return),Ml(3,e),ms(5,e,e.return));break;case 1:Ut(a,e),Bt(e),n&512&&(gt||s===null||ka(s,s.return)),n&64&&$a&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?n:s.concat(n))));break;case 26:var r=ja;if(Ut(a,e),Bt(e),n&512&&(gt||s===null||ka(s,s.return)),n&4){var c=s!==null?s.memoizedState:null;if(n=e.memoizedState,s===null)if(n===null)if(e.stateNode===null){e:{n=e.type,s=e.memoizedProps,r=r.ownerDocument||r;t:switch(n){case"title":c=r.getElementsByTagName("title")[0],(!c||c[ol]||c[kt]||c.namespaceURI==="http://www.w3.org/2000/svg"||c.hasAttribute("itemprop"))&&(c=r.createElement(n),r.head.insertBefore(c,r.querySelector("head > title"))),Et(c,n,s),c[kt]=e,jt(c),n=c;break e;case"link":var m=_0("link","href",r).get(n+(s.href||""));if(m){for(var N=0;N<m.length;N++)if(c=m[N],c.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&c.getAttribute("rel")===(s.rel==null?null:s.rel)&&c.getAttribute("title")===(s.title==null?null:s.title)&&c.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){m.splice(N,1);break t}}c=r.createElement(n),Et(c,n,s),r.head.appendChild(c);break;case"meta":if(m=_0("meta","content",r).get(n+(s.content||""))){for(N=0;N<m.length;N++)if(c=m[N],c.getAttribute("content")===(s.content==null?null:""+s.content)&&c.getAttribute("name")===(s.name==null?null:s.name)&&c.getAttribute("property")===(s.property==null?null:s.property)&&c.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&c.getAttribute("charset")===(s.charSet==null?null:s.charSet)){m.splice(N,1);break t}}c=r.createElement(n),Et(c,n,s),r.head.appendChild(c);break;default:throw Error(d(468,n))}c[kt]=e,jt(c),n=c}e.stateNode=n}else S0(r,e.type,e.stateNode);else e.stateNode=N0(r,n,e.memoizedProps);else c!==n?(c===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):c.count--,n===null?S0(r,e.type,e.stateNode):N0(r,n,e.memoizedProps)):n===null&&e.stateNode!==null&&_o(e,e.memoizedProps,s.memoizedProps)}break;case 27:Ut(a,e),Bt(e),n&512&&(gt||s===null||ka(s,s.return)),s!==null&&n&4&&_o(e,e.memoizedProps,s.memoizedProps);break;case 5:if(Ut(a,e),Bt(e),n&512&&(gt||s===null||ka(s,s.return)),e.flags&32){r=e.stateNode;try{pn(r,"")}catch(pe){Ze(e,e.return,pe)}}n&4&&e.stateNode!=null&&(r=e.memoizedProps,_o(e,r,s!==null?s.memoizedProps:r)),n&1024&&(ko=!0);break;case 6:if(Ut(a,e),Bt(e),n&4){if(e.stateNode===null)throw Error(d(162));n=e.memoizedProps,s=e.stateNode;try{s.nodeValue=n}catch(pe){Ze(e,e.return,pe)}}break;case 3:if(vi=null,r=ja,ja=yi(a.containerInfo),Ut(a,e),ja=r,Bt(e),n&4&&s!==null&&s.memoizedState.isDehydrated)try{Xn(a.containerInfo)}catch(pe){Ze(e,e.return,pe)}ko&&(ko=!1,Sx(e));break;case 4:n=ja,ja=yi(e.stateNode.containerInfo),Ut(a,e),Bt(e),ja=n;break;case 12:Ut(a,e),Bt(e);break;case 31:Ut(a,e),Bt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,ni(e,n)));break;case 13:Ut(a,e),Bt(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(ri=Ne()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,ni(e,n)));break;case 22:r=e.memoizedState!==null;var z=s!==null&&s.memoizedState!==null,U=$a,W=gt;if($a=U||r,gt=W||z,Ut(a,e),gt=W,$a=U,Bt(e),n&8192)e:for(a=e.stateNode,a._visibility=r?a._visibility&-2:a._visibility|1,r&&(s===null||z||$a||gt||Is(e)),s=null,a=e;;){if(a.tag===5||a.tag===26){if(s===null){z=s=a;try{if(c=z.stateNode,r)m=c.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{N=z.stateNode;var te=z.memoizedProps.style,H=te!=null&&te.hasOwnProperty("display")?te.display:null;N.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(pe){Ze(z,z.return,pe)}}}else if(a.tag===6){if(s===null){z=a;try{z.stateNode.nodeValue=r?"":z.memoizedProps}catch(pe){Ze(z,z.return,pe)}}}else if(a.tag===18){if(s===null){z=a;try{var V=z.stateNode;r?x0(V,!0):x0(z.stateNode,!1)}catch(pe){Ze(z,z.return,pe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===e)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;s===a&&(s=null),a=a.return}s===a&&(s=null),a.sibling.return=a.return,a=a.sibling}n&4&&(n=e.updateQueue,n!==null&&(s=n.retryQueue,s!==null&&(n.retryQueue=null,ni(e,s))));break;case 19:Ut(a,e),Bt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,ni(e,n)));break;case 30:break;case 21:break;default:Ut(a,e),Bt(e)}}function Bt(e){var a=e.flags;if(a&2){try{for(var s,n=e.return;n!==null;){if(hx(n)){s=n;break}n=n.return}if(s==null)throw Error(d(160));switch(s.tag){case 27:var r=s.stateNode,c=So(e);si(e,c,r);break;case 5:var m=s.stateNode;s.flags&32&&(pn(m,""),s.flags&=-33);var N=So(e);si(e,N,m);break;case 3:case 4:var z=s.stateNode.containerInfo,U=So(e);wo(e,U,z);break;default:throw Error(d(161))}}catch(W){Ze(e,e.return,W)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function Sx(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var a=e;Sx(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),e=e.sibling}}function Va(e,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)yx(e,a.alternate,a),a=a.sibling}function Is(e){for(e=e.child;e!==null;){var a=e;switch(a.tag){case 0:case 11:case 14:case 15:ms(4,a,a.return),Is(a);break;case 1:ka(a,a.return);var s=a.stateNode;typeof s.componentWillUnmount=="function"&&xx(a,a.return,s),Is(a);break;case 27:Ql(a.stateNode);case 26:case 5:ka(a,a.return),Is(a);break;case 22:a.memoizedState===null&&Is(a);break;case 30:Is(a);break;default:Is(a)}e=e.sibling}}function Qa(e,a,s){for(s=s&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var n=a.alternate,r=e,c=a,m=c.flags;switch(c.tag){case 0:case 11:case 15:Qa(r,c,s),Ml(4,c);break;case 1:if(Qa(r,c,s),n=c,r=n.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(U){Ze(n,n.return,U)}if(n=c,r=n.updateQueue,r!==null){var N=n.stateNode;try{var z=r.shared.hiddenCallbacks;if(z!==null)for(r.shared.hiddenCallbacks=null,r=0;r<z.length;r++)tm(z[r],N)}catch(U){Ze(n,n.return,U)}}s&&m&64&&mx(c),Ll(c,c.return);break;case 27:px(c);case 26:case 5:Qa(r,c,s),s&&n===null&&m&4&&fx(c),Ll(c,c.return);break;case 12:Qa(r,c,s);break;case 31:Qa(r,c,s),s&&m&4&&jx(r,c);break;case 13:Qa(r,c,s),s&&m&4&&Nx(r,c);break;case 22:c.memoizedState===null&&Qa(r,c,s),Ll(c,c.return);break;case 30:break;default:Qa(r,c,s)}a=a.sibling}}function Co(e,a){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(e=a.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&Nl(s))}function zo(e,a){e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Nl(e))}function Na(e,a,s,n){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)wx(e,a,s,n),a=a.sibling}function wx(e,a,s,n){var r=a.flags;switch(a.tag){case 0:case 11:case 15:Na(e,a,s,n),r&2048&&Ml(9,a);break;case 1:Na(e,a,s,n);break;case 3:Na(e,a,s,n),r&2048&&(e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Nl(e)));break;case 12:if(r&2048){Na(e,a,s,n),e=a.stateNode;try{var c=a.memoizedProps,m=c.id,N=c.onPostCommit;typeof N=="function"&&N(m,a.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(z){Ze(a,a.return,z)}}else Na(e,a,s,n);break;case 31:Na(e,a,s,n);break;case 13:Na(e,a,s,n);break;case 23:break;case 22:c=a.stateNode,m=a.alternate,a.memoizedState!==null?c._visibility&2?Na(e,a,s,n):ql(e,a):c._visibility&2?Na(e,a,s,n):(c._visibility|=2,Ln(e,a,s,n,(a.subtreeFlags&10256)!==0||!1)),r&2048&&Co(m,a);break;case 24:Na(e,a,s,n),r&2048&&zo(a.alternate,a);break;default:Na(e,a,s,n)}}function Ln(e,a,s,n,r){for(r=r&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var c=e,m=a,N=s,z=n,U=m.flags;switch(m.tag){case 0:case 11:case 15:Ln(c,m,N,z,r),Ml(8,m);break;case 23:break;case 22:var W=m.stateNode;m.memoizedState!==null?W._visibility&2?Ln(c,m,N,z,r):ql(c,m):(W._visibility|=2,Ln(c,m,N,z,r)),r&&U&2048&&Co(m.alternate,m);break;case 24:Ln(c,m,N,z,r),r&&U&2048&&zo(m.alternate,m);break;default:Ln(c,m,N,z,r)}a=a.sibling}}function ql(e,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var s=e,n=a,r=n.flags;switch(n.tag){case 22:ql(s,n),r&2048&&Co(n.alternate,n);break;case 24:ql(s,n),r&2048&&zo(n.alternate,n);break;default:ql(s,n)}a=a.sibling}}var Ul=8192;function qn(e,a,s){if(e.subtreeFlags&Ul)for(e=e.child;e!==null;)kx(e,a,s),e=e.sibling}function kx(e,a,s){switch(e.tag){case 26:qn(e,a,s),e.flags&Ul&&e.memoizedState!==null&&yg(s,ja,e.memoizedState,e.memoizedProps);break;case 5:qn(e,a,s);break;case 3:case 4:var n=ja;ja=yi(e.stateNode.containerInfo),qn(e,a,s),ja=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=Ul,Ul=16777216,qn(e,a,s),Ul=n):qn(e,a,s));break;default:qn(e,a,s)}}function Cx(e){var a=e.alternate;if(a!==null&&(e=a.child,e!==null)){a.child=null;do a=e.sibling,e.sibling=null,e=a;while(e!==null)}}function Bl(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var n=a[s];Nt=n,Tx(n,e)}Cx(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)zx(e),e=e.sibling}function zx(e){switch(e.tag){case 0:case 11:case 15:Bl(e),e.flags&2048&&ms(9,e,e.return);break;case 3:Bl(e);break;case 12:Bl(e);break;case 22:var a=e.stateNode;e.memoizedState!==null&&a._visibility&2&&(e.return===null||e.return.tag!==13)?(a._visibility&=-3,li(e)):Bl(e);break;default:Bl(e)}}function li(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var n=a[s];Nt=n,Tx(n,e)}Cx(e)}for(e=e.child;e!==null;){switch(a=e,a.tag){case 0:case 11:case 15:ms(8,a,a.return),li(a);break;case 22:s=a.stateNode,s._visibility&2&&(s._visibility&=-3,li(a));break;default:li(a)}e=e.sibling}}function Tx(e,a){for(;Nt!==null;){var s=Nt;switch(s.tag){case 0:case 11:case 15:ms(8,s,a);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var n=s.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Nl(s.memoizedState.cache)}if(n=s.child,n!==null)n.return=s,Nt=n;else e:for(s=e;Nt!==null;){n=Nt;var r=n.sibling,c=n.return;if(bx(n),n===s){Nt=null;break e}if(r!==null){r.return=c,Nt=r;break e}Nt=c}}}var Ap={getCacheForType:function(e){var a=zt(ft),s=a.data.get(e);return s===void 0&&(s=e(),a.data.set(e,s)),s},cacheSignal:function(){return zt(ft).controller.signal}},Dp=typeof WeakMap=="function"?WeakMap:Map,$e=0,We=null,Oe=null,De=0,Qe=0,Wt=null,xs=!1,Un=!1,To=!1,Za=0,ct=0,fs=0,Ws=0,Eo=0,Pt=0,Bn=0,Hl=null,Ht=null,Oo=!1,ri=0,Ex=0,ii=1/0,ci=null,hs=null,bt=0,ps=null,Hn=null,Xa=0,Ro=0,Ao=null,Ox=null,Gl=0,Do=null;function ea(){return($e&2)!==0&&De!==0?De&-De:M.T!==null?Ho():Xd()}function Rx(){if(Pt===0)if((De&536870912)===0||qe){var e=pr;pr<<=1,(pr&3932160)===0&&(pr=262144),Pt=e}else Pt=536870912;return e=Ft.current,e!==null&&(e.flags|=32),Pt}function Gt(e,a,s){(e===We&&(Qe===2||Qe===9)||e.cancelPendingCommit!==null)&&(Gn(e,0),gs(e,De,Pt,!1)),cl(e,s),(($e&2)===0||e!==We)&&(e===We&&(($e&2)===0&&(Ws|=s),ct===4&&gs(e,De,Pt,!1)),Ca(e))}function Ax(e,a,s){if(($e&6)!==0)throw Error(d(327));var n=!s&&(a&127)===0&&(a&e.expiredLanes)===0||il(e,a),r=n?qp(e,a):Lo(e,a,!0),c=n;do{if(r===0){Un&&!n&&gs(e,a,0,!1);break}else{if(s=e.current.alternate,c&&!Mp(s)){r=Lo(e,a,!1),c=!1;continue}if(r===2){if(c=a,e.errorRecoveryDisabledLanes&c)var m=0;else m=e.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){a=m;e:{var N=e;r=Hl;var z=N.current.memoizedState.isDehydrated;if(z&&(Gn(N,m).flags|=256),m=Lo(N,m,!1),m!==2){if(To&&!z){N.errorRecoveryDisabledLanes|=c,Ws|=c,r=4;break e}c=Ht,Ht=r,c!==null&&(Ht===null?Ht=c:Ht.push.apply(Ht,c))}r=m}if(c=!1,r!==2)continue}}if(r===1){Gn(e,0),gs(e,a,0,!0);break}e:{switch(n=e,c=r,c){case 0:case 1:throw Error(d(345));case 4:if((a&4194048)!==a)break;case 6:gs(n,a,Pt,!xs);break e;case 2:Ht=null;break;case 3:case 5:break;default:throw Error(d(329))}if((a&62914560)===a&&(r=ri+300-Ne(),10<r)){if(gs(n,a,Pt,!xs),yr(n,0,!0)!==0)break e;Xa=a,n.timeoutHandle=d0(Dx.bind(null,n,s,Ht,ci,Oo,a,Pt,Ws,Bn,xs,c,"Throttled",-0,0),r);break e}Dx(n,s,Ht,ci,Oo,a,Pt,Ws,Bn,xs,c,null,-0,0)}}break}while(!0);Ca(e)}function Dx(e,a,s,n,r,c,m,N,z,U,W,te,H,V){if(e.timeoutHandle=-1,te=a.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ra},kx(a,c,te);var pe=(c&62914560)===c?ri-Ne():(c&4194048)===c?Ex-Ne():0;if(pe=bg(te,pe),pe!==null){Xa=c,e.cancelPendingCommit=pe($x.bind(null,e,a,c,s,n,r,m,N,z,W,te,null,H,V)),gs(e,c,m,!U);return}}$x(e,a,c,s,n,r,m,N,z)}function Mp(e){for(var a=e;;){var s=a.tag;if((s===0||s===11||s===15)&&a.flags&16384&&(s=a.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var n=0;n<s.length;n++){var r=s[n],c=r.getSnapshot;r=r.value;try{if(!Kt(c(),r))return!1}catch{return!1}}if(s=a.child,a.subtreeFlags&16384&&s!==null)s.return=a,a=s;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function gs(e,a,s,n){a&=~Eo,a&=~Ws,e.suspendedLanes|=a,e.pingedLanes&=~a,n&&(e.warmLanes|=a),n=e.expirationTimes;for(var r=a;0<r;){var c=31-Xt(r),m=1<<c;n[c]=-1,r&=~m}s!==0&&Vd(e,s,a)}function oi(){return($e&6)===0?($l(0),!1):!0}function Mo(){if(Oe!==null){if(Qe===0)var e=Oe.return;else e=Oe,La=Ys=null,Fc(e),On=null,Sl=0,e=Oe;for(;e!==null;)ux(e.alternate,e),e=e.return;Oe=null}}function Gn(e,a){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,tg(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Xa=0,Mo(),We=e,Oe=s=Da(e.current,null),De=a,Qe=0,Wt=null,xs=!1,Un=il(e,a),To=!1,Bn=Pt=Eo=Ws=fs=ct=0,Ht=Hl=null,Oo=!1,(a&8)!==0&&(a|=a&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=a;0<n;){var r=31-Xt(n),c=1<<r;a|=e[r],n&=~c}return Za=a,Er(),s}function Mx(e,a){ze=null,M.H=Rl,a===En||a===Ur?(a=Iu(),Qe=3):a===Uc?(a=Iu(),Qe=4):Qe=a===xo?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Wt=a,Oe===null&&(ct=1,Wr(e,ra(a,e.current)))}function Lx(){var e=Ft.current;return e===null?!0:(De&4194048)===De?da===null:(De&62914560)===De||(De&536870912)!==0?e===da:!1}function qx(){var e=M.H;return M.H=Rl,e===null?Rl:e}function Ux(){var e=M.A;return M.A=Ap,e}function di(){ct=4,xs||(De&4194048)!==De&&Ft.current!==null||(Un=!0),(fs&134217727)===0&&(Ws&134217727)===0||We===null||gs(We,De,Pt,!1)}function Lo(e,a,s){var n=$e;$e|=2;var r=qx(),c=Ux();(We!==e||De!==a)&&(ci=null,Gn(e,a)),a=!1;var m=ct;e:do try{if(Qe!==0&&Oe!==null){var N=Oe,z=Wt;switch(Qe){case 8:Mo(),m=6;break e;case 3:case 2:case 9:case 6:Ft.current===null&&(a=!0);var U=Qe;if(Qe=0,Wt=null,$n(e,N,z,U),s&&Un){m=0;break e}break;default:U=Qe,Qe=0,Wt=null,$n(e,N,z,U)}}Lp(),m=ct;break}catch(W){Mx(e,W)}while(!0);return a&&e.shellSuspendCounter++,La=Ys=null,$e=n,M.H=r,M.A=c,Oe===null&&(We=null,De=0,Er()),m}function Lp(){for(;Oe!==null;)Bx(Oe)}function qp(e,a){var s=$e;$e|=2;var n=qx(),r=Ux();We!==e||De!==a?(ci=null,ii=Ne()+500,Gn(e,a)):Un=il(e,a);e:do try{if(Qe!==0&&Oe!==null){a=Oe;var c=Wt;t:switch(Qe){case 1:Qe=0,Wt=null,$n(e,a,c,1);break;case 2:case 9:if(Ju(c)){Qe=0,Wt=null,Hx(a);break}a=function(){Qe!==2&&Qe!==9||We!==e||(Qe=7),Ca(e)},c.then(a,a);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:Ju(c)?(Qe=0,Wt=null,Hx(a)):(Qe=0,Wt=null,$n(e,a,c,7));break;case 5:var m=null;switch(Oe.tag){case 26:m=Oe.memoizedState;case 5:case 27:var N=Oe;if(m?w0(m):N.stateNode.complete){Qe=0,Wt=null;var z=N.sibling;if(z!==null)Oe=z;else{var U=N.return;U!==null?(Oe=U,ui(U)):Oe=null}break t}}Qe=0,Wt=null,$n(e,a,c,5);break;case 6:Qe=0,Wt=null,$n(e,a,c,6);break;case 8:Mo(),ct=6;break e;default:throw Error(d(462))}}Up();break}catch(W){Mx(e,W)}while(!0);return La=Ys=null,M.H=n,M.A=r,$e=s,Oe!==null?0:(We=null,De=0,Er(),ct)}function Up(){for(;Oe!==null&&!ba();)Bx(Oe)}function Bx(e){var a=ox(e.alternate,e,Za);e.memoizedProps=e.pendingProps,a===null?ui(e):Oe=a}function Hx(e){var a=e,s=a.alternate;switch(a.tag){case 15:case 0:a=sx(s,a,a.pendingProps,a.type,void 0,De);break;case 11:a=sx(s,a,a.pendingProps,a.type.render,a.ref,De);break;case 5:Fc(a);default:ux(s,a),a=Oe=Uu(a,Za),a=ox(s,a,Za)}e.memoizedProps=e.pendingProps,a===null?ui(e):Oe=a}function $n(e,a,s,n){La=Ys=null,Fc(a),On=null,Sl=0;var r=a.return;try{if(kp(e,r,a,s,De)){ct=1,Wr(e,ra(s,e.current)),Oe=null;return}}catch(c){if(r!==null)throw Oe=r,c;ct=1,Wr(e,ra(s,e.current)),Oe=null;return}a.flags&32768?(qe||n===1?e=!0:Un||(De&536870912)!==0?e=!1:(xs=e=!0,(n===2||n===9||n===3||n===6)&&(n=Ft.current,n!==null&&n.tag===13&&(n.flags|=16384))),Gx(a,e)):ui(a)}function ui(e){var a=e;do{if((a.flags&32768)!==0){Gx(a,xs);return}e=a.return;var s=Tp(a.alternate,a,Za);if(s!==null){Oe=s;return}if(a=a.sibling,a!==null){Oe=a;return}Oe=a=e}while(a!==null);ct===0&&(ct=5)}function Gx(e,a){do{var s=Ep(e.alternate,e);if(s!==null){s.flags&=32767,Oe=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!a&&(e=e.sibling,e!==null)){Oe=e;return}Oe=e=s}while(e!==null);ct=6,Oe=null}function $x(e,a,s,n,r,c,m,N,z){e.cancelPendingCommit=null;do mi();while(bt!==0);if(($e&6)!==0)throw Error(d(327));if(a!==null){if(a===e.current)throw Error(d(177));if(c=a.lanes|a.childLanes,c|=_c,gh(e,s,c,m,N,z),e===We&&(Oe=We=null,De=0),Hn=a,ps=e,Xa=s,Ro=c,Ao=r,Ox=n,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,$p(Ge,function(){return Xx(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||n){n=M.T,M.T=null,r=P.p,P.p=2,m=$e,$e|=4;try{Op(e,a,s)}finally{$e=m,P.p=r,M.T=n}}bt=1,Yx(),Vx(),Qx()}}function Yx(){if(bt===1){bt=0;var e=ps,a=Hn,s=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||s){s=M.T,M.T=null;var n=P.p;P.p=2;var r=$e;$e|=4;try{_x(a,e);var c=Ko,m=Tu(e.containerInfo),N=c.focusedElem,z=c.selectionRange;if(m!==N&&N&&N.ownerDocument&&zu(N.ownerDocument.documentElement,N)){if(z!==null&&yc(N)){var U=z.start,W=z.end;if(W===void 0&&(W=U),"selectionStart"in N)N.selectionStart=U,N.selectionEnd=Math.min(W,N.value.length);else{var te=N.ownerDocument||document,H=te&&te.defaultView||window;if(H.getSelection){var V=H.getSelection(),pe=N.textContent.length,_e=Math.min(z.start,pe),Fe=z.end===void 0?_e:Math.min(z.end,pe);!V.extend&&_e>Fe&&(m=Fe,Fe=_e,_e=m);var D=Cu(N,_e),O=Cu(N,Fe);if(D&&O&&(V.rangeCount!==1||V.anchorNode!==D.node||V.anchorOffset!==D.offset||V.focusNode!==O.node||V.focusOffset!==O.offset)){var q=te.createRange();q.setStart(D.node,D.offset),V.removeAllRanges(),_e>Fe?(V.addRange(q),V.extend(O.node,O.offset)):(q.setEnd(O.node,O.offset),V.addRange(q))}}}}for(te=[],V=N;V=V.parentNode;)V.nodeType===1&&te.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<te.length;N++){var ee=te[N];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Si=!!Xo,Ko=Xo=null}finally{$e=r,P.p=n,M.T=s}}e.current=a,bt=2}}function Vx(){if(bt===2){bt=0;var e=ps,a=Hn,s=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||s){s=M.T,M.T=null;var n=P.p;P.p=2;var r=$e;$e|=4;try{yx(e,a.alternate,a)}finally{$e=r,P.p=n,M.T=s}}bt=3}}function Qx(){if(bt===4||bt===3){bt=0,I();var e=ps,a=Hn,s=Xa,n=Ox;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?bt=5:(bt=0,Hn=ps=null,Zx(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(hs=null),Pi(s),a=a.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(rl,a,void 0,(a.current.flags&128)===128)}catch{}if(n!==null){a=M.T,r=P.p,P.p=2,M.T=null;try{for(var c=e.onRecoverableError,m=0;m<n.length;m++){var N=n[m];c(N.value,{componentStack:N.stack})}}finally{M.T=a,P.p=r}}(Xa&3)!==0&&mi(),Ca(e),r=e.pendingLanes,(s&261930)!==0&&(r&42)!==0?e===Do?Gl++:(Gl=0,Do=e):Gl=0,$l(0)}}function Zx(e,a){(e.pooledCacheLanes&=a)===0&&(a=e.pooledCache,a!=null&&(e.pooledCache=null,Nl(a)))}function mi(){return Yx(),Vx(),Qx(),Xx()}function Xx(){if(bt!==5)return!1;var e=ps,a=Ro;Ro=0;var s=Pi(Xa),n=M.T,r=P.p;try{P.p=32>s?32:s,M.T=null,s=Ao,Ao=null;var c=ps,m=Xa;if(bt=0,Hn=ps=null,Xa=0,($e&6)!==0)throw Error(d(331));var N=$e;if($e|=4,zx(c.current),wx(c,c.current,m,s),$e=N,$l(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(rl,c)}catch{}return!0}finally{P.p=r,M.T=n,Zx(e,a)}}function Kx(e,a,s){a=ra(s,a),a=mo(e.stateNode,a,2),e=os(e,a,2),e!==null&&(cl(e,2),Ca(e))}function Ze(e,a,s){if(e.tag===3)Kx(e,e,s);else for(;a!==null;){if(a.tag===3){Kx(a,e,s);break}else if(a.tag===1){var n=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(hs===null||!hs.has(n))){e=ra(s,e),s=Jm(2),n=os(a,s,2),n!==null&&(Fm(s,n,a,e),cl(n,2),Ca(n));break}}a=a.return}}function qo(e,a,s){var n=e.pingCache;if(n===null){n=e.pingCache=new Dp;var r=new Set;n.set(a,r)}else r=n.get(a),r===void 0&&(r=new Set,n.set(a,r));r.has(s)||(To=!0,r.add(s),e=Bp.bind(null,e,a,s),a.then(e,e))}function Bp(e,a,s){var n=e.pingCache;n!==null&&n.delete(a),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,We===e&&(De&s)===s&&(ct===4||ct===3&&(De&62914560)===De&&300>Ne()-ri?($e&2)===0&&Gn(e,0):Eo|=s,Bn===De&&(Bn=0)),Ca(e)}function Jx(e,a){a===0&&(a=Yd()),e=Hs(e,a),e!==null&&(cl(e,a),Ca(e))}function Hp(e){var a=e.memoizedState,s=0;a!==null&&(s=a.retryLane),Jx(e,s)}function Gp(e,a){var s=0;switch(e.tag){case 31:case 13:var n=e.stateNode,r=e.memoizedState;r!==null&&(s=r.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(d(314))}n!==null&&n.delete(a),Jx(e,s)}function $p(e,a){return Qt(e,a)}var xi=null,Yn=null,Uo=!1,fi=!1,Bo=!1,ys=0;function Ca(e){e!==Yn&&e.next===null&&(Yn===null?xi=Yn=e:Yn=Yn.next=e),fi=!0,Uo||(Uo=!0,Vp())}function $l(e,a){if(!Bo&&fi){Bo=!0;do for(var s=!1,n=xi;n!==null;){if(e!==0){var r=n.pendingLanes;if(r===0)var c=0;else{var m=n.suspendedLanes,N=n.pingedLanes;c=(1<<31-Xt(42|e)+1)-1,c&=r&~(m&~N),c=c&201326741?c&201326741|1:c?c|2:0}c!==0&&(s=!0,Px(n,c))}else c=De,c=yr(n,n===We?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(c&3)===0||il(n,c)||(s=!0,Px(n,c));n=n.next}while(s);Bo=!1}}function Yp(){Fx()}function Fx(){fi=Uo=!1;var e=0;ys!==0&&eg()&&(e=ys);for(var a=Ne(),s=null,n=xi;n!==null;){var r=n.next,c=Ix(n,a);c===0?(n.next=null,s===null?xi=r:s.next=r,r===null&&(Yn=s)):(s=n,(e!==0||(c&3)!==0)&&(fi=!0)),n=r}bt!==0&&bt!==5||$l(e),ys!==0&&(ys=0)}function Ix(e,a){for(var s=e.suspendedLanes,n=e.pingedLanes,r=e.expirationTimes,c=e.pendingLanes&-62914561;0<c;){var m=31-Xt(c),N=1<<m,z=r[m];z===-1?((N&s)===0||(N&n)!==0)&&(r[m]=ph(N,a)):z<=a&&(e.expiredLanes|=N),c&=~N}if(a=We,s=De,s=yr(e,e===a?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,s===0||e===a&&(Qe===2||Qe===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&mt(n),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||il(e,s)){if(a=s&-s,a===e.callbackPriority)return a;switch(n!==null&&mt(n),Pi(s)){case 2:case 8:s=ve;break;case 32:s=Ge;break;case 268435456:s=on;break;default:s=Ge}return n=Wx.bind(null,e),s=Qt(s,n),e.callbackPriority=a,e.callbackNode=s,a}return n!==null&&n!==null&&mt(n),e.callbackPriority=2,e.callbackNode=null,2}function Wx(e,a){if(bt!==0&&bt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(mi()&&e.callbackNode!==s)return null;var n=De;return n=yr(e,e===We?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(Ax(e,n,a),Ix(e,Ne()),e.callbackNode!=null&&e.callbackNode===s?Wx.bind(null,e):null)}function Px(e,a){if(mi())return null;Ax(e,a,!0)}function Vp(){ag(function(){($e&6)!==0?Qt($,Yp):Fx()})}function Ho(){if(ys===0){var e=zn;e===0&&(e=hr,hr<<=1,(hr&261888)===0&&(hr=256)),ys=e}return ys}function e0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Nr(""+e)}function t0(e,a){var s=a.ownerDocument.createElement("input");return s.name=a.name,s.value=a.value,e.id&&s.setAttribute("form",e.id),a.parentNode.insertBefore(s,a),e=new FormData(e),s.parentNode.removeChild(s),e}function Qp(e,a,s,n,r){if(a==="submit"&&s&&s.stateNode===r){var c=e0((r[Mt]||null).action),m=n.submitter;m&&(a=(a=m[Mt]||null)?e0(a.formAction):m.getAttribute("formAction"),a!==null&&(c=a,m=null));var N=new kr("action","action",null,n,r);e.push({event:N,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(ys!==0){var z=m?t0(r,m):new FormData(r);lo(s,{pending:!0,data:z,method:r.method,action:c},null,z)}}else typeof c=="function"&&(N.preventDefault(),z=m?t0(r,m):new FormData(r),lo(s,{pending:!0,data:z,method:r.method,action:c},c,z))},currentTarget:r}]})}}for(var Go=0;Go<Nc.length;Go++){var $o=Nc[Go],Zp=$o.toLowerCase(),Xp=$o[0].toUpperCase()+$o.slice(1);va(Zp,"on"+Xp)}va(Ru,"onAnimationEnd"),va(Au,"onAnimationIteration"),va(Du,"onAnimationStart"),va("dblclick","onDoubleClick"),va("focusin","onFocus"),va("focusout","onBlur"),va(op,"onTransitionRun"),va(dp,"onTransitionStart"),va(up,"onTransitionCancel"),va(Mu,"onTransitionEnd"),fn("onMouseEnter",["mouseout","mouseover"]),fn("onMouseLeave",["mouseout","mouseover"]),fn("onPointerEnter",["pointerout","pointerover"]),fn("onPointerLeave",["pointerout","pointerover"]),Ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ls("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yl));function a0(e,a){a=(a&4)!==0;for(var s=0;s<e.length;s++){var n=e[s],r=n.event;n=n.listeners;e:{var c=void 0;if(a)for(var m=n.length-1;0<=m;m--){var N=n[m],z=N.instance,U=N.currentTarget;if(N=N.listener,z!==c&&r.isPropagationStopped())break e;c=N,r.currentTarget=U;try{c(r)}catch(W){Tr(W)}r.currentTarget=null,c=z}else for(m=0;m<n.length;m++){if(N=n[m],z=N.instance,U=N.currentTarget,N=N.listener,z!==c&&r.isPropagationStopped())break e;c=N,r.currentTarget=U;try{c(r)}catch(W){Tr(W)}r.currentTarget=null,c=z}}}}function Re(e,a){var s=a[ec];s===void 0&&(s=a[ec]=new Set);var n=e+"__bubble";s.has(n)||(s0(a,e,2,!1),s.add(n))}function Yo(e,a,s){var n=0;a&&(n|=4),s0(s,e,n,a)}var hi="_reactListening"+Math.random().toString(36).slice(2);function Vo(e){if(!e[hi]){e[hi]=!0,Fd.forEach(function(s){s!=="selectionchange"&&(Kp.has(s)||Yo(s,!1,e),Yo(s,!0,e))});var a=e.nodeType===9?e:e.ownerDocument;a===null||a[hi]||(a[hi]=!0,Yo("selectionchange",!1,a))}}function s0(e,a,s,n){switch(R0(a)){case 2:var r=Ng;break;case 8:r=_g;break;default:r=ld}s=r.bind(null,a,s,e),r=void 0,!oc||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(r=!0),n?r!==void 0?e.addEventListener(a,s,{capture:!0,passive:r}):e.addEventListener(a,s,!0):r!==void 0?e.addEventListener(a,s,{passive:r}):e.addEventListener(a,s,!1)}function Qo(e,a,s,n,r){var c=n;if((a&1)===0&&(a&2)===0&&n!==null)e:for(;;){if(n===null)return;var m=n.tag;if(m===3||m===4){var N=n.stateNode.containerInfo;if(N===r)break;if(m===4)for(m=n.return;m!==null;){var z=m.tag;if((z===3||z===4)&&m.stateNode.containerInfo===r)return;m=m.return}for(;N!==null;){if(m=un(N),m===null)return;if(z=m.tag,z===5||z===6||z===26||z===27){n=c=m;continue e}N=N.parentNode}}n=n.return}cu(function(){var U=c,W=ic(s),te=[];e:{var H=Lu.get(e);if(H!==void 0){var V=kr,pe=e;switch(e){case"keypress":if(Sr(s)===0)break e;case"keydown":case"keyup":V=Gh;break;case"focusin":pe="focus",V=xc;break;case"focusout":pe="blur",V=xc;break;case"beforeblur":case"afterblur":V=xc;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=uu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=Th;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=Vh;break;case Ru:case Au:case Du:V=Rh;break;case Mu:V=Zh;break;case"scroll":case"scrollend":V=Ch;break;case"wheel":V=Kh;break;case"copy":case"cut":case"paste":V=Dh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=xu;break;case"toggle":case"beforetoggle":V=Fh}var _e=(a&4)!==0,Fe=!_e&&(e==="scroll"||e==="scrollend"),D=_e?H!==null?H+"Capture":null:H;_e=[];for(var O=U,q;O!==null;){var ee=O;if(q=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||q===null||D===null||(ee=ul(O,D),ee!=null&&_e.push(Vl(O,ee,q))),Fe)break;O=O.return}0<_e.length&&(H=new V(H,pe,null,s,W),te.push({event:H,listeners:_e}))}}if((a&7)===0){e:{if(H=e==="mouseover"||e==="pointerover",V=e==="mouseout"||e==="pointerout",H&&s!==rc&&(pe=s.relatedTarget||s.fromElement)&&(un(pe)||pe[dn]))break e;if((V||H)&&(H=W.window===W?W:(H=W.ownerDocument)?H.defaultView||H.parentWindow:window,V?(pe=s.relatedTarget||s.toElement,V=U,pe=pe?un(pe):null,pe!==null&&(Fe=f(pe),_e=pe.tag,pe!==Fe||_e!==5&&_e!==27&&_e!==6)&&(pe=null)):(V=null,pe=U),V!==pe)){if(_e=uu,ee="onMouseLeave",D="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(_e=xu,ee="onPointerLeave",D="onPointerEnter",O="pointer"),Fe=V==null?H:dl(V),q=pe==null?H:dl(pe),H=new _e(ee,O+"leave",V,s,W),H.target=Fe,H.relatedTarget=q,ee=null,un(W)===U&&(_e=new _e(D,O+"enter",pe,s,W),_e.target=q,_e.relatedTarget=Fe,ee=_e),Fe=ee,V&&pe)t:{for(_e=Jp,D=V,O=pe,q=0,ee=D;ee;ee=_e(ee))q++;ee=0;for(var je=O;je;je=_e(je))ee++;for(;0<q-ee;)D=_e(D),q--;for(;0<ee-q;)O=_e(O),ee--;for(;q--;){if(D===O||O!==null&&D===O.alternate){_e=D;break t}D=_e(D),O=_e(O)}_e=null}else _e=null;V!==null&&n0(te,H,V,_e,!1),pe!==null&&Fe!==null&&n0(te,Fe,pe,_e,!0)}}e:{if(H=U?dl(U):window,V=H.nodeName&&H.nodeName.toLowerCase(),V==="select"||V==="input"&&H.type==="file")var Be=ju;else if(bu(H))if(Nu)Be=rp;else{Be=np;var ge=sp}else V=H.nodeName,!V||V.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?U&&lc(U.elementType)&&(Be=ju):Be=lp;if(Be&&(Be=Be(e,U))){vu(te,Be,s,W);break e}ge&&ge(e,H,U),e==="focusout"&&U&&H.type==="number"&&U.memoizedProps.value!=null&&nc(H,"number",H.value)}switch(ge=U?dl(U):window,e){case"focusin":(bu(ge)||ge.contentEditable==="true")&&(vn=ge,bc=U,bl=null);break;case"focusout":bl=bc=vn=null;break;case"mousedown":vc=!0;break;case"contextmenu":case"mouseup":case"dragend":vc=!1,Eu(te,s,W);break;case"selectionchange":if(cp)break;case"keydown":case"keyup":Eu(te,s,W)}var Te;if(hc)e:{switch(e){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else bn?gu(e,s)&&(Me="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Me="onCompositionStart");Me&&(fu&&s.locale!=="ko"&&(bn||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&bn&&(Te=ou()):(as=W,dc="value"in as?as.value:as.textContent,bn=!0)),ge=pi(U,Me),0<ge.length&&(Me=new mu(Me,e,null,s,W),te.push({event:Me,listeners:ge}),Te?Me.data=Te:(Te=yu(s),Te!==null&&(Me.data=Te)))),(Te=Wh?Ph(e,s):ep(e,s))&&(Me=pi(U,"onBeforeInput"),0<Me.length&&(ge=new mu("onBeforeInput","beforeinput",null,s,W),te.push({event:ge,listeners:Me}),ge.data=Te)),Qp(te,e,U,s,W)}a0(te,a)})}function Vl(e,a,s){return{instance:e,listener:a,currentTarget:s}}function pi(e,a){for(var s=a+"Capture",n=[];e!==null;){var r=e,c=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||c===null||(r=ul(e,s),r!=null&&n.unshift(Vl(e,r,c)),r=ul(e,a),r!=null&&n.push(Vl(e,r,c))),e.tag===3)return n;e=e.return}return[]}function Jp(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function n0(e,a,s,n,r){for(var c=a._reactName,m=[];s!==null&&s!==n;){var N=s,z=N.alternate,U=N.stateNode;if(N=N.tag,z!==null&&z===n)break;N!==5&&N!==26&&N!==27||U===null||(z=U,r?(U=ul(s,c),U!=null&&m.unshift(Vl(s,U,z))):r||(U=ul(s,c),U!=null&&m.push(Vl(s,U,z)))),s=s.return}m.length!==0&&e.push({event:a,listeners:m})}var Fp=/\r\n?/g,Ip=/\u0000|\uFFFD/g;function l0(e){return(typeof e=="string"?e:""+e).replace(Fp,`
`).replace(Ip,"")}function r0(e,a){return a=l0(a),l0(e)===a}function Je(e,a,s,n,r,c){switch(s){case"children":typeof n=="string"?a==="body"||a==="textarea"&&n===""||pn(e,n):(typeof n=="number"||typeof n=="bigint")&&a!=="body"&&pn(e,""+n);break;case"className":vr(e,"class",n);break;case"tabIndex":vr(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":vr(e,s,n);break;case"style":ru(e,n,c);break;case"data":if(a!=="object"){vr(e,"data",n);break}case"src":case"href":if(n===""&&(a!=="a"||s!=="href")){e.removeAttribute(s);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(s);break}n=Nr(""+n),e.setAttribute(s,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof c=="function"&&(s==="formAction"?(a!=="input"&&Je(e,a,"name",r.name,r,null),Je(e,a,"formEncType",r.formEncType,r,null),Je(e,a,"formMethod",r.formMethod,r,null),Je(e,a,"formTarget",r.formTarget,r,null)):(Je(e,a,"encType",r.encType,r,null),Je(e,a,"method",r.method,r,null),Je(e,a,"target",r.target,r,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(s);break}n=Nr(""+n),e.setAttribute(s,n);break;case"onClick":n!=null&&(e.onclick=Ra);break;case"onScroll":n!=null&&Re("scroll",e);break;case"onScrollEnd":n!=null&&Re("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(d(61));if(s=n.__html,s!=null){if(r.children!=null)throw Error(d(60));e.innerHTML=s}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}s=Nr(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(s,""+n):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":n===!0?e.setAttribute(s,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(s,n):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(s,n):e.removeAttribute(s);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(s):e.setAttribute(s,n);break;case"popover":Re("beforetoggle",e),Re("toggle",e),br(e,"popover",n);break;case"xlinkActuate":Oa(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":Oa(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":Oa(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":Oa(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":Oa(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":Oa(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":Oa(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":Oa(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":Oa(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":br(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=wh.get(s)||s,br(e,s,n))}}function Zo(e,a,s,n,r,c){switch(s){case"style":ru(e,n,c);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(d(61));if(s=n.__html,s!=null){if(r.children!=null)throw Error(d(60));e.innerHTML=s}}break;case"children":typeof n=="string"?pn(e,n):(typeof n=="number"||typeof n=="bigint")&&pn(e,""+n);break;case"onScroll":n!=null&&Re("scroll",e);break;case"onScrollEnd":n!=null&&Re("scrollend",e);break;case"onClick":n!=null&&(e.onclick=Ra);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Id.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(r=s.endsWith("Capture"),a=s.slice(2,r?s.length-7:void 0),c=e[Mt]||null,c=c!=null?c[s]:null,typeof c=="function"&&e.removeEventListener(a,c,r),typeof n=="function")){typeof c!="function"&&c!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(a,n,r);break e}s in e?e[s]=n:n===!0?e.setAttribute(s,""):br(e,s,n)}}}function Et(e,a,s){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",e),Re("load",e);var n=!1,r=!1,c;for(c in s)if(s.hasOwnProperty(c)){var m=s[c];if(m!=null)switch(c){case"src":n=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(d(137,a));default:Je(e,a,c,m,s,null)}}r&&Je(e,a,"srcSet",s.srcSet,s,null),n&&Je(e,a,"src",s.src,s,null);return;case"input":Re("invalid",e);var N=c=m=r=null,z=null,U=null;for(n in s)if(s.hasOwnProperty(n)){var W=s[n];if(W!=null)switch(n){case"name":r=W;break;case"type":m=W;break;case"checked":z=W;break;case"defaultChecked":U=W;break;case"value":c=W;break;case"defaultValue":N=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(d(137,a));break;default:Je(e,a,n,W,s,null)}}au(e,c,N,z,U,m,r,!1);return;case"select":Re("invalid",e),n=m=c=null;for(r in s)if(s.hasOwnProperty(r)&&(N=s[r],N!=null))switch(r){case"value":c=N;break;case"defaultValue":m=N;break;case"multiple":n=N;default:Je(e,a,r,N,s,null)}a=c,s=m,e.multiple=!!n,a!=null?hn(e,!!n,a,!1):s!=null&&hn(e,!!n,s,!0);return;case"textarea":Re("invalid",e),c=r=n=null;for(m in s)if(s.hasOwnProperty(m)&&(N=s[m],N!=null))switch(m){case"value":n=N;break;case"defaultValue":r=N;break;case"children":c=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(d(91));break;default:Je(e,a,m,N,s,null)}nu(e,n,r,c);return;case"option":for(z in s)s.hasOwnProperty(z)&&(n=s[z],n!=null)&&(z==="selected"?e.selected=n&&typeof n!="function"&&typeof n!="symbol":Je(e,a,z,n,s,null));return;case"dialog":Re("beforetoggle",e),Re("toggle",e),Re("cancel",e),Re("close",e);break;case"iframe":case"object":Re("load",e);break;case"video":case"audio":for(n=0;n<Yl.length;n++)Re(Yl[n],e);break;case"image":Re("error",e),Re("load",e);break;case"details":Re("toggle",e);break;case"embed":case"source":case"link":Re("error",e),Re("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in s)if(s.hasOwnProperty(U)&&(n=s[U],n!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(d(137,a));default:Je(e,a,U,n,s,null)}return;default:if(lc(a)){for(W in s)s.hasOwnProperty(W)&&(n=s[W],n!==void 0&&Zo(e,a,W,n,s,void 0));return}}for(N in s)s.hasOwnProperty(N)&&(n=s[N],n!=null&&Je(e,a,N,n,s,null))}function Wp(e,a,s,n){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,c=null,m=null,N=null,z=null,U=null,W=null;for(V in s){var te=s[V];if(s.hasOwnProperty(V)&&te!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":z=te;default:n.hasOwnProperty(V)||Je(e,a,V,null,n,te)}}for(var H in n){var V=n[H];if(te=s[H],n.hasOwnProperty(H)&&(V!=null||te!=null))switch(H){case"type":c=V;break;case"name":r=V;break;case"checked":U=V;break;case"defaultChecked":W=V;break;case"value":m=V;break;case"defaultValue":N=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(d(137,a));break;default:V!==te&&Je(e,a,H,V,n,te)}}sc(e,m,N,z,U,W,c,r);return;case"select":V=m=N=H=null;for(c in s)if(z=s[c],s.hasOwnProperty(c)&&z!=null)switch(c){case"value":break;case"multiple":V=z;default:n.hasOwnProperty(c)||Je(e,a,c,null,n,z)}for(r in n)if(c=n[r],z=s[r],n.hasOwnProperty(r)&&(c!=null||z!=null))switch(r){case"value":H=c;break;case"defaultValue":N=c;break;case"multiple":m=c;default:c!==z&&Je(e,a,r,c,n,z)}a=N,s=m,n=V,H!=null?hn(e,!!s,H,!1):!!n!=!!s&&(a!=null?hn(e,!!s,a,!0):hn(e,!!s,s?[]:"",!1));return;case"textarea":V=H=null;for(N in s)if(r=s[N],s.hasOwnProperty(N)&&r!=null&&!n.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:Je(e,a,N,null,n,r)}for(m in n)if(r=n[m],c=s[m],n.hasOwnProperty(m)&&(r!=null||c!=null))switch(m){case"value":H=r;break;case"defaultValue":V=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(d(91));break;default:r!==c&&Je(e,a,m,r,n,c)}su(e,H,V);return;case"option":for(var pe in s)H=s[pe],s.hasOwnProperty(pe)&&H!=null&&!n.hasOwnProperty(pe)&&(pe==="selected"?e.selected=!1:Je(e,a,pe,null,n,H));for(z in n)H=n[z],V=s[z],n.hasOwnProperty(z)&&H!==V&&(H!=null||V!=null)&&(z==="selected"?e.selected=H&&typeof H!="function"&&typeof H!="symbol":Je(e,a,z,H,n,V));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in s)H=s[_e],s.hasOwnProperty(_e)&&H!=null&&!n.hasOwnProperty(_e)&&Je(e,a,_e,null,n,H);for(U in n)if(H=n[U],V=s[U],n.hasOwnProperty(U)&&H!==V&&(H!=null||V!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(d(137,a));break;default:Je(e,a,U,H,n,V)}return;default:if(lc(a)){for(var Fe in s)H=s[Fe],s.hasOwnProperty(Fe)&&H!==void 0&&!n.hasOwnProperty(Fe)&&Zo(e,a,Fe,void 0,n,H);for(W in n)H=n[W],V=s[W],!n.hasOwnProperty(W)||H===V||H===void 0&&V===void 0||Zo(e,a,W,H,n,V);return}}for(var D in s)H=s[D],s.hasOwnProperty(D)&&H!=null&&!n.hasOwnProperty(D)&&Je(e,a,D,null,n,H);for(te in n)H=n[te],V=s[te],!n.hasOwnProperty(te)||H===V||H==null&&V==null||Je(e,a,te,H,n,V)}function i0(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Pp(){if(typeof performance.getEntriesByType=="function"){for(var e=0,a=0,s=performance.getEntriesByType("resource"),n=0;n<s.length;n++){var r=s[n],c=r.transferSize,m=r.initiatorType,N=r.duration;if(c&&N&&i0(m)){for(m=0,N=r.responseEnd,n+=1;n<s.length;n++){var z=s[n],U=z.startTime;if(U>N)break;var W=z.transferSize,te=z.initiatorType;W&&i0(te)&&(z=z.responseEnd,m+=W*(z<N?1:(N-U)/(z-U)))}if(--n,a+=8*(c+m)/(r.duration/1e3),e++,10<e)break}}if(0<e)return a/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Xo=null,Ko=null;function gi(e){return e.nodeType===9?e:e.ownerDocument}function c0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function o0(e,a){if(e===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&a==="foreignObject"?0:e}function Jo(e,a){return e==="textarea"||e==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Fo=null;function eg(){var e=window.event;return e&&e.type==="popstate"?e===Fo?!1:(Fo=e,!0):(Fo=null,!1)}var d0=typeof setTimeout=="function"?setTimeout:void 0,tg=typeof clearTimeout=="function"?clearTimeout:void 0,u0=typeof Promise=="function"?Promise:void 0,ag=typeof queueMicrotask=="function"?queueMicrotask:typeof u0<"u"?function(e){return u0.resolve(null).then(e).catch(sg)}:d0;function sg(e){setTimeout(function(){throw e})}function bs(e){return e==="head"}function m0(e,a){var s=a,n=0;do{var r=s.nextSibling;if(e.removeChild(s),r&&r.nodeType===8)if(s=r.data,s==="/$"||s==="/&"){if(n===0){e.removeChild(r),Xn(a);return}n--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")n++;else if(s==="html")Ql(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,Ql(s);for(var c=s.firstChild;c;){var m=c.nextSibling,N=c.nodeName;c[ol]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&c.rel.toLowerCase()==="stylesheet"||s.removeChild(c),c=m}}else s==="body"&&Ql(e.ownerDocument.body);s=r}while(s);Xn(a)}function x0(e,a){var s=e;e=0;do{var n=s.nextSibling;if(s.nodeType===1?a?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(a?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),n&&n.nodeType===8)if(s=n.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=n}while(s)}function Io(e){var a=e.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var s=a;switch(a=a.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Io(s),tc(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function ng(e,a,s,n){for(;e.nodeType===1;){var r=s;if(e.nodeName.toLowerCase()!==a.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[ol])switch(a){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(c=e.getAttribute("rel"),c==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(c!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(c=e.getAttribute("src"),(c!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&c&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(a==="input"&&e.type==="hidden"){var c=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===c)return e}else return e;if(e=ua(e.nextSibling),e===null)break}return null}function lg(e,a,s){if(a==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=ua(e.nextSibling),e===null))return null;return e}function f0(e,a){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=ua(e.nextSibling),e===null))return null;return e}function Wo(e){return e.data==="$?"||e.data==="$~"}function Po(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function rg(e,a){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=a;else if(e.data!=="$?"||s.readyState!=="loading")a();else{var n=function(){a(),s.removeEventListener("DOMContentLoaded",n)};s.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function ua(e){for(;e!=null;e=e.nextSibling){var a=e.nodeType;if(a===1||a===3)break;if(a===8){if(a=e.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return e}var ed=null;function h0(e){e=e.nextSibling;for(var a=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(a===0)return ua(e.nextSibling);a--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||a++}e=e.nextSibling}return null}function p0(e){e=e.previousSibling;for(var a=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(a===0)return e;a--}else s!=="/$"&&s!=="/&"||a++}e=e.previousSibling}return null}function g0(e,a,s){switch(a=gi(s),e){case"html":if(e=a.documentElement,!e)throw Error(d(452));return e;case"head":if(e=a.head,!e)throw Error(d(453));return e;case"body":if(e=a.body,!e)throw Error(d(454));return e;default:throw Error(d(451))}}function Ql(e){for(var a=e.attributes;a.length;)e.removeAttributeNode(a[0]);tc(e)}var ma=new Map,y0=new Set;function yi(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ka=P.d;P.d={f:ig,r:cg,D:og,C:dg,L:ug,m:mg,X:fg,S:xg,M:hg};function ig(){var e=Ka.f(),a=oi();return e||a}function cg(e){var a=mn(e);a!==null&&a.tag===5&&a.type==="form"?Mm(a):Ka.r(e)}var Vn=typeof document>"u"?null:document;function b0(e,a,s){var n=Vn;if(n&&typeof a=="string"&&a){var r=na(a);r='link[rel="'+e+'"][href="'+r+'"]',typeof s=="string"&&(r+='[crossorigin="'+s+'"]'),y0.has(r)||(y0.add(r),e={rel:e,crossOrigin:s,href:a},n.querySelector(r)===null&&(a=n.createElement("link"),Et(a,"link",e),jt(a),n.head.appendChild(a)))}}function og(e){Ka.D(e),b0("dns-prefetch",e,null)}function dg(e,a){Ka.C(e,a),b0("preconnect",e,a)}function ug(e,a,s){Ka.L(e,a,s);var n=Vn;if(n&&e&&a){var r='link[rel="preload"][as="'+na(a)+'"]';a==="image"&&s&&s.imageSrcSet?(r+='[imagesrcset="'+na(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(r+='[imagesizes="'+na(s.imageSizes)+'"]')):r+='[href="'+na(e)+'"]';var c=r;switch(a){case"style":c=Qn(e);break;case"script":c=Zn(e)}ma.has(c)||(e=b({rel:"preload",href:a==="image"&&s&&s.imageSrcSet?void 0:e,as:a},s),ma.set(c,e),n.querySelector(r)!==null||a==="style"&&n.querySelector(Zl(c))||a==="script"&&n.querySelector(Xl(c))||(a=n.createElement("link"),Et(a,"link",e),jt(a),n.head.appendChild(a)))}}function mg(e,a){Ka.m(e,a);var s=Vn;if(s&&e){var n=a&&typeof a.as=="string"?a.as:"script",r='link[rel="modulepreload"][as="'+na(n)+'"][href="'+na(e)+'"]',c=r;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":c=Zn(e)}if(!ma.has(c)&&(e=b({rel:"modulepreload",href:e},a),ma.set(c,e),s.querySelector(r)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Xl(c)))return}n=s.createElement("link"),Et(n,"link",e),jt(n),s.head.appendChild(n)}}}function xg(e,a,s){Ka.S(e,a,s);var n=Vn;if(n&&e){var r=xn(n).hoistableStyles,c=Qn(e);a=a||"default";var m=r.get(c);if(!m){var N={loading:0,preload:null};if(m=n.querySelector(Zl(c)))N.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":a},s),(s=ma.get(c))&&td(e,s);var z=m=n.createElement("link");jt(z),Et(z,"link",e),z._p=new Promise(function(U,W){z.onload=U,z.onerror=W}),z.addEventListener("load",function(){N.loading|=1}),z.addEventListener("error",function(){N.loading|=2}),N.loading|=4,bi(m,a,n)}m={type:"stylesheet",instance:m,count:1,state:N},r.set(c,m)}}}function fg(e,a){Ka.X(e,a);var s=Vn;if(s&&e){var n=xn(s).hoistableScripts,r=Zn(e),c=n.get(r);c||(c=s.querySelector(Xl(r)),c||(e=b({src:e,async:!0},a),(a=ma.get(r))&&ad(e,a),c=s.createElement("script"),jt(c),Et(c,"link",e),s.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},n.set(r,c))}}function hg(e,a){Ka.M(e,a);var s=Vn;if(s&&e){var n=xn(s).hoistableScripts,r=Zn(e),c=n.get(r);c||(c=s.querySelector(Xl(r)),c||(e=b({src:e,async:!0,type:"module"},a),(a=ma.get(r))&&ad(e,a),c=s.createElement("script"),jt(c),Et(c,"link",e),s.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},n.set(r,c))}}function v0(e,a,s,n){var r=(r=de.current)?yi(r):null;if(!r)throw Error(d(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(a=Qn(s.href),s=xn(r).hoistableStyles,n=s.get(a),n||(n={type:"style",instance:null,count:0,state:null},s.set(a,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=Qn(s.href);var c=xn(r).hoistableStyles,m=c.get(e);if(m||(r=r.ownerDocument||r,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,m),(c=r.querySelector(Zl(e)))&&!c._p&&(m.instance=c,m.state.loading=5),ma.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},ma.set(e,s),c||pg(r,e,s,m.state))),a&&n===null)throw Error(d(528,""));return m}if(a&&n!==null)throw Error(d(529,""));return null;case"script":return a=s.async,s=s.src,typeof s=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Zn(s),s=xn(r).hoistableScripts,n=s.get(a),n||(n={type:"script",instance:null,count:0,state:null},s.set(a,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(d(444,e))}}function Qn(e){return'href="'+na(e)+'"'}function Zl(e){return'link[rel="stylesheet"]['+e+"]"}function j0(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function pg(e,a,s,n){e.querySelector('link[rel="preload"][as="style"]['+a+"]")?n.loading=1:(a=e.createElement("link"),n.preload=a,a.addEventListener("load",function(){return n.loading|=1}),a.addEventListener("error",function(){return n.loading|=2}),Et(a,"link",s),jt(a),e.head.appendChild(a))}function Zn(e){return'[src="'+na(e)+'"]'}function Xl(e){return"script[async]"+e}function N0(e,a,s){if(a.count++,a.instance===null)switch(a.type){case"style":var n=e.querySelector('style[data-href~="'+na(s.href)+'"]');if(n)return a.instance=n,jt(n),n;var r=b({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),jt(n),Et(n,"style",r),bi(n,s.precedence,e),a.instance=n;case"stylesheet":r=Qn(s.href);var c=e.querySelector(Zl(r));if(c)return a.state.loading|=4,a.instance=c,jt(c),c;n=j0(s),(r=ma.get(r))&&td(n,r),c=(e.ownerDocument||e).createElement("link"),jt(c);var m=c;return m._p=new Promise(function(N,z){m.onload=N,m.onerror=z}),Et(c,"link",n),a.state.loading|=4,bi(c,s.precedence,e),a.instance=c;case"script":return c=Zn(s.src),(r=e.querySelector(Xl(c)))?(a.instance=r,jt(r),r):(n=s,(r=ma.get(c))&&(n=b({},s),ad(n,r)),e=e.ownerDocument||e,r=e.createElement("script"),jt(r),Et(r,"link",n),e.head.appendChild(r),a.instance=r);case"void":return null;default:throw Error(d(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(n=a.instance,a.state.loading|=4,bi(n,s.precedence,e));return a.instance}function bi(e,a,s){for(var n=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=n.length?n[n.length-1]:null,c=r,m=0;m<n.length;m++){var N=n[m];if(N.dataset.precedence===a)c=N;else if(c!==r)break}c?c.parentNode.insertBefore(e,c.nextSibling):(a=s.nodeType===9?s.head:s,a.insertBefore(e,a.firstChild))}function td(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.title==null&&(e.title=a.title)}function ad(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.integrity==null&&(e.integrity=a.integrity)}var vi=null;function _0(e,a,s){if(vi===null){var n=new Map,r=vi=new Map;r.set(s,n)}else r=vi,n=r.get(s),n||(n=new Map,r.set(s,n));if(n.has(e))return n;for(n.set(e,null),s=s.getElementsByTagName(e),r=0;r<s.length;r++){var c=s[r];if(!(c[ol]||c[kt]||e==="link"&&c.getAttribute("rel")==="stylesheet")&&c.namespaceURI!=="http://www.w3.org/2000/svg"){var m=c.getAttribute(a)||"";m=e+m;var N=n.get(m);N?N.push(c):n.set(m,[c])}}return n}function S0(e,a,s){e=e.ownerDocument||e,e.head.insertBefore(s,a==="title"?e.querySelector("head > title"):null)}function gg(e,a,s){if(s===1||a.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(e=a.disabled,typeof a.precedence=="string"&&e==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function w0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function yg(e,a,s,n){if(s.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var r=Qn(n.href),c=a.querySelector(Zl(r));if(c){a=c._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(e.count++,e=ji.bind(e),a.then(e,e)),s.state.loading|=4,s.instance=c,jt(c);return}c=a.ownerDocument||a,n=j0(n),(r=ma.get(r))&&td(n,r),c=c.createElement("link"),jt(c);var m=c;m._p=new Promise(function(N,z){m.onload=N,m.onerror=z}),Et(c,"link",n),s.instance=c}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,a),(a=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=ji.bind(e),a.addEventListener("load",s),a.addEventListener("error",s))}}var sd=0;function bg(e,a){return e.stylesheets&&e.count===0&&_i(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var n=setTimeout(function(){if(e.stylesheets&&_i(e,e.stylesheets),e.unsuspend){var c=e.unsuspend;e.unsuspend=null,c()}},6e4+a);0<e.imgBytes&&sd===0&&(sd=62500*Pp());var r=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&_i(e,e.stylesheets),e.unsuspend)){var c=e.unsuspend;e.unsuspend=null,c()}},(e.imgBytes>sd?50:800)+a);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(r)}}:null}function ji(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)_i(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ni=null;function _i(e,a){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ni=new Map,a.forEach(vg,e),Ni=null,ji.call(e))}function vg(e,a){if(!(a.state.loading&4)){var s=Ni.get(e);if(s)var n=s.get(null);else{s=new Map,Ni.set(e,s);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),c=0;c<r.length;c++){var m=r[c];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(s.set(m.dataset.precedence,m),n=m)}n&&s.set(null,n)}r=a.instance,m=r.getAttribute("data-precedence"),c=s.get(m)||n,c===n&&s.set(null,r),s.set(m,r),this.count++,n=ji.bind(this),r.addEventListener("load",n),r.addEventListener("error",n),c?c.parentNode.insertBefore(r,c.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),a.state.loading|=4}}var Kl={$$typeof:B,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function jg(e,a,s,n,r,c,m,N,z){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ii(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ii(0),this.hiddenUpdates=Ii(null),this.identifierPrefix=n,this.onUncaughtError=r,this.onCaughtError=c,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function k0(e,a,s,n,r,c,m,N,z,U,W,te){return e=new jg(e,a,s,m,z,U,W,te,N),a=1,c===!0&&(a|=24),c=Jt(3,null,null,a),e.current=c,c.stateNode=e,a=Mc(),a.refCount++,e.pooledCache=a,a.refCount++,c.memoizedState={element:n,isDehydrated:s,cache:a},Bc(c),e}function C0(e){return e?(e=_n,e):_n}function z0(e,a,s,n,r,c){r=C0(r),n.context===null?n.context=r:n.pendingContext=r,n=cs(a),n.payload={element:s},c=c===void 0?null:c,c!==null&&(n.callback=c),s=os(e,n,a),s!==null&&(Gt(s,e,a),kl(s,e,a))}function T0(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<a?s:a}}function nd(e,a){T0(e,a),(e=e.alternate)&&T0(e,a)}function E0(e){if(e.tag===13||e.tag===31){var a=Hs(e,67108864);a!==null&&Gt(a,e,67108864),nd(e,67108864)}}function O0(e){if(e.tag===13||e.tag===31){var a=ea();a=Wi(a);var s=Hs(e,a);s!==null&&Gt(s,e,a),nd(e,a)}}var Si=!0;function Ng(e,a,s,n){var r=M.T;M.T=null;var c=P.p;try{P.p=2,ld(e,a,s,n)}finally{P.p=c,M.T=r}}function _g(e,a,s,n){var r=M.T;M.T=null;var c=P.p;try{P.p=8,ld(e,a,s,n)}finally{P.p=c,M.T=r}}function ld(e,a,s,n){if(Si){var r=rd(n);if(r===null)Qo(e,a,n,wi,s),A0(e,n);else if(wg(r,e,a,s,n))n.stopPropagation();else if(A0(e,n),a&4&&-1<Sg.indexOf(e)){for(;r!==null;){var c=mn(r);if(c!==null)switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var m=Ms(c.pendingLanes);if(m!==0){var N=c;for(N.pendingLanes|=2,N.entangledLanes|=2;m;){var z=1<<31-Xt(m);N.entanglements[1]|=z,m&=~z}Ca(c),($e&6)===0&&(ii=Ne()+500,$l(0))}}break;case 31:case 13:N=Hs(c,2),N!==null&&Gt(N,c,2),oi(),nd(c,2)}if(c=rd(n),c===null&&Qo(e,a,n,wi,s),c===r)break;r=c}r!==null&&n.stopPropagation()}else Qo(e,a,n,null,s)}}function rd(e){return e=ic(e),id(e)}var wi=null;function id(e){if(wi=null,e=un(e),e!==null){var a=f(e);if(a===null)e=null;else{var s=a.tag;if(s===13){if(e=p(a),e!==null)return e;e=null}else if(s===31){if(e=j(a),e!==null)return e;e=null}else if(s===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;e=null}else a!==e&&(e=null)}}return wi=e,null}function R0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(at()){case $:return 2;case ve:return 8;case Ge:case xt:return 32;case on:return 268435456;default:return 32}default:return 32}}var cd=!1,vs=null,js=null,Ns=null,Jl=new Map,Fl=new Map,_s=[],Sg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function A0(e,a){switch(e){case"focusin":case"focusout":vs=null;break;case"dragenter":case"dragleave":js=null;break;case"mouseover":case"mouseout":Ns=null;break;case"pointerover":case"pointerout":Jl.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fl.delete(a.pointerId)}}function Il(e,a,s,n,r,c){return e===null||e.nativeEvent!==c?(e={blockedOn:a,domEventName:s,eventSystemFlags:n,nativeEvent:c,targetContainers:[r]},a!==null&&(a=mn(a),a!==null&&E0(a)),e):(e.eventSystemFlags|=n,a=e.targetContainers,r!==null&&a.indexOf(r)===-1&&a.push(r),e)}function wg(e,a,s,n,r){switch(a){case"focusin":return vs=Il(vs,e,a,s,n,r),!0;case"dragenter":return js=Il(js,e,a,s,n,r),!0;case"mouseover":return Ns=Il(Ns,e,a,s,n,r),!0;case"pointerover":var c=r.pointerId;return Jl.set(c,Il(Jl.get(c)||null,e,a,s,n,r)),!0;case"gotpointercapture":return c=r.pointerId,Fl.set(c,Il(Fl.get(c)||null,e,a,s,n,r)),!0}return!1}function D0(e){var a=un(e.target);if(a!==null){var s=f(a);if(s!==null){if(a=s.tag,a===13){if(a=p(s),a!==null){e.blockedOn=a,Kd(e.priority,function(){O0(s)});return}}else if(a===31){if(a=j(s),a!==null){e.blockedOn=a,Kd(e.priority,function(){O0(s)});return}}else if(a===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ki(e){if(e.blockedOn!==null)return!1;for(var a=e.targetContainers;0<a.length;){var s=rd(e.nativeEvent);if(s===null){s=e.nativeEvent;var n=new s.constructor(s.type,s);rc=n,s.target.dispatchEvent(n),rc=null}else return a=mn(s),a!==null&&E0(a),e.blockedOn=s,!1;a.shift()}return!0}function M0(e,a,s){ki(e)&&s.delete(a)}function kg(){cd=!1,vs!==null&&ki(vs)&&(vs=null),js!==null&&ki(js)&&(js=null),Ns!==null&&ki(Ns)&&(Ns=null),Jl.forEach(M0),Fl.forEach(M0)}function Ci(e,a){e.blockedOn===a&&(e.blockedOn=null,cd||(cd=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,kg)))}var zi=null;function L0(e){zi!==e&&(zi=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){zi===e&&(zi=null);for(var a=0;a<e.length;a+=3){var s=e[a],n=e[a+1],r=e[a+2];if(typeof n!="function"){if(id(n||s)===null)continue;break}var c=mn(s);c!==null&&(e.splice(a,3),a-=3,lo(c,{pending:!0,data:r,method:s.method,action:n},n,r))}}))}function Xn(e){function a(z){return Ci(z,e)}vs!==null&&Ci(vs,e),js!==null&&Ci(js,e),Ns!==null&&Ci(Ns,e),Jl.forEach(a),Fl.forEach(a);for(var s=0;s<_s.length;s++){var n=_s[s];n.blockedOn===e&&(n.blockedOn=null)}for(;0<_s.length&&(s=_s[0],s.blockedOn===null);)D0(s),s.blockedOn===null&&_s.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(n=0;n<s.length;n+=3){var r=s[n],c=s[n+1],m=r[Mt]||null;if(typeof c=="function")m||L0(s);else if(m){var N=null;if(c&&c.hasAttribute("formAction")){if(r=c,m=c[Mt]||null)N=m.formAction;else if(id(r)!==null)continue}else N=m.action;typeof N=="function"?s[n+1]=N:(s.splice(n,3),n-=3),L0(s)}}}function q0(){function e(c){c.canIntercept&&c.info==="react-transition"&&c.intercept({handler:function(){return new Promise(function(m){return r=m})},focusReset:"manual",scroll:"manual"})}function a(){r!==null&&(r(),r=null),n||setTimeout(s,20)}function s(){if(!n&&!navigation.transition){var c=navigation.currentEntry;c&&c.url!=null&&navigation.navigate(c.url,{state:c.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,r=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(s,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),r!==null&&(r(),r=null)}}}function od(e){this._internalRoot=e}Ti.prototype.render=od.prototype.render=function(e){var a=this._internalRoot;if(a===null)throw Error(d(409));var s=a.current,n=ea();z0(s,n,e,a,null,null)},Ti.prototype.unmount=od.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var a=e.containerInfo;z0(e.current,2,null,e,null,null),oi(),a[dn]=null}};function Ti(e){this._internalRoot=e}Ti.prototype.unstable_scheduleHydration=function(e){if(e){var a=Xd();e={blockedOn:null,target:e,priority:a};for(var s=0;s<_s.length&&a!==0&&a<_s[s].priority;s++);_s.splice(s,0,e),s===0&&D0(e)}};var U0=i.version;if(U0!=="19.2.4")throw Error(d(527,U0,"19.2.4"));P.findDOMNode=function(e){var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(d(188)):(e=Object.keys(e).join(","),Error(d(268,e)));return e=y(a),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var Cg={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ei=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ei.isDisabled&&Ei.supportsFiber)try{rl=Ei.inject(Cg),Zt=Ei}catch{}}return Pl.createRoot=function(e,a){if(!x(e))throw Error(d(299));var s=!1,n="",r=Qm,c=Zm,m=Xm;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(n=a.identifierPrefix),a.onUncaughtError!==void 0&&(r=a.onUncaughtError),a.onCaughtError!==void 0&&(c=a.onCaughtError),a.onRecoverableError!==void 0&&(m=a.onRecoverableError)),a=k0(e,1,!1,null,null,s,n,null,r,c,m,q0),e[dn]=a.current,Vo(e),new od(a)},Pl.hydrateRoot=function(e,a,s){if(!x(e))throw Error(d(299));var n=!1,r="",c=Qm,m=Zm,N=Xm,z=null;return s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(r=s.identifierPrefix),s.onUncaughtError!==void 0&&(c=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(N=s.onRecoverableError),s.formState!==void 0&&(z=s.formState)),a=k0(e,1,!0,a,s??null,n,r,z,c,m,N,q0),a.context=C0(null),s=a.current,n=ea(),n=Wi(n),r=cs(n),r.callback=null,os(s,r,n),s=n,a.current.lanes=s,cl(a,s),Ca(a),e[dn]=a.current,Vo(e),new Ti(a)},Pl.version="19.2.4",Pl}var K0;function Lg(){if(K0)return md.exports;K0=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(i){console.error(i)}}return l(),md.exports=Mg(),md.exports}var qg=Lg();var J0="popstate";function Ug(l={}){function i(x,f){let{pathname:p="/",search:j="",hash:h=""}=ln(x.location.hash.substring(1));return!p.startsWith("/")&&!p.startsWith(".")&&(p="/"+p),Sd("",{pathname:p,search:j,hash:h},f.state&&f.state.usr||null,f.state&&f.state.key||"default")}function o(x,f){let p=x.document.querySelector("base"),j="";if(p&&p.getAttribute("href")){let h=x.location.href,y=h.indexOf("#");j=y===-1?h:h.slice(0,y)}return j+"#"+(typeof f=="string"?f:ir(f))}function d(x,f){fa(x.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(f)})`)}return Hg(i,o,d,l)}function lt(l,i){if(l===!1||l===null||typeof l>"u")throw new Error(i)}function fa(l,i){if(!l){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function Bg(){return Math.random().toString(36).substring(2,10)}function F0(l,i){return{usr:l.state,key:l.key,idx:i}}function Sd(l,i,o=null,d){return{pathname:typeof l=="string"?l:l.pathname,search:"",hash:"",...typeof i=="string"?ln(i):i,state:o,key:i&&i.key||d||Bg()}}function ir({pathname:l="/",search:i="",hash:o=""}){return i&&i!=="?"&&(l+=i.charAt(0)==="?"?i:"?"+i),o&&o!=="#"&&(l+=o.charAt(0)==="#"?o:"#"+o),l}function ln(l){let i={};if(l){let o=l.indexOf("#");o>=0&&(i.hash=l.substring(o),l=l.substring(0,o));let d=l.indexOf("?");d>=0&&(i.search=l.substring(d),l=l.substring(0,d)),l&&(i.pathname=l)}return i}function Hg(l,i,o,d={}){let{window:x=document.defaultView,v5Compat:f=!1}=d,p=x.history,j="POP",h=null,y=v();y==null&&(y=0,p.replaceState({...p.state,idx:y},""));function v(){return(p.state||{idx:null}).idx}function b(){j="POP";let E=v(),k=E==null?null:E-y;y=E,h&&h({action:j,location:A.location,delta:k})}function g(E,k){j="PUSH";let w=Sd(A.location,E,k);o&&o(w,E),y=v()+1;let B=F0(w,y),Q=A.createHref(w);try{p.pushState(B,"",Q)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;x.location.assign(Q)}f&&h&&h({action:j,location:A.location,delta:1})}function T(E,k){j="REPLACE";let w=Sd(A.location,E,k);o&&o(w,E),y=v();let B=F0(w,y),Q=A.createHref(w);p.replaceState(B,"",Q),f&&h&&h({action:j,location:A.location,delta:0})}function _(E){return Gg(E)}let A={get action(){return j},get location(){return l(x,p)},listen(E){if(h)throw new Error("A history only accepts one active listener");return x.addEventListener(J0,b),h=E,()=>{x.removeEventListener(J0,b),h=null}},createHref(E){return i(x,E)},createURL:_,encodeLocation(E){let k=_(E);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:g,replace:T,go(E){return p.go(E)}};return A}function Gg(l,i=!1){let o="http://localhost";typeof window<"u"&&(o=window.location.origin!=="null"?window.location.origin:window.location.href),lt(o,"No window.location.(origin|href) available to create URL");let d=typeof l=="string"?l:ir(l);return d=d.replace(/ $/,"%20"),!i&&d.startsWith("//")&&(d=o+d),new URL(d,o)}function Nf(l,i,o="/"){return $g(l,i,o,!1)}function $g(l,i,o,d){let x=typeof i=="string"?ln(i):i,f=Wa(x.pathname||"/",o);if(f==null)return null;let p=_f(l);Yg(p);let j=null;for(let h=0;j==null&&h<p.length;++h){let y=ey(f);j=Wg(p[h],y,d)}return j}function _f(l,i=[],o=[],d="",x=!1){let f=(p,j,h=x,y)=>{let v={relativePath:y===void 0?p.path||"":y,caseSensitive:p.caseSensitive===!0,childrenIndex:j,route:p};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(d)&&h)return;lt(v.relativePath.startsWith(d),`Absolute route path "${v.relativePath}" nested under path "${d}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(d.length)}let b=Ja([d,v.relativePath]),g=o.concat(v);p.children&&p.children.length>0&&(lt(p.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),_f(p.children,i,g,b,h)),!(p.path==null&&!p.index)&&i.push({path:b,score:Fg(b,p.index),routesMeta:g})};return l.forEach((p,j)=>{if(p.path===""||!p.path?.includes("?"))f(p,j);else for(let h of Sf(p.path))f(p,j,!0,h)}),i}function Sf(l){let i=l.split("/");if(i.length===0)return[];let[o,...d]=i,x=o.endsWith("?"),f=o.replace(/\?$/,"");if(d.length===0)return x?[f,""]:[f];let p=Sf(d.join("/")),j=[];return j.push(...p.map(h=>h===""?f:[f,h].join("/"))),x&&j.push(...p),j.map(h=>l.startsWith("/")&&h===""?"/":h)}function Yg(l){l.sort((i,o)=>i.score!==o.score?o.score-i.score:Ig(i.routesMeta.map(d=>d.childrenIndex),o.routesMeta.map(d=>d.childrenIndex)))}var Vg=/^:[\w-]+$/,Qg=3,Zg=2,Xg=1,Kg=10,Jg=-2,I0=l=>l==="*";function Fg(l,i){let o=l.split("/"),d=o.length;return o.some(I0)&&(d+=Jg),i&&(d+=Zg),o.filter(x=>!I0(x)).reduce((x,f)=>x+(Vg.test(f)?Qg:f===""?Xg:Kg),d)}function Ig(l,i){return l.length===i.length&&l.slice(0,-1).every((d,x)=>d===i[x])?l[l.length-1]-i[i.length-1]:0}function Wg(l,i,o=!1){let{routesMeta:d}=l,x={},f="/",p=[];for(let j=0;j<d.length;++j){let h=d[j],y=j===d.length-1,v=f==="/"?i:i.slice(f.length)||"/",b=Bi({path:h.relativePath,caseSensitive:h.caseSensitive,end:y},v),g=h.route;if(!b&&y&&o&&!d[d.length-1].route.index&&(b=Bi({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},v)),!b)return null;Object.assign(x,b.params),p.push({params:x,pathname:Ja([f,b.pathname]),pathnameBase:ny(Ja([f,b.pathnameBase])),route:g}),b.pathnameBase!=="/"&&(f=Ja([f,b.pathnameBase]))}return p}function Bi(l,i){typeof l=="string"&&(l={path:l,caseSensitive:!1,end:!0});let[o,d]=Pg(l.path,l.caseSensitive,l.end),x=i.match(o);if(!x)return null;let f=x[0],p=f.replace(/(.)\/+$/,"$1"),j=x.slice(1);return{params:d.reduce((y,{paramName:v,isOptional:b},g)=>{if(v==="*"){let _=j[g]||"";p=f.slice(0,f.length-_.length).replace(/(.)\/+$/,"$1")}const T=j[g];return b&&!T?y[v]=void 0:y[v]=(T||"").replace(/%2F/g,"/"),y},{}),pathname:f,pathnameBase:p,pattern:l}}function Pg(l,i=!1,o=!0){fa(l==="*"||!l.endsWith("*")||l.endsWith("/*"),`Route path "${l}" will be treated as if it were "${l.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${l.replace(/\*$/,"/*")}".`);let d=[],x="^"+l.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,j,h)=>(d.push({paramName:j,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return l.endsWith("*")?(d.push({paramName:"*"}),x+=l==="*"||l==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?x+="\\/*$":l!==""&&l!=="/"&&(x+="(?:(?=\\/|$))"),[new RegExp(x,i?void 0:"i"),d]}function ey(l){try{return l.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return fa(!1,`The URL path "${l}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${i}).`),l}}function Wa(l,i){if(i==="/")return l;if(!l.toLowerCase().startsWith(i.toLowerCase()))return null;let o=i.endsWith("/")?i.length-1:i.length,d=l.charAt(o);return d&&d!=="/"?null:l.slice(o)||"/"}var ty=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function ay(l,i="/"){let{pathname:o,search:d="",hash:x=""}=typeof l=="string"?ln(l):l,f;return o?(o=o.replace(/\/\/+/g,"/"),o.startsWith("/")?f=W0(o.substring(1),"/"):f=W0(o,i)):f=i,{pathname:f,search:ly(d),hash:ry(x)}}function W0(l,i){let o=i.replace(/\/+$/,"").split("/");return l.split("/").forEach(x=>{x===".."?o.length>1&&o.pop():x!=="."&&o.push(x)}),o.length>1?o.join("/"):"/"}function pd(l,i,o,d){return`Cannot include a '${l}' character in a manually specified \`to.${i}\` field [${JSON.stringify(d)}].  Please separate it out to the \`to.${o}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function sy(l){return l.filter((i,o)=>o===0||i.route.path&&i.route.path.length>0)}function Ad(l){let i=sy(l);return i.map((o,d)=>d===i.length-1?o.pathname:o.pathnameBase)}function Dd(l,i,o,d=!1){let x;typeof l=="string"?x=ln(l):(x={...l},lt(!x.pathname||!x.pathname.includes("?"),pd("?","pathname","search",x)),lt(!x.pathname||!x.pathname.includes("#"),pd("#","pathname","hash",x)),lt(!x.search||!x.search.includes("#"),pd("#","search","hash",x)));let f=l===""||x.pathname==="",p=f?"/":x.pathname,j;if(p==null)j=o;else{let b=i.length-1;if(!d&&p.startsWith("..")){let g=p.split("/");for(;g[0]==="..";)g.shift(),b-=1;x.pathname=g.join("/")}j=b>=0?i[b]:"/"}let h=ay(x,j),y=p&&p!=="/"&&p.endsWith("/"),v=(f||p===".")&&o.endsWith("/");return!h.pathname.endsWith("/")&&(y||v)&&(h.pathname+="/"),h}var Ja=l=>l.join("/").replace(/\/\/+/g,"/"),ny=l=>l.replace(/\/+$/,"").replace(/^\/*/,"/"),ly=l=>!l||l==="?"?"":l.startsWith("?")?l:"?"+l,ry=l=>!l||l==="#"?"":l.startsWith("#")?l:"#"+l,iy=class{constructor(l,i,o,d=!1){this.status=l,this.statusText=i||"",this.internal=d,o instanceof Error?(this.data=o.toString(),this.error=o):this.data=o}};function cy(l){return l!=null&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.internal=="boolean"&&"data"in l}function oy(l){return l.map(i=>i.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var wf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function kf(l,i){let o=l;if(typeof o!="string"||!ty.test(o))return{absoluteURL:void 0,isExternal:!1,to:o};let d=o,x=!1;if(wf)try{let f=new URL(window.location.href),p=o.startsWith("//")?new URL(f.protocol+o):new URL(o),j=Wa(p.pathname,i);p.origin===f.origin&&j!=null?o=j+p.search+p.hash:x=!0}catch{fa(!1,`<Link to="${o}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:d,isExternal:x,to:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Cf=["POST","PUT","PATCH","DELETE"];new Set(Cf);var dy=["GET",...Cf];new Set(dy);var Wn=u.createContext(null);Wn.displayName="DataRouter";var Gi=u.createContext(null);Gi.displayName="DataRouterState";var uy=u.createContext(!1),zf=u.createContext({isTransitioning:!1});zf.displayName="ViewTransition";var my=u.createContext(new Map);my.displayName="Fetchers";var xy=u.createContext(null);xy.displayName="Await";var aa=u.createContext(null);aa.displayName="Navigation";var dr=u.createContext(null);dr.displayName="Location";var pa=u.createContext({outlet:null,matches:[],isDataRoute:!1});pa.displayName="Route";var Md=u.createContext(null);Md.displayName="RouteError";var Tf="REACT_ROUTER_ERROR",fy="REDIRECT",hy="ROUTE_ERROR_RESPONSE";function py(l){if(l.startsWith(`${Tf}:${fy}:{`))try{let i=JSON.parse(l.slice(28));if(typeof i=="object"&&i&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.location=="string"&&typeof i.reloadDocument=="boolean"&&typeof i.replace=="boolean")return i}catch{}}function gy(l){if(l.startsWith(`${Tf}:${hy}:{`))try{let i=JSON.parse(l.slice(40));if(typeof i=="object"&&i&&typeof i.status=="number"&&typeof i.statusText=="string")return new iy(i.status,i.statusText,i.data)}catch{}}function yy(l,{relative:i}={}){lt(Pn(),"useHref() may be used only in the context of a <Router> component.");let{basename:o,navigator:d}=u.useContext(aa),{hash:x,pathname:f,search:p}=ur(l,{relative:i}),j=f;return o!=="/"&&(j=f==="/"?o:Ja([o,f])),d.createHref({pathname:j,search:p,hash:x})}function Pn(){return u.useContext(dr)!=null}function ga(){return lt(Pn(),"useLocation() may be used only in the context of a <Router> component."),u.useContext(dr).location}var Ef="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Of(l){u.useContext(aa).static||u.useLayoutEffect(l)}function Os(){let{isDataRoute:l}=u.useContext(pa);return l?Ay():by()}function by(){lt(Pn(),"useNavigate() may be used only in the context of a <Router> component.");let l=u.useContext(Wn),{basename:i,navigator:o}=u.useContext(aa),{matches:d}=u.useContext(pa),{pathname:x}=ga(),f=JSON.stringify(Ad(d)),p=u.useRef(!1);return Of(()=>{p.current=!0}),u.useCallback((h,y={})=>{if(fa(p.current,Ef),!p.current)return;if(typeof h=="number"){o.go(h);return}let v=Dd(h,JSON.parse(f),x,y.relative==="path");l==null&&i!=="/"&&(v.pathname=v.pathname==="/"?i:Ja([i,v.pathname])),(y.replace?o.replace:o.push)(v,y.state,y)},[i,o,f,x,l])}var vy=u.createContext(null);function jy(l){let i=u.useContext(pa).outlet;return u.useMemo(()=>i&&u.createElement(vy.Provider,{value:l},i),[i,l])}function $i(){let{matches:l}=u.useContext(pa),i=l[l.length-1];return i?i.params:{}}function ur(l,{relative:i}={}){let{matches:o}=u.useContext(pa),{pathname:d}=ga(),x=JSON.stringify(Ad(o));return u.useMemo(()=>Dd(l,JSON.parse(x),d,i==="path"),[l,x,d,i])}function Ny(l,i){return Rf(l,i)}function Rf(l,i,o,d,x){lt(Pn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:f}=u.useContext(aa),{matches:p}=u.useContext(pa),j=p[p.length-1],h=j?j.params:{},y=j?j.pathname:"/",v=j?j.pathnameBase:"/",b=j&&j.route;{let w=b&&b.path||"";Df(y,!b||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let g=ga(),T;if(i){let w=typeof i=="string"?ln(i):i;lt(v==="/"||w.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${w.pathname}" was given in the \`location\` prop.`),T=w}else T=g;let _=T.pathname||"/",A=_;if(v!=="/"){let w=v.replace(/^\//,"").split("/");A="/"+_.replace(/^\//,"").split("/").slice(w.length).join("/")}let E=Nf(l,{pathname:A});fa(b||E!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),fa(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=Cy(E&&E.map(w=>Object.assign({},w,{params:Object.assign({},h,w.params),pathname:Ja([v,f.encodeLocation?f.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?v:Ja([v,f.encodeLocation?f.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),p,o,d,x);return i&&k?u.createElement(dr.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},k):k}function _y(){let l=Ry(),i=cy(l)?`${l.status} ${l.statusText}`:l instanceof Error?l.message:JSON.stringify(l),o=l instanceof Error?l.stack:null,d="rgba(200,200,200, 0.5)",x={padding:"0.5rem",backgroundColor:d},f={padding:"2px 4px",backgroundColor:d},p=null;return console.error("Error handled by React Router default ErrorBoundary:",l),p=u.createElement(u.Fragment,null,u.createElement("p",null," Hey developer "),u.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",u.createElement("code",{style:f},"ErrorBoundary")," or"," ",u.createElement("code",{style:f},"errorElement")," prop on your route.")),u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},i),o?u.createElement("pre",{style:x},o):null,p)}var Sy=u.createElement(_y,null),Af=class extends u.Component{constructor(l){super(l),this.state={location:l.location,revalidation:l.revalidation,error:l.error}}static getDerivedStateFromError(l){return{error:l}}static getDerivedStateFromProps(l,i){return i.location!==l.location||i.revalidation!=="idle"&&l.revalidation==="idle"?{error:l.error,location:l.location,revalidation:l.revalidation}:{error:l.error!==void 0?l.error:i.error,location:i.location,revalidation:l.revalidation||i.revalidation}}componentDidCatch(l,i){this.props.onError?this.props.onError(l,i):console.error("React Router caught the following error during render",l)}render(){let l=this.state.error;if(this.context&&typeof l=="object"&&l&&"digest"in l&&typeof l.digest=="string"){const o=gy(l.digest);o&&(l=o)}let i=l!==void 0?u.createElement(pa.Provider,{value:this.props.routeContext},u.createElement(Md.Provider,{value:l,children:this.props.component})):this.props.children;return this.context?u.createElement(wy,{error:l},i):i}};Af.contextType=uy;var gd=new WeakMap;function wy({children:l,error:i}){let{basename:o}=u.useContext(aa);if(typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){let d=py(i.digest);if(d){let x=gd.get(i);if(x)throw x;let f=kf(d.location,o);if(wf&&!gd.get(i))if(f.isExternal||d.reloadDocument)window.location.href=f.absoluteURL||f.to;else{const p=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(f.to,{replace:d.replace}));throw gd.set(i,p),p}return u.createElement("meta",{httpEquiv:"refresh",content:`0;url=${f.absoluteURL||f.to}`})}}return l}function ky({routeContext:l,match:i,children:o}){let d=u.useContext(Wn);return d&&d.static&&d.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(d.staticContext._deepestRenderedBoundaryId=i.route.id),u.createElement(pa.Provider,{value:l},o)}function Cy(l,i=[],o=null,d=null,x=null){if(l==null){if(!o)return null;if(o.errors)l=o.matches;else if(i.length===0&&!o.initialized&&o.matches.length>0)l=o.matches;else return null}let f=l,p=o?.errors;if(p!=null){let v=f.findIndex(b=>b.route.id&&p?.[b.route.id]!==void 0);lt(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(p).join(",")}`),f=f.slice(0,Math.min(f.length,v+1))}let j=!1,h=-1;if(o)for(let v=0;v<f.length;v++){let b=f[v];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(h=v),b.route.id){let{loaderData:g,errors:T}=o,_=b.route.loader&&!g.hasOwnProperty(b.route.id)&&(!T||T[b.route.id]===void 0);if(b.route.lazy||_){j=!0,h>=0?f=f.slice(0,h+1):f=[f[0]];break}}}let y=o&&d?(v,b)=>{d(v,{location:o.location,params:o.matches?.[0]?.params??{},unstable_pattern:oy(o.matches),errorInfo:b})}:void 0;return f.reduceRight((v,b,g)=>{let T,_=!1,A=null,E=null;o&&(T=p&&b.route.id?p[b.route.id]:void 0,A=b.route.errorElement||Sy,j&&(h<0&&g===0?(Df("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,E=null):h===g&&(_=!0,E=b.route.hydrateFallbackElement||null)));let k=i.concat(f.slice(0,g+1)),w=()=>{let B;return T?B=A:_?B=E:b.route.Component?B=u.createElement(b.route.Component,null):b.route.element?B=b.route.element:B=v,u.createElement(ky,{match:b,routeContext:{outlet:v,matches:k,isDataRoute:o!=null},children:B})};return o&&(b.route.ErrorBoundary||b.route.errorElement||g===0)?u.createElement(Af,{location:o.location,revalidation:o.revalidation,component:A,error:T,children:w(),routeContext:{outlet:null,matches:k,isDataRoute:!0},onError:y}):w()},null)}function Ld(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zy(l){let i=u.useContext(Wn);return lt(i,Ld(l)),i}function Ty(l){let i=u.useContext(Gi);return lt(i,Ld(l)),i}function Ey(l){let i=u.useContext(pa);return lt(i,Ld(l)),i}function qd(l){let i=Ey(l),o=i.matches[i.matches.length-1];return lt(o.route.id,`${l} can only be used on routes that contain a unique "id"`),o.route.id}function Oy(){return qd("useRouteId")}function Ry(){let l=u.useContext(Md),i=Ty("useRouteError"),o=qd("useRouteError");return l!==void 0?l:i.errors?.[o]}function Ay(){let{router:l}=zy("useNavigate"),i=qd("useNavigate"),o=u.useRef(!1);return Of(()=>{o.current=!0}),u.useCallback(async(x,f={})=>{fa(o.current,Ef),o.current&&(typeof x=="number"?await l.navigate(x):await l.navigate(x,{fromRouteId:i,...f}))},[l,i])}var P0={};function Df(l,i,o){!i&&!P0[l]&&(P0[l]=!0,fa(!1,o))}u.memo(Dy);function Dy({routes:l,future:i,state:o,onError:d}){return Rf(l,void 0,o,d,i)}function Yi({to:l,replace:i,state:o,relative:d}){lt(Pn(),"<Navigate> may be used only in the context of a <Router> component.");let{static:x}=u.useContext(aa);fa(!x,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:f}=u.useContext(pa),{pathname:p}=ga(),j=Os(),h=Dd(l,Ad(f),p,d==="path"),y=JSON.stringify(h);return u.useEffect(()=>{j(JSON.parse(y),{replace:i,state:o,relative:d})},[j,y,d,i,o]),null}function My(l){return jy(l.context)}function Xe(l){lt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ly({basename:l="/",children:i=null,location:o,navigationType:d="POP",navigator:x,static:f=!1,unstable_useTransitions:p}){lt(!Pn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let j=l.replace(/^\/*/,"/"),h=u.useMemo(()=>({basename:j,navigator:x,static:f,unstable_useTransitions:p,future:{}}),[j,x,f,p]);typeof o=="string"&&(o=ln(o));let{pathname:y="/",search:v="",hash:b="",state:g=null,key:T="default"}=o,_=u.useMemo(()=>{let A=Wa(y,j);return A==null?null:{location:{pathname:A,search:v,hash:b,state:g,key:T},navigationType:d}},[j,y,v,b,g,T,d]);return fa(_!=null,`<Router basename="${j}"> is not able to match the URL "${y}${v}${b}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:u.createElement(aa.Provider,{value:h},u.createElement(dr.Provider,{children:i,value:_}))}function qy({children:l,location:i}){return Ny(wd(l),i)}function wd(l,i=[]){let o=[];return u.Children.forEach(l,(d,x)=>{if(!u.isValidElement(d))return;let f=[...i,x];if(d.type===u.Fragment){o.push.apply(o,wd(d.props.children,f));return}lt(d.type===Xe,`[${typeof d.type=="string"?d.type:d.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),lt(!d.props.index||!d.props.children,"An index route cannot have child routes.");let p={id:d.props.id||f.join("-"),caseSensitive:d.props.caseSensitive,element:d.props.element,Component:d.props.Component,index:d.props.index,path:d.props.path,middleware:d.props.middleware,loader:d.props.loader,action:d.props.action,hydrateFallbackElement:d.props.hydrateFallbackElement,HydrateFallback:d.props.HydrateFallback,errorElement:d.props.errorElement,ErrorBoundary:d.props.ErrorBoundary,hasErrorBoundary:d.props.hasErrorBoundary===!0||d.props.ErrorBoundary!=null||d.props.errorElement!=null,shouldRevalidate:d.props.shouldRevalidate,handle:d.props.handle,lazy:d.props.lazy};d.props.children&&(p.children=wd(d.props.children,f)),o.push(p)}),o}var Li="get",qi="application/x-www-form-urlencoded";function Vi(l){return typeof HTMLElement<"u"&&l instanceof HTMLElement}function Uy(l){return Vi(l)&&l.tagName.toLowerCase()==="button"}function By(l){return Vi(l)&&l.tagName.toLowerCase()==="form"}function Hy(l){return Vi(l)&&l.tagName.toLowerCase()==="input"}function Gy(l){return!!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)}function $y(l,i){return l.button===0&&(!i||i==="_self")&&!Gy(l)}var Oi=null;function Yy(){if(Oi===null)try{new FormData(document.createElement("form"),0),Oi=!1}catch{Oi=!0}return Oi}var Vy=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function yd(l){return l!=null&&!Vy.has(l)?(fa(!1,`"${l}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qi}"`),null):l}function Qy(l,i){let o,d,x,f,p;if(By(l)){let j=l.getAttribute("action");d=j?Wa(j,i):null,o=l.getAttribute("method")||Li,x=yd(l.getAttribute("enctype"))||qi,f=new FormData(l)}else if(Uy(l)||Hy(l)&&(l.type==="submit"||l.type==="image")){let j=l.form;if(j==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=l.getAttribute("formaction")||j.getAttribute("action");if(d=h?Wa(h,i):null,o=l.getAttribute("formmethod")||j.getAttribute("method")||Li,x=yd(l.getAttribute("formenctype"))||yd(j.getAttribute("enctype"))||qi,f=new FormData(j,l),!Yy()){let{name:y,type:v,value:b}=l;if(v==="image"){let g=y?`${y}.`:"";f.append(`${g}x`,"0"),f.append(`${g}y`,"0")}else y&&f.append(y,b)}}else{if(Vi(l))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');o=Li,d=null,x=qi,p=l}return f&&x==="text/plain"&&(p=f,f=void 0),{action:d,method:o.toLowerCase(),encType:x,formData:f,body:p}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ud(l,i){if(l===!1||l===null||typeof l>"u")throw new Error(i)}function Zy(l,i,o,d){let x=typeof l=="string"?new URL(l,typeof window>"u"?"server://singlefetch/":window.location.origin):l;return o?x.pathname.endsWith("/")?x.pathname=`${x.pathname}_.${d}`:x.pathname=`${x.pathname}.${d}`:x.pathname==="/"?x.pathname=`_root.${d}`:i&&Wa(x.pathname,i)==="/"?x.pathname=`${i.replace(/\/$/,"")}/_root.${d}`:x.pathname=`${x.pathname.replace(/\/$/,"")}.${d}`,x}async function Xy(l,i){if(l.id in i)return i[l.id];try{let o=await import(l.module);return i[l.id]=o,o}catch(o){return console.error(`Error loading route module \`${l.module}\`, reloading page...`),console.error(o),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ky(l){return l==null?!1:l.href==null?l.rel==="preload"&&typeof l.imageSrcSet=="string"&&typeof l.imageSizes=="string":typeof l.rel=="string"&&typeof l.href=="string"}async function Jy(l,i,o){let d=await Promise.all(l.map(async x=>{let f=i.routes[x.route.id];if(f){let p=await Xy(f,o);return p.links?p.links():[]}return[]}));return Py(d.flat(1).filter(Ky).filter(x=>x.rel==="stylesheet"||x.rel==="preload").map(x=>x.rel==="stylesheet"?{...x,rel:"prefetch",as:"style"}:{...x,rel:"prefetch"}))}function ef(l,i,o,d,x,f){let p=(h,y)=>o[y]?h.route.id!==o[y].route.id:!0,j=(h,y)=>o[y].pathname!==h.pathname||o[y].route.path?.endsWith("*")&&o[y].params["*"]!==h.params["*"];return f==="assets"?i.filter((h,y)=>p(h,y)||j(h,y)):f==="data"?i.filter((h,y)=>{let v=d.routes[h.route.id];if(!v||!v.hasLoader)return!1;if(p(h,y)||j(h,y))return!0;if(h.route.shouldRevalidate){let b=h.route.shouldRevalidate({currentUrl:new URL(x.pathname+x.search+x.hash,window.origin),currentParams:o[0]?.params||{},nextUrl:new URL(l,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function Fy(l,i,{includeHydrateFallback:o}={}){return Iy(l.map(d=>{let x=i.routes[d.route.id];if(!x)return[];let f=[x.module];return x.clientActionModule&&(f=f.concat(x.clientActionModule)),x.clientLoaderModule&&(f=f.concat(x.clientLoaderModule)),o&&x.hydrateFallbackModule&&(f=f.concat(x.hydrateFallbackModule)),x.imports&&(f=f.concat(x.imports)),f}).flat(1))}function Iy(l){return[...new Set(l)]}function Wy(l){let i={},o=Object.keys(l).sort();for(let d of o)i[d]=l[d];return i}function Py(l,i){let o=new Set;return new Set(i),l.reduce((d,x)=>{let f=JSON.stringify(Wy(x));return o.has(f)||(o.add(f),d.push({key:f,link:x})),d},[])}function Mf(){let l=u.useContext(Wn);return Ud(l,"You must render this element inside a <DataRouterContext.Provider> element"),l}function eb(){let l=u.useContext(Gi);return Ud(l,"You must render this element inside a <DataRouterStateContext.Provider> element"),l}var Bd=u.createContext(void 0);Bd.displayName="FrameworkContext";function Lf(){let l=u.useContext(Bd);return Ud(l,"You must render this element inside a <HydratedRouter> element"),l}function tb(l,i){let o=u.useContext(Bd),[d,x]=u.useState(!1),[f,p]=u.useState(!1),{onFocus:j,onBlur:h,onMouseEnter:y,onMouseLeave:v,onTouchStart:b}=i,g=u.useRef(null);u.useEffect(()=>{if(l==="render"&&p(!0),l==="viewport"){let A=k=>{k.forEach(w=>{p(w.isIntersecting)})},E=new IntersectionObserver(A,{threshold:.5});return g.current&&E.observe(g.current),()=>{E.disconnect()}}},[l]),u.useEffect(()=>{if(d){let A=setTimeout(()=>{p(!0)},100);return()=>{clearTimeout(A)}}},[d]);let T=()=>{x(!0)},_=()=>{x(!1),p(!1)};return o?l!=="intent"?[f,g,{}]:[f,g,{onFocus:er(j,T),onBlur:er(h,_),onMouseEnter:er(y,T),onMouseLeave:er(v,_),onTouchStart:er(b,T)}]:[!1,g,{}]}function er(l,i){return o=>{l&&l(o),o.defaultPrevented||i(o)}}function ab({page:l,...i}){let{router:o}=Mf(),d=u.useMemo(()=>Nf(o.routes,l,o.basename),[o.routes,l,o.basename]);return d?u.createElement(nb,{page:l,matches:d,...i}):null}function sb(l){let{manifest:i,routeModules:o}=Lf(),[d,x]=u.useState([]);return u.useEffect(()=>{let f=!1;return Jy(l,i,o).then(p=>{f||x(p)}),()=>{f=!0}},[l,i,o]),d}function nb({page:l,matches:i,...o}){let d=ga(),{future:x,manifest:f,routeModules:p}=Lf(),{basename:j}=Mf(),{loaderData:h,matches:y}=eb(),v=u.useMemo(()=>ef(l,i,y,f,d,"data"),[l,i,y,f,d]),b=u.useMemo(()=>ef(l,i,y,f,d,"assets"),[l,i,y,f,d]),g=u.useMemo(()=>{if(l===d.pathname+d.search+d.hash)return[];let A=new Set,E=!1;if(i.forEach(w=>{let B=f.routes[w.route.id];!B||!B.hasLoader||(!v.some(Q=>Q.route.id===w.route.id)&&w.route.id in h&&p[w.route.id]?.shouldRevalidate||B.hasClientLoader?E=!0:A.add(w.route.id))}),A.size===0)return[];let k=Zy(l,j,x.unstable_trailingSlashAwareDataRequests,"data");return E&&A.size>0&&k.searchParams.set("_routes",i.filter(w=>A.has(w.route.id)).map(w=>w.route.id).join(",")),[k.pathname+k.search]},[j,x.unstable_trailingSlashAwareDataRequests,h,d,f,v,i,l,p]),T=u.useMemo(()=>Fy(b,f),[b,f]),_=sb(b);return u.createElement(u.Fragment,null,g.map(A=>u.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...o})),T.map(A=>u.createElement("link",{key:A,rel:"modulepreload",href:A,...o})),_.map(({key:A,link:E})=>u.createElement("link",{key:A,nonce:o.nonce,...E,crossOrigin:E.crossOrigin??o.crossOrigin})))}function lb(...l){return i=>{l.forEach(o=>{typeof o=="function"?o(i):o!=null&&(o.current=i)})}}var rb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{rb&&(window.__reactRouterVersion="7.13.0")}catch{}function ib({basename:l,children:i,unstable_useTransitions:o,window:d}){let x=u.useRef();x.current==null&&(x.current=Ug({window:d,v5Compat:!0}));let f=x.current,[p,j]=u.useState({action:f.action,location:f.location}),h=u.useCallback(y=>{o===!1?j(y):u.startTransition(()=>j(y))},[o]);return u.useLayoutEffect(()=>f.listen(h),[f,h]),u.createElement(Ly,{basename:l,children:i,location:p.location,navigationType:p.action,navigator:f,unstable_useTransitions:o})}var qf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ke=u.forwardRef(function({onClick:i,discover:o="render",prefetch:d="none",relative:x,reloadDocument:f,replace:p,state:j,target:h,to:y,preventScrollReset:v,viewTransition:b,unstable_defaultShouldRevalidate:g,...T},_){let{basename:A,unstable_useTransitions:E}=u.useContext(aa),k=typeof y=="string"&&qf.test(y),w=kf(y,A);y=w.to;let B=yy(y,{relative:x}),[Q,L,ne]=tb(d,T),J=db(y,{replace:p,state:j,target:h,preventScrollReset:v,relative:x,viewTransition:b,unstable_defaultShouldRevalidate:g,unstable_useTransitions:E});function ye(ae){i&&i(ae),ae.defaultPrevented||J(ae)}let X=u.createElement("a",{...T,...ne,href:w.absoluteURL||B,onClick:w.isExternal||f?i:ye,ref:lb(_,L),target:h,"data-discover":!k&&o==="render"?"true":void 0});return Q&&!k?u.createElement(u.Fragment,null,X,u.createElement(ab,{page:B})):X});ke.displayName="Link";var Hi=u.forwardRef(function({"aria-current":i="page",caseSensitive:o=!1,className:d="",end:x=!1,style:f,to:p,viewTransition:j,children:h,...y},v){let b=ur(p,{relative:y.relative}),g=ga(),T=u.useContext(Gi),{navigator:_,basename:A}=u.useContext(aa),E=T!=null&&hb(b)&&j===!0,k=_.encodeLocation?_.encodeLocation(b).pathname:b.pathname,w=g.pathname,B=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;o||(w=w.toLowerCase(),B=B?B.toLowerCase():null,k=k.toLowerCase()),B&&A&&(B=Wa(B,A)||B);const Q=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let L=w===k||!x&&w.startsWith(k)&&w.charAt(Q)==="/",ne=B!=null&&(B===k||!x&&B.startsWith(k)&&B.charAt(k.length)==="/"),J={isActive:L,isPending:ne,isTransitioning:E},ye=L?i:void 0,X;typeof d=="function"?X=d(J):X=[d,L?"active":null,ne?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let ae=typeof f=="function"?f(J):f;return u.createElement(ke,{...y,"aria-current":ye,className:X,ref:v,style:ae,to:p,viewTransition:j},typeof h=="function"?h(J):h)});Hi.displayName="NavLink";var cb=u.forwardRef(({discover:l="render",fetcherKey:i,navigate:o,reloadDocument:d,replace:x,state:f,method:p=Li,action:j,onSubmit:h,relative:y,preventScrollReset:v,viewTransition:b,unstable_defaultShouldRevalidate:g,...T},_)=>{let{unstable_useTransitions:A}=u.useContext(aa),E=xb(),k=fb(j,{relative:y}),w=p.toLowerCase()==="get"?"get":"post",B=typeof j=="string"&&qf.test(j),Q=L=>{if(h&&h(L),L.defaultPrevented)return;L.preventDefault();let ne=L.nativeEvent.submitter,J=ne?.getAttribute("formmethod")||p,ye=()=>E(ne||L.currentTarget,{fetcherKey:i,method:J,navigate:o,replace:x,state:f,relative:y,preventScrollReset:v,viewTransition:b,unstable_defaultShouldRevalidate:g});A&&o!==!1?u.startTransition(()=>ye()):ye()};return u.createElement("form",{ref:_,method:w,action:k,onSubmit:d?h:Q,...T,"data-discover":!B&&l==="render"?"true":void 0})});cb.displayName="Form";function ob(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Uf(l){let i=u.useContext(Wn);return lt(i,ob(l)),i}function db(l,{target:i,replace:o,state:d,preventScrollReset:x,relative:f,viewTransition:p,unstable_defaultShouldRevalidate:j,unstable_useTransitions:h}={}){let y=Os(),v=ga(),b=ur(l,{relative:f});return u.useCallback(g=>{if($y(g,i)){g.preventDefault();let T=o!==void 0?o:ir(v)===ir(b),_=()=>y(l,{replace:T,state:d,preventScrollReset:x,relative:f,viewTransition:p,unstable_defaultShouldRevalidate:j});h?u.startTransition(()=>_()):_()}},[v,y,b,o,d,i,l,x,f,p,j,h])}var ub=0,mb=()=>`__${String(++ub)}__`;function xb(){let{router:l}=Uf("useSubmit"),{basename:i}=u.useContext(aa),o=Oy(),d=l.fetch,x=l.navigate;return u.useCallback(async(f,p={})=>{let{action:j,method:h,encType:y,formData:v,body:b}=Qy(f,i);if(p.navigate===!1){let g=p.fetcherKey||mb();await d(g,o,p.action||j,{unstable_defaultShouldRevalidate:p.unstable_defaultShouldRevalidate,preventScrollReset:p.preventScrollReset,formData:v,body:b,formMethod:p.method||h,formEncType:p.encType||y,flushSync:p.flushSync})}else await x(p.action||j,{unstable_defaultShouldRevalidate:p.unstable_defaultShouldRevalidate,preventScrollReset:p.preventScrollReset,formData:v,body:b,formMethod:p.method||h,formEncType:p.encType||y,replace:p.replace,state:p.state,fromRouteId:o,flushSync:p.flushSync,viewTransition:p.viewTransition})},[d,x,i,o])}function fb(l,{relative:i}={}){let{basename:o}=u.useContext(aa),d=u.useContext(pa);lt(d,"useFormAction must be used inside a RouteContext");let[x]=d.matches.slice(-1),f={...ur(l||".",{relative:i})},p=ga();if(l==null){f.search=p.search;let j=new URLSearchParams(f.search),h=j.getAll("index");if(h.some(v=>v==="")){j.delete("index"),h.filter(b=>b).forEach(b=>j.append("index",b));let v=j.toString();f.search=v?`?${v}`:""}}return(!l||l===".")&&x.route.index&&(f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index"),o!=="/"&&(f.pathname=f.pathname==="/"?o:Ja([o,f.pathname])),ir(f)}function hb(l,{relative:i}={}){let o=u.useContext(zf);lt(o!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:d}=Uf("useViewTransitionState"),x=ur(l,{relative:i});if(!o.isTransitioning)return!1;let f=Wa(o.currentLocation.pathname,d)||o.currentLocation.pathname,p=Wa(o.nextLocation.pathname,d)||o.nextLocation.pathname;return Bi(x.pathname,p)!=null||Bi(x.pathname,f)!=null}var Rs=jf();const Bf=u.createContext(null),Hd="kcl_stores";function pb(){try{const l=localStorage.getItem(Hd);if(l)return JSON.parse(l)}catch(l){console.error("Failed to load state:",l)}return null}const Hf={user:null,selectedCampId:null,camps:[],notifications:[],isLoading:!1};function gb(l,i){switch(i.type){case"LOGIN":return{...l,user:i.payload.user,camps:i.payload.camps||l.camps,selectedCampId:i.payload.user.camp_id||null};case"LOGOUT":return localStorage.removeItem(Hd),localStorage.removeItem("kcl_token"),{...Hf};case"SET_CAMPS":return{...l,camps:i.payload};case"SELECT_CAMP":return{...l,selectedCampId:i.payload};case"SET_LOADING":return{...l,isLoading:i.payload};case"ADD_NOTIFICATION":return{...l,notifications:[i.payload,...l.notifications].slice(0,50)};case"MARK_NOTIFICATION_READ":return{...l,notifications:l.notifications.map(o=>o.id===i.payload?{...o,is_read:!0}:o)};case"RESTORE_STATE":return{...l,...i.payload};default:return l}}function yb({children:l}){const[i,o]=u.useReducer(gb,Hf);return u.useEffect(()=>{const d=pb();d?.user&&o({type:"RESTORE_STATE",payload:d})},[]),u.useEffect(()=>{i.user&&localStorage.setItem(Hd,JSON.stringify({user:i.user,selectedCampId:i.selectedCampId,camps:i.camps}))},[i.user,i.selectedCampId,i.camps]),t.jsx(Bf.Provider,{value:{state:i,dispatch:o},children:l})}function rn(){const l=u.useContext(Bf);if(!l)throw new Error("useApp must be used within AppProvider");return l}function Ie(){const{state:l}=rn();return l.user}function ya(){const{state:l}=rn(),i=l.selectedCampId,o=l.camps.find(d=>d.id===i);return{campId:i,camp:o,camps:l.camps}}function el(l){return["stores_manager","procurement_officer","director","admin"].includes(l)}const bb="kcl_offline",vb=1;let Ri=null;function cn(){return Ri?Promise.resolve(Ri):new Promise((l,i)=>{const o=indexedDB.open(bb,vb);o.onupgradeneeded=d=>{const x=d.target.result;if(x.objectStoreNames.contains("apiCache")||x.createObjectStore("apiCache",{keyPath:"key"}),!x.objectStoreNames.contains("syncQueue")){const f=x.createObjectStore("syncQueue",{keyPath:"id",autoIncrement:!0});f.createIndex("status","status",{unique:!1}),f.createIndex("timestamp","timestamp",{unique:!1})}},o.onsuccess=()=>{Ri=o.result,l(Ri)},o.onerror=()=>i(o.error)})}async function jb(l){try{const i=await cn();return new Promise(o=>{const f=i.transaction("apiCache","readonly").objectStore("apiCache").get(l);f.onsuccess=()=>{const p=f.result;if(!p)return o(null);p.expiresAt&&Date.now()>p.expiresAt?o({data:p.data,stale:!0,timestamp:p.timestamp}):o({data:p.data,stale:!1,timestamp:p.timestamp})},f.onerror=()=>o(null)})}catch{return null}}async function Nb(l,i,o=30){try{const x=(await cn()).transaction("apiCache","readwrite");return x.objectStore("apiCache").put({key:l,data:i,timestamp:Date.now(),expiresAt:Date.now()+o*60*1e3}),new Promise(p=>{x.oncomplete=()=>p(!0),x.onerror=()=>p(!1)})}catch{return!1}}async function _b(l){try{const i=await cn();return new Promise((o,d)=>{const x=i.transaction("syncQueue","readwrite"),p=x.objectStore("syncQueue").add({...l,timestamp:Date.now(),retries:0,status:"pending"});p.onsuccess=()=>o(p.result),p.onerror=()=>d(p.error),x.onerror=()=>d(x.error)})}catch(i){throw console.error("Failed to add to sync queue:",i),i}}async function Sb(){try{const l=await cn();return new Promise(i=>{const x=l.transaction("syncQueue","readonly").objectStore("syncQueue").getAll();x.onsuccess=()=>i(x.result||[]),x.onerror=()=>i([])})}catch{return[]}}async function Gf(){try{const l=await cn();return new Promise(i=>{const x=l.transaction("syncQueue","readonly").objectStore("syncQueue").count();x.onsuccess=()=>i(x.result||0),x.onerror=()=>i(0)})}catch{return 0}}async function wb(l){try{const i=await cn();return new Promise(o=>{const d=i.transaction("syncQueue","readwrite");d.objectStore("syncQueue").delete(l),d.oncomplete=()=>o(!0),d.onerror=()=>o(!1)})}catch{return!1}}async function bd(l,i){try{const o=await cn();return new Promise(d=>{const x=o.transaction("syncQueue","readwrite"),f=x.objectStore("syncQueue"),p=f.get(l);p.onsuccess=()=>{p.result&&f.put({...p.result,...i})},x.oncomplete=()=>d(!0),x.onerror=()=>d(!1)})}catch{return!1}}const $f="https://darkblue-goshawk-672880.hostingersite.com";function Yf(){return localStorage.getItem("kcl_token")}const Ea=new Map,kb=80;function Cb(l){const i=Ea.get(l);return i?Date.now()>i.expiresAt?(Ea.delete(l),{data:i.data,stale:!0}):{data:i.data,stale:!1}:null}function tf(l,i,o){if(Ea.size>=kb){const d=Ea.keys().next().value;Ea.delete(d)}Ea.set(l,{data:i,expiresAt:Date.now()+o*60*1e3})}function zb(l){const i=l.split("?")[0].replace(/-detail|-approve|-reject|-query/,"");for(const o of Ea.keys())o.includes(i)&&Ea.delete(o);for(const o of Ea.keys())(o.includes("dashboard.php")||o.includes("alerts.php"))&&Ea.delete(o)}const Tb=["auth-login.php","auth-pin-login.php","auth-me.php"],Eb=["recipes.php","reports.php","debug-schema.php"];function af(l){return l.includes("pos.php?action=categories")||l.includes("menu.php?action=categories")?60:l.includes("items.php")||l.includes("dashboard.php")||l.includes("stock")||l.includes("users.php")&&!l.includes("?id=")?30:l.includes("orders.php")||l.includes("dispatch.php")||l.includes("receive.php")||l.includes("issue.php")||l.includes("daily-overview.php")||l.includes("pos.php")||l.includes("menu.php")?15:l.includes("alerts.php")?5:l.includes("detail")?10:15}function Ob(){return navigator.onLine}function cr(l){return Tb.some(i=>l.includes(i))}function Rb(l){return Eb.some(i=>l.includes(i))||cr(l)}async function oe(l,i={}){const o=`${$f}/${l}`,d=Yf(),x=(i.method||"GET").toUpperCase(),p={...i.isFormData||i.body instanceof FormData?{}:{"Content-Type":"application/json"},...d?{Authorization:`Bearer ${d}`}:{},...i.headers},{isFormData:j,...h}=i,y={headers:p,...h};if((x==="POST"||x==="PUT")&&(zb(l),!Ob()&&!cr(l))){if(Rb(l))throw new Error("This action requires an internet connection.");return await _b({endpoint:l,method:x,body:i.body||null,headers:y.headers}),{success:!0,_offline:!0,_queued_at:Date.now(),message:"Saved offline. Will sync when connected."}}if(x==="GET"&&!cr(l)){const v=Cb(l);if(v&&!v.stale)return v.data;if(v&&v.stale)return sf(l,o,y).catch(()=>{}),v.data}return sf(l,o,y,x)}async function sf(l,i,o,d="GET"){try{const x=await fetch(i,o);if(x.status===401&&!l.includes("auth-login"))throw localStorage.removeItem("kcl_token"),localStorage.removeItem("kcl_stores"),window.location.hash="#/login",new Error("Session expired. Please login again.");const f=await x.text();let p;try{p=f?JSON.parse(f):{}}catch{throw console.error("API response not valid JSON:",f.substring(0,200)),new Error("Server returned an invalid response. Please try again.")}if(!x.ok)throw new Error(p.error||p.message||`Request failed (${x.status})`);if(d==="GET"&&!cr(l)){const j=af(l);tf(l,p,j),Nb(l,p,j).catch(()=>{})}return p}catch(x){if(d==="GET"&&!cr(l)){const f=await jb(l);if(f)return tf(l,f.data,f.stale?.5:af(l)),{...f.data,_cached:!0,_cached_at:f.timestamp}}throw x.name==="TypeError"&&x.message.includes("fetch")?new Error("Network error. Please check your connection."):x}}async function Ab(l,i={}){const o=`${$f}/${l}`,d=Yf(),x={headers:{"Content-Type":"application/json",...d?{Authorization:`Bearer ${d}`}:{},...i.headers},...i},f=await fetch(o,x),p=await f.text(),j=p?JSON.parse(p):{};if(!f.ok)throw new Error(j.error||j.message||`Request failed (${f.status})`);return j}const Vf={login:(l,i)=>oe("auth-login.php",{method:"POST",body:JSON.stringify({username:l,password:i})}),pinLogin:(l,i)=>oe("auth-pin-login.php",{method:"POST",body:JSON.stringify({username:l,pin:i})}),me:()=>oe("auth-me.php")},Db={get:l=>oe(`dashboard.php${l?`?camp_id=${l}`:""}`)},Qi={list:(l={})=>{const i=new URLSearchParams(l).toString();return oe(`items.php${i?`?${i}`:""}`)},get:l=>oe(`items-detail.php?id=${l}`)},Mb={list:(l={})=>{const i=new URLSearchParams(l).toString();return oe(`stock.php${i?`?${i}`:""}`)},camp:(l,i={})=>{const o=new URLSearchParams(i).toString();return oe(`stock-camp.php?camp_id=${l}${o?`&${o}`:""}`)}},tn={list:(l={})=>{const i=new URLSearchParams(l).toString();return oe(`orders.php${i?`?${i}`:""}`)},get:l=>oe(`orders-detail.php?id=${l}`),create:l=>oe("orders.php",{method:"POST",body:JSON.stringify(l)}),update:(l,i)=>oe("orders-detail.php",{method:"PUT",body:JSON.stringify({id:l,...i})}),approve:(l,i)=>oe("orders-approve.php",{method:"PUT",body:JSON.stringify({order_id:l,lines:i})}),reject:(l,i)=>oe("orders-reject.php",{method:"PUT",body:JSON.stringify({order_id:l,reason:i})}),query:(l,i,o=null)=>oe("orders-query.php",{method:"POST",body:JSON.stringify({order_id:l,message:i,order_line_id:o})})},Qf={list:(l={})=>{const i=new URLSearchParams(l).toString();return oe(`dispatch.php${i?`?${i}`:""}`)},get:l=>oe(`dispatch-detail.php?id=${l}`),create:l=>oe("dispatch.php",{method:"POST",body:JSON.stringify(l)}),update:(l,i)=>oe("dispatch-detail.php",{method:"PUT",body:JSON.stringify({id:l,...i})})},kd={list:(l={})=>{const i=new URLSearchParams(l).toString();return oe(`receive.php${i?`?${i}`:""}`)},get:l=>oe(`receive-detail.php?id=${l}`),create:l=>oe("receive.php",{method:"POST",body:JSON.stringify(l)}),confirm:(l,i)=>oe("receive-detail.php",{method:"PUT",body:JSON.stringify({id:l,lines:i})})},Cd={list:(l={})=>{const i=new URLSearchParams(l).toString();return oe(`issue.php${i?`?${i}`:""}`)},get:l=>oe(`issue-detail.php?id=${l}`),create:l=>oe("issue.php",{method:"POST",body:JSON.stringify(l)})},Jn={summary:l=>oe(`alerts.php?type=summary${l?`&camp_id=${l}`:""}`),lowStock:l=>oe(`alerts.php?type=low_stock${l?`&camp_id=${l}`:""}`),projections:(l=14,i)=>oe(`alerts.php?type=projections&days=${l}${i?`&camp_id=${i}`:""}`),deadStock:(l=60,i)=>oe(`alerts.php?type=dead_stock&min_days=${l}${i?`&camp_id=${i}`:""}`),excess:l=>oe(`alerts.php?type=excess${l?`&camp_id=${l}`:""}`)},Lb={get:(l,i={})=>{const o=new URLSearchParams({type:l,...i}).toString();return oe(`reports.php?${o}`)}},an={list:()=>oe("users.php"),create:l=>oe("users.php",{method:"POST",body:JSON.stringify(l)}),update:(l,i)=>oe(`users.php?id=${l}`,{method:"PUT",body:JSON.stringify(i)})},tr={categories:()=>oe("pos.php?action=categories"),items:(l={})=>{const i=new URLSearchParams(l).toString();return oe(`pos.php?action=items${i?`&${i}`:""}`)},recent:(l={})=>{const i=new URLSearchParams(l).toString();return oe(`pos.php?action=recent${i?`&${i}`:""}`)},today:()=>oe("pos.php?action=today"),create:l=>oe("pos.php",{method:"POST",body:JSON.stringify(l)})},ws={categories:()=>oe("menu.php?action=categories"),items:(l={})=>{const i=new URLSearchParams(l).toString();return oe(`menu.php?action=items${i?`&${i}`:""}`)},item:l=>oe(`menu.php?action=item&id=${l}`),suggestAlternatives:(l,i)=>{const o=new URLSearchParams({ingredient:l,drink:i||""});return oe(`menu.php?action=suggest_alternatives&${o}`)},searchIngredients:l=>oe(`menu.php?action=search_ingredients&q=${encodeURIComponent(l)}`),stockStatus:()=>oe("menu.php?action=stock_status"),depletion:(l={})=>{const i=new URLSearchParams(l).toString();return oe(`menu.php?action=depletion${i?`&${i}`:""}`)},order:l=>oe("menu.php",{method:"POST",body:JSON.stringify(l)})},$t={recipes:(l={})=>{const i=new URLSearchParams(l).toString();return oe(`kitchen.php?action=recipes${i?`&${i}`:""}`)},recipe:l=>oe(`kitchen.php?action=recipe&id=${l}`),searchRecipes:l=>oe(`kitchen.php?action=search_recipes&q=${encodeURIComponent(l)}`),suggestRecipe:l=>oe(`kitchen.php?action=suggest_recipe&items=${encodeURIComponent(l)}`),suggestAlternatives:(l,i)=>{const o=new URLSearchParams({ingredient:l,dish:i||""});return oe(`kitchen.php?action=suggest_alternatives&${o}`)},searchIngredients:l=>oe(`kitchen.php?action=search_ingredients&q=${encodeURIComponent(l)}`),saveRecipe:l=>oe("kitchen.php",{method:"POST",body:JSON.stringify({action:"save_recipe",...l})}),logPattern:(l,i,o)=>oe("kitchen.php",{method:"POST",body:JSON.stringify({action:"log_pattern",items:l,source:i,reference_id:o})}),preferences:l=>{const i=l?`&type=${l}`:"";return oe(`kitchen.php?action=preferences${i}`)},suggestedItems:(l="issue")=>oe(`kitchen.php?action=suggested_items&context=${l}`),learn:()=>oe("kitchen.php",{method:"POST",body:JSON.stringify({action:"learn"})}),deleteRecipe:l=>oe("kitchen.php",{method:"POST",body:JSON.stringify({action:"delete_recipe",id:l})})},nt={chefInit:(l,i)=>oe(`kitchen-menu.php?action=chef_init&date=${l}&meal=${i}`),plan:(l,i)=>oe(`kitchen-menu.php?action=plan&date=${l}&meal=${i}`),plans:l=>oe(`kitchen-menu.php?action=plans&month=${l}`),audit:l=>oe(`kitchen-menu.php?action=audit&plan_id=${l}`),recipeIngredients:(l,i)=>oe(`kitchen-menu.php?action=recipe_ingredients&recipe_id=${l}&portions=${i||0}`),searchItems:l=>oe(`kitchen-menu.php?action=search_items&q=${encodeURIComponent(l)}`),createPlan:(l,i,o)=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"create_plan",date:l,meal:i,portions:o})}),addDish:(l,i,o,d,x)=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"add_dish",plan_id:l,course:i,dish_name:o,portions:d,recipe_id:x||null})}),removeDish:l=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"remove_dish",dish_id:l})}),loadRecipe:(l,i,o)=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"load_recipe",dish_id:l,recipe_id:i,portions:o})}),ratePresentation:(l,i)=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"rate_presentation",dish_id:l,photo_url:i})}),uploadDishPhoto:l=>{const i=new FormData;return i.append("photo",l),oe("upload-dish-photo.php",{method:"POST",body:i,isFormData:!0})},addIngredient:(l,i,o,d)=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"add_ingredient",dish_id:l,item_id:i,qty:o,uom:d})}),removeIngredient:(l,i)=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"remove_ingredient",ingredient_id:l,reason:i})}),updateQty:(l,i)=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"update_qty",ingredient_id:l,qty:i})}),updatePortions:(l,i)=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"update_portions",dish_id:l,portions:i})}),updatePlanPax:(l,i)=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"update_plan_pax",plan_id:l,pax:i})}),confirmPlan:l=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"confirm_plan",plan_id:l})}),reopenPlan:l=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"reopen_plan",plan_id:l})}),weeklyIngredients:l=>oe(`kitchen-menu.php?action=weekly_ingredients&week_start=${l}`),updateDailyTracking:(l,i)=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"update_daily_tracking",ingredient_id:l,...i})}),updateWeeklyGrocery:(l,i,o)=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"update_weekly_grocery",week_start:l,item_id:i,...o})}),addWeeklyGrocery:(l,i,o)=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"add_weekly_grocery",week_start:l,item_id:i,projected_qty:o})}),defaultMenu:(l,i)=>oe(`kitchen-menu.php?action=default_menu&day=${l}&meal=${i}`)},qb={get:(l={})=>{const i=new URLSearchParams(l).toString();return oe(`daily-overview.php${i?`?${i}`:""}`)}},Ub=5;let vd=!1;function Ai(l,i={}){window.dispatchEvent(new CustomEvent(l,{detail:i}))}async function zd(){if(vd||!navigator.onLine)return;const i=(await Sb()).filter(x=>x.status!=="failed");if(i.length===0)return;vd=!0,Ai("sync:start",{count:i.length});let o=0,d=0;for(const x of i){if(!navigator.onLine)break;try{await bd(x.id,{status:"syncing"}),await Ab(x.endpoint,{method:x.method,body:x.body||void 0,headers:x.headers||{}}),await wb(x.id),o++,Ai("sync:item-synced",{id:x.id,synced:o,total:i.length})}catch(f){const p=(x.retries||0)+1;p>=Ub?(await bd(x.id,{status:"failed",retries:p,lastError:f.message}),d++):await bd(x.id,{status:"pending",retries:p,lastError:f.message}),Ai("sync:error",{id:x.id,error:f.message,retries:p})}}vd=!1,Ai("sync:complete",{synced:o,failed:d,remaining:await Gf()})}function Bb(){window.addEventListener("online",()=>{setTimeout(zd,1e3)}),navigator.onLine&&setTimeout(zd,2e3)}const Zf=(...l)=>l.filter((i,o,d)=>!!i&&i.trim()!==""&&d.indexOf(i)===o).join(" ").trim();const Hb=l=>l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const Gb=l=>l.replace(/^([A-Z])|[\s-_]+(\w)/g,(i,o,d)=>d?d.toUpperCase():o.toLowerCase());const nf=l=>{const i=Gb(l);return i.charAt(0).toUpperCase()+i.slice(1)};var $b={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Yb=l=>{for(const i in l)if(i.startsWith("aria-")||i==="role"||i==="title")return!0;return!1};const Vb=u.forwardRef(({color:l="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:d,className:x="",children:f,iconNode:p,...j},h)=>u.createElement("svg",{ref:h,...$b,width:i,height:i,stroke:l,strokeWidth:d?Number(o)*24/Number(i):o,className:Zf("lucide",x),...!f&&!Yb(j)&&{"aria-hidden":"true"},...j},[...p.map(([y,v])=>u.createElement(y,v)),...Array.isArray(f)?f:[f]]));const ue=(l,i)=>{const o=u.forwardRef(({className:d,...x},f)=>u.createElement(Vb,{ref:f,iconNode:i,className:Zf(`lucide-${Hb(nf(l))}`,`lucide-${l}`,d),...x}));return o.displayName=nf(l),o};const Qb=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],tl=ue("arrow-left",Qb);const Zb=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],nr=ue("arrow-right",Zb);const Xb=[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]],Xf=ue("beaker",Xb);const Kb=[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]],Jb=ue("bed-double",Kb);const Fb=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],mr=ue("bell",Fb);const Ib=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],al=ue("book-open",Ib);const Wb=[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]],Fa=ue("boxes",Wb);const Pb=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],ev=ue("bug",Pb);const tv=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],av=ue("building-2",tv);const sv=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ks=ue("calendar",sv);const nv=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Kf=ue("camera",nv);const lv=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Zi=ue("chart-column",lv);const rv=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Yt=ue("check",rv);const iv=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],ta=ue("chef-hat",iv);const cv=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],vt=ue("chevron-down",cv);const ov=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ia=ue("chevron-left",ov);const dv=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],yt=ue("chevron-right",dv);const uv=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Jf=ue("chevron-up",uv);const mv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],or=ue("circle-alert",mv);const xv=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ff=ue("circle-check-big",xv);const fv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Gd=ue("circle-check",fv);const hv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],If=ue("circle-question-mark",hv);const pv=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],sn=ue("clipboard-list",pv);const gv=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Cs=ue("clock",gv);const yv=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],bv=ue("coffee",yv);const vv=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Wf=ue("credit-card",vv);const jv=[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]],Nv=ue("delete",jv);const _v=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Sv=ue("eye-off",_v);const wv=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],kv=ue("eye",wv);const Cv=[["path",{d:"M4.226 20.925A2 2 0 0 0 6 22h12a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v3.127",key:"wfxp4w"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m5 11-3 3",key:"1dgrs4"}],["path",{d:"m5 17-3-3h10",key:"1mvvaf"}]],zs=ue("file-output",Cv);const zv=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Pf=ue("funnel",zv);const Tv=[["path",{d:"M5.116 4.104A1 1 0 0 1 6.11 3h11.78a1 1 0 0 1 .994 1.105L17.19 20.21A2 2 0 0 1 15.2 22H8.8a2 2 0 0 1-2-1.79z",key:"p55z4y"}],["path",{d:"M6 12a5 5 0 0 1 6 0 5 5 0 0 0 6 0",key:"mjntcy"}]],Fn=ue("glass-water",Tv);const Ev=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Ov=ue("grid-3x3",Ev);const Rv=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Av=ue("hash",Rv);const Dv=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Mv=ue("history",Dv);const Lv=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],qv=ue("inbox",Lv);const Uv=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Xi=ue("layout-dashboard",Uv);const Bv=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Hv=ue("lightbulb",Bv);const Gv=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ue=ue("loader-circle",Gv);const $v=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Yv=ue("log-in",$v);const Vv=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],$d=ue("log-out",Vv);const Qv=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Zv=ue("map-pin",Qv);const Xv=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Kv=ue("menu",Xv);const Jv=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Fv=ue("message-square",Jv);const Iv=[["path",{d:"M5 12h14",key:"1ays0h"}]],Pa=ue("minus",Iv);const Wv=[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]],Pv=ue("mouse-pointer-click",Wv);const e1=[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]],Ts=ue("package-check",e1);const t1=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],ha=ue("package",t1);const a1=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],s1=ue("pencil",a1);const n1=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],l1=ue("play",n1);const r1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ve=ue("plus",r1);const i1=[["path",{d:"M13 16H8",key:"wsln4y"}],["path",{d:"M14 8H8",key:"1l3xfs"}],["path",{d:"M16 12H8",key:"1fr5h0"}],["path",{d:"M4 3a1 1 0 0 1 1-1 1.3 1.3 0 0 1 .7.2l.933.6a1.3 1.3 0 0 0 1.4 0l.934-.6a1.3 1.3 0 0 1 1.4 0l.933.6a1.3 1.3 0 0 0 1.4 0l.933-.6a1.3 1.3 0 0 1 1.4 0l.934.6a1.3 1.3 0 0 0 1.4 0l.933-.6A1.3 1.3 0 0 1 19 2a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1 1.3 1.3 0 0 1-.7-.2l-.933-.6a1.3 1.3 0 0 0-1.4 0l-.934.6a1.3 1.3 0 0 1-1.4 0l-.933-.6a1.3 1.3 0 0 0-1.4 0l-.933.6a1.3 1.3 0 0 1-1.4 0l-.934-.6a1.3 1.3 0 0 0-1.4 0l-.933.6a1.3 1.3 0 0 1-.7.2 1 1 0 0 1-1-1z",key:"ycz6yz"}]],eh=ue("receipt-text",i1);const c1=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],th=ue("refresh-cw",c1);const o1=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],d1=ue("rotate-ccw",o1);const u1=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Vt=ue("search",u1);const m1=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ah=ue("send",m1);const x1=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],sh=ue("settings",x1);const f1=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],h1=ue("shield-check",f1);const p1=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],g1=ue("shield",p1);const y1=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],_t=ue("shopping-cart",y1);const b1=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],nn=ue("sparkles",b1);const v1=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],lr=ue("star",v1);const j1=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Es=ue("trash-2",j1);const N1=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],nh=ue("trending-down",N1);const _1=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],S1=ue("trending-up",_1);const w1=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],St=ue("triangle-alert",w1);const k1=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],xr=ue("truck",k1);const C1=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],z1=ue("user",C1);const T1=[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]],In=ue("utensils-crossed",T1);const E1=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],_a=ue("users",E1);const O1=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],lh=ue("wifi-off",O1);const R1=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],lf=ue("wifi",R1);const A1=[["path",{d:"M8 22h8",key:"rmew8v"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M12 15v7",key:"t2xh3l"}],["path",{d:"M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z",key:"10ffi3"}]],xa=ue("wine",A1);const D1=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],M1=ue("wrench",D1);const L1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ee=ue("x",L1);function q1(){const[l,i]=u.useState(""),[o,d]=u.useState(""),[x,f]=u.useState(!1),[p,j]=u.useState(""),[h,y]=u.useState(!1),v=Os(),{dispatch:b}=rn();async function g(T){T.preventDefault(),j(""),y(!0);try{const _=await Vf.login(l,o);localStorage.setItem("kcl_token",_.token),b({type:"LOGIN",payload:{user:_.user,camps:_.camps}}),v("/app")}catch(_){j(_.message)}finally{y(!1)}}return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-green-100 flex items-center justify-center p-4",children:t.jsxs("div",{className:"w-full max-w-md",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-600 rounded-2xl mb-4",children:t.jsx("span",{className:"text-white text-2xl font-bold",children:"KC"})}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"KCL Stores"}),t.jsx("p",{className:"text-gray-500 mt-1",children:"Karibu Camps  Inventory Management"})]}),t.jsxs("form",{onSubmit:g,className:"bg-white rounded-2xl shadow-lg p-8",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Manager Login"}),p&&t.jsx("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm",children:p}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),t.jsx("input",{type:"text",value:l,onChange:T=>i(T.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition",placeholder:"Enter username",autoComplete:"username",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:x?"text":"password",value:o,onChange:T=>d(T.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition pr-12",placeholder:"Enter password",autoComplete:"current-password",required:!0}),t.jsx("button",{type:"button",onClick:()=>f(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:x?t.jsx(Sv,{size:20}):t.jsx(kv,{size:20})})]})]})]}),t.jsxs("button",{type:"submit",disabled:h,className:"w-full mt-6 bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-4 rounded-xl transition flex items-center justify-center gap-2 disabled:opacity-50",children:[h?t.jsx(Ue,{size:20,className:"animate-spin"}):t.jsx(Yv,{size:20}),h?"Signing in...":"Sign In"]}),t.jsx("div",{className:"mt-6 text-center",children:t.jsx(ke,{to:"/pin-login",className:"text-green-600 hover:text-green-700 text-sm font-medium",children:"Camp Staff? Login with PIN "})})]})]})})}function U1(){const[l,i]=u.useState(""),[o,d]=u.useState(""),[x,f]=u.useState("username"),[p,j]=u.useState(""),[h,y]=u.useState(!1),[v,b]=u.useState([]),[g,T]=u.useState(!0),_=Os(),{dispatch:A}=rn();u.useEffect(()=>{async function L(){try{const J=((await an.list()).users||[]).filter(ye=>ye.is_active&&ye.pin_enabled);b(J)}catch(ne){console.error("Failed to load staff:",ne)}finally{T(!1)}}L()},[]);function E(L){if(o.length<4){const ne=o+L;d(ne),ne.length===4&&w(ne)}}function k(){d(o.slice(0,-1))}async function w(L){j(""),y(!0);try{const ne=await Vf.pinLogin(l,L);localStorage.setItem("kcl_token",ne.token),A({type:"LOGIN",payload:{user:ne.user,camps:ne.camps}}),_("/app")}catch(ne){j(ne.message),d("")}finally{y(!1)}}function B(L){L.preventDefault(),l.trim()&&(f("pin"),j(""))}const Q=v.find(L=>L.username===l);return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-green-100 flex items-center justify-center p-4",children:t.jsxs("div",{className:"w-full max-w-sm",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-600 rounded-2xl mb-4",children:t.jsx("span",{className:"text-white text-2xl font-bold",children:"KC"})}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"KCL Stores"}),t.jsx("p",{className:"text-gray-500 mt-1",children:"Camp Staff Login"})]}),t.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[p&&t.jsx("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm text-center",children:p}),x==="username"?t.jsxs("form",{onSubmit:B,children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Staff Member"}),g?t.jsxs("div",{className:"flex items-center justify-center py-4 text-gray-400 gap-2",children:[t.jsx(Ue,{size:18,className:"animate-spin"}),t.jsx("span",{className:"text-sm",children:"Loading staff..."})]}):v.length>0?t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:l,onChange:L=>i(L.target.value),className:"w-full px-4 py-4 text-lg border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none appearance-none bg-white",required:!0,children:[t.jsx("option",{value:"",children:" Pick your name "}),v.map(L=>t.jsxs("option",{value:L.username,children:[L.name," (",L.camp_code||"HO",")"]},L.id))]}),t.jsx(vt,{size:20,className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]}):t.jsx("input",{type:"text",value:l,onChange:L=>i(L.target.value),className:"w-full px-4 py-4 text-lg border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",placeholder:"Enter username",autoFocus:!0,required:!0}),t.jsx("button",{type:"submit",disabled:!l,className:"w-full mt-4 bg-green-600 hover:bg-green-700 disabled:bg-gray-300 text-white font-medium py-4 rounded-xl transition text-lg",children:"Next"})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("p",{className:"text-gray-500 text-sm",children:"Logging in as"}),t.jsx("p",{className:"font-semibold text-gray-900",children:Q?.name||l}),Q?.camp_code&&t.jsx("p",{className:"text-xs text-gray-400",children:Q.camp_code}),t.jsx("button",{onClick:()=>{f("username"),d(""),j("")},className:"text-green-600 text-sm mt-1",children:"Change"})]}),t.jsx("p",{className:"text-center text-sm text-gray-600 mb-4",children:"Enter 4-digit PIN"}),t.jsx("div",{className:"flex justify-center gap-4 mb-8",children:[0,1,2,3].map(L=>t.jsx("div",{className:`w-4 h-4 rounded-full transition ${L<o.length?"bg-green-600 scale-110":"bg-gray-200"}`},L))}),h&&t.jsx("div",{className:"flex justify-center mb-4",children:t.jsx(Ue,{size:24,className:"animate-spin text-green-600"})}),t.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[[1,2,3,4,5,6,7,8,9].map(L=>t.jsx("button",{onClick:()=>E(String(L)),disabled:h,className:"h-16 text-2xl font-medium text-gray-800 bg-gray-50 hover:bg-gray-100 active:bg-green-50 rounded-xl transition disabled:opacity-50",children:L},L)),t.jsx("div",{})," ",t.jsx("button",{onClick:()=>E("0"),disabled:h,className:"h-16 text-2xl font-medium text-gray-800 bg-gray-50 hover:bg-gray-100 active:bg-green-50 rounded-xl transition disabled:opacity-50",children:"0"}),t.jsx("button",{onClick:k,disabled:h,className:"h-16 flex items-center justify-center text-gray-500 hover:text-gray-700 bg-gray-50 hover:bg-gray-100 rounded-xl transition disabled:opacity-50",children:t.jsx(Nv,{size:24})})]})]}),t.jsx("div",{className:"mt-6 text-center",children:t.jsx(ke,{to:"/login",className:"text-green-600 hover:text-green-700 text-sm font-medium",children:" Manager Login (Password)"})})]})]})})}const rf={out:"bg-red-100 text-red-700",critical:"bg-red-100 text-red-700",low:"bg-amber-100 text-amber-700",ok:"bg-green-100 text-green-700",excess:"bg-blue-100 text-blue-700",A:"bg-red-100 text-red-700",B:"bg-amber-100 text-amber-700",C:"bg-gray-100 text-gray-600",ambient:"bg-gray-100 text-gray-600",chilled:"bg-blue-100 text-blue-700",frozen:"bg-cyan-100 text-cyan-700",hazardous:"bg-red-100 text-red-700",draft:"bg-gray-100 text-gray-600",submitted:"bg-blue-100 text-blue-700",pending_review:"bg-amber-100 text-amber-700",queried:"bg-orange-100 text-orange-700",stores_approved:"bg-green-100 text-green-700",stores_partial:"bg-yellow-100 text-yellow-700",stores_rejected:"bg-red-100 text-red-700",procurement_ready:"bg-indigo-100 text-indigo-700",dispatching:"bg-purple-100 text-purple-700",dispatched:"bg-purple-100 text-purple-700",in_transit:"bg-violet-100 text-violet-700",delivered:"bg-teal-100 text-teal-700",received:"bg-green-100 text-green-700",closed:"bg-gray-100 text-gray-600",high_risk:"bg-red-100 text-red-700",medium_risk:"bg-amber-100 text-amber-700",low_risk:"bg-green-100 text-green-700",non_food:"bg-gray-100 text-gray-600",pending:"bg-amber-100 text-amber-700",confirmed:"bg-green-100 text-green-700",partial:"bg-yellow-100 text-yellow-700",cancelled:"bg-red-100 text-red-700",kitchen:"bg-orange-100 text-orange-700",housekeeping:"bg-violet-100 text-violet-700",bar:"bg-pink-100 text-pink-700",maintenance:"bg-slate-100 text-slate-700",guest:"bg-teal-100 text-teal-700",office:"bg-sky-100 text-sky-700",other:"bg-gray-100 text-gray-600",good:"bg-green-100 text-green-700",damaged:"bg-red-100 text-red-700",short:"bg-amber-100 text-amber-700",success:"bg-green-100 text-green-700",warning:"bg-amber-100 text-amber-700",danger:"bg-red-100 text-red-700",info:"bg-blue-100 text-blue-700",default:"bg-gray-100 text-gray-600"},B1={pending_review:"Pending Review",stores_approved:"Approved",stores_partial:"Partial",stores_rejected:"Rejected",procurement_ready:"Procurement",in_transit:"In Transit",high_risk:"High Risk",medium_risk:"Medium Risk",low_risk:"Low Risk",non_food:"Non-Food"};function Ye({variant:l="default",children:i,className:o=""}){const d=rf[l]||rf.default,x=i||B1[l]||l?.replace(/_/g," ");return t.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium capitalize ${d} ${o}`,children:x})}function ot({message:l="Loading..."}){return t.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[t.jsx(Ue,{size:32,className:"animate-spin text-green-600 mb-3"}),t.jsx("p",{className:"text-sm text-gray-500",children:l})]})}function H1(){const l=Ie(),{campId:i}=ya(),[o,d]=u.useState(null),[x,f]=u.useState(null),[p,j]=u.useState(!0),[h,y]=u.useState("");u.useEffect(()=>{v()},[i]);async function v(){j(!0),y("");try{const _=i||l?.camp_id,[A,E]=await Promise.all([Db.get(_),Jn.summary(_).catch(()=>null)]);d(A),E&&f(E.alerts)}catch(_){y(_.message)}finally{j(!1)}}const b=()=>{const _=new Date().getHours();return _<12?"Good morning":_<17?"Good afternoon":"Good evening"};function g(_){return _?_>=1e6?`TZS ${(_/1e6).toFixed(1)}M`:_>=1e3?`TZS ${(_/1e3).toFixed(0)}K`:`TZS ${Math.round(_).toLocaleString()}`:"TZS 0"}function T(_){if(!_)return"";const A=new Date(_),k=new Date-A,w=Math.floor(k/6e4);if(w<60)return`${w}m ago`;const B=Math.floor(w/60);return B<24?`${B}h ago`:A.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}return p&&!o?t.jsx(ot,{message:"Loading dashboard..."}):t.jsxs("div",{children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[b(),", ",l?.name?.split(" ")[0]]}),t.jsxs("p",{className:"text-gray-500 mt-1",children:[l?.camp_name||"Head Office","  ",new Date().toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"})]})]}),h&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm",children:[h,t.jsx("button",{onClick:v,className:"ml-2 underline",children:"Retry"})]}),t.jsxs("div",{"data-guide":"dashboard-stats",className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[t.jsx(Di,{icon:_t,label:"Pending Orders",value:o?.pending_orders??0,color:"blue",link:"/app/orders"}),t.jsx(Di,{icon:St,label:"Low Stock Items",value:x?x.low_stock+x.out_of_stock:o?.low_stock_items??0,color:"amber",link:"/app/alerts"}),t.jsx(Di,{icon:Ts,label:"Pending Receipts",value:o?.pending_receipts??0,color:"green",link:"/app/receive"}),t.jsx(Di,{icon:zs,label:"Issues Today",value:o?.issues_today??0,color:"purple",link:"/app/issue"})]}),o&&t.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-700 rounded-xl p-5 mb-6 text-white",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-green-100 text-sm",children:"Total Stock Value"}),t.jsx("p",{className:"text-3xl font-bold mt-1",children:g(o.total_stock_value)})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-green-100 text-sm",children:"Active Items"}),t.jsx("p",{className:"text-2xl font-bold mt-1",children:o.items_count?.toLocaleString()})]})]})}),x&&x.total_alerts>0&&t.jsxs(ke,{to:"/app/alerts",className:"flex items-center gap-3 bg-amber-50 border border-amber-200 rounded-xl p-4 mb-6 hover:bg-amber-100 transition",children:[t.jsx(mr,{size:20,className:"text-amber-600 flex-shrink-0"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("p",{className:"text-sm font-medium text-amber-800",children:[x.total_alerts," stock alerts require attention"]}),t.jsxs("p",{className:"text-xs text-amber-600 mt-0.5",children:[x.out_of_stock>0&&`${x.out_of_stock} out of stock  `,x.critical>0&&`${x.critical} critical  `,x.stockout_7days>0&&`${x.stockout_7days} running out in 7 days  `,x.dead_stock>0&&`${x.dead_stock} dead stock`]})]}),t.jsx(nr,{size:16,className:"text-amber-400"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[t.jsx("h2",{className:"font-semibold text-gray-900 mb-4",children:"Quick Actions"}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx(Mi,{to:"/app/orders/new",icon:_t,label:"New Order",color:"green"}),t.jsx(Mi,{to:"/app/issue/new",icon:zs,label:"New Issue",color:"blue"}),t.jsx(Mi,{to:"/app/stock",icon:Fa,label:"Check Stock",color:"amber"}),t.jsx(Mi,{to:"/app/items",icon:S1,label:"Items List",color:"gray"})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"font-semibold text-gray-900",children:"Recent Orders"}),t.jsxs(ke,{to:"/app/orders",className:"text-green-600 text-sm font-medium flex items-center gap-1",children:["View all ",t.jsx(nr,{size:14})]})]}),o?.recent_orders?.length?t.jsx("div",{className:"space-y-2",children:o.recent_orders.map(_=>t.jsxs(ke,{to:`/app/orders/${_.id}`,className:"flex items-center gap-3 p-2.5 rounded-lg hover:bg-gray-50 transition -mx-2",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[t.jsx("span",{className:"text-sm font-mono font-medium text-gray-900",children:_.order_number}),t.jsx(Ye,{variant:_.status})]}),t.jsxs("p",{className:"text-xs text-gray-400",children:[_.camp_code,"  ",_.created_by,"  ",T(_.created_at)]})]}),t.jsx("span",{className:"text-sm font-semibold text-gray-700 flex-shrink-0",children:g(_.total_value)})]},_.id))}):t.jsxs("div",{className:"text-center py-6",children:[t.jsx(_t,{size:32,className:"mx-auto text-gray-200 mb-2"}),t.jsx("p",{className:"text-sm text-gray-400",children:"No recent orders"})]})]})]}),o?.low_stock_alerts?.length>0&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h2",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[t.jsx(St,{size:18,className:"text-amber-500"}),"Low Stock Alerts"]}),t.jsxs(ke,{to:"/app/alerts",className:"text-green-600 text-sm font-medium flex items-center gap-1",children:["View all ",t.jsx(nr,{size:14})]})]}),t.jsx("div",{className:"hidden lg:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-100",children:[t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 pb-2",children:"Item"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 pb-2",children:"Camp"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 pb-2",children:"Current"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 pb-2",children:"Par Level"}),t.jsx("th",{className:"text-center text-xs font-medium text-gray-500 pb-2",children:"Status"})]})}),t.jsx("tbody",{children:o.low_stock_alerts.map((_,A)=>t.jsxs("tr",{className:"border-b border-gray-50",children:[t.jsxs("td",{className:"py-2.5",children:[t.jsx(ke,{to:`/app/items/${_.item_id}`,className:"text-sm font-medium text-gray-900 hover:text-green-600",children:_.item_name}),t.jsx("p",{className:"text-xs text-gray-400",children:_.item_code})]}),t.jsx("td",{className:"py-2.5",children:t.jsx("span",{className:"text-sm text-gray-500",children:_.camp_code})}),t.jsx("td",{className:"py-2.5 text-right",children:t.jsxs("span",{className:`text-sm font-semibold ${_.stock_status==="out"?"text-red-600":_.stock_status==="critical"?"text-red-500":"text-amber-600"}`,children:[_.current_qty," ",_.uom]})}),t.jsx("td",{className:"py-2.5 text-right",children:t.jsxs("span",{className:"text-sm text-gray-400",children:[_.par_level||""," ",_.uom]})}),t.jsx("td",{className:"py-2.5 text-center",children:t.jsx(Ye,{variant:_.stock_status})})]},A))})]})}),t.jsx("div",{className:"lg:hidden space-y-2",children:o.low_stock_alerts.map((_,A)=>t.jsxs(ke,{to:`/app/items/${_.item_id}`,className:"flex items-center gap-3 p-2.5 rounded-lg hover:bg-gray-50 transition -mx-2",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:_.item_name}),t.jsxs("p",{className:"text-xs text-gray-400",children:[_.item_code,"  ",_.camp_code]})]}),t.jsxs("div",{className:"text-right flex-shrink-0",children:[t.jsx("span",{className:`text-sm font-bold ${_.stock_status==="out"?"text-red-600":"text-amber-600"}`,children:_.current_qty}),t.jsx("span",{className:"text-xs text-gray-400 ml-0.5",children:_.uom})]}),t.jsx(Ye,{variant:_.stock_status})]},A))})]})]})}function Di({icon:l,label:i,value:o,color:d,link:x}){const f={blue:"bg-blue-50 text-blue-600",amber:"bg-amber-50 text-amber-600",green:"bg-green-50 text-green-600",purple:"bg-purple-50 text-purple-600"};return t.jsxs(ke,{to:x,className:"bg-white rounded-xl border border-gray-200 p-4 hover:shadow-md transition",children:[t.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center mb-3 ${f[d]}`,children:t.jsx(l,{size:20})}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o}),t.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:i})]})}function Mi({to:l,icon:i,label:o,color:d}){const x={green:"bg-green-50 text-green-600 hover:bg-green-100",blue:"bg-blue-50 text-blue-600 hover:bg-blue-100",amber:"bg-amber-50 text-amber-600 hover:bg-amber-100",gray:"bg-gray-50 text-gray-600 hover:bg-gray-100"};return t.jsxs(ke,{to:l,className:`flex items-center gap-3 p-3 rounded-lg transition ${x[d]}`,children:[t.jsx(i,{size:20}),t.jsx("span",{className:"text-sm font-medium",children:o})]})}function fr({value:l="",onChange:i,placeholder:o="Search...",debounce:d=300}){const[x,f]=u.useState(l),p=u.useRef(null);u.useEffect(()=>{f(l)},[l]);function j(y){const v=y.target.value;f(v),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{i(v)},d)}function h(){f(""),i("")}return t.jsxs("div",{className:"relative",children:[t.jsx(Vt,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",value:x,onChange:j,placeholder:o,className:"w-full pl-10 pr-10 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none"}),x&&t.jsx("button",{onClick:h,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t.jsx(Ee,{size:16})})]})}function sl({page:l,totalPages:i,total:o,perPage:d,onChange:x}){if(i<=1)return null;const f=(l-1)*d+1,p=Math.min(l*d,o);return t.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[t.jsxs("p",{className:"text-sm text-gray-500",children:[f,"",p," of ",o.toLocaleString()]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>x(l-1),disabled:l<=1,className:"p-2 rounded-lg text-gray-500 hover:bg-gray-100 disabled:opacity-30 disabled:cursor-not-allowed",children:t.jsx(Ia,{size:18})}),t.jsxs("span",{className:"text-sm text-gray-600 px-2",children:[l," / ",i]}),t.jsx("button",{onClick:()=>x(l+1),disabled:l>=i,className:"p-2 rounded-lg text-gray-500 hover:bg-gray-100 disabled:opacity-30 disabled:cursor-not-allowed",children:t.jsx(yt,{size:18})})]})]})}function nl({icon:l=qv,title:i="No data",message:o="",action:d}){return t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gray-100 rounded-full mb-4",children:t.jsx(l,{size:28,className:"text-gray-400"})}),t.jsx("h3",{className:"text-gray-900 font-medium mb-1",children:i}),o&&t.jsx("p",{className:"text-sm text-gray-500 mb-4",children:o}),d]})}function G1(){const[l,i]=u.useState(null),[o,d]=u.useState(!0),[x,f]=u.useState(""),[p,j]=u.useState({search:"",group:"",abc_class:"",storage_type:"",page:1}),[h,y]=u.useState(!1);u.useEffect(()=>{v()},[p]);async function v(){d(!0),f("");try{const _=await Qi.list({page:p.page,per_page:25,search:p.search,group:p.group,abc_class:p.abc_class,storage_type:p.storage_type});i(_)}catch(_){f(_.message)}finally{d(!1)}}function b(_){j(A=>({...A,search:_,page:1}))}function g(_,A){j(E=>({...E,[_]:A,page:1}))}const T=[p.group,p.abc_class,p.storage_type].filter(Boolean).length;return t.jsxs("div",{children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Items Catalog"}),t.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[l?.pagination?.total?.toLocaleString()||""," items"]})]})}),t.jsxs("div",{"data-guide":"items-search",className:"flex gap-2 mb-4",children:[t.jsx("div",{className:"flex-1",children:t.jsx(fr,{value:p.search,onChange:b,placeholder:"Search items by name or code..."})}),t.jsxs("button",{onClick:()=>y(!h),"data-guide":"items-filter-btn",className:`flex items-center gap-2 px-4 py-2.5 rounded-lg border text-sm font-medium transition ${T>0?"border-green-300 bg-green-50 text-green-700":"border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[t.jsx(Pf,{size:16}),t.jsx("span",{className:"hidden sm:inline",children:"Filters"}),T>0&&t.jsx("span",{className:"w-5 h-5 bg-green-600 text-white rounded-full text-xs flex items-center justify-center",children:T})]})]}),h&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 mb-4",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Item Group"}),t.jsxs("select",{value:p.group,onChange:_=>g("group",_.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[t.jsx("option",{value:"",children:"All Groups"}),l?.groups?.map(_=>t.jsxs("option",{value:_.id,children:[_.code,"  ",_.name]},_.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"ABC Class"}),t.jsxs("select",{value:p.abc_class,onChange:_=>g("abc_class",_.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[t.jsx("option",{value:"",children:"All Classes"}),t.jsx("option",{value:"A",children:"A  High Value"}),t.jsx("option",{value:"B",children:"B  Medium Value"}),t.jsx("option",{value:"C",children:"C  Low Value"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Storage Type"}),t.jsxs("select",{value:p.storage_type,onChange:_=>g("storage_type",_.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[t.jsx("option",{value:"",children:"All Types"}),t.jsx("option",{value:"ambient",children:"Ambient"}),t.jsx("option",{value:"chilled",children:"Chilled"}),t.jsx("option",{value:"frozen",children:"Frozen"}),t.jsx("option",{value:"hazardous",children:"Hazardous"})]})]})]}),T>0&&t.jsx("button",{onClick:()=>j(_=>({..._,group:"",abc_class:"",storage_type:"",page:1})),className:"mt-3 text-sm text-red-600 hover:text-red-700 font-medium",children:"Clear all filters"})]}),x&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm",children:[x,t.jsx("button",{onClick:v,className:"ml-2 underline",children:"Retry"})]}),o&&!l&&t.jsx(ot,{message:"Loading items..."}),l&&t.jsx("div",{className:"bg-white rounded-xl border border-gray-200",children:l.items.length===0?t.jsx(nl,{icon:ha,title:"No items found",message:p.search?`No items matching "${p.search}"`:"No items in catalog"}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"hidden lg:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-100",children:[t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Code"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Item Name"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Group"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"UOM"}),t.jsx("th",{className:"text-center text-xs font-medium text-gray-500 px-4 py-3",children:"ABC"}),t.jsx("th",{className:"text-center text-xs font-medium text-gray-500 px-4 py-3",children:"Storage"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-3",children:"Price (TZS)"}),t.jsx("th",{className:"w-8"})]})}),t.jsx("tbody",{children:l.items.map(_=>t.jsxs("tr",{className:"border-b border-gray-50 hover:bg-gray-50 transition",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm font-mono text-gray-900",children:_.item_code})}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx(ke,{to:`/app/items/${_.id}`,className:"text-sm font-medium text-gray-900 hover:text-green-600",children:_.name}),_.is_critical&&t.jsx("span",{className:"ml-1 text-red-500 text-xs",title:"Critical item",children:""}),_.is_perishable&&t.jsx("span",{className:"ml-1 text-amber-500 text-xs",title:"Perishable",children:""})]}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-gray-500",children:_.group_code})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-gray-500",children:_.stock_uom})}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx(Ye,{variant:_.abc_class,children:_.abc_class})}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx(Ye,{variant:_.storage_type,children:_.storage_type})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:"text-sm text-gray-900",children:_.last_purchase_price?Math.round(_.last_purchase_price).toLocaleString():""})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(ke,{to:`/app/items/${_.id}`,children:t.jsx(yt,{size:16,className:"text-gray-400"})})})]},_.id))})]})}),t.jsx("div",{className:"lg:hidden divide-y divide-gray-100",children:l.items.map(_=>t.jsxs(ke,{to:`/app/items/${_.id}`,className:"flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[t.jsx("span",{className:"text-xs font-mono text-gray-400",children:_.item_code}),t.jsx(Ye,{variant:_.abc_class,children:_.abc_class}),_.is_critical&&t.jsx("span",{className:"text-red-500 text-xs",children:""})]}),t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:_.name}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.jsx("span",{className:"text-xs text-gray-400",children:_.group_name}),t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsx("span",{className:"text-xs text-gray-400",children:_.stock_uom}),_.last_purchase_price&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsxs("span",{className:"text-xs text-gray-500",children:["TZS ",Math.round(_.last_purchase_price).toLocaleString()]})]})]})]}),t.jsx(yt,{size:16,className:"text-gray-400 flex-shrink-0"})]},_.id))}),t.jsx("div",{className:"px-4 pb-4",children:t.jsx(sl,{page:l.pagination.page,totalPages:l.pagination.total_pages,total:l.pagination.total,perPage:l.pagination.per_page,onChange:_=>j(A=>({...A,page:_}))})})]})})]})}function $1(){const{id:l}=$i(),[i,o]=u.useState(null),[d,x]=u.useState(!0),[f,p]=u.useState("");u.useEffect(()=>{j()},[l]);async function j(){x(!0);try{const v=await Qi.get(l);o(v)}catch(v){p(v.message)}finally{x(!1)}}if(d)return t.jsx(ot,{message:"Loading item..."});if(f)return t.jsxs("div",{className:"text-center py-16",children:[t.jsx("p",{className:"text-red-600 mb-4",children:f}),t.jsx(ke,{to:"/app/items",className:"text-green-600 font-medium",children:"Back to Items"})]});if(!i)return null;const h=i.item,y=v=>v?`TZS ${Math.round(v).toLocaleString()}`:"";return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx(ke,{to:"/app/items",className:"p-2 hover:bg-gray-100 rounded-lg transition",children:t.jsx(tl,{size:20,className:"text-gray-600"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[t.jsx("span",{className:"text-sm font-mono text-gray-400",children:h.item_code}),t.jsx(Ye,{variant:h.abc_class,children:h.abc_class}),t.jsx(Ye,{variant:h.storage_type,children:h.storage_type}),h.is_critical&&t.jsx(Ye,{variant:"danger",children:"Critical"})]}),t.jsx("h1",{className:"text-xl font-bold text-gray-900 truncate",children:h.name})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[t.jsxs("h2",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx(ha,{size:18}),"Item Details"]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(tt,{label:"Item Code",value:h.item_code}),t.jsx(tt,{label:"SAP Item No",value:h.sap_item_no||""}),t.jsx(tt,{label:"Group",value:h.group_name?`${h.group_code}  ${h.group_name}`:""}),t.jsx(tt,{label:"Sub-Category",value:h.sub_cat_name?`${h.sub_cat_code}  ${h.sub_cat_name}`:""}),t.jsx(tt,{label:"Cost Center",value:h.cost_center_name||""}),t.jsx(tt,{label:"Manufacturer",value:h.manufacturer||""}),t.jsx(tt,{label:"Barcode",value:h.barcode||""}),t.jsx(tt,{label:"Description",value:h.description||""})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[t.jsxs("h2",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx(Zi,{size:18}),"Units & Pricing"]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(tt,{label:"Stock UOM",value:h.stock_uom_name||h.stock_uom||""}),t.jsx(tt,{label:"Purchase UOM",value:h.purchase_uom_name||h.purchase_uom||""}),t.jsx(tt,{label:"Issue UOM",value:h.issue_uom_name||h.issue_uom||""}),t.jsx(tt,{label:"Pack Size",value:h.standard_pack_size||""}),t.jsx(tt,{label:"Purchase  Stock",value:`${h.purchase_to_stock_factor}x`}),t.jsx(tt,{label:"Stock  Issue",value:`${h.stock_to_issue_factor}x`}),t.jsx(tt,{label:"Last Purchase Price",value:y(h.last_purchase_price),highlight:!0}),t.jsx(tt,{label:"Weighted Avg Cost",value:y(h.weighted_avg_cost)}),t.jsx(tt,{label:"Min Order Qty",value:h.min_order_qty||""}),t.jsx(tt,{label:"Yield %",value:h.yield_percentage?`${h.yield_percentage}%`:""})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[t.jsxs("h2",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx(h1,{size:18}),"Storage & Safety"]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(tt,{label:"Storage Type",value:h.storage_type}),t.jsx(tt,{label:"Temp Range",value:h.storage_temp_min!=null||h.storage_temp_max!=null?`${h.storage_temp_min??"?"}C to ${h.storage_temp_max??"?"}C`:""}),t.jsx(tt,{label:"HACCP Category",value:h.haccp_category?.replace(/_/g," ")||""}),t.jsx(tt,{label:"Perishable",value:h.is_perishable?"Yes":"No"}),t.jsx(tt,{label:"Shelf Life",value:h.shelf_life_days?`${h.shelf_life_days} days`:""}),t.jsx(tt,{label:"After Opening",value:h.shelf_life_after_opening_days?`${h.shelf_life_after_opening_days} days`:""}),t.jsx(tt,{label:"Allergen Info",value:h.allergen_info||""})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[t.jsxs("h2",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx(xr,{size:18}),"Stock by Camp"]}),i.stock_balances.length===0?t.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No stock records"}):t.jsx("div",{className:"space-y-3",children:i.stock_balances.map(v=>t.jsxs("div",{className:"border border-gray-100 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("span",{className:"text-sm font-medium text-gray-900",children:v.camp_name}),t.jsx(Ye,{variant:v.stock_status,children:v.stock_status})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"text-lg font-bold text-gray-900",children:[v.current_qty.toLocaleString()," ",t.jsx("span",{className:"text-xs text-gray-400 font-normal",children:h.stock_uom})]}),t.jsxs("span",{className:"text-xs text-gray-400",children:["Par: ",v.par_level??""]})]}),v.days_stock_on_hand!=null&&t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[v.days_stock_on_hand," days on hand"]})]},v.camp_id))})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[t.jsx("h2",{className:"font-semibold text-gray-900 mb-4",children:"Suppliers"}),i.suppliers.length===0?t.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No suppliers linked"}):t.jsx("div",{className:"space-y-2",children:i.suppliers.map(v=>t.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-50 last:border-0",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[v.supplier_name,v.is_preferred&&t.jsx("span",{className:"ml-1 text-green-600 text-xs",children:""})]}),t.jsxs("p",{className:"text-xs text-gray-400",children:["Lead: ",v.lead_time_days?`${v.lead_time_days}d`:""]})]}),t.jsx("span",{className:"text-sm text-gray-600",children:v.unit_price?y(v.unit_price):""})]},v.supplier_id))})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[t.jsxs("h2",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx(Cs,{size:18}),"Recent Movements"]}),i.recent_movements.length===0?t.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No movements yet"}):t.jsx("div",{className:"space-y-2",children:i.recent_movements.map(v=>t.jsx("div",{className:"flex items-center justify-between py-2 border-b border-gray-50 last:border-0",children:t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm text-gray-900",children:[t.jsxs("span",{className:v.type==="receipt"||v.type==="adjustment_in"?"text-green-600":"text-red-600",children:[v.type==="receipt"||v.type==="adjustment_in"?"+":"",v.quantity]}),t.jsx("span",{className:"text-gray-400 ml-1",children:v.camp_code})]}),t.jsxs("p",{className:"text-xs text-gray-400",children:[v.reference_number||v.type,"  ",new Date(v.created_at).toLocaleDateString("en-GB")]})]})},v.id))})]})]})]})]})}function tt({label:l,value:i,highlight:o}){return t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400 mb-0.5",children:l}),t.jsx("p",{className:`text-sm ${o?"font-semibold text-gray-900":"text-gray-700"}`,children:i})]})}function Y1(){const l=Ie(),{campId:i}=ya(),[o,d]=u.useState(null),[x,f]=u.useState(!0),[p,j]=u.useState(""),[h,y]=u.useState({camp_id:i||l?.camp_id||"",search:"",status:"",group:"",page:1}),[v,b]=u.useState(!1);u.useEffect(()=>{y(k=>({...k,camp_id:i||l?.camp_id||"",page:1}))},[i]),u.useEffect(()=>{g()},[h]);async function g(){f(!0),j("");try{const k=await Mb.list({camp_id:h.camp_id,page:h.page,per_page:25,search:h.search,status:h.status,group:h.group});d(k)}catch(k){j(k.message)}finally{f(!1)}}function T(k){y(w=>({...w,search:k,page:1}))}const _=[h.status,h.group].filter(Boolean).length,A=o?.summary,E={out:"bg-red-600",critical:"bg-red-500",low:"bg-amber-500",ok:"bg-green-500",excess:"bg-blue-500"};return t.jsxs("div",{children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Stock Balances"}),t.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[o?.pagination?.total?.toLocaleString()||""," items tracked"]})]})}),A&&t.jsxs("div",{"data-guide":"stock-summary",className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3 mb-4",children:[t.jsx(Kn,{label:"Total Value",value:`TZS ${(A.total_value/1e6).toFixed(1)}M`,color:"gray"}),t.jsx(Kn,{label:"OK",value:A.ok_count,color:"green",onClick:()=>y(k=>({...k,status:k.status==="ok"?"":"ok",page:1})),active:h.status==="ok"}),t.jsx(Kn,{label:"Low",value:A.low_count,color:"amber",onClick:()=>y(k=>({...k,status:k.status==="low"?"":"low",page:1})),active:h.status==="low"}),t.jsx(Kn,{label:"Critical",value:A.critical_count,color:"red",onClick:()=>y(k=>({...k,status:k.status==="critical"?"":"critical",page:1})),active:h.status==="critical"}),t.jsx(Kn,{label:"Out",value:A.out_count,color:"red",onClick:()=>y(k=>({...k,status:k.status==="out"?"":"out",page:1})),active:h.status==="out"}),t.jsx(Kn,{label:"Excess",value:A.excess_count,color:"blue",onClick:()=>y(k=>({...k,status:k.status==="excess"?"":"excess",page:1})),active:h.status==="excess"})]}),t.jsxs("div",{"data-guide":"stock-search",className:"flex gap-2 mb-4",children:[t.jsx("div",{className:"flex-1",children:t.jsx(fr,{value:h.search,onChange:T,placeholder:"Search stock by item name or code..."})}),el(l?.role)&&t.jsxs("select",{value:h.camp_id,onChange:k=>y(w=>({...w,camp_id:k.target.value,page:1})),className:"px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[t.jsx("option",{value:"",children:"All Camps"}),o?.camps?.map(k=>t.jsxs("option",{value:k.id,children:[k.code,"  ",k.name]},k.id))]}),t.jsxs("button",{onClick:()=>b(!v),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg border text-sm font-medium transition ${_>0?"border-green-300 bg-green-50 text-green-700":"border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[t.jsx(Pf,{size:16}),t.jsx("span",{className:"hidden sm:inline",children:"Filters"})]})]}),v&&t.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4 mb-4",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Status"}),t.jsxs("select",{value:h.status,onChange:k=>y(w=>({...w,status:k.target.value,page:1})),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[t.jsx("option",{value:"",children:"All Status"}),t.jsx("option",{value:"out",children:"Out of Stock"}),t.jsx("option",{value:"critical",children:"Critical"}),t.jsx("option",{value:"low",children:"Low"}),t.jsx("option",{value:"ok",children:"OK"}),t.jsx("option",{value:"excess",children:"Excess"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Item Group"}),t.jsxs("select",{value:h.group,onChange:k=>y(w=>({...w,group:k.target.value,page:1})),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[t.jsx("option",{value:"",children:"All Groups"}),o?.groups?.map(k=>t.jsxs("option",{value:k.id,children:[k.code,"  ",k.name]},k.id))]})]})]})}),p&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm",children:[p,t.jsx("button",{onClick:g,className:"ml-2 underline",children:"Retry"})]}),x&&!o&&t.jsx(ot,{message:"Loading stock..."}),o&&t.jsx("div",{className:"bg-white rounded-xl border border-gray-200",children:o.stock.length===0?t.jsx(nl,{icon:Fa,title:"No stock records",message:"Stock balances will appear here once items are received"}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"hidden lg:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-100",children:[t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Item"}),!h.camp_id&&t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Camp"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-3",children:"Qty"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-3",children:"Par"}),t.jsx("th",{className:"text-center text-xs font-medium text-gray-500 px-4 py-3",children:"Status"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-3",children:"Value (TZS)"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-3",children:"Days OH"}),t.jsx("th",{className:"w-8"})]})}),t.jsx("tbody",{children:o.stock.map(k=>t.jsxs("tr",{className:"border-b border-gray-50 hover:bg-gray-50 transition",children:[t.jsxs("td",{className:"px-4 py-3",children:[t.jsx(ke,{to:`/app/items/${k.item_id}`,className:"text-sm font-medium text-gray-900 hover:text-green-600",children:k.item_name}),t.jsxs("p",{className:"text-xs text-gray-400",children:[k.item_code,"  ",k.uom]})]}),!h.camp_id&&t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-gray-600",children:k.camp_code})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:`text-sm font-semibold ${k.stock_status==="out"||k.stock_status==="critical"?"text-red-600":k.stock_status==="low"?"text-amber-600":"text-gray-900"}`,children:k.current_qty.toLocaleString()})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:"text-sm text-gray-400",children:k.par_level??""})}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx(Ye,{variant:k.stock_status,children:k.stock_status})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:"text-sm text-gray-600",children:Math.round(k.current_value).toLocaleString()})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:"text-sm text-gray-400",children:k.days_stock_on_hand??""})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(ke,{to:`/app/items/${k.item_id}`,children:t.jsx(yt,{size:16,className:"text-gray-400"})})})]},k.id))})]})}),t.jsx("div",{className:"lg:hidden divide-y divide-gray-100",children:o.stock.map(k=>t.jsxs(ke,{to:`/app/items/${k.item_id}`,className:"flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition",children:[t.jsx("div",{className:`w-2 h-10 rounded-full ${E[k.stock_status]||"bg-gray-300"}`}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:k.item_name}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.jsx("span",{className:"text-xs text-gray-400",children:k.item_code}),!h.camp_id&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsx("span",{className:"text-xs text-gray-400",children:k.camp_code})]})]})]}),t.jsxs("div",{className:"text-right flex-shrink-0",children:[t.jsx("p",{className:`text-sm font-bold ${k.stock_status==="out"||k.stock_status==="critical"?"text-red-600":"text-gray-900"}`,children:k.current_qty.toLocaleString()}),t.jsx("p",{className:"text-xs text-gray-400",children:k.uom})]}),t.jsx(yt,{size:16,className:"text-gray-400 flex-shrink-0"})]},k.id))}),t.jsx("div",{className:"px-4 pb-4",children:t.jsx(sl,{page:o.pagination.page,totalPages:o.pagination.total_pages,total:o.pagination.total,perPage:o.pagination.per_page,onChange:k=>y(w=>({...w,page:k}))})})]})})]})}function Kn({label:l,value:i,color:o,onClick:d,active:x}){const f={gray:"border-gray-200",green:"border-green-200 hover:border-green-400",amber:"border-amber-200 hover:border-amber-400",red:"border-red-200 hover:border-red-400",blue:"border-blue-200 hover:border-blue-400"};return t.jsxs("button",{onClick:d,disabled:!d,className:`bg-white rounded-xl border p-3 text-center transition ${x?"ring-2 ring-green-500 border-green-500":f[o]||f.gray} ${d?"cursor-pointer":"cursor-default"}`,children:[t.jsx("p",{className:"text-lg font-bold text-gray-900",children:i}),t.jsx("p",{className:"text-xs text-gray-500",children:l})]})}const V1=[{key:"",label:"All"},{key:"submitted",label:"Submitted"},{key:"pending_review",label:"Pending"},{key:"queried",label:"Queried"},{key:"stores_approved",label:"Approved"},{key:"stores_rejected",label:"Rejected"},{key:"dispatching",label:"Dispatching"},{key:"received",label:"Received"}];function Q1(){Ie();const{campId:l}=ya(),[i,o]=u.useState(null),[d,x]=u.useState(!0),[f,p]=u.useState(""),[j,h]=u.useState({status:"",search:"",page:1});u.useEffect(()=>{y()},[j,l]);async function y(){x(!0),p("");try{const g={page:j.page,per_page:20,status:j.status,search:j.search};l&&(g.camp_id=l);const T=await tn.list(g);o(T)}catch(g){p(g.message)}finally{x(!1)}}function v(g){return g?new Date(g).toLocaleDateString("en-GB",{day:"numeric",month:"short"}):""}function b(g){return g?`TZS ${Math.round(g).toLocaleString()}`:""}return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Orders"}),t.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[i?.pagination?.total||0," orders"]})]}),t.jsxs(ke,{to:"/app/orders/new","data-guide":"new-order-btn",className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-lg text-sm font-medium transition",children:[t.jsx(Ve,{size:18}),"New Order"]})]}),t.jsx("div",{"data-guide":"order-status-tabs",className:"flex gap-1.5 overflow-x-auto pb-2 mb-4 -mx-4 px-4 lg:mx-0 lg:px-0 scrollbar-none",children:V1.map(g=>{const T=g.key?i?.status_counts?.[g.key]||0:i?.pagination?.total||0;return t.jsxs("button",{onClick:()=>h(_=>({..._,status:g.key,page:1})),className:`inline-flex items-center justify-center gap-1.5 px-4 py-2.5 rounded-full text-xs font-semibold whitespace-nowrap transition-all min-h-0 ${j.status===g.key?"bg-green-600 text-white shadow-sm":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,style:{minHeight:"auto"},children:[g.label,T>0&&t.jsx("span",{className:`text-[10px] leading-none px-1.5 py-0.5 rounded-full ${j.status===g.key?"bg-green-700/50 text-white":"bg-gray-200 text-gray-500"}`,children:T})]},g.key)})}),t.jsx("div",{className:"mb-4","data-guide":"order-search",children:t.jsx(fr,{value:j.search,onChange:g=>h(T=>({...T,search:g,page:1})),placeholder:"Search by order number or camp..."})}),f&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm",children:[f,t.jsx("button",{onClick:y,className:"ml-2 underline",children:"Retry"})]}),d&&!i&&t.jsx(ot,{message:"Loading orders..."}),i&&t.jsx("div",{"data-guide":"orders-list",className:"bg-white rounded-xl border border-gray-200",children:i.orders.length===0?t.jsx(nl,{icon:_t,title:"No orders",message:j.status?`No ${j.status.replace(/_/g," ")} orders`:"Create your first order",action:t.jsxs(ke,{to:"/app/orders/new",className:"inline-flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition",children:[t.jsx(Ve,{size:16})," New Order"]})}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"hidden lg:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-100",children:[t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Order #"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Camp"}),t.jsx("th",{className:"text-center text-xs font-medium text-gray-500 px-4 py-3",children:"Status"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-3",children:"Items"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-3",children:"Value"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Created"}),t.jsx("th",{className:"w-8"})]})}),t.jsx("tbody",{children:i.orders.map(g=>t.jsxs("tr",{className:"border-b border-gray-50 hover:bg-gray-50 transition",children:[t.jsxs("td",{className:"px-4 py-3",children:[t.jsx(ke,{to:`/app/orders/${g.id}`,className:"text-sm font-mono font-medium text-gray-900 hover:text-green-600",children:g.order_number}),g.flagged_items>0&&t.jsx("span",{className:"ml-1 text-xs text-amber-500",title:`${g.flagged_items} flagged`,children:""})]}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("span",{className:"text-sm text-gray-600",children:g.camp_code}),t.jsx("span",{className:"text-xs text-gray-400 ml-1",children:g.camp_name})]}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx(Ye,{variant:g.status})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:"text-sm text-gray-900",children:g.total_items})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:"text-sm text-gray-600",children:b(g.total_value)})}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("span",{className:"text-sm text-gray-500",children:v(g.created_at)}),t.jsxs("span",{className:"text-xs text-gray-400 ml-1",children:["by ",g.created_by]})]}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(ke,{to:`/app/orders/${g.id}`,children:t.jsx(yt,{size:16,className:"text-gray-400"})})})]},g.id))})]})}),t.jsx("div",{className:"lg:hidden divide-y divide-gray-100",children:i.orders.map(g=>t.jsxs(ke,{to:`/app/orders/${g.id}`,className:"flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[t.jsx("span",{className:"text-sm font-mono font-medium text-gray-900",children:g.order_number}),t.jsx(Ye,{variant:g.status})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.jsx("span",{className:"text-xs text-gray-500",children:g.camp_name}),t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsxs("span",{className:"text-xs text-gray-500",children:[g.total_items," items"]}),t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsx("span",{className:"text-xs text-gray-500",children:v(g.created_at)})]})]}),t.jsx("div",{className:"text-right flex-shrink-0",children:t.jsx("p",{className:"text-sm font-semibold text-gray-900",children:b(g.total_value)})}),t.jsx(yt,{size:16,className:"text-gray-400 flex-shrink-0"})]},g.id))}),t.jsx("div",{className:"px-4 pb-4",children:t.jsx(sl,{page:i.pagination.page,totalPages:i.pagination.total_pages,total:i.pagination.total,perPage:i.pagination.per_page,onChange:g=>h(T=>({...T,page:g}))})})]})})]})}function Z1(){const l=Ie(),i=Os(),[o,d]=u.useState([]),[x,f]=u.useState(""),[p,j]=u.useState(!1),[h,y]=u.useState(""),[v,b]=u.useState(""),[g,T]=u.useState([]),[_,A]=u.useState(!1),[E,k]=u.useState(!1),w=u.useRef(null),B=u.useRef(null);u.useEffect(()=>{v.length>=2?(B.current&&clearTimeout(B.current),B.current=setTimeout(()=>Q(),300)):T([])},[v]);async function Q(){A(!0);try{const ae=await Qi.list({search:v,per_page:15,active:1}),se=new Set(o.map(K=>K.item_id));T(ae.items.filter(K=>!se.has(K.id)))}catch(ae){console.error("Search failed:",ae)}finally{A(!1)}}function L(ae){d(se=>[...se,{item_id:ae.id,item_code:ae.item_code,item_name:ae.name,group_code:ae.group_code,uom:ae.stock_uom,price:ae.last_purchase_price||ae.weighted_avg_cost||0,qty:1}]),b(""),T([]),k(!1)}function ne(ae,se){se<1||d(K=>K.map((me,Z)=>Z===ae?{...me,qty:se}:me))}function J(ae){d(se=>se.filter((K,me)=>me!==ae))}const ye=o.reduce((ae,se)=>ae+se.qty*se.price,0);async function X(){if(o.length===0){y("Add at least one item to your order");return}y(""),j(!0);try{const ae=await tn.create({notes:x||null,lines:o.map(se=>({item_id:se.item_id,qty:se.qty}))});i(`/app/orders/${ae.order.id}`)}catch(ae){y(ae.message)}finally{j(!1)}}return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx(ke,{to:"/app/orders",className:"p-2 hover:bg-gray-100 rounded-lg transition",children:t.jsx(tl,{size:20,className:"text-gray-600"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"New Order"}),t.jsxs("p",{className:"text-sm text-gray-500",children:[l?.camp_name||"Your Camp","  ",o.length," items"]})]})]}),h&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm flex items-center gap-2",children:[t.jsx(St,{size:16}),h]}),t.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4 mb-4",children:t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs("div",{className:"relative flex-1",children:[t.jsx(Vt,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{ref:w,type:"text",value:v,onChange:ae=>{b(ae.target.value),k(!0)},onFocus:()=>k(!0),placeholder:"Search items to add...",className:"w-full pl-10 pr-4 py-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none"}),v&&t.jsx("button",{onClick:()=>{b(""),T([]),k(!1)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t.jsx(Ee,{size:16})})]})}),E&&(g.length>0||_)&&t.jsxs("div",{className:"absolute left-0 right-0 top-full mt-1 bg-white border border-gray-200 rounded-xl shadow-lg z-20 max-h-72 overflow-y-auto",children:[_&&t.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 text-sm text-gray-500",children:[t.jsx(Ue,{size:16,className:"animate-spin"})," Searching..."]}),g.map(ae=>t.jsxs("button",{onClick:()=>L(ae),className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-green-50 transition text-left border-b border-gray-50 last:border-0",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[t.jsx("span",{className:"text-xs font-mono text-gray-400",children:ae.item_code}),t.jsx(Ye,{variant:ae.abc_class,children:ae.abc_class})]}),t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:ae.name}),t.jsxs("p",{className:"text-xs text-gray-400",children:[ae.group_name,"  ",ae.stock_uom]})]}),t.jsx(Ve,{size:18,className:"text-green-600 flex-shrink-0"})]},ae.id)),!_&&g.length===0&&v.length>=2&&t.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"No items found"})]})]})}),o.length===0?t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center",children:[t.jsx(_t,{size:40,className:"mx-auto text-gray-300 mb-3"}),t.jsx("p",{className:"text-gray-500 text-sm",children:"Search and add items to your order above"})]}):t.jsx("div",{className:"bg-white rounded-xl border border-gray-200 mb-4",children:t.jsx("div",{className:"divide-y divide-gray-100",children:o.map((ae,se)=>t.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:ae.item_name}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.jsx("span",{className:"text-xs font-mono text-gray-400",children:ae.item_code}),t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsx("span",{className:"text-xs text-gray-400",children:ae.uom}),ae.price>0&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsxs("span",{className:"text-xs text-gray-500",children:["TZS ",Math.round(ae.qty*ae.price).toLocaleString()]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[t.jsx("button",{onClick:()=>ne(se,ae.qty-1),className:"w-9 h-9 flex items-center justify-center rounded-lg bg-gray-100 hover:bg-gray-200 transition",children:t.jsx(Pa,{size:16})}),t.jsx("span",{className:"w-14 h-9 flex items-center justify-center text-sm font-bold text-gray-900 bg-gray-50 rounded-lg border border-gray-200",children:ae.qty}),t.jsx("button",{onClick:()=>ne(se,ae.qty+1),className:"w-9 h-9 flex items-center justify-center rounded-lg bg-gray-100 hover:bg-gray-200 transition",children:t.jsx(Ve,{size:16})})]}),t.jsx("button",{onClick:()=>J(se),className:"p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition flex-shrink-0",children:t.jsx(Es,{size:16})})]},ae.item_id))})}),o.length>0&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Notes (optional)"}),t.jsx("textarea",{value:x,onChange:ae=>f(ae.target.value),placeholder:"Any special instructions or notes...",rows:2,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none resize-none"})]}),o.length>0&&t.jsx("div",{className:"sticky bottom-16 lg:bottom-0 bg-white border border-gray-200 rounded-xl p-4 shadow-lg",children:t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm text-gray-500",children:[o.length," items"]}),t.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["TZS ",Math.round(ye).toLocaleString()]})]}),t.jsx("button",{onClick:X,disabled:p,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white px-6 py-3 rounded-xl text-sm font-semibold transition",children:p?t.jsxs(t.Fragment,{children:[t.jsx(Ue,{size:18,className:"animate-spin"}),"Submitting..."]}):t.jsxs(t.Fragment,{children:[t.jsx(_t,{size:18}),"Submit Order"]})})]})})]})}function X1(){const{id:l}=$i(),i=Ie(),[o,d]=u.useState(null),[x,f]=u.useState(!0),[p,j]=u.useState(""),[h,y]=u.useState(!1),[v,b]=u.useState({}),[g,T]=u.useState(""),[_,A]=u.useState(!1),[E,k]=u.useState(""),[w,B]=u.useState(!1);u.useEffect(()=>{Q()},[l]);async function Q(){f(!0);try{const Z=await tn.get(l);d(Z);const ce={};Z.lines.forEach(M=>{ce[M.id]={action:"approved",approved_qty:M.requested_qty,note:""}}),b(ce)}catch(Z){j(Z.message)}finally{f(!1)}}const L=el(i?.role)&&o?.order?.status&&["submitted","pending_review","queried"].includes(o.order.status);function ne(Z,ce,M){b(P=>({...P,[Z]:{...P[Z],[ce]:M}}))}async function J(){A(!0);try{const Z=o.lines.map(ce=>({line_id:ce.id,action:"approved"}));await tn.approve(l,Z),await Q(),y(!1)}catch(Z){j(Z.message)}finally{A(!1)}}async function ye(){if(!g.trim()){j("Please provide a reason for rejection");return}A(!0);try{await tn.reject(l,g),await Q(),y(!1)}catch(Z){j(Z.message)}finally{A(!1)}}async function X(){A(!0);try{const Z=Object.entries(v).map(([ce,M])=>({line_id:parseInt(ce),action:M.action,approved_qty:M.action==="adjusted"?M.approved_qty:void 0,note:M.note||void 0}));await tn.approve(l,Z),await Q(),y(!1)}catch(Z){j(Z.message)}finally{A(!1)}}async function ae(){if(E.trim()){B(!0);try{await tn.query(l,E),k(""),await Q()}catch(Z){j(Z.message)}finally{B(!1)}}}if(x)return t.jsx(ot,{message:"Loading order..."});if(p&&!o)return t.jsxs("div",{className:"text-center py-16",children:[t.jsx("p",{className:"text-red-600 mb-4",children:p}),t.jsx(ke,{to:"/app/orders",className:"text-green-600 font-medium",children:"Back to Orders"})]});if(!o)return null;const se=o.order,K=Z=>Z?`TZS ${Math.round(Z).toLocaleString()}`:"",me=Z=>Z?new Date(Z).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"";return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx(ke,{to:"/app/orders",className:"p-2 hover:bg-gray-100 rounded-lg transition",children:t.jsx(tl,{size:20,className:"text-gray-600"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[t.jsx("span",{className:"text-sm font-mono text-gray-400",children:se.order_number}),t.jsx(Ye,{variant:se.status})]}),t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:se.camp_name})]}),L&&!h&&t.jsx("button",{onClick:()=>y(!0),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-lg text-sm font-medium transition",children:"Review Order"})]}),p&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm",children:[p,t.jsx("button",{onClick:()=>j(""),className:"ml-2 underline",children:"Dismiss"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400",children:"Items"}),t.jsx("p",{className:"text-lg font-bold text-gray-900",children:se.total_items})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400",children:"Value"}),t.jsx("p",{className:"text-lg font-bold text-gray-900",children:K(se.total_value)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400",children:"Flagged"}),t.jsx("p",{className:`text-lg font-bold ${se.flagged_items>0?"text-amber-600":"text-gray-400"}`,children:se.flagged_items})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400",children:"Created"}),t.jsx("p",{className:"text-sm text-gray-700",children:me(se.created_at)}),t.jsxs("p",{className:"text-xs text-gray-400",children:["by ",se.created_by]})]})]}),se.notes&&t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[t.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Notes"}),t.jsx("p",{className:"text-sm text-gray-700",children:se.notes})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[t.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:t.jsx("h2",{className:"font-semibold text-gray-900",children:"Order Lines"})}),t.jsx("div",{className:"hidden lg:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-100",children:[t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-2",children:"Item"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-2",children:"Req"}),se.status!=="submitted"&&se.status!=="draft"&&t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-2",children:"Approved"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-2",children:"Camp Stock"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-2",children:"HO Stock"}),t.jsx("th",{className:"text-center text-xs font-medium text-gray-500 px-4 py-2",children:"Status"}),h&&t.jsx("th",{className:"text-center text-xs font-medium text-gray-500 px-4 py-2",children:"Action"})]})}),t.jsx("tbody",{children:o.lines.map(Z=>t.jsxs("tr",{className:"border-b border-gray-50",children:[t.jsxs("td",{className:"px-4 py-3",children:[t.jsx(ke,{to:`/app/items/${Z.item_id}`,className:"text-sm font-medium text-gray-900 hover:text-green-600",children:Z.item_name}),t.jsxs("p",{className:"text-xs text-gray-400",children:[Z.item_code,"  ",Z.uom]})]}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:"text-sm font-semibold text-gray-900",children:Z.requested_qty})}),se.status!=="submitted"&&se.status!=="draft"&&t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:`text-sm font-semibold ${Z.stores_action==="rejected"?"text-red-600":Z.stores_action==="adjusted"?"text-amber-600":"text-green-600"}`,children:Z.approved_qty??""})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:"text-sm text-gray-500",children:Z.camp_stock})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:`text-sm ${Z.ho_stock<=0?"text-red-600 font-medium":"text-gray-500"}`,children:Z.ho_stock})}),t.jsxs("td",{className:"px-4 py-3 text-center",children:[t.jsx(Ye,{variant:Z.validation_status==="flagged"?"danger":Z.validation_status==="review"?"warning":"success",children:Z.validation_status}),Z.validation_note&&t.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",title:Z.validation_note,children:[t.jsx(St,{size:10,className:"inline"})," ",Z.validation_note.substring(0,30),"..."]})]}),h&&t.jsxs("td",{className:"px-4 py-3",children:[t.jsxs("select",{value:v[Z.id]?.action||"approved",onChange:ce=>ne(Z.id,"action",ce.target.value),className:"text-xs px-2 py-1 border border-gray-300 rounded-lg",children:[t.jsx("option",{value:"approved",children:"Approve"}),t.jsx("option",{value:"adjusted",children:"Adjust"}),t.jsx("option",{value:"rejected",children:"Reject"})]}),v[Z.id]?.action==="adjusted"&&t.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[t.jsx("button",{type:"button",onClick:()=>ne(Z.id,"approved_qty",Math.max(0,(v[Z.id]?.approved_qty||0)-1)),className:"w-7 h-7 flex items-center justify-center rounded bg-gray-100 hover:bg-gray-200 text-xs",children:""}),t.jsx("span",{className:"w-10 text-center text-xs font-bold",children:v[Z.id]?.approved_qty||0}),t.jsx("button",{type:"button",onClick:()=>ne(Z.id,"approved_qty",(v[Z.id]?.approved_qty||0)+1),className:"w-7 h-7 flex items-center justify-center rounded bg-gray-100 hover:bg-gray-200 text-xs",children:"+"})]})]})]},Z.id))})]})}),t.jsx("div",{className:"lg:hidden divide-y divide-gray-100",children:o.lines.map(Z=>t.jsxs("div",{className:"px-4 py-3",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:Z.item_name}),t.jsxs("p",{className:"text-xs text-gray-400",children:[Z.item_code,"  ",Z.uom]})]}),t.jsxs("div",{className:"text-right flex-shrink-0",children:[t.jsxs("p",{className:"text-sm font-bold text-gray-900",children:["x",Z.requested_qty]}),Z.approved_qty!=null&&Z.approved_qty!==Z.requested_qty&&t.jsxs("p",{className:"text-xs text-amber-600",children:[" ",Z.approved_qty]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx(Ye,{variant:Z.validation_status==="flagged"?"danger":Z.validation_status==="review"?"warning":"success",children:Z.validation_status}),t.jsxs("span",{className:"text-xs text-gray-400",children:["Camp: ",Z.camp_stock]}),t.jsxs("span",{className:"text-xs text-gray-400",children:["HO: ",Z.ho_stock]})]}),h&&t.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[t.jsxs("select",{value:v[Z.id]?.action||"approved",onChange:ce=>ne(Z.id,"action",ce.target.value),className:"text-xs px-2 py-1.5 border border-gray-300 rounded-lg",children:[t.jsx("option",{value:"approved",children:"Approve"}),t.jsx("option",{value:"adjusted",children:"Adjust"}),t.jsx("option",{value:"rejected",children:"Reject"})]}),v[Z.id]?.action==="adjusted"&&t.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[t.jsx("button",{type:"button",onClick:()=>ne(Z.id,"approved_qty",Math.max(0,(v[Z.id]?.approved_qty||0)-1)),className:"w-7 h-7 flex items-center justify-center rounded bg-gray-100 hover:bg-gray-200 text-xs",children:""}),t.jsx("span",{className:"w-10 text-center text-xs font-bold",children:v[Z.id]?.approved_qty||0}),t.jsx("button",{type:"button",onClick:()=>ne(Z.id,"approved_qty",(v[Z.id]?.approved_qty||0)+1),className:"w-7 h-7 flex items-center justify-center rounded bg-gray-100 hover:bg-gray-200 text-xs",children:"+"})]})]})]},Z.id))})]}),h&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[t.jsx("textarea",{value:g,onChange:Z=>T(Z.target.value),placeholder:"Review notes (required for rejection)...",rows:2,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none resize-none mb-3"}),t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsxs("button",{onClick:J,disabled:_,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition",children:[t.jsx(Yt,{size:16})," Approve All"]}),t.jsxs("button",{onClick:X,disabled:_,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition",children:[_?t.jsx(Ue,{size:16,className:"animate-spin"}):t.jsx(Yt,{size:16}),"Submit Review"]}),t.jsxs("button",{onClick:ye,disabled:_,className:"flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition",children:[t.jsx(Ee,{size:16})," Reject All"]}),t.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition",children:"Cancel"})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[t.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[t.jsx(Cs,{size:16})," Timeline"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(jd,{label:"Created",date:se.created_at,by:se.created_by}),se.submitted_at&&t.jsx(jd,{label:"Submitted",date:se.submitted_at}),se.stores_reviewed_at&&t.jsx(jd,{label:"Reviewed",date:se.stores_reviewed_at,by:se.stores_manager}),se.stores_notes&&t.jsx("div",{className:"ml-5 pl-3 border-l-2 border-gray-200",children:t.jsx("p",{className:"text-xs text-gray-500 italic",children:se.stores_notes})})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[t.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[t.jsx(Fv,{size:16})," Messages"]}),o.queries.length===0?t.jsx("p",{className:"text-sm text-gray-400 text-center py-3",children:"No messages"}):t.jsx("div",{className:"space-y-3 mb-3",children:o.queries.map(Z=>t.jsxs("div",{className:`rounded-lg p-3 text-sm ${Z.sender_role==="stores_manager"||Z.sender_role==="director"?"bg-blue-50 text-blue-900":"bg-gray-50 text-gray-700"}`,children:[t.jsxs("p",{className:"font-medium text-xs mb-1",children:[Z.sender,"  ",Z.sender_role?.replace(/_/g," ")]}),t.jsx("p",{children:Z.message}),t.jsx("p",{className:"text-xs opacity-60 mt-1",children:new Date(Z.created_at).toLocaleDateString("en-GB",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})})]},Z.id))}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:E,onChange:Z=>k(Z.target.value),placeholder:"Type a message...",className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",onKeyDown:Z=>Z.key==="Enter"&&ae()}),t.jsx("button",{onClick:ae,disabled:w||!E.trim(),className:"p-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-300 text-white rounded-lg transition",children:w?t.jsx(Ue,{size:18,className:"animate-spin"}):t.jsx(ah,{size:18})})]})]})]})]})]})}function jd({label:l,date:i,by:o}){return t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 mt-1.5 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:l}),t.jsxs("p",{className:"text-xs text-gray-400",children:[i?new Date(i).toLocaleDateString("en-GB",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):"",o&&`  ${o}`]})]})]})}const K1=[{key:"",label:"All"},{key:"dispatched",label:"Dispatched"},{key:"in_transit",label:"In Transit"},{key:"delivered",label:"Delivered"}];function J1(){Ie();const{campId:l}=ya(),[i,o]=u.useState(null),[d,x]=u.useState(!0),[f,p]=u.useState(""),[j,h]=u.useState({status:"",search:"",page:1});u.useEffect(()=>{y()},[j,l]);async function y(){x(!0),p("");try{const g={page:j.page,per_page:20,status:j.status,search:j.search};l&&(g.camp_id=l);const T=await Qf.list(g);o(T)}catch(g){p(g.message)}finally{x(!1)}}function v(g){return g?new Date(g).toLocaleDateString("en-GB",{day:"numeric",month:"short"}):""}function b(g){return g?`TZS ${Math.round(g).toLocaleString()}`:""}return t.jsxs("div",{children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Dispatch Notes"}),t.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[i?.pagination?.total||0," dispatches"]})]})}),t.jsx("div",{"data-guide":"dispatch-status-tabs",className:"flex gap-1.5 overflow-x-auto pb-2 mb-4 -mx-4 px-4 lg:mx-0 lg:px-0 scrollbar-none",children:K1.map(g=>{const T=g.key?i?.status_counts?.[g.key]||0:i?.pagination?.total||0;return t.jsxs("button",{onClick:()=>h(_=>({..._,status:g.key,page:1})),className:`inline-flex items-center justify-center gap-1.5 px-4 py-2.5 rounded-full text-xs font-semibold whitespace-nowrap transition-all ${j.status===g.key?"bg-green-600 text-white shadow-sm":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,style:{minHeight:"auto"},children:[g.label,T>0&&t.jsx("span",{className:`text-[10px] leading-none px-1.5 py-0.5 rounded-full ${j.status===g.key?"bg-green-700/50 text-white":"bg-gray-200 text-gray-500"}`,children:T})]},g.key)})}),t.jsx("div",{className:"mb-4","data-guide":"dispatch-search",children:t.jsx(fr,{value:j.search,onChange:g=>h(T=>({...T,search:g,page:1})),placeholder:"Search by dispatch or order number..."})}),f&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm",children:[f,t.jsx("button",{onClick:y,className:"ml-2 underline",children:"Retry"})]}),d&&!i&&t.jsx(ot,{message:"Loading dispatches..."}),i&&t.jsx("div",{"data-guide":"dispatch-list",className:"bg-white rounded-xl border border-gray-200",children:i.dispatches.length===0?t.jsx(nl,{icon:xr,title:"No dispatches",message:j.status?`No ${j.status} dispatches`:"No dispatch notes yet"}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"hidden lg:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-100",children:[t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Dispatch #"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Order #"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Camp"}),t.jsx("th",{className:"text-center text-xs font-medium text-gray-500 px-4 py-3",children:"Status"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-3",children:"Items"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-3",children:"Value"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Date"}),t.jsx("th",{className:"w-8"})]})}),t.jsx("tbody",{children:i.dispatches.map(g=>t.jsxs("tr",{className:"border-b border-gray-50 hover:bg-gray-50 transition",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsx(ke,{to:`/app/dispatch/${g.id}`,className:"text-sm font-mono font-medium text-gray-900 hover:text-green-600",children:g.dispatch_number})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(ke,{to:`/app/orders/${g.order_id}`,className:"text-sm font-mono text-blue-600 hover:text-blue-800",children:g.order_number})}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("span",{className:"text-sm text-gray-600",children:g.camp_code}),t.jsx("span",{className:"text-xs text-gray-400 ml-1",children:g.camp_name})]}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx(Ye,{variant:g.status})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:"text-sm text-gray-900",children:g.total_items})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:"text-sm text-gray-600",children:b(g.total_value)})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-gray-500",children:v(g.dispatched_at||g.created_at)})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(ke,{to:`/app/dispatch/${g.id}`,children:t.jsx(yt,{size:16,className:"text-gray-400"})})})]},g.id))})]})}),t.jsx("div",{className:"lg:hidden divide-y divide-gray-100",children:i.dispatches.map(g=>t.jsxs(ke,{to:`/app/dispatch/${g.id}`,className:"flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[t.jsx("span",{className:"text-sm font-mono font-medium text-gray-900",children:g.dispatch_number}),t.jsx(Ye,{variant:g.status})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.jsx("span",{className:"text-xs text-gray-500",children:g.camp_name}),t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsxs("span",{className:"text-xs text-gray-500",children:[g.total_items," items"]}),t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsx("span",{className:"text-xs text-gray-500",children:v(g.dispatched_at||g.created_at)})]})]}),t.jsx("div",{className:"text-right flex-shrink-0",children:t.jsx("p",{className:"text-sm font-semibold text-gray-900",children:b(g.total_value)})}),t.jsx(yt,{size:16,className:"text-gray-400 flex-shrink-0"})]},g.id))}),t.jsx("div",{className:"px-4 pb-4",children:t.jsx(sl,{page:i.pagination.page,totalPages:i.pagination.total_pages,total:i.pagination.total,perPage:i.pagination.per_page,onChange:g=>h(T=>({...T,page:g}))})})]})})]})}function Ps({label:l,value:i}){return t.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-50 last:border-0",children:[t.jsx("span",{className:"text-sm text-gray-500",children:l}),t.jsx("span",{className:"text-sm font-medium text-gray-900 text-right",children:i||""})]})}function F1(){const{id:l}=$i(),[i,o]=u.useState(null),[d,x]=u.useState(!0),[f,p]=u.useState("");u.useEffect(()=>{j()},[l]);async function j(){x(!0),p("");try{const g=await Qf.get(l);o(g)}catch(g){p(g.message)}finally{x(!1)}}function h(g){return g?new Date(g).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):""}function y(g){return!g&&g!==0?"":`TZS ${Math.round(g).toLocaleString()}`}if(d)return t.jsx(ot,{message:"Loading dispatch..."});if(f)return t.jsx("div",{className:"p-4",children:t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg text-sm",children:[f,t.jsx("button",{onClick:j,className:"ml-2 underline",children:"Retry"})]})});if(!i)return null;const{dispatch:v,lines:b}=i;return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx(ke,{to:"/app/dispatch",className:"p-2 -ml-2 hover:bg-gray-100 rounded-lg transition",children:t.jsx(tl,{size:20,className:"text-gray-600"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h1",{className:"text-lg font-bold text-gray-900 font-mono",children:v.dispatch_number}),t.jsx(Ye,{variant:v.status})]}),t.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[v.camp_name,"  ",h(v.dispatched_at)]})]})]}),t.jsxs("div",{className:"lg:grid lg:grid-cols-3 lg:gap-6",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3 text-center",children:[t.jsx(ha,{size:18,className:"text-gray-400 mx-auto mb-1"}),t.jsx("p",{className:"text-lg font-bold text-gray-900",children:v.total_items}),t.jsx("p",{className:"text-xs text-gray-500",children:"Items"})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3 text-center",children:[t.jsx(Av,{size:18,className:"text-gray-400 mx-auto mb-1"}),t.jsx("p",{className:"text-sm font-bold text-gray-900 font-mono",children:v.order_number}),t.jsx("p",{className:"text-xs text-gray-500",children:"Order"})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3 text-center",children:[t.jsx(Zv,{size:18,className:"text-gray-400 mx-auto mb-1"}),t.jsx("p",{className:"text-sm font-bold text-gray-900",children:v.camp_code}),t.jsx("p",{className:"text-xs text-gray-500",children:"Destination"})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[t.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:t.jsxs("h2",{className:"text-sm font-semibold text-gray-900",children:["Dispatch Items (",b.length,")"]})}),t.jsx("div",{className:"hidden lg:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-100",children:[t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-2",children:"Item"}),t.jsx("th",{className:"text-center text-xs font-medium text-gray-500 px-4 py-2",children:"Requested"}),t.jsx("th",{className:"text-center text-xs font-medium text-gray-500 px-4 py-2",children:"Approved"}),t.jsx("th",{className:"text-center text-xs font-medium text-gray-500 px-4 py-2",children:"Dispatched"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-2",children:"Unit Cost"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-2",children:"Value"})]})}),t.jsx("tbody",{children:b.map(g=>t.jsxs("tr",{className:"border-b border-gray-50",children:[t.jsxs("td",{className:"px-4 py-2.5",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:g.item_name}),t.jsxs("p",{className:"text-xs text-gray-400",children:[g.item_code,"  ",g.uom]})]}),t.jsx("td",{className:"px-4 py-2.5 text-center",children:t.jsx("span",{className:"text-sm text-gray-500",children:g.requested_qty??""})}),t.jsx("td",{className:"px-4 py-2.5 text-center",children:t.jsx("span",{className:"text-sm text-gray-500",children:g.approved_qty??""})}),t.jsx("td",{className:"px-4 py-2.5 text-center",children:t.jsx("span",{className:"text-sm font-semibold text-gray-900",children:g.dispatched_qty})}),t.jsx("td",{className:"px-4 py-2.5 text-right",children:t.jsx("span",{className:"text-sm text-gray-500",children:y(g.unit_cost)})}),t.jsx("td",{className:"px-4 py-2.5 text-right",children:t.jsx("span",{className:"text-sm font-medium text-gray-900",children:y(g.line_value)})})]},g.id))}),t.jsx("tfoot",{children:t.jsxs("tr",{className:"border-t border-gray-200 bg-gray-50",children:[t.jsx("td",{colSpan:5,className:"px-4 py-2.5 text-right text-sm font-semibold text-gray-700",children:"Total"}),t.jsx("td",{className:"px-4 py-2.5 text-right text-sm font-bold text-gray-900",children:y(v.total_value)})]})})]})}),t.jsxs("div",{className:"lg:hidden divide-y divide-gray-100",children:[b.map(g=>t.jsx("div",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:g.item_name}),t.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:[g.item_code,"  ",g.uom]})]}),t.jsxs("div",{className:"text-right ml-3",children:[t.jsx("p",{className:"text-sm font-semibold text-gray-900",children:g.dispatched_qty}),t.jsx("p",{className:"text-xs text-gray-500",children:y(g.line_value)})]})]})},g.id)),t.jsxs("div",{className:"px-4 py-3 bg-gray-50 flex justify-between",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Total"}),t.jsx("span",{className:"text-sm font-bold text-gray-900",children:y(v.total_value)})]})]})]})]}),t.jsx("div",{className:"mt-4 lg:mt-0",children:t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 space-y-0",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Dispatch Details"}),t.jsx(Ps,{label:"Dispatch #",value:v.dispatch_number}),t.jsx(Ps,{label:"Status",value:t.jsx(Ye,{variant:v.status})}),t.jsx(Ps,{label:"Destination",value:`${v.camp_code}  ${v.camp_name}`}),t.jsx(Ps,{label:"Dispatched By",value:v.dispatched_by}),t.jsx(Ps,{label:"Dispatch Date",value:h(v.dispatched_at)}),t.jsx(Ps,{label:"Vehicle",value:v.vehicle_number}),t.jsx(Ps,{label:"Order",value:t.jsx(ke,{to:`/app/orders/${v.order_id}`,className:"text-blue-600 hover:text-blue-800 font-mono",children:v.order_number})}),v.notes&&t.jsxs("div",{className:"pt-2",children:[t.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Notes"}),t.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 rounded-lg p-2",children:v.notes})]})]})})]})]})}const I1=[{key:"",label:"All"},{key:"pending",label:"Pending"},{key:"confirmed",label:"Confirmed"}];function W1(){Ie();const{campId:l}=ya(),[i,o]=u.useState(null),[d,x]=u.useState(!0),[f,p]=u.useState(""),[j,h]=u.useState({status:"",search:"",page:1});u.useEffect(()=>{y()},[j,l]);async function y(){x(!0),p("");try{const b={page:j.page,per_page:20,status:j.status};l&&(b.camp_id=l);const g=await kd.list(b);o(g)}catch(b){p(b.message)}finally{x(!1)}}function v(b){return b?new Date(b).toLocaleDateString("en-GB",{day:"numeric",month:"short"}):""}return t.jsxs("div",{children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Goods Receipt"}),t.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[i?.pagination?.total||0," receipts"]})]})}),t.jsx("div",{"data-guide":"receive-status-tabs",className:"flex gap-1.5 overflow-x-auto pb-2 mb-4 -mx-4 px-4 lg:mx-0 lg:px-0 scrollbar-none",children:I1.map(b=>t.jsx("button",{onClick:()=>h(g=>({...g,status:b.key,page:1})),className:`inline-flex items-center justify-center gap-1.5 px-4 py-2.5 rounded-full text-xs font-semibold whitespace-nowrap transition-all ${j.status===b.key?"bg-green-600 text-white shadow-sm":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,style:{minHeight:"auto"},children:b.label},b.key))}),t.jsx("div",{className:"mb-4",children:t.jsx(fr,{value:j.search,onChange:b=>h(g=>({...g,search:b,page:1})),placeholder:"Search by receipt or dispatch number..."})}),f&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm",children:[f,t.jsx("button",{onClick:y,className:"ml-2 underline",children:"Retry"})]}),d&&!i&&t.jsx(ot,{message:"Loading receipts..."}),i&&t.jsx("div",{"data-guide":"receive-list",className:"bg-white rounded-xl border border-gray-200",children:i.receipts.length===0?t.jsx(nl,{icon:Ts,title:"No receipts",message:j.status?`No ${j.status} receipts`:"No goods receipts yet"}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"hidden lg:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-100",children:[t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Receipt #"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Dispatch #"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Camp"}),t.jsx("th",{className:"text-center text-xs font-medium text-gray-500 px-4 py-3",children:"Status"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Received By"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Date"}),t.jsx("th",{className:"w-8"})]})}),t.jsx("tbody",{children:i.receipts.map(b=>t.jsxs("tr",{className:"border-b border-gray-50 hover:bg-gray-50 transition",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsx(ke,{to:`/app/receive/${b.id}`,className:"text-sm font-mono font-medium text-gray-900 hover:text-green-600",children:b.receipt_number})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm font-mono text-gray-500",children:b.dispatch_number||""})}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("span",{className:"text-sm text-gray-600",children:b.camp_code}),t.jsx("span",{className:"text-xs text-gray-400 ml-1",children:b.camp_name})]}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx(Ye,{variant:b.status})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-gray-500",children:b.received_by||""})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-gray-500",children:v(b.received_date||b.created_at)})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(ke,{to:`/app/receive/${b.id}`,children:t.jsx(yt,{size:16,className:"text-gray-400"})})})]},b.id))})]})}),t.jsx("div",{className:"lg:hidden divide-y divide-gray-100",children:i.receipts.map(b=>t.jsxs(ke,{to:`/app/receive/${b.id}`,className:"flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[t.jsx("span",{className:"text-sm font-mono font-medium text-gray-900",children:b.receipt_number}),t.jsx(Ye,{variant:b.status})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.jsx("span",{className:"text-xs text-gray-500",children:b.camp_name}),t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsx("span",{className:"text-xs text-gray-500",children:v(b.received_date||b.created_at)}),b.dispatch_number&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsxs("span",{className:"text-xs text-gray-400",children:["Disp: ",b.dispatch_number]})]})]})]}),t.jsx(yt,{size:16,className:"text-gray-400 flex-shrink-0"})]},b.id))}),t.jsx("div",{className:"px-4 pb-4",children:t.jsx(sl,{page:i.pagination.page,totalPages:i.pagination.total_pages,total:i.pagination.total,perPage:i.pagination.per_page,onChange:b=>h(g=>({...g,page:b}))})})]})})]})}function P1(){const{id:l}=$i(),i=Ie(),[o,d]=u.useState(null),[x,f]=u.useState(!0),[p,j]=u.useState(""),[h,y]=u.useState(!1),[v,b]=u.useState({}),[g,T]=u.useState(""),[_,A]=u.useState(!1);u.useEffect(()=>{E()},[l]);async function E(){f(!0);try{const X=await kd.get(l);d(X);const ae={};X.lines.forEach(se=>{ae[se.id]={received_qty:se.received_qty!==null?se.received_qty:se.dispatched_qty,condition_status:se.condition_status||"good",notes:se.notes||""}}),b(ae)}catch(X){j(X.message)}finally{f(!1)}}function k(X,ae,se){b(K=>({...K,[X]:{...K[X],[ae]:se}}))}async function w(){A(!0),j("");try{const X=Object.entries(v).map(([ae,se])=>({line_id:parseInt(ae),received_qty:parseFloat(se.received_qty)||0,condition_status:se.condition_status,notes:se.notes||null}));await kd.confirm(l,X),y(!1),await E()}catch(X){j(X.message)}finally{A(!1)}}function B(){const X={};o.lines.forEach(ae=>{X[ae.id]={received_qty:ae.dispatched_qty,condition_status:"good",notes:""}}),b(X)}if(x)return t.jsx(ot,{message:"Loading receipt..."});if(p&&!o)return t.jsxs("div",{className:"text-center py-16",children:[t.jsx("p",{className:"text-red-600 mb-4",children:p}),t.jsx(ke,{to:"/app/receive",className:"text-green-600 font-medium",children:"Back to Receipts"})]});if(!o)return null;const Q=o.receipt,ne=!(Q.status==="confirmed")&&["camp_storekeeper","camp_manager","stores_manager","admin"].includes(i?.role),J=X=>X?`TZS ${Math.round(X).toLocaleString()}`:"",ye=X=>X?new Date(X).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"";return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx(ke,{to:"/app/receive",className:"p-2 hover:bg-gray-100 rounded-lg transition",children:t.jsx(tl,{size:20,className:"text-gray-600"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[t.jsx("span",{className:"text-sm font-mono text-gray-400",children:Q.receipt_number}),t.jsx(Ye,{variant:Q.status})]}),t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:Q.camp_name})]}),ne&&!h&&t.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-lg text-sm font-medium transition",children:[t.jsx(Ts,{size:18}),"Confirm Receipt"]})]}),p&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm flex items-center gap-2",children:[t.jsx(St,{size:16}),p,t.jsx("button",{onClick:()=>j(""),className:"ml-auto underline",children:"Dismiss"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[t.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400",children:"Items"}),t.jsx("p",{className:"text-lg font-bold text-gray-900",children:o.lines.length})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400",children:"Total Value"}),t.jsx("p",{className:"text-lg font-bold text-gray-900",children:J(Q.total_value)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400",children:"Dispatch"}),t.jsx("p",{className:"text-sm text-gray-700 font-mono",children:Q.dispatch_number||""})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400",children:"Received"}),t.jsx("p",{className:"text-sm text-gray-700",children:ye(Q.received_date||Q.created_at)})]})]})}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[t.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 flex items-center justify-between",children:[t.jsx("h2",{className:"font-semibold text-gray-900",children:"Receipt Lines"}),h&&t.jsx("button",{onClick:B,className:"text-sm text-green-600 hover:text-green-700 font-medium",children:"Accept all as dispatched"})]}),t.jsx("div",{className:"hidden lg:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-100",children:[t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-2",children:"Item"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-2",children:"Dispatched"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-2",children:"Received"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-2",children:"Unit Cost"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-2",children:"Value"}),h&&t.jsx("th",{className:"text-center text-xs font-medium text-gray-500 px-4 py-2",children:"Condition"})]})}),t.jsx("tbody",{children:o.lines.map(X=>t.jsxs("tr",{className:"border-b border-gray-50",children:[t.jsxs("td",{className:"px-4 py-3",children:[t.jsx(ke,{to:`/app/items/${X.item_id}`,className:"text-sm font-medium text-gray-900 hover:text-green-600",children:X.item_name}),t.jsxs("p",{className:"text-xs text-gray-400",children:[X.item_code,"  ",X.uom]})]}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:"text-sm font-semibold text-gray-900",children:X.dispatched_qty})}),t.jsx("td",{className:"px-4 py-3 text-right",children:h?t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{type:"button",onClick:()=>k(X.id,"received_qty",Math.max(0,parseFloat(v[X.id]?.received_qty||0)-1)),className:"w-7 h-7 flex items-center justify-center rounded bg-gray-100 hover:bg-gray-200 text-xs",children:""}),t.jsx("span",{className:"w-12 text-center text-sm font-bold",children:v[X.id]?.received_qty??""}),t.jsx("button",{type:"button",onClick:()=>k(X.id,"received_qty",parseFloat(v[X.id]?.received_qty||0)+1),className:"w-7 h-7 flex items-center justify-center rounded bg-gray-100 hover:bg-gray-200 text-xs",children:"+"})]}):t.jsx("span",{className:`text-sm font-semibold ${X.received_qty!==null&&X.received_qty<X.dispatched_qty?"text-amber-600":"text-green-600"}`,children:X.received_qty!==null?X.received_qty:""})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:"text-sm text-gray-500",children:J(X.unit_cost)})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:"text-sm text-gray-600",children:J(X.total_value)})}),h&&t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsxs("select",{value:v[X.id]?.condition_status||"good",onChange:ae=>k(X.id,"condition_status",ae.target.value),className:"text-xs px-2 py-1 border border-gray-300 rounded-lg",children:[t.jsx("option",{value:"good",children:"Good"}),t.jsx("option",{value:"damaged",children:"Damaged"}),t.jsx("option",{value:"short",children:"Short"})]})})]},X.id))})]})}),t.jsx("div",{className:"lg:hidden divide-y divide-gray-100",children:o.lines.map(X=>t.jsxs("div",{className:"px-4 py-3",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:X.item_name}),t.jsxs("p",{className:"text-xs text-gray-400",children:[X.item_code,"  ",X.uom]})]}),t.jsxs("div",{className:"text-right flex-shrink-0",children:[t.jsxs("p",{className:"text-xs text-gray-400",children:["Dispatched: ",X.dispatched_qty]}),!h&&t.jsxs("p",{className:`text-sm font-bold ${X.received_qty!==null&&X.received_qty<X.dispatched_qty?"text-amber-600":"text-green-600"}`,children:["Received: ",X.received_qty!==null?X.received_qty:""]})]})]}),h&&t.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{type:"button",onClick:()=>k(X.id,"received_qty",Math.max(0,parseFloat(v[X.id]?.received_qty||0)-1)),className:"w-7 h-7 flex items-center justify-center rounded bg-gray-100 hover:bg-gray-200 text-xs",children:""}),t.jsx("span",{className:"w-12 text-center text-sm font-bold",children:v[X.id]?.received_qty??""}),t.jsx("button",{type:"button",onClick:()=>k(X.id,"received_qty",parseFloat(v[X.id]?.received_qty||0)+1),className:"w-7 h-7 flex items-center justify-center rounded bg-gray-100 hover:bg-gray-200 text-xs",children:"+"})]}),t.jsxs("select",{value:v[X.id]?.condition_status||"good",onChange:ae=>k(X.id,"condition_status",ae.target.value),className:"text-xs px-2 py-1.5 border border-gray-300 rounded-lg",children:[t.jsx("option",{value:"good",children:"Good"}),t.jsx("option",{value:"damaged",children:"Damaged"}),t.jsx("option",{value:"short",children:"Short"})]})]}),X.notes&&t.jsx("p",{className:"text-xs text-gray-400 mt-1 italic",children:X.notes})]},X.id))})]}),h&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[t.jsx("textarea",{value:g,onChange:X=>T(X.target.value),placeholder:"Receipt notes (optional)...",rows:2,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none resize-none mb-3"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:w,disabled:_,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white px-4 py-2.5 rounded-lg text-sm font-medium transition",children:_?t.jsxs(t.Fragment,{children:[t.jsx(Ue,{size:16,className:"animate-spin"})," Confirming..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Yt,{size:16})," Confirm Receipt"]})}),t.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2.5 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition",children:"Cancel"})]})]})]}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Receipt Info"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(en,{label:"Camp",value:`${Q.camp_code}  ${Q.camp_name}`}),t.jsx(en,{label:"Dispatch #",value:Q.dispatch_number||""}),Q.order_number&&t.jsx(en,{label:"Order #",value:t.jsx(ke,{to:`/app/orders/${Q.order_id}`,className:"text-green-600 hover:underline font-mono text-sm",children:Q.order_number})}),t.jsx(en,{label:"Received By",value:Q.received_by||""}),t.jsx(en,{label:"Dispatched By",value:Q.dispatched_by||""}),t.jsx(en,{label:"Status",value:t.jsx(Ye,{variant:Q.status})}),t.jsx(en,{label:"Date",value:ye(Q.received_date||Q.created_at)})]}),Q.notes&&t.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-100",children:[t.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Notes"}),t.jsx("p",{className:"text-sm text-gray-700",children:Q.notes})]})]})})]})]})}function en({label:l,value:i}){return t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0",children:l}),t.jsx("span",{className:"text-sm text-gray-900 text-right",children:i})]})}const ej=[{key:"",label:"All Types"},{key:"kitchen",label:"Kitchen"},{key:"housekeeping",label:"Housekeeping"},{key:"bar",label:"Bar"},{key:"maintenance",label:"Maintenance"},{key:"guest",label:"Guest"},{key:"office",label:"Office"},{key:"other",label:"Other"}];function tj(){Ie();const{campId:l}=ya(),[i,o]=u.useState(null),[d,x]=u.useState(!0),[f,p]=u.useState(""),[j,h]=u.useState({type:"",page:1});u.useEffect(()=>{y()},[j,l]);async function y(){x(!0),p("");try{const g={page:j.page,per_page:20,type:j.type};l&&(g.camp_id=l);const T=await Cd.list(g);o(T)}catch(g){p(g.message)}finally{x(!1)}}function v(g){return g?new Date(g).toLocaleDateString("en-GB",{day:"numeric",month:"short"}):""}function b(g){return g?`TZS ${Math.round(g).toLocaleString()}`:""}return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Issue Vouchers"}),t.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[i?.pagination?.total||0," vouchers"]})]}),t.jsxs(ke,{to:"/app/issue/new","data-guide":"new-issue-btn",className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-lg text-sm font-medium transition",children:[t.jsx(Ve,{size:18}),"New Issue"]})]}),t.jsx("div",{"data-guide":"issue-type-tabs",className:"flex gap-1.5 overflow-x-auto pb-2 mb-4 -mx-4 px-4 lg:mx-0 lg:px-0 scrollbar-none",children:ej.map(g=>t.jsx("button",{onClick:()=>h(T=>({...T,type:g.key,page:1})),className:`inline-flex items-center justify-center gap-1.5 px-4 py-2.5 rounded-full text-xs font-semibold whitespace-nowrap transition-all ${j.type===g.key?"bg-green-600 text-white shadow-sm":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,style:{minHeight:"auto"},children:g.label},g.key))}),f&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm",children:[f,t.jsx("button",{onClick:y,className:"ml-2 underline",children:"Retry"})]}),d&&!i&&t.jsx(ot,{message:"Loading issue vouchers..."}),i&&t.jsx("div",{className:"bg-white rounded-xl border border-gray-200",children:i.vouchers.length===0?t.jsx(nl,{icon:zs,title:"No issue vouchers",message:j.type?`No ${j.type} issues found`:"Create your first issue voucher",action:t.jsxs(ke,{to:"/app/issue/new",className:"inline-flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition",children:[t.jsx(Ve,{size:16})," New Issue"]})}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"hidden lg:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-100",children:[t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Voucher #"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Camp"}),t.jsx("th",{className:"text-center text-xs font-medium text-gray-500 px-4 py-3",children:"Type"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Cost Center"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Received By"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-3",children:"Value"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Date"}),t.jsx("th",{className:"w-8"})]})}),t.jsx("tbody",{children:i.vouchers.map(g=>t.jsxs("tr",{className:"border-b border-gray-50 hover:bg-gray-50 transition",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm font-mono font-medium text-gray-900",children:g.voucher_number})}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("span",{className:"text-sm text-gray-600",children:g.camp_code}),t.jsx("span",{className:"text-xs text-gray-400 ml-1",children:g.camp_name})]}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx(Ye,{variant:g.issue_type,children:g.issue_type})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-gray-500",children:g.cost_center||""})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-gray-500",children:g.received_by_name||""})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:"text-sm text-gray-900",children:b(g.total_value)})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-gray-500",children:v(g.issue_date||g.created_at)})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(yt,{size:16,className:"text-gray-400"})})]},g.id))})]})}),t.jsx("div",{className:"lg:hidden divide-y divide-gray-100",children:i.vouchers.map(g=>t.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[t.jsx("span",{className:"text-sm font-mono font-medium text-gray-900",children:g.voucher_number}),t.jsx(Ye,{variant:g.issue_type,children:g.issue_type})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.jsx("span",{className:"text-xs text-gray-500",children:g.camp_name}),t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsx("span",{className:"text-xs text-gray-500",children:g.received_by_name||""}),t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsx("span",{className:"text-xs text-gray-500",children:v(g.issue_date||g.created_at)})]})]}),t.jsx("div",{className:"text-right flex-shrink-0",children:t.jsx("p",{className:"text-sm font-semibold text-gray-900",children:b(g.total_value)})}),t.jsx(yt,{size:16,className:"text-gray-400 flex-shrink-0"})]},g.id))}),t.jsx("div",{className:"px-4 pb-4",children:t.jsx(sl,{page:i.pagination.page,totalPages:i.pagination.total_pages,total:i.pagination.total,perPage:i.pagination.per_page,onChange:g=>h(T=>({...T,page:g}))})})]})})]})}let rr=0,Td=0;function As(){rr++,rr===1&&(Td=window.scrollY,document.body.classList.add("overflow-locked"),document.body.style.top=`-${Td}px`)}function Ds(){rr=Math.max(0,rr-1),rr===0&&(document.body.classList.remove("overflow-locked"),document.body.style.top="",window.scrollTo(0,Td))}function aj({item:l,onClose:i,onAddIngredients:o,onSkip:d}){const[x,f]=u.useState([]),[p,j]=u.useState(null),[h,y]=u.useState(null),[v,b]=u.useState(!0),[g,T]=u.useState(!1),[_,A]=u.useState(!1),[E,k]=u.useState(null),[w,B]=u.useState(!1),[Q,L]=u.useState({}),[ne,J]=u.useState([]),[ye,X]=u.useState(null),[ae,se]=u.useState({}),[K,me]=u.useState(!1),[Z,ce]=u.useState(!1),[M,P]=u.useState(""),[ie,xe]=u.useState([]),[be,C]=u.useState(!1),G=u.useRef(null),Y=u.useRef(null);u.useEffect(()=>(As(),()=>Ds()),[]),u.useEffect(()=>()=>{Y.current&&clearTimeout(Y.current),G.current&&clearTimeout(G.current)},[]),u.useEffect(()=>{l?.name&&(b(!0),$t.searchRecipes(l.name).then(S=>{f(S.recipes||[]),S.recipes?.length>0&&(R(S.recipes[0].id),j(S.recipes[0].id))}).catch(S=>console.error("Recipe search failed:",S)).finally(()=>b(!1)))},[l?.name]),u.useEffect(()=>{if(M.length<2){xe([]);return}G.current&&clearTimeout(G.current),G.current=setTimeout(async()=>{C(!0);try{const S=await $t.searchIngredients(M);xe(S.items||[])}catch(S){console.error("Search failed:",S)}finally{C(!1)}},300)},[M]);async function R(S){T(!0),L({}),J([]),se({}),X(null);try{const F=await $t.recipe(S);y(F)}catch(F){console.error("Failed to load recipe:",F)}finally{T(!1)}}async function le(){B(!0);try{const S=await $t.suggestRecipe(l.name);k(S.recipes||[])}catch(S){console.error("AI suggestion failed:",S)}finally{B(!1)}}function de(){_||(A(!0),Y.current=setTimeout(()=>{i()},250))}async function he(S){if(ae[S]){X(F=>F===S?null:S);return}X(S),me(!0);try{const F=await $t.suggestAlternatives(S,h?.recipe?.name);se(fe=>({...fe,[S]:F.alternatives||[]}))}catch(F){console.error("Failed to get alternatives:",F),se(fe=>({...fe,[S]:[]}))}finally{me(!1)}}function Le(S,F){L(fe=>({...fe,[S]:{item_id:F.item_id,name:F.name,stock_qty:F.stock_qty,uom:F.uom}})),X(null)}function we(S){L(F=>{const fe={...F};return delete fe[S],fe})}function rt(S){ne.find(F=>F.item_id===S.id)||(J(F=>[...F,{item_id:S.id,name:S.name,qty:1,uom:S.uom,stock_qty:S.stock_qty}]),P(""),xe([]),ce(!1))}function Ot(S,F){F<=0?J(fe=>fe.filter(Se=>Se.item_id!==S)):J(fe=>fe.map(Se=>Se.item_id===S?{...Se,qty:F}:Se))}function Rt(){const S=(h?.ingredients||[]).map(F=>{const fe=Q[F.item_id];return{item_id:fe?fe.item_id:F.item_id,item_name:fe?fe.name:F.item_name,item_code:F.item_code,uom:fe?fe.uom:F.uom,qty:F.qty_per_serving,is_substitution:!!fe,original_name:fe?F.item_name:null}});ne.forEach(F=>{S.push({item_id:F.item_id,item_name:F.name,uom:F.uom,qty:F.qty,is_extra:!0})}),o(S,h?.recipe),de()}const wt=h?.ingredients||[],Ae=h?.recipe||null,re=wt.some(S=>S.stock_qty<=0);return l?Rs.createPortal(t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`fixed inset-0 bg-black/40 z-[10010] ${_?"animate-backdrop-out":"animate-backdrop-in"}`,onClick:de}),t.jsxs("div",{className:`fixed inset-x-0 bottom-0 z-[10011] bg-white rounded-t-2xl shadow-2xl max-h-[90dvh] overflow-hidden flex flex-col ${_?"animate-slide-down":"animate-slide-up"}`,children:[t.jsx("div",{className:"flex justify-center pt-2 pb-1 flex-shrink-0",children:t.jsx("div",{className:"w-10 h-1 rounded-full bg-gray-300"})}),t.jsxs("div",{className:"flex items-start justify-between px-5 pt-2 pb-3 border-b border-gray-100 flex-shrink-0",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ta,{size:18,className:"text-orange-500 flex-shrink-0"}),t.jsx("h2",{className:"text-lg font-bold text-gray-900 truncate",children:Ae?Ae.name:`Recipes for ${l.name}`})]}),Ae&&t.jsxs("div",{className:"flex items-center gap-3 mt-1.5 flex-wrap",children:[Ae.category&&t.jsx("span",{className:"text-[10px] bg-orange-50 text-orange-700 px-2 py-0.5 rounded-full capitalize",children:Ae.category}),Ae.cuisine&&t.jsx("span",{className:"text-[10px] bg-blue-50 text-blue-700 px-2 py-0.5 rounded-full",children:Ae.cuisine}),Ae.serves&&t.jsxs("span",{className:"text-[10px] bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full flex items-center gap-1",children:[t.jsx(_a,{size:8})," ",Ae.serves," servings"]}),Ae.prep_time_minutes&&t.jsxs("span",{className:"text-[10px] bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full flex items-center gap-1",children:[t.jsx(Cs,{size:8})," ",Ae.prep_time_minutes+(Ae.cook_time_minutes||0),"min"]})]}),!Ae&&!v&&x.length===0&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"No stored recipes found for this item."})]}),t.jsx("button",{onClick:de,className:"p-2 hover:bg-gray-100 rounded-full text-gray-400 transition flex-shrink-0 ml-2",children:t.jsx(Ee,{size:18})})]}),t.jsx("div",{className:"flex-1 overflow-y-auto px-5 py-4 scroll-touch",children:v?t.jsxs("div",{className:"flex items-center justify-center py-12",children:[t.jsx(Ue,{size:24,className:"animate-spin text-orange-600"}),t.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"Searching recipes..."})]}):x.length===0&&!Ae?t.jsxs("div",{className:"text-center py-6",children:[t.jsx(In,{size:32,className:"mx-auto text-gray-300 mb-2"}),t.jsxs("p",{className:"text-sm text-gray-500 mb-1",children:['No recipe found for "',l.name,'"']}),t.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"Ask AI to suggest a recipe, or skip to add the item directly."}),!E&&t.jsx("button",{onClick:le,disabled:w,className:"inline-flex items-center gap-2 px-4 py-2.5 bg-amber-50 border border-amber-200 text-amber-800 rounded-xl text-sm font-semibold hover:bg-amber-100 transition mb-3",children:w?t.jsxs(t.Fragment,{children:[t.jsx(Ue,{size:14,className:"animate-spin"})," Thinking..."]}):t.jsxs(t.Fragment,{children:[t.jsx(nn,{size:14})," Ask AI for Recipe"]})}),E&&E.length>0&&t.jsxs("div",{className:"text-left mt-2 space-y-2",children:[t.jsx("h3",{className:"text-xs font-semibold text-amber-700 uppercase tracking-wider",children:"AI Suggested Recipes"}),E.map((S,F)=>t.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3",children:[t.jsx("p",{className:"text-sm font-bold text-gray-900",children:S.name}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:S.description}),t.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[t.jsx("span",{className:"text-[10px] bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded-full capitalize",children:S.category}),S.serves&&t.jsxs("span",{className:"text-[10px] text-gray-400",children:[S.serves," servings"]}),S.prep_time_minutes&&t.jsxs("span",{className:"text-[10px] text-gray-400",children:[S.prep_time_minutes+(S.cook_time_minutes||0),"min"]})]}),S.ingredients&&t.jsx("div",{className:"mt-2 space-y-0.5",children:S.ingredients.map((fe,Se)=>t.jsxs("div",{className:"text-[10px] text-gray-600 flex items-center gap-1",children:[t.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${fe.is_primary?"bg-orange-500":"bg-gray-300"}`}),fe.qty," ",fe.uom," ",fe.name]},Se))})]},F))]}),E&&E.length===0&&t.jsx("p",{className:"text-xs text-gray-400",children:"AI couldn't suggest a recipe for this item."})]}):t.jsxs(t.Fragment,{children:[x.length>1&&t.jsx("div",{className:"flex gap-2 mb-3 overflow-x-auto pb-1 scroll-touch",children:x.map(S=>t.jsx("button",{onClick:()=>{j(S.id),R(S.id)},className:`flex-shrink-0 px-3 py-1.5 rounded-full text-xs font-semibold transition whitespace-nowrap ${p===S.id?"bg-orange-600 text-white shadow-sm":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:S.name},S.id))}),g?t.jsxs("div",{className:"flex items-center justify-center py-8",children:[t.jsx(Ue,{size:20,className:"animate-spin text-orange-600"}),t.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"Loading recipe..."})]}):wt.length===0?t.jsxs("div",{className:"text-center py-6",children:[t.jsx(ta,{size:28,className:"mx-auto text-gray-300 mb-2"}),t.jsx("p",{className:"text-sm text-gray-500",children:"No ingredients defined for this recipe."})]}):t.jsxs(t.Fragment,{children:[Ae?.description&&t.jsx("p",{className:"text-xs text-gray-500 mb-3",children:Ae.description}),t.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Ingredients"}),t.jsx("div",{className:"space-y-2 mb-4",children:wt.map(S=>{const F=S.stock_qty<=0,fe=S.stock_status==="low"||S.stock_status==="critical",Se=Q[S.item_id],Qt=ye===S.item_name;return t.jsxs("div",{children:[t.jsx("div",{className:`bg-white rounded-xl border p-3 ${Se?"border-blue-300 bg-blue-50/30":F?"border-red-200 bg-red-50/30":fe?"border-amber-200 bg-amber-50/30":"border-gray-200"}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${Se?"bg-blue-500":F?"bg-red-500":fe?"bg-amber-500":"bg-green-500"}`}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("p",{className:`text-sm font-medium truncate ${F&&!Se?"text-red-700 line-through":"text-gray-900"}`,children:S.item_name}),S.is_primary&&t.jsx("span",{className:"text-[9px] bg-orange-100 text-orange-700 px-1.5 py-0.5 rounded-full font-medium flex-shrink-0",children:"Primary"})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.jsxs("span",{className:"text-[10px] text-gray-400",children:[S.qty_per_serving," ",S.uom,"/serving"]}),S.notes&&t.jsx("span",{className:"text-[10px] text-gray-400 italic",children:S.notes}),F?t.jsx("span",{className:"text-[10px] bg-red-100 text-red-600 px-1.5 py-0.5 rounded-full",children:"Out of stock"}):t.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${fe?"bg-amber-100 text-amber-700":"bg-green-100 text-green-700"}`,children:[S.stock_qty," ",S.uom]})]}),Se&&t.jsxs("div",{className:"flex items-center gap-1.5 mt-1.5",children:[t.jsx(nr,{size:10,className:"text-blue-500"}),t.jsxs("span",{className:"text-[11px] text-blue-700 font-medium",children:["Using: ",Se.name]}),t.jsxs("span",{className:"text-[10px] text-blue-500",children:["(",Se.stock_qty," ",Se.uom,")"]}),t.jsx("button",{onClick:()=>we(S.item_id),className:"text-blue-400 hover:text-red-500 ml-1",children:t.jsx(Ee,{size:10})})]})]}),F&&!Se&&t.jsxs("button",{onClick:()=>he(S.item_name),className:"flex items-center gap-1 px-2 py-1.5 text-[10px] font-semibold text-amber-700 bg-amber-50 border border-amber-200 rounded-lg hover:bg-amber-100 transition flex-shrink-0",children:[t.jsx(nn,{size:10}),"Suggest"]}),!F&&!Se&&t.jsx(Yt,{size:16,className:"text-green-500 flex-shrink-0"})]})}),Qt&&t.jsxs("div",{className:"ml-5 mt-1 bg-amber-50 border border-amber-200 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[t.jsx(nn,{size:12,className:"text-amber-600"}),t.jsx("span",{className:"text-xs font-semibold text-amber-800",children:"AI Suggested Alternatives"})]}),K?t.jsxs("div",{className:"flex items-center gap-2 py-2 text-xs text-amber-600",children:[t.jsx(Ue,{size:12,className:"animate-spin"}),"Finding alternatives..."]}):(ae[S.item_name]||[]).length===0?t.jsx("p",{className:"text-xs text-amber-600",children:"No suitable alternatives found."}):t.jsx("div",{className:"space-y-1.5",children:(ae[S.item_name]||[]).map(mt=>t.jsxs("button",{onClick:()=>Le(S.item_id,mt),className:"w-full flex items-center gap-2 p-2 bg-white rounded-lg border border-amber-200 hover:border-amber-400 transition text-left",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-xs font-medium text-gray-900",children:mt.name}),t.jsx("p",{className:"text-[10px] text-gray-500",children:mt.reason})]}),t.jsxs("span",{className:"text-[10px] bg-green-100 text-green-700 px-1.5 py-0.5 rounded-full flex-shrink-0",children:[mt.stock_qty," ",mt.uom]})]},mt.item_id))})]})]},S.item_id)})}),ne.length>0&&t.jsxs("div",{className:"mb-4",children:[t.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Added Ingredients"}),t.jsx("div",{className:"space-y-1.5",children:ne.map(S=>t.jsxs("div",{className:"flex items-center gap-3 bg-blue-50 border border-blue-200 rounded-xl p-3",children:[t.jsx(Ve,{size:12,className:"text-blue-500 flex-shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:S.name}),t.jsxs("span",{className:"text-[10px] text-gray-400",children:[S.stock_qty," ",S.uom," in stock"]})]}),t.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[t.jsx("button",{onClick:()=>Ot(S.item_id,S.qty-1),className:"w-6 h-6 flex items-center justify-center rounded bg-blue-100 hover:bg-blue-200 text-blue-700",children:t.jsx(Pa,{size:10})}),t.jsx("span",{className:"w-6 text-center text-xs font-bold",children:S.qty}),t.jsx("button",{onClick:()=>Ot(S.item_id,S.qty+1),className:"w-6 h-6 flex items-center justify-center rounded bg-blue-100 hover:bg-blue-200 text-blue-700",children:t.jsx(Ve,{size:10})})]})]},S.item_id))})]}),re&&Object.keys(Q).length<wt.filter(S=>S.stock_qty<=0).length&&t.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3 mb-4 flex items-start gap-2",children:[t.jsx(St,{size:14,className:"text-amber-600 flex-shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-amber-800",children:"Some ingredients are out of stock"}),t.jsx("p",{className:"text-[10px] text-amber-600 mt-0.5",children:'Tap "Suggest" for AI alternatives, or add ingredients manually.'})]})]})]}),t.jsx("div",{className:"mt-2 mb-4",children:Z?t.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-3",children:[t.jsxs("div",{className:"relative mb-2",children:[t.jsx(Vt,{size:14,className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",value:M,onChange:S=>P(S.target.value),placeholder:"Search stock items...",autoFocus:!0,className:"w-full pl-8 pr-8 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none"}),t.jsx("button",{onClick:()=>{ce(!1),P(""),xe([])},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t.jsx(Ee,{size:14})})]}),be&&t.jsxs("div",{className:"flex items-center gap-2 py-2 text-xs text-gray-500",children:[t.jsx(Ue,{size:12,className:"animate-spin"})," Searching..."]}),ie.length>0&&t.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1",children:ie.map(S=>t.jsxs("button",{onClick:()=>rt(S),className:"w-full flex items-center gap-2 p-2 bg-white rounded-lg border border-gray-200 hover:border-orange-300 transition text-left",children:[t.jsx(ha,{size:12,className:"text-gray-400 flex-shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-xs font-medium text-gray-900 truncate",children:S.name}),t.jsx("span",{className:"text-[10px] text-gray-400",children:S.group_name})]}),t.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full flex-shrink-0 ${S.stock_qty>0?"bg-green-100 text-green-700":"bg-red-100 text-red-600"}`,children:S.stock_qty>0?`${S.stock_qty} ${S.uom}`:"Out"})]},S.id))}),M.length>=2&&!be&&ie.length===0&&t.jsx("p",{className:"text-xs text-gray-400 text-center py-2",children:"No items found"})]}):t.jsxs("button",{onClick:()=>ce(!0),className:"w-full flex items-center justify-center gap-2 py-2.5 text-sm text-gray-600 border border-dashed border-gray-300 rounded-xl hover:border-orange-400 hover:text-orange-700 transition",children:[t.jsx(Vt,{size:14}),"Search & add ingredient"]})})]})}),t.jsx("div",{className:"flex-shrink-0 border-t border-gray-100 px-5 py-4 bg-white",children:t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>{d(),de()},className:"flex-1 flex items-center justify-center gap-2 bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 rounded-xl font-semibold text-sm transition",children:"Skip Recipe"}),wt.length>0&&t.jsxs("button",{onClick:Rt,className:"flex-1 flex items-center justify-center gap-2 bg-orange-600 hover:bg-orange-700 text-white py-3 rounded-xl font-bold text-sm transition shadow-md",children:[t.jsx(ta,{size:16}),"Use Recipe"]})]})})]})]}),document.body):null}const sj=[{value:"kitchen",label:"Kitchen"},{value:"housekeeping",label:"Housekeeping"},{value:"bar",label:"Bar"},{value:"maintenance",label:"Maintenance"},{value:"guest",label:"Guest"},{value:"office",label:"Office"},{value:"other",label:"Other"}],nj=["Kitchen","F&B","Housekeeping","Front Office","Bar","Maintenance","Laundry","Garden","Administration","Security"],lj=["101","102","103","104","105","106","107","108","201","202","203","204","205","206","207","208"],rj=[1,2,3,4,5,6,7,8,10,12,15,20,25,30,40,50];function ij(){const l=Ie(),i=Os(),[o,d]=u.useState([]),[x,f]=u.useState("kitchen"),[p,j]=u.useState(""),[h,y]=u.useState(""),[v,b]=u.useState(""),[g,T]=u.useState(""),[_,A]=u.useState(""),[E,k]=u.useState(""),[w,B]=u.useState(!1),[Q,L]=u.useState(""),[ne,J]=u.useState([]),[ye,X]=u.useState([]),[ae,se]=u.useState(""),[K,me]=u.useState([]),[Z,ce]=u.useState(!1),[M,P]=u.useState(!1),ie=u.useRef(null),xe=u.useRef(null),[be,C]=u.useState(!1),[G,Y]=u.useState([]),[R,le]=u.useState(null),[de,he]=u.useState([]),[Le,we]=u.useState(!1),rt=["FD","FM","FY","FV","FF"];u.useEffect(()=>{async function I(){try{const[Ne,at]=await Promise.all([Cd.list({per_page:10,page:1}),an.list()]);Ne.cost_centers&&(J(Ne.cost_centers),Ne.cost_centers.length>0&&j(String(Ne.cost_centers[0].id)));const $=(at.users||[]).filter(ve=>ve.is_active);X($)}catch(Ne){console.error("Failed to load data:",Ne)}}I()},[]),u.useEffect(()=>{x==="kitchen"&&!Le&&$t.suggestedItems("issue").then(I=>{he(I.frequent_items||[]),we(!0)}).catch(()=>we(!0))},[x,Le]),u.useEffect(()=>{ae.length>=2?(xe.current&&clearTimeout(xe.current),xe.current=setTimeout(()=>Ot(),300)):me([])},[ae]);async function Ot(){ce(!0);try{const I=await Qi.list({search:ae,per_page:15,active:1}),Ne=new Set(o.map(at=>at.item_id));me(I.items.filter(at=>!Ne.has(at.id)))}catch(I){console.error("Search failed:",I)}finally{ce(!1)}}function Rt(I){if(x==="kitchen"&&rt.includes(I.group_code)){le(I),se(""),me([]),P(!1);return}wt(I)}function wt(I){d(Ne=>[...Ne,{item_id:I.id,item_code:I.item_code,item_name:I.name,group_code:I.group_code,uom:I.stock_uom||I.uom,price:I.last_purchase_price||I.weighted_avg_cost||0,qty:1,notes:""}]),se(""),me([]),P(!1)}function Ae(I,Ne){const at=new Set(o.map(ve=>ve.item_id)),$=I.filter(ve=>!at.has(ve.item_id)).map(ve=>({item_id:ve.item_id,item_code:ve.item_code||"",item_name:ve.item_name,group_code:"",uom:ve.uom||"",price:0,qty:ve.qty||1,notes:Ne?`Recipe: ${Ne.name}`:""}));d(ve=>[...ve,...$])}function re(){R&&wt(R)}function S(I){if(!o.some(at=>at.item_id===I.item_id)){if(rt.includes(I.group_code||"")){le({id:I.item_id,name:I.name,item_code:I.item_code,group_code:I.group_code,stock_uom:I.uom});return}d(at=>[...at,{item_id:I.item_id,item_code:I.item_code||"",item_name:I.name,group_code:I.group_code||"",uom:I.uom||"",price:0,qty:1,notes:""}])}}function F(I,Ne){Ne<.5||d(at=>at.map(($,ve)=>ve===I?{...$,qty:Ne}:$))}function fe(I){d(Ne=>Ne.filter((at,$)=>$!==I))}function Se(I){Y(Ne=>{const at=Ne.includes(I)?Ne.filter($=>$!==I):[...Ne,I];return T(at.join(", ")),at})}const Qt=o.reduce((I,Ne)=>I+Ne.qty*Ne.price,0);async function mt(){if(o.length===0){L("Add at least one item");return}if(!h.trim()){L("Select the person receiving the items");return}if(!p){L("Select a cost center");return}L(""),B(!0);try{const I=await Cd.create({issue_type:x,cost_center_id:parseInt(p),received_by_name:h.trim(),department:v||null,room_numbers:g||null,guest_count:_?parseInt(_):null,notes:E||null,lines:o.map(Ne=>({item_id:Ne.item_id,qty:Ne.qty,notes:Ne.notes||null}))});$t.logPattern(o.map(Ne=>({item_id:Ne.item_id,qty:Ne.qty})),"issue",I?.voucher?.id).catch(()=>{}),i("/app/issue")}catch(I){L(I.message)}finally{B(!1)}}const ba=["guest","housekeeping"].includes(x);return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx(ke,{to:"/app/issue",className:"p-2 hover:bg-gray-100 rounded-lg transition",children:t.jsx(tl,{size:20,className:"text-gray-600"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"New Issue Voucher"}),t.jsxs("p",{className:"text-sm text-gray-500",children:[l?.camp_name||"Your Camp","  ",o.length," items"]})]})]}),Q&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm flex items-center gap-2",children:[t.jsx(St,{size:16}),Q]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 mb-4",children:[t.jsx("h2",{className:"font-semibold text-gray-900 mb-3",children:"Issue Details"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Issue Type *"}),t.jsx("select",{value:x,onChange:I=>f(I.target.value),className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:sj.map(I=>t.jsx("option",{value:I.value,children:I.label},I.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Cost Center *"}),t.jsxs("select",{value:p,onChange:I=>j(I.target.value),className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[t.jsx("option",{value:"",children:"Select cost center"}),ne.map(I=>t.jsxs("option",{value:I.id,children:[I.code,"  ",I.name]},I.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Received By *"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:h,onChange:I=>y(I.target.value),className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none appearance-none bg-white",children:[t.jsx("option",{value:"",children:" Select person "}),ye.map(I=>t.jsxs("option",{value:I.name,children:[I.name," (",I.role?.replace(/_/g," "),")"]},I.id))]}),t.jsx(vt,{size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Department"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:v,onChange:I=>b(I.target.value),className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none appearance-none bg-white",children:[t.jsx("option",{value:"",children:" Select department "}),nj.map(I=>t.jsx("option",{value:I,children:I},I))]}),t.jsx(vt,{size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),ba&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Room Numbers"}),t.jsxs("button",{type:"button",onClick:()=>C(!be),className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg text-left bg-white flex items-center justify-between",children:[t.jsx("span",{className:G.length?"text-gray-900":"text-gray-400",children:G.length?G.join(", "):"Tap to select rooms"}),t.jsx(vt,{size:16,className:"text-gray-400"})]}),be&&t.jsx("div",{className:"mt-1 p-2 bg-white border border-gray-200 rounded-lg shadow-lg grid grid-cols-4 gap-1.5",children:lj.map(I=>t.jsx("button",{type:"button",onClick:()=>Se(I),className:`px-2 py-1.5 text-xs rounded-lg font-medium transition ${G.includes(I)?"bg-green-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:I},I))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Guest Count"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:_,onChange:I=>A(I.target.value),className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none appearance-none bg-white",children:[t.jsx("option",{value:"",children:" Select "}),rj.map(I=>t.jsxs("option",{value:I,children:[I," guest",I>1?"s":""]},I))]}),t.jsx(vt,{size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]})]})]})]}),x==="kitchen"&&de.length>0&&o.length===0&&t.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-4 mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(nn,{size:14,className:"text-orange-600"}),t.jsx("h3",{className:"text-xs font-semibold text-orange-800 uppercase tracking-wider",children:"Your Frequent Items"})]}),t.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1 scroll-touch",children:de.slice(0,8).map(I=>t.jsxs("button",{onClick:()=>S(I),className:"flex-shrink-0 flex items-center gap-1.5 px-3 py-2 bg-white border border-orange-200 rounded-lg hover:border-orange-400 transition text-left",children:[t.jsx(lr,{size:10,className:"text-orange-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-gray-900 whitespace-nowrap",children:I.name}),t.jsxs("p",{className:"text-[9px] text-gray-400",children:[I.times_ordered,"x ordered  ",I.stock_qty," ",I.uom]})]})]},I.item_id))})]}),t.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4 mb-4",children:t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs("div",{className:"relative flex-1",children:[t.jsx(Vt,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{ref:ie,type:"text",value:ae,onChange:I=>{se(I.target.value),P(!0)},onFocus:()=>P(!0),placeholder:"Search items to issue...",className:"w-full pl-10 pr-4 py-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none"}),ae&&t.jsx("button",{onClick:()=>{se(""),me([]),P(!1)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t.jsx(Ee,{size:16})})]})}),M&&(K.length>0||Z)&&t.jsxs("div",{className:"absolute left-0 right-0 top-full mt-1 bg-white border border-gray-200 rounded-xl shadow-lg z-20 max-h-72 overflow-y-auto",children:[Z&&t.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 text-sm text-gray-500",children:[t.jsx(Ue,{size:16,className:"animate-spin"})," Searching..."]}),K.map(I=>t.jsxs("button",{onClick:()=>Rt(I),className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-green-50 transition text-left border-b border-gray-50 last:border-0",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[t.jsx("span",{className:"text-xs font-mono text-gray-400",children:I.item_code}),t.jsx(Ye,{variant:I.abc_class,children:I.abc_class})]}),t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:I.name}),t.jsxs("p",{className:"text-xs text-gray-400",children:[I.group_name,"  ",I.stock_uom]})]}),x==="kitchen"&&rt.includes(I.group_code)?t.jsx(ta,{size:18,className:"text-orange-500 flex-shrink-0"}):t.jsx(Ve,{size:18,className:"text-green-600 flex-shrink-0"})]},I.id)),!Z&&K.length===0&&ae.length>=2&&t.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"No items found"})]})]})}),o.length===0?t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center",children:[t.jsx(zs,{size:40,className:"mx-auto text-gray-300 mb-3"}),t.jsx("p",{className:"text-gray-500 text-sm",children:"Search and add items to issue above"})]}):t.jsx("div",{className:"bg-white rounded-xl border border-gray-200 mb-4",children:t.jsx("div",{className:"divide-y divide-gray-100",children:o.map((I,Ne)=>t.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:I.item_name}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5 flex-wrap",children:[I.item_code&&t.jsx("span",{className:"text-xs font-mono text-gray-400",children:I.item_code}),I.uom&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsx("span",{className:"text-xs text-gray-400",children:I.uom})]}),I.notes?.startsWith("Recipe:")&&t.jsxs("span",{className:"text-[9px] bg-orange-50 text-orange-600 px-1.5 py-0.5 rounded-full flex items-center gap-0.5",children:[t.jsx(ta,{size:8})," ",I.notes]}),I.price>0&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsxs("span",{className:"text-xs text-gray-500",children:["TZS ",Math.round(I.qty*I.price).toLocaleString()]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[t.jsx("button",{onClick:()=>F(Ne,I.qty-(I.qty>1?1:.5)),className:"w-9 h-9 flex items-center justify-center rounded-lg bg-gray-100 hover:bg-gray-200 transition",children:t.jsx(Pa,{size:16})}),t.jsx("span",{className:"w-14 h-9 flex items-center justify-center text-sm font-bold text-gray-900 bg-gray-50 rounded-lg border border-gray-200",children:I.qty}),t.jsx("button",{onClick:()=>F(Ne,I.qty+1),className:"w-9 h-9 flex items-center justify-center rounded-lg bg-gray-100 hover:bg-gray-200 transition",children:t.jsx(Ve,{size:16})})]}),t.jsx("button",{onClick:()=>fe(Ne),className:"p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition flex-shrink-0",children:t.jsx(Es,{size:16})})]},I.item_id))})}),o.length>0&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (optional)"}),t.jsx("textarea",{value:E,onChange:I=>k(I.target.value),placeholder:"Any special notes for this issue...",rows:2,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none resize-none"})]}),o.length>0&&t.jsx("div",{className:"sticky bottom-16 lg:bottom-0 bg-white border border-gray-200 rounded-xl p-4 shadow-lg",children:t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm text-gray-500",children:[o.length," items  ",x]}),t.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["TZS ",Math.round(Qt).toLocaleString()]})]}),t.jsx("button",{onClick:mt,disabled:w,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white px-6 py-3 rounded-xl text-sm font-semibold transition",children:w?t.jsxs(t.Fragment,{children:[t.jsx(Ue,{size:18,className:"animate-spin"}),"Creating..."]}):t.jsxs(t.Fragment,{children:[t.jsx(zs,{size:18}),"Create Issue Voucher"]})})]})}),R&&t.jsx(aj,{item:R,onClose:()=>le(null),onAddIngredients:Ae,onSkip:re})]})}function Ki({children:l,className:i=""}){return t.jsx("div",{className:`bg-white rounded-xl border border-gray-200 ${i}`,children:l})}const cj=[{key:"summary",label:"Overview",icon:""},{key:"low_stock",label:"Low Stock",icon:""},{key:"projections",label:"Projections",icon:""},{key:"dead_stock",label:"Dead Stock",icon:""},{key:"excess",label:"Excess",icon:""}],oj={out:"bg-red-100 text-red-800",critical:"bg-red-100 text-red-700",low:"bg-amber-100 text-amber-800",ok:"bg-green-100 text-green-800",excess:"bg-blue-100 text-blue-800"};function dj(){const{user:l}=Ie(),[i,o]=u.useState("summary"),[d,x]=u.useState(null),[f,p]=u.useState(null),[j,h]=u.useState(!0),[y,v]=u.useState(""),[b,g]=u.useState(14),[T,_]=u.useState(60),A=["camp_storekeeper","camp_manager"].includes(l?.role)?l?.camp_id:null;u.useEffect(()=>{E()},[]),u.useEffect(()=>{i!=="summary"&&k()},[i,b,T]);async function E(){try{h(!0);const w=await Jn.summary(A);x(w.alerts)}catch(w){v(w.message)}finally{h(!1)}}async function k(){try{h(!0),v("");let w;switch(i){case"low_stock":w=await Jn.lowStock(A);break;case"projections":w=await Jn.projections(b,A);break;case"dead_stock":w=await Jn.deadStock(T,A);break;case"excess":w=await Jn.excess(A);break}p(w)}catch(w){v(w.message)}finally{h(!1)}}return j&&!d?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600"})}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Stock Alerts & Projections"}),t.jsx("button",{onClick:()=>{E(),i!=="summary"&&k()},className:"text-sm text-emerald-600 hover:text-emerald-700 font-medium",children:" Refresh"})]}),y&&t.jsx("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg text-sm",children:y}),t.jsx("div",{"data-guide":"alerts-tabs",className:"flex overflow-x-auto gap-1 bg-gray-100 p-1 rounded-lg",children:cj.map(w=>t.jsxs("button",{onClick:()=>o(w.key),className:`flex-shrink-0 px-3 py-2 rounded-md text-sm font-medium transition-colors ${i===w.key?"bg-white text-emerald-700 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[t.jsx("span",{className:"mr-1",children:w.icon}),w.label,w.key!=="summary"&&d&&t.jsxs("span",{className:"ml-1 text-xs",children:["(",w.key==="low_stock"?d.low_stock+d.out_of_stock:w.key==="projections"?d.stockout_7days:w.key==="dead_stock"?d.dead_stock:w.key==="excess"?d.excess_stock:0,")"]})]},w.key))}),i==="summary"&&d&&t.jsx(uj,{summary:d,onNavigate:o}),i==="low_stock"&&!j&&f&&t.jsx(mj,{data:f}),i==="projections"&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm text-gray-600",children:"Forecast horizon:"}),t.jsxs("select",{value:b,onChange:w=>g(Number(w.target.value)),className:"border border-gray-300 rounded-md px-2 py-1 text-sm",children:[t.jsx("option",{value:7,children:"7 days"}),t.jsx("option",{value:14,children:"14 days"}),t.jsx("option",{value:30,children:"30 days"}),t.jsx("option",{value:60,children:"60 days"}),t.jsx("option",{value:90,children:"90 days"})]})]}),!j&&f&&t.jsx(xj,{data:f})]}),i==="dead_stock"&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm text-gray-600",children:"No movement for:"}),t.jsxs("select",{value:T,onChange:w=>_(Number(w.target.value)),className:"border border-gray-300 rounded-md px-2 py-1 text-sm",children:[t.jsx("option",{value:30,children:"30+ days"}),t.jsx("option",{value:60,children:"60+ days"}),t.jsx("option",{value:90,children:"90+ days"}),t.jsx("option",{value:180,children:"180+ days"})]})]}),!j&&f&&t.jsx(fj,{data:f})]}),i==="excess"&&!j&&f&&t.jsx(hj,{data:f}),j&&i!=="summary"&&t.jsx("div",{className:"flex items-center justify-center h-32",children:t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-emerald-600"})})]})}function uj({summary:l,onNavigate:i}){const o=[{label:"Critical / Low Stock",value:l.low_stock,sub:`${l.critical} critical`,color:"text-amber-600",bg:"bg-amber-50",icon:"",tab:"low_stock"},{label:"Out of Stock",value:l.out_of_stock,color:"text-red-600",bg:"bg-red-50",icon:"",tab:"low_stock"},{label:"Stock-out in 7 days",value:l.stockout_7days,sub:"Based on avg usage",color:"text-orange-600",bg:"bg-orange-50",icon:"",tab:"projections"},{label:"Dead Stock",value:l.dead_stock,sub:"60+ days no movement",color:"text-gray-600",bg:"bg-gray-50",icon:"",tab:"dead_stock"},{label:"Excess Stock",value:l.excess_stock,sub:"Above max level",color:"text-blue-600",bg:"bg-blue-50",icon:"",tab:"excess"},{label:"Total Alerts",value:l.total_alerts,color:"text-purple-600",bg:"bg-purple-50",icon:""}];return t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:o.map((d,x)=>t.jsxs("button",{onClick:()=>d.tab&&i(d.tab),className:`${d.bg} rounded-xl p-4 text-left transition-transform hover:scale-[1.02] ${d.tab?"cursor-pointer":""}`,children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"text-lg",children:d.icon}),t.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase",children:d.label})]}),t.jsx("div",{className:`text-2xl font-bold ${d.color}`,children:d.value}),d.sub&&t.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:d.sub})]},x))})}function mj({data:l}){return l.items?.length?t.jsxs("div",{className:"space-y-2",children:[t.jsxs("p",{className:"text-sm text-gray-500",children:[l.count," items below threshold"]}),t.jsx("div",{className:"space-y-2",children:l.items.map((i,o)=>t.jsxs(Ki,{className:"p-3",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${i.stock_status==="out"?"bg-red-500":i.stock_status==="critical"?"bg-red-400":"bg-amber-400"}`}),t.jsx("span",{className:"font-medium text-gray-900 text-sm truncate",children:i.item_name}),i.is_critical&&t.jsx("span",{className:"text-xs text-red-600 font-medium",children:"CRITICAL"})]}),t.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-500",children:[t.jsx("span",{children:i.item_code}),t.jsx("span",{children:i.camp_code}),t.jsx("span",{children:i.group_code})]})]}),t.jsx("div",{className:"text-right",children:t.jsx("span",{className:`inline-block px-2 py-0.5 rounded-full text-xs font-medium ${oj[i.stock_status]}`,children:i.stock_status})})]}),t.jsxs("div",{className:"mt-2 grid grid-cols-4 gap-2 text-xs",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-gray-400",children:"On Hand"}),t.jsxs("div",{className:"font-semibold",children:[i.current_qty," ",i.uom]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-gray-400",children:"Par Level"}),t.jsx("div",{className:"font-semibold",children:i.par_level??"-"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-gray-400",children:"Daily Use"}),t.jsx("div",{className:"font-semibold",children:i.avg_daily_usage??"-"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-gray-400",children:"Days Left"}),t.jsx("div",{className:`font-semibold ${i.days_left!==null&&i.days_left<=3?"text-red-600":i.days_left!==null&&i.days_left<=7?"text-amber-600":""}`,children:i.days_left!==null?`${i.days_left}d`:"-"})]})]}),i.reorder_qty&&t.jsxs("div",{className:"mt-2 bg-emerald-50 text-emerald-700 text-xs rounded px-2 py-1",children:["Suggested reorder: ",t.jsxs("strong",{children:[i.reorder_qty," ",i.uom]})]})]},o))})]}):t.jsx(Ji,{message:"No low stock items found"})}function xj({data:l}){return l.items?.length?t.jsxs("div",{className:"space-y-2",children:[t.jsxs("p",{className:"text-sm text-gray-500",children:[l.count," items will stock out within ",l.days_horizon," days"]}),t.jsx("div",{className:"space-y-2",children:l.items.map((i,o)=>t.jsxs(Ki,{className:"p-3",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-medium text-gray-900 text-sm truncate",children:i.item_name}),i.is_critical&&t.jsx("span",{className:"text-xs text-red-600 font-medium",children:"CRITICAL"})]}),t.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-500",children:[t.jsx("span",{children:i.item_code}),t.jsxs("span",{children:[i.camp_code,"  ",i.camp_name]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:`text-lg font-bold ${i.days_until_stockout<=3?"text-red-600":i.days_until_stockout<=7?"text-amber-600":"text-orange-500"}`,children:[i.days_until_stockout,"d"]}),t.jsx("div",{className:"text-[10px] text-gray-400",children:"until out"})]})]}),t.jsxs("div",{className:"mt-2 flex items-center gap-4 text-xs",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-400",children:"Stock: "}),t.jsxs("span",{className:"font-medium",children:[i.current_qty," ",i.uom]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-400",children:"Usage: "}),t.jsxs("span",{className:"font-medium",children:[i.avg_daily_usage,"/day"]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-400",children:"Out by: "}),t.jsx("span",{className:"font-medium text-red-600",children:i.projected_stockout_date})]})]}),t.jsx("div",{className:"mt-2 h-1.5 bg-gray-100 rounded-full overflow-hidden",children:t.jsx("div",{className:`h-full rounded-full transition-all ${i.days_until_stockout<=3?"bg-red-500":i.days_until_stockout<=7?"bg-amber-500":"bg-orange-400"}`,style:{width:`${Math.max(5,Math.min(100,i.days_until_stockout/l.days_horizon*100))}%`}})}),t.jsxs("div",{className:"mt-1 bg-blue-50 text-blue-700 text-xs rounded px-2 py-1",children:["Reorder suggestion: ",t.jsxs("strong",{children:[i.suggested_reorder_qty," ",i.uom]})]})]},o))})]}):t.jsx(Ji,{message:`No items projected to run out within ${l.days_horizon} days`})}function fj({data:l}){return l.items?.length?t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("p",{className:"text-sm text-gray-500",children:[l.count," items with no movement"]}),t.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Total value: ",t.jsxs("span",{className:"text-red-600",children:["TZS ",Number(l.total_value).toLocaleString()]})]})]}),t.jsx("div",{className:"space-y-2",children:l.items.map((i,o)=>t.jsxs(Ki,{className:"p-3",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-900 text-sm",children:i.item_name}),t.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:[i.item_code,"  ",i.camp_code,"  ",i.group_code]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"text-lg font-bold text-gray-400",children:[i.days_no_movement,"d"]}),t.jsx("div",{className:"text-[10px] text-gray-400",children:"no movement"})]})]}),t.jsxs("div",{className:"mt-2 flex items-center gap-4 text-xs",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-400",children:"Qty: "}),t.jsxs("span",{className:"font-medium",children:[i.current_qty," ",i.uom]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-400",children:"Value: "}),t.jsxs("span",{className:"font-medium",children:["TZS ",Number(i.current_value).toLocaleString()]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-400",children:"Last issue: "}),t.jsx("span",{className:"font-medium",children:i.last_issue_date||"Never"})]})]})]},o))})]}):t.jsx(Ji,{message:`No items with ${l.min_days}+ days of no movement`})}function hj({data:l}){return l.items?.length?t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("p",{className:"text-sm text-gray-500",children:[l.count," items above max level"]}),t.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Excess value: ",t.jsxs("span",{className:"text-blue-600",children:["TZS ",Number(l.total_excess_value).toLocaleString()]})]})]}),t.jsx("div",{className:"space-y-2",children:l.items.map((i,o)=>t.jsxs(Ki,{className:"p-3",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-900 text-sm",children:i.item_name}),t.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:[i.item_code,"  ",i.camp_code,"  ",i.group_code]})]}),t.jsx(Ye,{variant:"info",children:"excess"})]}),t.jsxs("div",{className:"mt-2 grid grid-cols-4 gap-2 text-xs",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-gray-400",children:"On Hand"}),t.jsxs("div",{className:"font-semibold",children:[i.current_qty," ",i.uom]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-gray-400",children:"Max Level"}),t.jsx("div",{className:"font-semibold",children:i.max_level??"-"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-gray-400",children:"Excess Qty"}),t.jsx("div",{className:"font-semibold text-blue-600",children:i.excess_qty??"-"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-gray-400",children:"Days Stock"}),t.jsx("div",{className:"font-semibold",children:i.days_stock_on_hand?`${i.days_stock_on_hand}d`:"-"})]})]})]},o))})]}):t.jsx(Ji,{message:"No excess stock items found"})}function Ji({message:l}){return t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"text-4xl mb-2",children:""}),t.jsx("div",{className:"text-gray-500",children:l})]})}const cf=[{key:"stock_summary",label:"Stock Summary",desc:"Stock levels and values by camp"},{key:"movement_history",label:"Movement History",desc:"All stock movements in period"},{key:"order_summary",label:"Order Summary",desc:"Orders overview by camp"},{key:"consumption",label:"Consumption",desc:"Issue/consumption analysis"}];function pj(){Ie();const{camps:l}=ya(),[i,o]=u.useState("stock_summary"),[d,x]=u.useState(""),[f,p]=u.useState(new Date(new Date().setDate(1)).toISOString().slice(0,10)),[j,h]=u.useState(new Date().toISOString().slice(0,10)),[y,v]=u.useState(null),[b,g]=u.useState(!1),[T,_]=u.useState("");async function A(){g(!0),_(""),v(null);try{const E={date_from:f,date_to:j};d&&(E.camp_id=d);const k=await Lb.get(i,E);v(k)}catch(E){_(E.message)}finally{g(!1)}}return t.jsxs("div",{className:"space-y-4",children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Reports"}),t.jsx("div",{"data-guide":"report-filters",className:"bg-white rounded-xl border border-gray-200 p-4",children:t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Report Type"}),t.jsx("select",{"data-guide":"report-type-select",value:i,onChange:E=>o(E.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",children:cf.map(E=>t.jsx("option",{value:E.key,children:E.label},E.key))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Camp"}),t.jsxs("select",{value:d,onChange:E=>x(E.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[t.jsx("option",{value:"",children:"All Camps"}),l?.map(E=>t.jsxs("option",{value:E.id,children:[E.code,"  ",E.name]},E.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"From"}),t.jsx("input",{type:"date",value:f,onChange:E=>p(E.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"To"}),t.jsx("input",{type:"date",value:j,onChange:E=>h(E.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm"})]}),t.jsx("div",{className:"flex items-end",children:t.jsx("button",{onClick:A,disabled:b,"data-guide":"report-generate-btn",className:"w-full bg-emerald-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-emerald-700 disabled:opacity-50",children:b?"Loading...":"Generate"})})]})}),T&&t.jsx("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg text-sm",children:T}),b&&t.jsx(ot,{message:"Generating report..."}),y&&!b&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h2",{className:"font-semibold text-gray-900",children:cf.find(E=>E.key===y.report_type)?.label}),t.jsxs("span",{className:"text-xs text-gray-500",children:[y.period?.from," to ",y.period?.to]})]}),y.data?.length===0?t.jsx("div",{className:"text-center py-8 text-gray-400",children:"No data found for selected period"}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsx("tr",{className:"border-b border-gray-100",children:Object.keys(y.data[0]||{}).map(E=>t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 pb-2 px-2 whitespace-nowrap",children:E.replace(/_/g," ")},E))})}),t.jsx("tbody",{children:y.data.map((E,k)=>t.jsx("tr",{className:"border-b border-gray-50",children:Object.values(E).map((w,B)=>t.jsx("td",{className:"py-2 px-2 whitespace-nowrap",children:typeof w=="number"?Number(w).toLocaleString():w||"-"},B))},k))})]})}),t.jsxs("div",{className:"mt-3 text-xs text-gray-400",children:[y.data?.length," rows"]})]})]})}const gj=["camp_storekeeper","camp_manager","chef","housekeeping","stores_manager","procurement_officer","accountant","director","admin"];function yj(){const l=Ie(),{state:i}=rn(),o=i.camps||[],[d,x]=u.useState([]),[f,p]=u.useState(!0),[j,h]=u.useState(""),[y,v]=u.useState(!1),[b,g]=u.useState({username:"",name:"",role:"camp_storekeeper",password:"",camp_id:"",pin:""}),[T,_]=u.useState(!1);u.useEffect(()=>{A()},[]);async function A(){try{p(!0);const w=await an.list();x(w.users||[])}catch(w){h(w.message)}finally{p(!1)}}async function E(w){w.preventDefault(),_(!0),h("");try{await an.create({...b,camp_id:b.camp_id?Number(b.camp_id):null}),v(!1),g({username:"",name:"",role:"camp_storekeeper",password:"",camp_id:"",pin:""}),A()}catch(B){h(B.message)}finally{_(!1)}}async function k(w){try{await an.update(w.id,{is_active:!w.is_active}),A()}catch(B){h(B.message)}}return f?t.jsx(ot,{message:"Loading users..."}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"User Management"}),l?.role==="admin"&&t.jsx("button",{onClick:()=>v(!y),"data-guide":"new-user-btn",className:"bg-emerald-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-emerald-700",children:y?"Cancel":"+ New User"})]}),j&&t.jsx("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg text-sm",children:j}),y&&t.jsxs("form",{onSubmit:E,"data-guide":"user-create-form",className:"bg-white rounded-xl border border-gray-200 p-4 space-y-3",children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Full Name"}),t.jsx("input",{value:b.name,onChange:w=>g({...b,name:w.target.value}),required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Username"}),t.jsx("input",{value:b.username,onChange:w=>g({...b,username:w.target.value}),required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Password"}),t.jsx("input",{type:"password",value:b.password,onChange:w=>g({...b,password:w.target.value}),required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Role"}),t.jsx("select",{value:b.role,onChange:w=>g({...b,role:w.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",children:gj.map(w=>t.jsx("option",{value:w,children:w.replace(/_/g," ")},w))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Camp"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:b.camp_id,onChange:w=>g({...b,camp_id:w.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm appearance-none bg-white",children:[t.jsx("option",{value:"",children:" Head Office "}),o.map(w=>t.jsxs("option",{value:w.id,children:[w.code,"  ",w.name]},w.id))]}),t.jsx(vt,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"PIN (optional)"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm font-mono tracking-widest bg-gray-50 min-h-[38px] flex items-center",children:b.pin?"".repeat(b.pin.length):t.jsx("span",{className:"text-gray-400",children:"No PIN"})}),b.pin&&t.jsx("button",{type:"button",onClick:()=>g({...b,pin:""}),className:"text-xs text-red-500 hover:text-red-700",children:"Clear"})]}),b.pin.length<4&&t.jsx("div",{className:"grid grid-cols-5 gap-1 mt-1.5",children:[1,2,3,4,5,6,7,8,9,0].map(w=>t.jsx("button",{type:"button",onClick:()=>b.pin.length<4&&g({...b,pin:b.pin+String(w)}),className:"h-8 text-sm font-medium bg-gray-100 hover:bg-gray-200 rounded-lg transition",children:w},w))})]})]}),t.jsx("button",{type:"submit",disabled:T,className:"bg-emerald-600 text-white px-6 py-2 rounded-lg text-sm font-medium hover:bg-emerald-700 disabled:opacity-50",children:T?"Creating...":"Create User"})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[t.jsx("div",{className:"hidden md:block overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[t.jsx("th",{className:"text-left px-4 py-3 font-medium text-gray-500",children:"Name"}),t.jsx("th",{className:"text-left px-4 py-3 font-medium text-gray-500",children:"Username"}),t.jsx("th",{className:"text-left px-4 py-3 font-medium text-gray-500",children:"Role"}),t.jsx("th",{className:"text-left px-4 py-3 font-medium text-gray-500",children:"Camp"}),t.jsx("th",{className:"text-center px-4 py-3 font-medium text-gray-500",children:"PIN"}),t.jsx("th",{className:"text-center px-4 py-3 font-medium text-gray-500",children:"Status"}),l?.role==="admin"&&t.jsx("th",{className:"text-center px-4 py-3 font-medium text-gray-500",children:"Action"})]})}),t.jsx("tbody",{children:d.map(w=>t.jsxs("tr",{className:"border-b border-gray-50 hover:bg-gray-50",children:[t.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:w.name}),t.jsx("td",{className:"px-4 py-3 text-gray-500 font-mono text-xs",children:w.username}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full",children:w.role?.replace(/_/g," ")})}),t.jsx("td",{className:"px-4 py-3 text-gray-500",children:w.camp_code||"HO"}),t.jsx("td",{className:"px-4 py-3 text-center",children:w.pin_enabled?"":""}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx(Ye,{variant:w.is_active?"success":"danger",children:w.is_active?"Active":"Inactive"})}),l?.role==="admin"&&t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx("button",{onClick:()=>k(w),className:`text-xs px-3 py-1 rounded-full ${w.is_active?"text-red-600 hover:bg-red-50":"text-green-600 hover:bg-green-50"}`,children:w.is_active?"Deactivate":"Activate"})})]},w.id))})]})}),t.jsx("div",{className:"md:hidden divide-y divide-gray-100",children:d.map(w=>t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:w.name}),t.jsxs("p",{className:"text-xs text-gray-500",children:[w.username,"  ",w.camp_code||"HO"]})]}),t.jsx(Ye,{variant:w.is_active?"success":"danger",children:w.is_active?"Active":"Inactive"})]}),t.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[t.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full",children:w.role?.replace(/_/g," ")}),w.pin_enabled&&t.jsx("span",{className:"text-xs text-gray-400",children:"PIN enabled"})]})]},w.id))})]}),t.jsxs("p",{className:"text-xs text-gray-400 text-center",children:[d.length," users total"]})]})}function bj(){const l=Ie(),{dispatch:i}=rn(),{campId:o,camps:d}=ya(),x=el(l?.role);function f(){localStorage.removeItem("kcl_token"),localStorage.removeItem("kcl_stores"),window.location.hash="#/login",window.location.reload()}function p(j){const h=parseInt(j.target.value)||null;i({type:"SELECT_CAMP",payload:h})}return t.jsxs("div",{className:"max-w-2xl",children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-6",children:"Settings"}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-4",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-5",children:[t.jsx("div",{className:"w-14 h-14 bg-green-100 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-green-700 font-bold text-xl",children:l?.name?.charAt(0)||"?"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:l?.name}),t.jsxs("p",{className:"text-sm text-gray-500",children:["@",l?.username]})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(Nd,{icon:z1,label:"Role",value:l?.role?.replace(/_/g," ")}),t.jsx(Nd,{icon:av,label:"Camp",value:l?.camp_name||"Head Office"}),t.jsx(Nd,{icon:g1,label:"Approval Limit",value:l?.approval_limit?`TZS ${Math.round(l.approval_limit).toLocaleString()}`:"None"})]})]}),x&&d.length>1&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-4",children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"View Camp"}),t.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"As a manager, you can switch between camps to view their stock, orders, and issues."}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:o||"",onChange:p,className:"w-full px-4 py-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none appearance-none bg-white",children:[t.jsx("option",{value:"",children:"All Camps (Head Office View)"}),d.map(j=>t.jsxs("option",{value:j.id,children:[j.code,"  ",j.name]},j.id))]}),t.jsx(vt,{size:18,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-4",children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"About"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-500",children:"Application"}),t.jsx("span",{className:"text-gray-900 font-medium",children:"KCL Stores"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-500",children:"Version"}),t.jsx("span",{className:"text-gray-900 font-medium",children:"1.0.0"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-500",children:"Organisation"}),t.jsx("span",{className:"text-gray-900 font-medium",children:"Karibu Camps Limited"})]})]})]}),t.jsxs("button",{onClick:f,className:"w-full flex items-center justify-center gap-2 bg-red-50 text-red-600 hover:bg-red-100 px-4 py-3 rounded-xl text-sm font-medium transition",children:[t.jsx($d,{size:18}),"Sign Out"]})]})}function Nd({icon:l,label:i,value:o}){return t.jsxs("div",{className:"flex items-center gap-3 py-2",children:[t.jsx("div",{className:"w-8 h-8 bg-gray-50 rounded-lg flex items-center justify-center flex-shrink-0",children:t.jsx(l,{size:16,className:"text-gray-400"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-xs text-gray-400",children:i}),t.jsx("p",{className:"text-sm font-medium text-gray-900 capitalize",children:o})]})]})}const of=[{value:"bar",label:"Bar",icon:xa,color:"bg-purple-500",costCenter:"BAR"},{value:"restaurant",label:"Restaurant",icon:In,color:"bg-orange-500",costCenter:"KITCHEN"},{value:"kitchen",label:"Kitchen",icon:bv,color:"bg-amber-500",costCenter:"KITCHEN"},{value:"rooms",label:"Rooms",icon:Jb,color:"bg-blue-500",costCenter:"ROOMS"},{value:"guest",label:"Guest",icon:_a,color:"bg-green-500",costCenter:"ROOMS"},{value:"staff",label:"Staff",icon:_a,color:"bg-gray-500",costCenter:"STAFF"},{value:"maintenance",label:"Maintenance",icon:M1,color:"bg-red-500",costCenter:"MAINT"}],df=["BA","BJ"],vj=Array.from({length:20},(l,i)=>String(i+1)),jj=[1,2,3,4,5,6,7,8,10,12,15,20,25,30,40,50],Nj=["101","102","103","104","105","106","107","108","201","202","203","204","205","206","207","208"];function _j(){const l=Ie(),[i,o]=u.useState("service"),[d,x]=u.useState(null),[f,p]=u.useState([]),[j,h]=u.useState(null),[y,v]=u.useState([]),[b,g]=u.useState([]),[T,_]=u.useState(!1),[A,E]=u.useState(""),[k,w]=u.useState(!1),[B,Q]=u.useState(null),[L,ne]=u.useState("");u.useRef(null);const[J,ye]=u.useState(""),[X,ae]=u.useState(""),[se,K]=u.useState(""),[me,Z]=u.useState(""),[ce,M]=u.useState(""),[P,ie]=u.useState(!1),[xe,be]=u.useState([]),[C,G]=u.useState([]),[Y,R]=u.useState(!1),[le,de]=u.useState(null),[he,Le]=u.useState([]),[we,rt]=u.useState(!1);u.useEffect(()=>{Ot()},[]),u.useEffect(()=>{async function $(){try{const ve=await an.list();be((ve.users||[]).filter(Ge=>Ge.is_active))}catch(ve){console.error("Failed to load staff:",ve)}}$()},[]);async function Ot(){try{const $=await tr.today();de($.today)}catch($){console.error("Failed to load today stats:",$)}}async function Rt($){_(!0);try{const[ve,Ge]=await Promise.all([tr.categories(),tr.items({limit:100})]);let xt=ve.categories||[],on=Ge.items||[];$.value==="bar"&&(xt=xt.filter(ll=>df.includes(ll.code)),on=on.filter(ll=>df.includes(ll.group_code))),p(xt),v(on),h(null)}catch(ve){E(ve.message)}finally{_(!1)}}async function wt(){try{const $=await tr.recent({limit:15});Le($.transactions||[]),rt(!0)}catch($){E($.message)}}function Ae($){x($),o("items"),ne(""),Rt($)}const re=f,S=u.useMemo(()=>{let $=y;if(j&&($=$.filter(ve=>ve.group_code===j)),L.trim()){const ve=L.toLowerCase();$=$.filter(Ge=>Ge.name.toLowerCase().includes(ve)||Ge.item_code?.toLowerCase().includes(ve)||Ge.group_name?.toLowerCase().includes(ve))}return $},[y,j,L]);function F($){g(ve=>ve.find(xt=>xt.id===$.id)?ve.map(xt=>xt.id===$.id?{...xt,qty:xt.qty+1}:xt):[...ve,{...$,qty:1}])}function fe($,ve){ve<=0?g(Ge=>Ge.filter(xt=>xt.id!==$)):g(Ge=>Ge.map(xt=>xt.id===$?{...xt,qty:ve}:xt))}function Se($){g(ve=>ve.filter(Ge=>Ge.id!==$))}function Qt($){G(ve=>{const Ge=ve.includes($)?ve.filter(xt=>xt!==$):[...ve,$];return K(Ge.join(", ")),Ge})}const mt=b.reduce(($,ve)=>$+ve.qty*ve.price,0),ba=b.reduce(($,ve)=>$+ve.qty,0);async function I(){if(b.length!==0){w(!0),E("");try{const $=of.find(Ge=>Ge.value===d?.value),ve=await tr.create({service_type:d.value,cost_center:$?.costCenter||"BAR",received_by:me.trim()||"Walk-in",table_number:J||null,guest_count:X?parseInt(X):null,room_numbers:se||null,notes:ce||null,items:b.map(Ge=>({id:Ge.id,qty:Ge.qty,notes:null}))});Q({...ve.transaction,items:[...b],service:d,time:new Date().toLocaleTimeString()}),o("receipt"),g([]),ye(""),ae(""),K(""),Z(""),M(""),G([]),R(!1),ie(!1),Ot()}catch($){E($.message)}finally{w(!1)}}}function Ne(){o("service"),x(null),h(null),v([]),p([]),g([]),ne(""),Q(null),E(""),rt(!1)}function at(){i==="cart"?o("items"):i==="items"&&(o("service"),x(null),v([]),p([]))}return i==="receipt"&&B?t.jsx("div",{className:"max-w-md mx-auto",children:t.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 overflow-hidden",children:[t.jsxs("div",{className:"bg-green-600 text-white text-center py-6 px-4",children:[t.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-3",children:t.jsx(eh,{size:32})}),t.jsx("h2",{className:"text-lg font-bold",children:"Transaction Complete"}),t.jsx("p",{className:"text-green-100 text-sm mt-1",children:B.voucher_number})]}),t.jsxs("div",{className:"p-4 space-y-3",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-500",children:"Service"}),t.jsx("span",{className:"font-medium",children:B.service?.label})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-500",children:"Time"}),t.jsx("span",{className:"font-medium",children:B.time})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-500",children:"Items"}),t.jsx("span",{className:"font-medium",children:B.items_count})]}),t.jsx("div",{className:"border-t border-dashed border-gray-200 pt-3 mt-3",children:B.items.map($=>t.jsxs("div",{className:"flex justify-between text-sm py-1",children:[t.jsxs("span",{className:"text-gray-700",children:[$.qty,"x ",$.name]}),t.jsxs("span",{className:"text-gray-600",children:["TZS ",Math.round($.qty*$.price).toLocaleString()]})]},$.id))}),t.jsxs("div",{className:"border-t border-gray-200 pt-3 flex justify-between",children:[t.jsx("span",{className:"font-bold text-gray-900",children:"Total"}),t.jsxs("span",{className:"font-bold text-gray-900 text-lg",children:["TZS ",Math.round(B.total_value).toLocaleString()]})]})]}),t.jsxs("div",{className:"p-4 border-t border-gray-100 space-y-2",children:[t.jsx("button",{onClick:Ne,className:"w-full bg-green-600 text-white py-3 rounded-xl font-semibold text-sm hover:bg-green-700 transition",children:"New Transaction"}),t.jsx("button",{onClick:()=>{o("service"),x(null)},className:"w-full bg-gray-100 text-gray-700 py-3 rounded-xl font-semibold text-sm hover:bg-gray-200 transition",children:"Back to POS Home"})]})]})}):we?t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("button",{onClick:()=>rt(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition",children:t.jsx(Ia,{size:20,className:"text-gray-600"})}),t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Recent Transactions"})]}),t.jsx("div",{className:"space-y-2",children:he.length===0?t.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center text-gray-400",children:"No recent transactions"}):he.map($=>t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-mono text-xs text-gray-400",children:$.voucher_number}),t.jsxs("p",{className:"font-medium text-gray-900 text-sm mt-0.5",children:[$.cost_center||$.issue_type,"  ",$.received_by]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"font-bold text-gray-900",children:["TZS ",Math.round($.total_value).toLocaleString()]}),t.jsxs("p",{className:"text-xs text-gray-400",children:[$.line_count," items"]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-gray-400",children:[t.jsx(Cs,{size:12}),t.jsx("span",{children:new Date($.created_at).toLocaleString()}),$.notes&&t.jsxs("span",{className:"text-gray-300",children:[" ",$.notes]})]})]},$.id))})]}):t.jsxs("div",{className:"h-full",children:[A&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm flex items-center gap-2",children:[t.jsx(St,{size:16}),t.jsx("span",{className:"flex-1",children:A}),t.jsx("button",{onClick:()=>E(""),children:t.jsx(Ee,{size:16})})]}),i==="service"&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"POS Terminal"}),t.jsx("p",{className:"text-sm text-gray-500",children:l?.camp_name||"Your Camp"})]}),t.jsxs("button",{onClick:wt,"data-guide":"pos-history-btn",className:"flex items-center gap-2 text-sm text-gray-600 hover:text-gray-900 bg-white border border-gray-200 px-3 py-2 rounded-lg transition",children:[t.jsx(Cs,{size:16})," History"]})]}),le&&t.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3 text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:le.transactions}),t.jsx("p",{className:"text-xs text-gray-500",children:"Today's Sales"})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3 text-center",children:[t.jsx("p",{className:"text-lg font-bold text-green-600",children:le.value>0?`TZS ${Math.round(le.value).toLocaleString()}`:"-"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Today's Value"})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3 text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:le.guests||0}),t.jsx("p",{className:"text-xs text-gray-500",children:"Guests Served"})]})]}),t.jsx("h2",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Select Service Type"}),t.jsx("div",{"data-guide":"pos-service-types",className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:of.map($=>t.jsxs("button",{onClick:()=>Ae($),className:"bg-white rounded-xl border border-gray-200 p-4 text-center hover:border-green-300 hover:shadow-md transition group",children:[t.jsx("div",{className:`w-12 h-12 ${$.color} rounded-xl flex items-center justify-center mx-auto mb-2 group-hover:scale-110 transition`,children:t.jsx($.icon,{size:24,className:"text-white"})}),t.jsx("p",{className:"font-medium text-gray-900 text-sm",children:$.label})]},$.value))}),b.length>0&&t.jsx("div",{className:"mt-6 bg-green-50 border border-green-200 rounded-xl p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(_t,{size:20,className:"text-green-600"}),t.jsxs("span",{className:"font-medium text-green-800",children:[ba," items in cart"]})]}),t.jsxs("span",{className:"font-bold text-green-800",children:["TZS ",Math.round(mt).toLocaleString()]})]})})]}),i==="items"&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("button",{onClick:at,className:"p-2 hover:bg-gray-100 rounded-lg transition",children:t.jsx(Ia,{size:20,className:"text-gray-600"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h1",{className:"text-lg font-bold text-gray-900",children:d?.label}),t.jsxs("p",{className:"text-xs text-gray-500",children:[S.length," items  Tap to add"]})]}),b.length>0&&t.jsxs("button",{onClick:()=>o("cart"),className:"relative p-2 bg-green-100 rounded-lg transition hover:bg-green-200",children:[t.jsx(_t,{size:20,className:"text-green-700"}),t.jsx("span",{className:"absolute -top-1 -right-1 bg-green-600 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center font-bold",children:ba})]})]}),t.jsxs("div",{className:"relative mb-3",children:[t.jsx(Vt,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",value:L,onChange:$=>ne($.target.value),placeholder:"Search items...",className:"w-full pl-10 pr-10 py-2.5 text-sm border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none"}),L&&t.jsx("button",{onClick:()=>ne(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:t.jsx(Ee,{size:16})})]}),re.length>1&&t.jsxs("div",{className:"flex gap-2 mb-3 overflow-x-auto pb-1 scroll-touch",children:[t.jsxs("button",{onClick:()=>h(null),className:`flex-shrink-0 px-3 py-1.5 rounded-full text-xs font-semibold transition ${j?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-green-600 text-white shadow-sm"}`,children:["All (",y.length,")"]}),re.map($=>{const ve=y.filter(Ge=>Ge.group_code===$.code).length;return t.jsxs("button",{onClick:()=>h($.code),className:`flex-shrink-0 px-3 py-1.5 rounded-full text-xs font-semibold transition whitespace-nowrap ${j===$.code?"bg-green-600 text-white shadow-sm":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[$.name," (",ve,")"]},$.id)})]}),T?t.jsx(ot,{message:"Loading items..."}):S.length===0?t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center",children:[t.jsx(Ov,{size:40,className:"mx-auto text-gray-300 mb-3"}),t.jsx("p",{className:"text-gray-500 text-sm",children:L?"No items match your search":"No items available"}),L&&t.jsx("button",{onClick:()=>ne(""),className:"mt-2 text-sm text-green-600 font-medium",children:"Clear search"})]}):t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:S.map($=>{const ve=b.find(Ge=>Ge.id===$.id);return t.jsxs("button",{onClick:()=>F($),className:`bg-white rounded-xl border p-3 text-left transition relative ${ve?"border-green-400 shadow-sm":$.stock_qty<=0?"border-red-200 opacity-60":"border-gray-200 hover:border-green-300 hover:shadow-sm"}`,disabled:$.stock_qty<=0,children:[ve&&t.jsx("span",{className:"absolute -top-1.5 -right-1.5 bg-green-600 text-white text-xs w-6 h-6 rounded-full flex items-center justify-center font-bold",children:ve.qty}),t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate leading-tight",children:$.name}),t.jsxs("div",{className:"flex items-center gap-1 mt-1.5",children:[t.jsx("span",{className:"text-[10px] font-mono text-gray-400",children:$.group_code}),t.jsx("span",{className:"text-[10px] text-gray-300",children:""}),t.jsx("span",{className:"text-[10px] text-gray-400",children:$.uom})]}),t.jsxs("div",{className:"flex items-center justify-between mt-2",children:[$.price>0?t.jsxs("span",{className:"text-xs font-semibold text-gray-700",children:["TZS ",Math.round($.price).toLocaleString()]}):t.jsx("span",{className:"text-xs text-gray-400",children:"No price"}),$.stock_qty>0?t.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${$.stock_status==="low"||$.stock_status==="critical"?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:$.stock_qty}):t.jsx("span",{className:"text-[10px] bg-red-100 text-red-600 px-1.5 py-0.5 rounded-full",children:"Out"})]})]},$.id)})}),b.length>0&&t.jsx("div",{className:"sticky bottom-16 lg:bottom-0 mt-4",children:t.jsxs("button",{onClick:()=>o("cart"),className:"w-full bg-green-600 text-white py-3.5 rounded-xl flex items-center justify-center gap-3 font-semibold text-sm shadow-lg hover:bg-green-700 transition",children:[t.jsx(_t,{size:20}),t.jsxs("span",{children:["View Cart (",ba,")"]}),t.jsxs("span",{className:"bg-white/20 px-3 py-0.5 rounded-full",children:["TZS ",Math.round(mt).toLocaleString()]})]})})]}),i==="cart"&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("button",{onClick:at,className:"p-2 hover:bg-gray-100 rounded-lg transition",children:t.jsx(Ia,{size:20,className:"text-gray-600"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Cart"}),t.jsxs("p",{className:"text-xs text-gray-500",children:[d?.label,"  ",ba," items"]})]}),t.jsx("button",{onClick:()=>{g([]),at()},className:"text-xs text-red-500 hover:text-red-700 bg-red-50 px-3 py-1.5 rounded-lg",children:"Clear All"})]}),b.length===0?t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center",children:[t.jsx(_t,{size:40,className:"mx-auto text-gray-300 mb-3"}),t.jsx("p",{className:"text-gray-500 text-sm",children:"Cart is empty"}),t.jsx("button",{onClick:at,className:"mt-3 text-sm text-green-600 font-medium hover:text-green-700",children:"Browse items"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"bg-white rounded-xl border border-gray-200 mb-4",children:t.jsx("div",{className:"divide-y divide-gray-100",children:b.map($=>t.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:$.name}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.jsx("span",{className:"text-xs text-gray-400",children:$.uom}),$.price>0&&t.jsxs("span",{className:"text-xs text-gray-500",children:["TZS ",Math.round($.qty*$.price).toLocaleString()]})]})]}),t.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[t.jsx("button",{onClick:()=>fe($.id,$.qty-1),className:"w-8 h-8 flex items-center justify-center rounded-lg bg-gray-100 hover:bg-gray-200",children:t.jsx(Pa,{size:14})}),t.jsx("span",{className:"w-8 h-8 flex items-center justify-center text-sm font-bold",children:$.qty}),t.jsx("button",{onClick:()=>fe($.id,$.qty+1),className:"w-8 h-8 flex items-center justify-center rounded-lg bg-gray-100 hover:bg-gray-200",children:t.jsx(Ve,{size:14})})]}),t.jsx("button",{onClick:()=>Se($.id),className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:t.jsx(Es,{size:14})})]},$.id))})}),t.jsxs("button",{onClick:()=>ie(!P),className:"w-full bg-white rounded-xl border border-gray-200 p-3 mb-4 flex items-center justify-between text-sm text-gray-600 hover:bg-gray-50 transition",children:[t.jsx("span",{children:"Add details (table, guest, notes)"}),t.jsx(yt,{size:16,className:`transition ${P?"rotate-90":""}`})]}),P&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 mb-4 space-y-3",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Table #"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:J,onChange:$=>ye($.target.value),className:"w-full appearance-none bg-white px-3 py-2 pr-8 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[t.jsx("option",{value:"",children:"Select table"}),vj.map($=>t.jsxs("option",{value:$,children:["Table ",$]},$))]}),t.jsx(vt,{size:14,className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Guest Count"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:X,onChange:$=>ae($.target.value),className:"w-full appearance-none bg-white px-3 py-2 pr-8 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[t.jsx("option",{value:"",children:"Select"}),jj.map($=>t.jsxs("option",{value:$,children:[$," ",$===1?"guest":"guests"]},$))]}),t.jsx(vt,{size:14,className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Received By"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:me,onChange:$=>Z($.target.value),className:"w-full appearance-none bg-white px-3 py-2 pr-8 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[t.jsx("option",{value:"",children:"Select staff"}),xe.map($=>t.jsx("option",{value:$.full_name||$.username,children:$.full_name||$.username},$.id))]}),t.jsx(vt,{size:14,className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Room #s"}),t.jsxs("button",{type:"button",onClick:()=>R(!Y),className:"w-full flex items-center justify-between px-3 py-2 text-sm border border-gray-300 rounded-lg bg-white hover:bg-gray-50 transition text-left",children:[t.jsx("span",{className:C.length>0?"text-gray-900 truncate":"text-gray-400",children:C.length>0?C.join(", "):"Select rooms"}),t.jsx(vt,{size:14,className:`text-gray-400 flex-shrink-0 transition ${Y?"rotate-180":""}`})]})]})]}),Y&&t.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50",children:[t.jsx("p",{className:"text-xs text-gray-500 mb-2 font-medium",children:"Tap rooms to select"}),t.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:Nj.map($=>t.jsx("button",{type:"button",onClick:()=>Qt($),className:`px-2 py-1.5 text-xs font-medium rounded-lg transition ${C.includes($)?"bg-green-600 text-white shadow-sm":"bg-white text-gray-700 border border-gray-200 hover:border-green-300"}`,children:$},$))}),C.length>0&&t.jsx("button",{type:"button",onClick:()=>{G([]),K("")},className:"mt-2 text-xs text-red-500 hover:text-red-700",children:"Clear rooms"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Notes"}),t.jsx("input",{type:"text",value:ce,onChange:$=>M($.target.value),placeholder:"Special requests...",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none"})]})]}),t.jsx("div",{className:"sticky bottom-16 lg:bottom-0 bg-white border border-gray-200 rounded-xl p-4 shadow-lg",children:t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm text-gray-500",children:[ba," items"]}),t.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["TZS ",Math.round(mt).toLocaleString()]})]}),t.jsx("button",{onClick:I,disabled:k,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white px-8 py-3.5 rounded-xl font-bold text-sm transition shadow-md",children:k?t.jsxs(t.Fragment,{children:[t.jsx(Ue,{size:18,className:"animate-spin"}),"Processing..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Wf,{size:18}),"Checkout"]})})]})})]})]})]})}function Sj({item:l,onClose:i,onAddToCart:o}){const[d,x]=u.useState(null),[f,p]=u.useState(!0),[j,h]=u.useState(!1),[y,v]=u.useState({}),[b,g]=u.useState([]),[T,_]=u.useState(null),[A,E]=u.useState({}),[k,w]=u.useState(!1),[B,Q]=u.useState(!1),[L,ne]=u.useState(""),[J,ye]=u.useState([]),[X,ae]=u.useState(!1),se=u.useRef(null),K=u.useRef(null);u.useEffect(()=>(As(),()=>Ds()),[]),u.useEffect(()=>()=>{K.current&&clearTimeout(K.current),se.current&&clearTimeout(se.current)},[]),u.useEffect(()=>{l?.id&&(p(!0),ws.item(l.id).then(R=>{x(R)}).catch(R=>console.error("Failed to load recipe:",R)).finally(()=>p(!1)))},[l?.id]),u.useEffect(()=>{if(L.length<2){ye([]);return}se.current&&clearTimeout(se.current),se.current=setTimeout(async()=>{ae(!0);try{const R=await ws.searchIngredients(L);ye(R.items||[])}catch(R){console.error("Search failed:",R)}finally{ae(!1)}},300)},[L]);function me(){j||(h(!0),K.current=setTimeout(()=>{i()},250))}async function Z(R){if(A[R]){_(le=>le===R?null:R);return}_(R),w(!0);try{const le=await ws.suggestAlternatives(R,l?.name);E(de=>({...de,[R]:le.alternatives||[]}))}catch(le){console.error("Failed to get alternatives:",le),E(de=>({...de,[R]:[]}))}finally{w(!1)}}function ce(R,le){v(de=>({...de,[R]:{item_id:le.item_id,name:le.name,stock_qty:le.stock_qty,uom:le.uom}})),_(null)}function M(R){v(le=>{const de={...le};return delete de[R],de})}function P(R){b.find(le=>le.item_id===R.id)||(g(le=>[...le,{item_id:R.id,name:R.name,qty:1,uom:R.uom,stock_qty:R.stock_qty}]),ne(""),ye([]),Q(!1))}function ie(R,le){le<=0?g(de=>de.filter(he=>he.item_id!==R)):g(de=>de.map(he=>he.item_id===R?{...he,qty:le}:he))}function xe(){o(l,{substitutions:y,extraIngredients:b}),me()}const be=d?.ingredients||[],C=d?.item||l,G=be.some(R=>R.stock_qty<=0),Y=C?.description||l?.description||"";return l?Rs.createPortal(t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`fixed inset-0 bg-black/40 z-[10010] ${j?"animate-backdrop-out":"animate-backdrop-in"}`,onClick:me}),t.jsxs("div",{className:`fixed inset-x-0 bottom-0 z-[10011] bg-white rounded-t-2xl shadow-2xl max-h-[90dvh] overflow-hidden flex flex-col ${j?"animate-slide-down":"animate-slide-up"}`,children:[t.jsx("div",{className:"flex justify-center pt-2 pb-1 flex-shrink-0",children:t.jsx("div",{className:"w-10 h-1 rounded-full bg-gray-300"})}),t.jsxs("div",{className:"flex items-start justify-between px-5 pt-2 pb-3 border-b border-gray-100 flex-shrink-0",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[l.is_cocktail&&t.jsx(xa,{size:18,className:"text-purple-500 flex-shrink-0"}),l.is_mocktail&&t.jsx(Fn,{size:18,className:"text-green-500 flex-shrink-0"}),t.jsx("h2",{className:"text-lg font-bold text-gray-900 truncate",children:l.name})]}),Y&&t.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:Y}),t.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[C?.glass_type&&t.jsx("span",{className:"text-[10px] bg-amber-50 text-amber-700 px-2 py-0.5 rounded-full",children:C.glass_type}),C?.garnish&&t.jsx("span",{className:"text-[10px] bg-green-50 text-green-700 px-2 py-0.5 rounded-full",children:C.garnish}),C?.serving_size_ml&&t.jsxs("span",{className:"text-[10px] bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full",children:[C.serving_size_ml,"ml"]})]})]}),t.jsx("button",{onClick:me,className:"p-2 hover:bg-gray-100 rounded-full text-gray-400 transition flex-shrink-0 ml-2",children:t.jsx(Ee,{size:18})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto px-5 py-4 scroll-touch",children:[f?t.jsxs("div",{className:"flex items-center justify-center py-12",children:[t.jsx(Ue,{size:24,className:"animate-spin text-amber-600"}),t.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"Loading recipe..."})]}):be.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(Xf,{size:32,className:"mx-auto text-gray-300 mb-2"}),t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"No recipe defined"}),t.jsx("p",{className:"text-xs text-gray-400",children:"This drink doesn't have ingredient mappings yet."}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"You can still add it to your order."})]}):t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Recipe Ingredients"}),t.jsx("div",{className:"space-y-2 mb-4",children:be.map(R=>{const le=R.stock_qty<=0,de=R.stock_status==="low"||R.stock_status==="critical",he=y[R.item_id],Le=T===R.item_name;return t.jsxs("div",{children:[t.jsx("div",{className:`bg-white rounded-xl border p-3 ${he?"border-blue-300 bg-blue-50/30":le?"border-red-200 bg-red-50/30":de?"border-amber-200 bg-amber-50/30":"border-gray-200"}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${he?"bg-blue-500":le?"bg-red-500":de?"bg-amber-500":"bg-green-500"}`}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("p",{className:`text-sm font-medium truncate ${le&&!he?"text-red-700 line-through":"text-gray-900"}`,children:R.item_name}),R.is_primary&&t.jsx("span",{className:"text-[9px] bg-purple-100 text-purple-700 px-1.5 py-0.5 rounded-full font-medium flex-shrink-0",children:"Primary"})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.jsxs("span",{className:"text-[10px] text-gray-400",children:[R.qty_per_serving," ",R.uom,"/serving"]}),le?t.jsx("span",{className:"text-[10px] bg-red-100 text-red-600 px-1.5 py-0.5 rounded-full",children:"Out of stock"}):t.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${de?"bg-amber-100 text-amber-700":"bg-green-100 text-green-700"}`,children:[R.stock_qty," ",R.uom]})]}),he&&t.jsxs("div",{className:"flex items-center gap-1.5 mt-1.5",children:[t.jsx(nr,{size:10,className:"text-blue-500"}),t.jsxs("span",{className:"text-[11px] text-blue-700 font-medium",children:["Using: ",he.name]}),t.jsxs("span",{className:"text-[10px] text-blue-500",children:["(",he.stock_qty," ",he.uom,")"]}),t.jsx("button",{onClick:()=>M(R.item_id),className:"text-blue-400 hover:text-red-500 ml-1",children:t.jsx(Ee,{size:10})})]})]}),le&&!he&&t.jsxs("button",{onClick:()=>Z(R.item_name),className:"flex items-center gap-1 px-2 py-1.5 text-[10px] font-semibold text-amber-700 bg-amber-50 border border-amber-200 rounded-lg hover:bg-amber-100 transition flex-shrink-0",children:[t.jsx(nn,{size:10}),"Suggest"]}),!le&&!he&&t.jsx(Yt,{size:16,className:"text-green-500 flex-shrink-0"})]})}),Le&&t.jsxs("div",{className:"ml-5 mt-1 bg-amber-50 border border-amber-200 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[t.jsx(nn,{size:12,className:"text-amber-600"}),t.jsx("span",{className:"text-xs font-semibold text-amber-800",children:"AI Suggested Alternatives"})]}),k?t.jsxs("div",{className:"flex items-center gap-2 py-2 text-xs text-amber-600",children:[t.jsx(Ue,{size:12,className:"animate-spin"}),"Finding alternatives..."]}):(A[R.item_name]||[]).length===0?t.jsx("p",{className:"text-xs text-amber-600",children:"No suitable alternatives found in stock."}):t.jsx("div",{className:"space-y-1.5",children:(A[R.item_name]||[]).map(we=>t.jsxs("button",{onClick:()=>ce(R.item_id,we),className:"w-full flex items-center gap-2 p-2 bg-white rounded-lg border border-amber-200 hover:border-amber-400 transition text-left",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-xs font-medium text-gray-900",children:we.name}),t.jsx("p",{className:"text-[10px] text-gray-500",children:we.reason})]}),t.jsxs("span",{className:"text-[10px] bg-green-100 text-green-700 px-1.5 py-0.5 rounded-full flex-shrink-0",children:[we.stock_qty," ",we.uom]})]},we.item_id))})]})]},R.item_id)})}),b.length>0&&t.jsxs("div",{className:"mb-4",children:[t.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Added Ingredients"}),t.jsx("div",{className:"space-y-1.5",children:b.map(R=>t.jsxs("div",{className:"flex items-center gap-3 bg-blue-50 border border-blue-200 rounded-xl p-3",children:[t.jsx(Ve,{size:12,className:"text-blue-500 flex-shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:R.name}),t.jsxs("span",{className:"text-[10px] text-gray-400",children:[R.stock_qty," ",R.uom," in stock"]})]}),t.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[t.jsx("button",{onClick:()=>ie(R.item_id,R.qty-1),className:"w-6 h-6 flex items-center justify-center rounded bg-blue-100 hover:bg-blue-200 text-blue-700",children:t.jsx(Pa,{size:10})}),t.jsx("span",{className:"w-6 text-center text-xs font-bold",children:R.qty}),t.jsx("button",{onClick:()=>ie(R.item_id,R.qty+1),className:"w-6 h-6 flex items-center justify-center rounded bg-blue-100 hover:bg-blue-200 text-blue-700",children:t.jsx(Ve,{size:10})})]})]},R.item_id))})]})]}),t.jsx("div",{className:"mt-2 mb-4",children:B?t.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-3",children:[t.jsxs("div",{className:"relative mb-2",children:[t.jsx(Vt,{size:14,className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",value:L,onChange:R=>ne(R.target.value),placeholder:"Search stock items...",autoFocus:!0,className:"w-full pl-8 pr-8 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none"}),t.jsx("button",{onClick:()=>{Q(!1),ne(""),ye([])},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t.jsx(Ee,{size:14})})]}),X&&t.jsxs("div",{className:"flex items-center gap-2 py-2 text-xs text-gray-500",children:[t.jsx(Ue,{size:12,className:"animate-spin"})," Searching..."]}),J.length>0&&t.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1",children:J.map(R=>t.jsxs("button",{onClick:()=>P(R),className:"w-full flex items-center gap-2 p-2 bg-white rounded-lg border border-gray-200 hover:border-amber-300 transition text-left",children:[t.jsx(ha,{size:12,className:"text-gray-400 flex-shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-xs font-medium text-gray-900 truncate",children:R.name}),t.jsx("span",{className:"text-[10px] text-gray-400",children:R.group_name})]}),t.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full flex-shrink-0 ${R.stock_qty>0?"bg-green-100 text-green-700":"bg-red-100 text-red-600"}`,children:R.stock_qty>0?`${R.stock_qty} ${R.uom}`:"Out"})]},R.id))}),L.length>=2&&!X&&J.length===0&&t.jsx("p",{className:"text-xs text-gray-400 text-center py-2",children:"No items found"})]}):t.jsxs("button",{onClick:()=>Q(!0),className:"w-full flex items-center justify-center gap-2 py-2.5 text-sm text-gray-600 border border-dashed border-gray-300 rounded-xl hover:border-amber-400 hover:text-amber-700 transition",children:[t.jsx(Vt,{size:14}),"Search & add ingredient"]})}),G&&Object.keys(y).length<be.filter(R=>R.stock_qty<=0).length&&t.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3 mb-4 flex items-start gap-2",children:[t.jsx(St,{size:14,className:"text-amber-600 flex-shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-amber-800",children:"Some ingredients are out of stock"}),t.jsx("p",{className:"text-[10px] text-amber-600 mt-0.5",children:'Tap "Suggest" to find AI-recommended alternatives, or add ingredients manually.'})]})]})]}),t.jsx("div",{className:"flex-shrink-0 border-t border-gray-100 px-5 py-4 bg-white",children:t.jsxs("button",{onClick:xe,className:"w-full flex items-center justify-center gap-2 bg-amber-700 hover:bg-amber-800 text-white py-3.5 rounded-xl font-bold text-sm transition shadow-md",children:[t.jsx(Ve,{size:18}),"Add to Order"]})})]})]}),document.body):null}const ar={available:{bg:"bg-green-100",text:"text-green-700",label:"In Stock"},low:{bg:"bg-amber-100",text:"text-amber-700",label:"Low Stock"},critical:{bg:"bg-orange-100",text:"text-orange-700",label:"Critical"},out:{bg:"bg-red-100",text:"text-red-700",label:"Out of Stock"},unknown:{bg:"bg-gray-100",text:"text-gray-500",label:"Unknown"}},wj={available:Gd,low:nh,critical:or,out:Ee,unknown:or},kj=Array.from({length:20},(l,i)=>String(i+1)),Cj=[1,2,3,4,5,6,7,8,10,12,15,20,25,30,40,50];function zj(){const l=Ie(),[i,o]=u.useState("menu"),[d,x]=u.useState([]),[f,p]=u.useState([]),[j,h]=u.useState(!0),[y,v]=u.useState(""),[b,g]=u.useState([]),[T,_]=u.useState(!1),[A,E]=u.useState(null),[k,w]=u.useState(null),[B,Q]=u.useState(""),[L,ne]=u.useState(""),[J,ye]=u.useState(""),[X,ae]=u.useState(""),[se,K]=u.useState(""),[me,Z]=u.useState(!1),[ce,M]=u.useState([]),[P,ie]=u.useState(null),[xe,be]=u.useState([]),[C,G]=u.useState(null),[Y,R]=u.useState(!1);u.useEffect(()=>{le()},[]);async function le(){h(!0);try{const[S,F,fe]=await Promise.all([ws.categories(),ws.items({}),an.list()]);x(S.categories||[]),p(F.menu_items||[]),M((fe.users||[]).filter(Se=>Se.is_active))}catch(S){v(S.message)}finally{h(!1)}}async function de(){R(!0);try{const[S,F]=await Promise.all([ws.depletion({days:7}),ws.stockStatus()]);be(S.alerts||[]),G(F.summary||null)}catch(S){v(S.message)}finally{R(!1),o("alerts")}}const he=f.filter(S=>!(k&&S.category_code!==k||B==="cocktail"&&!S.is_cocktail||B==="mocktail"&&!S.is_mocktail)),Le={};he.forEach(S=>{const F=S.category_name;Le[F]||(Le[F]={name:S.category_name,code:S.category_code,pricing:S.pricing_type,items:[]}),Le[F].items.push(S)});function we(S){if(S.stock?.status!=="out"){if(S.is_cocktail||S.is_mocktail){ie(S);return}rt(S)}}function rt(S){S.stock?.status!=="out"&&g(F=>F.find(Se=>Se.id===S.id)?F.map(Se=>Se.id===S.id?{...Se,qty:Se.qty+1}:Se):[...F,{...S,qty:1}])}function Ot(S,F){rt(S)}function Rt(S,F){F<=0?g(fe=>fe.filter(Se=>Se.id!==S)):g(fe=>fe.map(Se=>Se.id===S?{...Se,qty:F}:Se))}function wt(S){g(F=>F.filter(fe=>fe.id!==S))}const Ae=b.reduce((S,F)=>S+F.qty,0);async function re(){if(b.length!==0){_(!0),v("");try{const S=await ws.order({received_by:X.trim()||"Bar Guest",table_number:L||null,guest_count:J?parseInt(J):null,notes:se||null,items:b.map(F=>({menu_item_id:F.id,qty:F.qty}))});E({...S.order,cartItems:[...b],time:new Date().toLocaleTimeString()}),o("receipt"),g([]),ne(""),ye(""),ae(""),K(""),Z(!1)}catch(S){v(S.message)}finally{_(!1)}}}return i==="receipt"&&A?t.jsx("div",{className:"max-w-md mx-auto",children:t.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 overflow-hidden",children:[t.jsxs("div",{className:"bg-amber-700 text-white text-center py-6 px-4",children:[t.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-3",children:t.jsx(eh,{size:32})}),t.jsx("h2",{className:"text-lg font-bold",children:"Bar Order Complete"}),t.jsx("p",{className:"text-amber-200 text-sm mt-1",children:A.voucher_number})]}),t.jsxs("div",{className:"p-4 space-y-3",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-500",children:"Time"}),t.jsx("span",{className:"font-medium",children:A.time})]}),t.jsx("div",{className:"border-t border-dashed border-gray-200 pt-3",children:A.cartItems.map(S=>t.jsxs("div",{className:"flex justify-between text-sm py-1",children:[t.jsxs("span",{className:"text-gray-700",children:[S.qty,"x ",S.name]}),S.price_usd&&t.jsxs("span",{className:"text-gray-600",children:["$",(S.qty*S.price_usd).toFixed(2)]})]},S.id))}),A.total_value>0&&t.jsxs("div",{className:"border-t border-gray-200 pt-3 flex justify-between",children:[t.jsx("span",{className:"font-bold text-gray-900",children:"Cost Value"}),t.jsxs("span",{className:"font-bold text-gray-900",children:["TZS ",Math.round(A.total_value).toLocaleString()]})]})]}),t.jsx("div",{className:"p-4 border-t border-gray-100 space-y-2",children:t.jsx("button",{onClick:()=>{o("menu"),E(null)},className:"w-full bg-amber-700 text-white py-3 rounded-xl font-semibold text-sm hover:bg-amber-800 transition",children:"New Order"})})]})}):i==="alerts"?t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Menu Stock Alerts"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Depletion warnings for bar menu items"})]}),t.jsx("button",{onClick:()=>o("menu"),className:"text-sm text-amber-700 bg-amber-50 px-3 py-2 rounded-lg hover:bg-amber-100",children:"Back to Menu"})]}),C&&t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-2 mb-4",children:Object.entries(C).map(([S,F])=>{const fe=ar[S]||ar.unknown;return t.jsxs("div",{className:`rounded-xl border p-3 text-center ${fe.bg}`,children:[t.jsx("p",{className:`text-2xl font-bold ${fe.text}`,children:F}),t.jsx("p",{className:"text-xs text-gray-600 capitalize",children:S})]},S)})}),Y?t.jsx(ot,{message:"Checking stock levels..."}):xe.length===0?t.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-6 text-center",children:[t.jsx(Gd,{size:40,className:"mx-auto text-green-500 mb-2"}),t.jsx("p",{className:"font-medium text-green-800",children:"All menu items are well-stocked"})]}):t.jsx("div",{className:"space-y-2",children:xe.map(S=>{const F=ar[S.status]||ar.unknown,fe=wj[S.status]||or;return t.jsxs("div",{className:`rounded-xl border p-4 ${F.bg} border-opacity-50`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(fe,{size:20,className:F.text}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-medium text-gray-900",children:S.name}),t.jsx("p",{className:"text-xs text-gray-600",children:S.category})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${F.bg} ${F.text}`,children:F.label}),S.stock?.servings_possible!=null&&t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["~",S.stock.servings_possible," servings left"]})]})]}),S.stock?.limiting_ingredient&&t.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Limited by: ",S.stock.limiting_ingredient]})]},S.id)})})]}):i==="cart"?t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Bar Order"}),t.jsxs("p",{className:"text-xs text-gray-500",children:[Ae," drinks"]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>o("menu"),className:"text-sm text-gray-600 bg-gray-100 px-3 py-2 rounded-lg",children:"Add More"}),b.length>0&&t.jsx("button",{onClick:()=>{g([]),o("menu")},className:"text-xs text-red-500 bg-red-50 px-3 py-2 rounded-lg",children:"Clear"})]})]}),y&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm flex items-center gap-2",children:[t.jsx(St,{size:16}),t.jsx("span",{className:"flex-1",children:y}),t.jsx("button",{onClick:()=>v(""),children:t.jsx(Ee,{size:16})})]}),b.length===0?t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center",children:[t.jsx(xa,{size:40,className:"mx-auto text-gray-300 mb-3"}),t.jsx("p",{className:"text-gray-500 text-sm",children:"No drinks in order"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"bg-white rounded-xl border border-gray-200 mb-4",children:t.jsx("div",{className:"divide-y divide-gray-100",children:b.map(S=>t.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:S.name}),t.jsx("p",{className:"text-xs text-gray-400",children:S.category_name}),S.price_usd&&t.jsxs("p",{className:"text-xs text-amber-700 font-medium",children:["$",S.price_usd," each"]})]}),t.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[t.jsx("button",{onClick:()=>Rt(S.id,S.qty-1),className:"w-8 h-8 flex items-center justify-center rounded-lg bg-gray-100 hover:bg-gray-200",children:t.jsx(Pa,{size:14})}),t.jsx("span",{className:"w-8 h-8 flex items-center justify-center text-sm font-bold",children:S.qty}),t.jsx("button",{onClick:()=>Rt(S.id,S.qty+1),className:"w-8 h-8 flex items-center justify-center rounded-lg bg-gray-100 hover:bg-gray-200",children:t.jsx(Ve,{size:14})})]}),t.jsx("button",{onClick:()=>wt(S.id),className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:t.jsx(Es,{size:14})})]},S.id))})}),t.jsxs("button",{onClick:()=>Z(!me),className:"w-full bg-white rounded-xl border border-gray-200 p-3 mb-4 flex items-center justify-between text-sm text-gray-600",children:[t.jsx("span",{children:"Order details (table, guest, notes)"}),me?t.jsx(Jf,{size:16}):t.jsx(vt,{size:16})]}),me&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 mb-4 grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Table #"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:L,onChange:S=>ne(S.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg outline-none focus:ring-2 focus:ring-amber-500 appearance-none bg-white",children:[t.jsx("option",{value:"",children:" Select "}),kj.map(S=>t.jsxs("option",{value:S,children:["Table ",S]},S))]}),t.jsx(vt,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Guests"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:J,onChange:S=>ye(S.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg outline-none focus:ring-2 focus:ring-amber-500 appearance-none bg-white",children:[t.jsx("option",{value:"",children:" Select "}),Cj.map(S=>t.jsxs("option",{value:S,children:[S," guest",S>1?"s":""]},S))]}),t.jsx(vt,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Served By"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:X,onChange:S=>ae(S.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg outline-none focus:ring-2 focus:ring-amber-500 appearance-none bg-white",children:[t.jsx("option",{value:"",children:" Select "}),ce.map(S=>t.jsx("option",{value:S.name,children:S.name},S.id))]}),t.jsx(vt,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Notes"}),t.jsx("input",{type:"text",value:se,onChange:S=>K(S.target.value),placeholder:"Special requests...",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg outline-none focus:ring-2 focus:ring-amber-500"})]})]}),t.jsx("div",{className:"sticky bottom-16 lg:bottom-0 bg-white border border-gray-200 rounded-xl p-4 shadow-lg",children:t.jsx("button",{onClick:re,disabled:T,className:"w-full flex items-center justify-center gap-2 bg-amber-700 hover:bg-amber-800 disabled:bg-amber-400 text-white py-3.5 rounded-xl font-bold text-sm transition",children:T?t.jsxs(t.Fragment,{children:[t.jsx(Ue,{size:18,className:"animate-spin"})," Placing Order..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Wf,{size:18})," Place Bar Order (",Ae," drinks)"]})})})]})]}):t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[t.jsx(xa,{size:24,className:"text-amber-700"}),"Drinks Menu"]}),t.jsx("p",{className:"text-sm text-gray-500",children:l?.camp_name||"Karibu Camps"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:de,"data-guide":"bar-stock-alerts-btn",className:"flex items-center gap-1.5 text-sm text-orange-700 bg-orange-50 border border-orange-200 px-3 py-2 rounded-lg hover:bg-orange-100 transition",children:[t.jsx(nh,{size:16})," Stock Alerts"]}),b.length>0&&t.jsxs("button",{onClick:()=>o("cart"),className:"relative flex items-center gap-1.5 text-sm text-white bg-amber-700 px-3 py-2 rounded-lg hover:bg-amber-800 transition",children:[t.jsx(_t,{size:16}),t.jsx("span",{className:"absolute -top-1.5 -right-1.5 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center font-bold",children:Ae})]})]})]}),y&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm flex items-center gap-2",children:[t.jsx(St,{size:16}),t.jsx("span",{className:"flex-1",children:y}),t.jsx("button",{onClick:()=>v(""),children:t.jsx(Ee,{size:16})})]}),t.jsxs("div",{"data-guide":"bar-menu-categories",className:"flex gap-2 mb-3 overflow-x-auto pb-1",children:[t.jsx("button",{onClick:()=>{w(null),Q("")},className:`flex-shrink-0 px-3 py-1.5 rounded-full text-xs font-medium transition ${!k&&!B?"bg-amber-700 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"All"}),t.jsxs("button",{onClick:()=>{w(null),Q("cocktail")},className:`flex-shrink-0 px-3 py-1.5 rounded-full text-xs font-medium transition flex items-center gap-1 ${B==="cocktail"?"bg-purple-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[t.jsx(xa,{size:12})," Cocktails"]}),t.jsxs("button",{onClick:()=>{w(null),Q("mocktail")},className:`flex-shrink-0 px-3 py-1.5 rounded-full text-xs font-medium transition flex items-center gap-1 ${B==="mocktail"?"bg-green-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[t.jsx(Fn,{size:12})," Mocktails"]}),d.filter(S=>!["COCKTAIL","MOCKTAIL"].includes(S.code)).map(S=>t.jsx("button",{onClick:()=>{w(S.code),Q("")},className:`flex-shrink-0 px-3 py-1.5 rounded-full text-xs font-medium transition whitespace-nowrap ${k===S.code?"bg-amber-700 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:S.name},S.code))]}),j?t.jsx(ot,{message:"Loading menu..."}):t.jsx("div",{className:"space-y-6",children:Object.values(Le).map(S=>t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("h2",{className:"text-sm font-bold text-amber-800 uppercase tracking-wider",children:S.name}),S.pricing==="exclusive"&&t.jsx("span",{className:"text-[10px] bg-amber-100 text-amber-700 px-2 py-0.5 rounded-full font-medium",children:"Exclusive"}),t.jsx("div",{className:"flex-1 h-px bg-amber-200"})]}),t.jsx("div",{className:"space-y-1",children:S.items.map(F=>{const fe=b.find(ba=>ba.id===F.id),Se=F.stock?.status||"unknown",Qt=ar[Se],mt=Se==="out";return t.jsxs("div",{className:`bg-white rounded-xl border p-3 flex items-center gap-3 transition ${fe?"border-amber-400 shadow-sm":mt?"border-red-200 opacity-60":"border-gray-200 hover:border-amber-200"}`,children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:F.name}),F.is_cocktail&&t.jsx(xa,{size:12,className:"text-purple-500 flex-shrink-0"}),F.is_mocktail&&t.jsx(Fn,{size:12,className:"text-green-500 flex-shrink-0"})]}),F.description&&t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:F.description}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[F.price_usd&&t.jsxs("span",{className:"text-xs font-bold text-amber-800",children:["$",F.price_usd]}),t.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${Qt.bg} ${Qt.text}`,children:F.stock?.servings_possible!=null?`${F.stock.servings_possible} servings`:Qt.label}),F.stock?.days_remaining!=null&&t.jsxs("span",{className:"text-[10px] text-gray-400",children:[F.stock.days_remaining,"d left"]})]})]}),fe?t.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[t.jsx("button",{onClick:()=>Rt(F.id,fe.qty-1),className:"w-8 h-8 flex items-center justify-center rounded-lg bg-amber-100 hover:bg-amber-200 text-amber-800",children:t.jsx(Pa,{size:14})}),t.jsx("span",{className:"w-7 text-center text-sm font-bold text-amber-800",children:fe.qty}),t.jsx("button",{onClick:()=>Rt(F.id,fe.qty+1),className:"w-8 h-8 flex items-center justify-center rounded-lg bg-amber-100 hover:bg-amber-200 text-amber-800",children:t.jsx(Ve,{size:14})})]}):t.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(F.is_cocktail||F.is_mocktail)&&t.jsx("button",{onClick:()=>ie(F),className:"w-8 h-8 flex items-center justify-center rounded-lg bg-purple-50 text-purple-500 hover:bg-purple-100 transition",title:"View Recipe",children:t.jsx(Xf,{size:14})}),t.jsx("button",{onClick:()=>we(F),disabled:mt,className:`w-9 h-9 flex items-center justify-center rounded-xl transition ${mt?"bg-gray-100 text-gray-300 cursor-not-allowed":"bg-amber-50 text-amber-700 hover:bg-amber-100"}`,children:t.jsx(Ve,{size:18})})]})]},F.id)})})]},S.code))}),b.length>0&&i==="menu"&&t.jsx("div",{className:"sticky bottom-16 lg:bottom-0 mt-4",children:t.jsxs("button",{onClick:()=>o("cart"),className:"w-full bg-amber-700 text-white py-3.5 rounded-xl flex items-center justify-center gap-3 font-semibold text-sm shadow-lg hover:bg-amber-800 transition",children:[t.jsx(_t,{size:20}),t.jsxs("span",{children:["View Order (",Ae," drinks)"]})]})}),P&&t.jsx(Sj,{item:P,onClose:()=>ie(null),onAddToCart:Ot})]})}const rh=[{value:"",label:"All"},{value:"breakfast",label:"Breakfast"},{value:"lunch",label:"Lunch"},{value:"dinner",label:"Dinner"},{value:"appetizer",label:"Appetizer"},{value:"soup",label:"Soup"},{value:"salad",label:"Salad"},{value:"main_course",label:"Main Course"},{value:"side",label:"Side"},{value:"dessert",label:"Dessert"},{value:"beverage",label:"Beverage"},{value:"bread",label:"Bread"},{value:"sauce",label:"Sauce"}],Tj=[{value:"easy",label:"Easy"},{value:"medium",label:"Medium"},{value:"hard",label:"Hard"}];function Ej(){Ie();const[l,i]=u.useState([]),[o,d]=u.useState(!0),[x,f]=u.useState(""),[p,j]=u.useState(""),[h,y]=u.useState(""),[v,b]=u.useState(null),[g,T]=u.useState(null),[_,A]=u.useState(!1),[E,k]=u.useState(!1),[w,B]=u.useState(null),[Q,L]=u.useState(null),[ne,J]=u.useState(!1);u.useEffect(()=>{ye()},[]);async function ye(){d(!0),f("");try{const ce=await $t.recipes();i(ce.recipes||[])}catch(ce){f(ce.message)}finally{d(!1)}}async function X(ce){if(v===ce){b(null),T(null);return}b(ce),A(!0);try{const M=await $t.recipe(ce);T(M)}catch(M){f(M.message)}finally{A(!1)}}async function ae(){if(Q){J(!0);try{await $t.deleteRecipe(Q),i(ce=>ce.filter(M=>M.id!==Q)),v===Q&&(b(null),T(null)),L(null)}catch(ce){f(ce.message)}finally{J(!1)}}}function se(ce){B(ce),k(!0)}function K(){B(null),k(!0)}function me(ce){ye(),v===ce?.id&&(X(ce.id),setTimeout(()=>X(ce.id),100)),k(!1)}const Z=l.filter(ce=>{if(h&&ce.category!==h)return!1;if(p){const M=p.toLowerCase();return ce.name.toLowerCase().includes(M)||(ce.cuisine||"").toLowerCase().includes(M)||(ce.category||"").toLowerCase().includes(M)}return!0});return o?t.jsx(ot,{}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[t.jsx(al,{size:24,className:"text-orange-500"}),"Kitchen Recipes"]}),t.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"Manage master recipes & ingredients"})]}),t.jsxs("button",{onClick:K,className:"flex items-center gap-2 bg-orange-600 hover:bg-orange-700 text-white px-4 py-2.5 rounded-xl text-sm font-semibold transition shadow-sm",children:[t.jsx(Ve,{size:16}),"New Recipe"]})]}),x&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg text-sm flex items-center gap-2",children:[t.jsx(St,{size:16}),t.jsx("span",{className:"flex-1",children:x}),t.jsx("button",{onClick:()=>f(""),children:t.jsx(Ee,{size:16})})]}),t.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-3",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(Vt,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",value:p,onChange:ce=>j(ce.target.value),placeholder:"Search recipes...",className:"w-full pl-9 pr-8 py-2.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none"}),p&&t.jsx("button",{onClick:()=>j(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t.jsx(Ee,{size:14})})]}),t.jsx("select",{value:h,onChange:ce=>y(ce.target.value),className:`px-3 py-2.5 rounded-lg text-sm font-medium border transition appearance-none cursor-pointer min-w-[120px] ${h?"bg-orange-50 border-orange-200 text-orange-700":"bg-gray-50 border-gray-200 text-gray-600"}`,children:rh.map(ce=>t.jsx("option",{value:ce.value,children:ce.label},ce.value))})]})}),t.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[t.jsxs("span",{children:[Z.length," recipe",Z.length!==1?"s":""]}),h&&t.jsxs("button",{onClick:()=>y(""),className:"text-orange-600 hover:text-orange-700 font-medium flex items-center gap-1",children:[t.jsx(Ee,{size:12})," Clear filter"]})]}),Z.length===0?t.jsxs("div",{className:"bg-gradient-to-br from-orange-50 via-amber-50 to-yellow-50 rounded-xl border border-orange-100 p-8 text-center",children:[t.jsx("div",{className:"w-20 h-20 bg-white rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-sm",children:t.jsx(ta,{size:36,className:"text-orange-500"})}),t.jsx("h3",{className:"text-lg font-bold text-gray-900",children:p||h?"No recipes found":"No Recipes Yet"}),t.jsx("p",{className:"text-gray-500 text-sm mt-2 max-w-md mx-auto",children:p||h?"Try adjusting your search or filter.":"Create your first recipe to start building your kitchen menu library."}),!p&&!h&&t.jsxs("button",{onClick:K,className:"mt-4 inline-flex items-center gap-2 bg-orange-600 hover:bg-orange-700 text-white px-6 py-3 rounded-xl text-sm font-semibold transition",children:[t.jsx(Ve,{size:18}),"Create First Recipe"]})]}):t.jsxs("div",{className:"space-y-3",children:[Z.map(ce=>t.jsx(Oj,{recipe:ce,isExpanded:v===ce.id,detail:v===ce.id?g:null,detailLoading:_&&v===ce.id,onToggle:()=>X(ce.id),onEdit:()=>se(ce),onDelete:()=>L(ce.id)},ce.id)),t.jsxs("button",{onClick:K,className:"w-full flex items-center justify-center gap-2 py-4 border-2 border-dashed border-gray-300 rounded-xl text-gray-500 hover:border-orange-400 hover:text-orange-600 hover:bg-orange-50 transition font-semibold text-sm",children:[t.jsx(Ve,{size:18}),"New Recipe"]})]}),Q&&t.jsx(Rj,{recipe:l.find(ce=>ce.id===Q),loading:ne,onConfirm:ae,onCancel:()=>L(null)}),E&&t.jsx(Aj,{recipe:w,onClose:()=>k(!1),onSaved:me}),t.jsx("button",{onClick:K,className:"lg:hidden fixed bottom-24 right-4 z-50 w-14 h-14 bg-orange-600 hover:bg-orange-700 text-white rounded-full shadow-lg flex items-center justify-center transition",children:t.jsx(Ve,{size:24})})]})}function Oj({recipe:l,isExpanded:i,detail:o,detailLoading:d,onToggle:x,onEdit:f,onDelete:p}){const j=o?.ingredients||[],h=o?.recipe?.instructions;let y=[];if(h)try{y=typeof h=="string"?JSON.parse(h):Array.isArray(h)?h:[]}catch{y=[]}return t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[t.jsxs("button",{onClick:x,className:"w-full flex items-center gap-3 p-4 text-left hover:bg-gray-50 transition",children:[t.jsx("div",{className:"w-11 h-11 rounded-xl bg-orange-100 flex items-center justify-center flex-shrink-0",children:t.jsx(ta,{size:22,className:"text-orange-600"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"font-bold text-gray-900 truncate",children:l.name}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5 flex-wrap",children:[l.category&&t.jsx("span",{className:"text-[10px] bg-orange-50 text-orange-700 px-2 py-0.5 rounded-full capitalize",children:l.category.replace("_"," ")}),l.cuisine&&t.jsx("span",{className:"text-[10px] bg-blue-50 text-blue-700 px-2 py-0.5 rounded-full",children:l.cuisine}),l.serves&&t.jsxs("span",{className:"text-[10px] bg-gray-100 text-gray-600 px-1.5 py-0.5 rounded-full flex items-center gap-0.5",children:[t.jsx(_a,{size:8})," ",l.serves]}),l.ingredient_count>0&&t.jsxs("span",{className:"text-[10px] bg-gray-100 text-gray-600 px-1.5 py-0.5 rounded-full flex items-center gap-0.5",children:[t.jsx(ha,{size:8})," ",l.ingredient_count]})]})]}),t.jsx("div",{className:"flex items-center gap-1 flex-shrink-0",children:i?t.jsx(Jf,{size:18,className:"text-gray-400"}):t.jsx(vt,{size:18,className:"text-gray-400"})})]}),i&&t.jsx("div",{className:"border-t border-gray-100 p-4 bg-gray-50/50",children:d?t.jsxs("div",{className:"flex items-center justify-center py-8",children:[t.jsx(Ue,{size:20,className:"animate-spin text-orange-600"}),t.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"Loading recipe..."})]}):t.jsxs(t.Fragment,{children:[o?.recipe?.description&&t.jsx("p",{className:"text-sm text-gray-600 mb-3 italic",children:o.recipe.description}),t.jsxs("div",{className:"flex items-center gap-3 mb-4 flex-wrap",children:[o?.recipe?.serves&&t.jsxs("span",{className:"text-xs bg-white border border-gray-200 px-2.5 py-1 rounded-lg flex items-center gap-1",children:[t.jsx(_a,{size:12,className:"text-gray-500"})," ",o.recipe.serves," servings"]}),o?.recipe?.prep_time_minutes>0&&t.jsxs("span",{className:"text-xs bg-white border border-gray-200 px-2.5 py-1 rounded-lg flex items-center gap-1",children:[t.jsx(Cs,{size:12,className:"text-gray-500"})," Prep ",o.recipe.prep_time_minutes,"min"]}),o?.recipe?.cook_time_minutes>0&&t.jsxs("span",{className:"text-xs bg-white border border-gray-200 px-2.5 py-1 rounded-lg flex items-center gap-1",children:[t.jsx(Cs,{size:12,className:"text-gray-500"})," Cook ",o.recipe.cook_time_minutes,"min"]}),o?.recipe?.difficulty&&t.jsx("span",{className:`text-xs px-2.5 py-1 rounded-lg capitalize ${o.recipe.difficulty==="easy"?"bg-green-50 text-green-700 border border-green-200":o.recipe.difficulty==="hard"?"bg-red-50 text-red-700 border border-red-200":"bg-amber-50 text-amber-700 border border-amber-200"}`,children:o.recipe.difficulty})]}),j.length>0&&t.jsxs("div",{className:"mb-4",children:[t.jsxs("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:["Ingredients (",j.length,")"]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1.5",children:j.map(v=>t.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg border border-gray-200 px-3 py-2",children:[t.jsx("span",{className:`w-1.5 h-1.5 rounded-full flex-shrink-0 ${v.is_primary?"bg-orange-500":"bg-gray-300"}`}),t.jsx("span",{className:"text-sm text-gray-900 truncate flex-1",children:v.item_name}),t.jsxs("span",{className:"text-xs text-gray-500 flex-shrink-0",children:[v.qty_per_serving," ",v.uom]}),v.stock_qty!==void 0&&t.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full flex-shrink-0 ${v.stock_qty>0?"bg-green-100 text-green-700":"bg-red-100 text-red-600"}`,children:v.stock_qty>0?`${v.stock_qty}`:"Out"})]},v.item_id||v.id))})]}),y.length>0&&t.jsxs("div",{className:"mb-4",children:[t.jsx("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Instructions"}),t.jsx("ol",{className:"space-y-2",children:y.map((v,b)=>t.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[t.jsx("span",{className:"w-5 h-5 rounded-full bg-orange-600 text-white text-[10px] flex items-center justify-center flex-shrink-0 mt-0.5 font-bold",children:b+1}),t.jsx("span",{className:"text-gray-700",children:v})]},b))})]}),t.jsxs("div",{className:"flex gap-2 pt-2 border-t border-gray-200",children:[t.jsxs("button",{onClick:f,className:"flex items-center gap-1.5 px-4 py-2 bg-orange-50 border border-orange-200 text-orange-700 rounded-lg text-sm font-medium hover:bg-orange-100 transition",children:[t.jsx(s1,{size:14})," Edit"]}),t.jsxs("button",{onClick:p,className:"flex items-center gap-1.5 px-4 py-2 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm font-medium hover:bg-red-100 transition",children:[t.jsx(Es,{size:14})," Delete"]})]})]})})]})}function Rj({recipe:l,loading:i,onConfirm:o,onCancel:d}){return Rs.createPortal(t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/40 z-[10010] animate-backdrop-in",onClick:d}),t.jsxs("div",{className:"fixed inset-x-4 top-1/2 -translate-y-1/2 z-[10011] bg-white rounded-2xl shadow-2xl max-w-sm mx-auto p-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-3",children:t.jsx(Es,{size:24,className:"text-red-600"})}),t.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Delete Recipe?"}),t.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:['"',l?.name,`" will be removed. Existing menu plans using this recipe won't be affected.`]})]}),t.jsxs("div",{className:"flex gap-3 mt-5",children:[t.jsx("button",{onClick:d,disabled:i,className:"flex-1 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-semibold text-sm transition",children:"Cancel"}),t.jsxs("button",{onClick:o,disabled:i,className:"flex-1 py-2.5 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white rounded-xl font-bold text-sm transition flex items-center justify-center gap-2",children:[i?t.jsx(Ue,{size:16,className:"animate-spin"}):t.jsx(Es,{size:16}),"Delete"]})]})]})]}),document.body)}function Aj({recipe:l,onClose:i,onSaved:o}){const[d,x]=u.useState(!1),f=u.useRef(null),[p,j]=u.useState(l?.name||""),[h,y]=u.useState(l?.category||"main_course"),[v,b]=u.useState(l?.cuisine||""),[g,T]=u.useState(l?.serves||4),[_,A]=u.useState(l?.difficulty||"medium"),[E,k]=u.useState(l?.description||""),[w,B]=u.useState(l?.prep_time_minutes||0),[Q,L]=u.useState(l?.cook_time_minutes||0),[ne,J]=u.useState([]),[ye,X]=u.useState(!1),[ae,se]=u.useState([""]),[K,me]=u.useState(""),[Z,ce]=u.useState([]),[M,P]=u.useState(!1),ie=u.useRef(null),[xe,be]=u.useState(!1),[C,G]=u.useState(""),[Y,R]=u.useState(1);u.useEffect(()=>(As(),()=>Ds()),[]),u.useEffect(()=>()=>{f.current&&clearTimeout(f.current),ie.current&&clearTimeout(ie.current)},[]),u.useEffect(()=>{l?.id&&(X(!0),$t.recipe(l.id).then(re=>{const S=re.recipe||{};j(S.name||""),y(S.category||"main_course"),b(S.cuisine||""),T(S.serves||4),A(S.difficulty||"medium"),k(S.description||""),B(S.prep_time_minutes||0),L(S.cook_time_minutes||0);const F=(re.ingredients||[]).map(fe=>({item_id:fe.item_id,item_name:fe.item_name,qty_per_serving:fe.qty_per_serving,uom:fe.uom,is_primary:!!fe.is_primary,notes:fe.notes||""}));J(F);try{const fe=JSON.parse(S.instructions||"[]");se(fe.length>0?fe:[""])}catch{se([""])}}).catch(re=>G(re.message)).finally(()=>X(!1)))},[l?.id]),u.useEffect(()=>{if(K.length<2){ce([]);return}ie.current&&clearTimeout(ie.current),ie.current=setTimeout(async()=>{P(!0);try{const re=await $t.searchIngredients(K);ce(re.items||[])}catch(re){console.error("Ingredient search failed:",re)}finally{P(!1)}},300)},[K]);function le(){d||(x(!0),f.current=setTimeout(()=>i(),250))}function de(re){ne.find(S=>S.item_id===re.id)||(J(S=>[...S,{item_id:re.id,item_name:re.name,qty_per_serving:1,uom:re.uom||"pcs",is_primary:ne.length===0,notes:""}]),me(""),ce([]))}function he(re,S,F){J(fe=>fe.map(Se=>Se.item_id===re?{...Se,[S]:F}:Se))}function Le(re){J(S=>S.filter(F=>F.item_id!==re))}function we(re){J(S=>S.map(F=>F.item_id===re?{...F,is_primary:!F.is_primary}:F))}function rt(re,S){se(F=>F.map((fe,Se)=>Se===re?S:fe))}function Ot(){se(re=>[...re,""])}function Rt(re){ae.length<=1||se(S=>S.filter((F,fe)=>fe!==re))}async function wt(){if(!p.trim()){G("Recipe name is required"),R(1);return}be(!0),G("");try{const re={...l?.id?{id:l.id}:{},name:p.trim(),category:h,cuisine:v.trim(),serves:parseInt(g)||4,difficulty:_,description:E.trim(),prep_time_minutes:parseInt(w)||0,cook_time_minutes:parseInt(Q)||0,instructions:JSON.stringify(ae.filter(F=>F.trim())),ingredients:ne.map(F=>({item_id:F.item_id,qty_per_serving:parseFloat(F.qty_per_serving)||0,is_primary:F.is_primary?1:0,notes:F.notes||""}))},S=await $t.saveRecipe(re);o(S)}catch(re){G(re.message)}finally{be(!1)}}const Ae=!!l?.id;return Rs.createPortal(t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`fixed inset-0 bg-black/40 z-[10010] ${d?"animate-backdrop-out":"animate-backdrop-in"}`,onClick:le}),t.jsxs("div",{className:`fixed inset-x-0 bottom-0 z-[10011] bg-white rounded-t-2xl shadow-2xl max-h-[92dvh] overflow-hidden flex flex-col ${d?"animate-slide-down":"animate-slide-up"}`,children:[t.jsx("div",{className:"flex justify-center pt-2 pb-1 flex-shrink-0",children:t.jsx("div",{className:"w-10 h-1 rounded-full bg-gray-300"})}),t.jsxs("div",{className:"flex items-center justify-between px-5 pt-2 pb-3 border-b border-gray-100 flex-shrink-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ta,{size:18,className:"text-orange-500"}),t.jsx("h2",{className:"text-lg font-bold text-gray-900",children:Ae?"Edit Recipe":"New Recipe"})]}),t.jsx("button",{onClick:le,className:"p-2 hover:bg-gray-100 rounded-full text-gray-400 transition",children:t.jsx(Ee,{size:18})})]}),t.jsx("div",{className:"flex border-b border-gray-100 flex-shrink-0",children:[{num:1,label:"Details"},{num:2,label:"Ingredients"},{num:3,label:"Instructions"}].map(re=>t.jsx("button",{onClick:()=>R(re.num),className:`flex-1 py-2.5 text-sm font-medium transition border-b-2 ${Y===re.num?"border-orange-500 text-orange-700":"border-transparent text-gray-500 hover:text-gray-700"}`,children:re.label},re.num))}),C&&t.jsxs("div",{className:"mx-5 mt-3 bg-red-50 text-red-700 px-4 py-2 rounded-lg text-sm flex items-center gap-2",children:[t.jsx(St,{size:14}),t.jsx("span",{className:"flex-1",children:C}),t.jsx("button",{onClick:()=>G(""),children:t.jsx(Ee,{size:14})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto px-5 py-4 scroll-touch",children:[Y===1&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Recipe Name *"}),t.jsx("input",{type:"text",value:p,onChange:re=>j(re.target.value),placeholder:"e.g. Camembert Bruschetta",className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Category"}),t.jsx("select",{value:h,onChange:re=>y(re.target.value),className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none",children:rh.filter(re=>re.value).map(re=>t.jsx("option",{value:re.value,children:re.label},re.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Cuisine"}),t.jsx("input",{type:"text",value:v,onChange:re=>b(re.target.value),placeholder:"e.g. French",className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none"})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Serves"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>T(Math.max(1,g-1)),className:"w-8 h-8 flex items-center justify-center rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-700",children:t.jsx(Pa,{size:14})}),t.jsx("span",{className:"w-8 text-center font-bold text-sm",children:g}),t.jsx("button",{onClick:()=>T(g+1),className:"w-8 h-8 flex items-center justify-center rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-700",children:t.jsx(Ve,{size:14})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Prep (min)"}),t.jsx("input",{type:"number",value:w||"",onChange:re=>B(re.target.value),placeholder:"0",className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Cook (min)"}),t.jsx("input",{type:"number",value:Q||"",onChange:re=>L(re.target.value),placeholder:"0",className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Difficulty"}),t.jsx("div",{className:"flex gap-2",children:Tj.map(re=>t.jsx("button",{onClick:()=>A(re.value),className:`flex-1 py-2 rounded-lg text-sm font-medium transition ${_===re.value?re.value==="easy"?"bg-green-100 text-green-700 border border-green-200":re.value==="hard"?"bg-red-100 text-red-700 border border-red-200":"bg-amber-100 text-amber-700 border border-amber-200":"bg-gray-50 text-gray-600 border border-gray-200 hover:bg-gray-100"}`,children:re.label},re.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Description (optional)"}),t.jsx("textarea",{value:E,onChange:re=>k(re.target.value),placeholder:"Brief description of the dish...",rows:2,className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none resize-none"})]})]}),Y===2&&t.jsx("div",{className:"space-y-4",children:ye?t.jsxs("div",{className:"flex items-center justify-center py-8",children:[t.jsx(Ue,{size:20,className:"animate-spin text-orange-600"}),t.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"Loading ingredients..."})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"relative",children:[t.jsx(Vt,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",value:K,onChange:re=>me(re.target.value),placeholder:"Search stock items to add...",className:"w-full pl-9 pr-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none"})]}),M&&t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[t.jsx(Ue,{size:12,className:"animate-spin"})," Searching..."]}),Z.length>0&&t.jsx("div",{className:"max-h-48 overflow-y-auto bg-white border border-gray-200 rounded-lg",children:Z.map(re=>{const S=ne.some(F=>F.item_id===re.id);return t.jsxs("button",{onClick:()=>!S&&de(re),disabled:S,className:`w-full flex items-center gap-2 px-3 py-2 text-left border-b border-gray-100 last:border-0 transition ${S?"bg-gray-50 opacity-50":"hover:bg-orange-50"}`,children:[t.jsx(ha,{size:12,className:"text-gray-400 flex-shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:re.name}),t.jsxs("span",{className:"text-[10px] text-gray-400",children:[re.group_name,"  ",re.uom]})]}),S?t.jsx(Yt,{size:14,className:"text-green-500 flex-shrink-0"}):t.jsx(Ve,{size:14,className:"text-orange-500 flex-shrink-0"})]},re.id)})}),ne.length===0?t.jsxs("div",{className:"text-center py-6",children:[t.jsx(ha,{size:28,className:"mx-auto text-gray-300 mb-2"}),t.jsx("p",{className:"text-sm text-gray-500",children:"No ingredients added yet"}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Search stock items above to add ingredients"})]}):t.jsxs("div",{className:"space-y-2",children:[t.jsxs("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:["Recipe Ingredients (",ne.length,")"]}),ne.map(re=>t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:`w-2 h-2 rounded-full flex-shrink-0 ${re.is_primary?"bg-orange-500":"bg-gray-300"}`}),t.jsx("span",{className:"text-sm font-medium text-gray-900 flex-1 truncate",children:re.item_name}),t.jsx("button",{onClick:()=>we(re.item_id),className:`text-[10px] px-2 py-0.5 rounded-full font-medium transition ${re.is_primary?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-500 hover:bg-orange-50"}`,children:re.is_primary?"Primary":"Secondary"}),t.jsx("button",{onClick:()=>Le(re.item_id),className:"text-gray-400 hover:text-red-500 p-1",children:t.jsx(Ee,{size:14})})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"text-[10px] text-gray-400 block mb-0.5",children:"Qty/serving"}),t.jsx("input",{type:"number",step:"0.01",value:re.qty_per_serving,onChange:S=>he(re.item_id,"qty_per_serving",S.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none"})]}),t.jsxs("div",{className:"w-20",children:[t.jsx("label",{className:"text-[10px] text-gray-400 block mb-0.5",children:"Unit"}),t.jsx("input",{type:"text",value:re.uom,onChange:S=>he(re.item_id,"uom",S.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none"})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"text-[10px] text-gray-400 block mb-0.5",children:"Notes"}),t.jsx("input",{type:"text",value:re.notes,onChange:S=>he(re.item_id,"notes",S.target.value),placeholder:"optional",className:"w-full px-2 py-1.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none"})]})]})]},re.item_id))]})]})}),Y===3&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:["Steps (",ae.filter(re=>re.trim()).length,")"]}),ae.map((re,S)=>t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"w-6 h-6 rounded-full bg-orange-600 text-white text-[10px] flex items-center justify-center flex-shrink-0 mt-2 font-bold",children:S+1}),t.jsx("textarea",{value:re,onChange:F=>rt(S,F.target.value),placeholder:`Step ${S+1}...`,rows:2,className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none resize-none"}),ae.length>1&&t.jsx("button",{onClick:()=>Rt(S),className:"text-gray-400 hover:text-red-500 p-1 mt-1.5",children:t.jsx(Ee,{size:14})})]},S)),t.jsxs("button",{onClick:Ot,className:"w-full flex items-center justify-center gap-2 py-2.5 text-sm text-gray-600 border border-dashed border-gray-300 rounded-xl hover:border-orange-400 hover:text-orange-700 transition",children:[t.jsx(Ve,{size:14})," Add Step"]})]})]}),t.jsx("div",{className:"flex-shrink-0 border-t border-gray-100 px-5 py-4 bg-white",children:t.jsxs("div",{className:"flex gap-3",children:[Y>1&&t.jsx("button",{onClick:()=>R(Y-1),className:"flex-1 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-semibold text-sm transition",children:"Back"}),Y<3?t.jsx("button",{onClick:()=>R(Y+1),className:"flex-1 py-3 bg-orange-600 hover:bg-orange-700 text-white rounded-xl font-bold text-sm transition",children:"Next"}):t.jsx("button",{onClick:wt,disabled:xe||!p.trim(),className:"flex-1 py-3 bg-orange-600 hover:bg-orange-700 disabled:bg-orange-400 text-white rounded-xl font-bold text-sm transition flex items-center justify-center gap-2",children:xe?t.jsxs(t.Fragment,{children:[t.jsx(Ue,{size:16,className:"animate-spin"})," Saving..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Yt,{size:16})," ",Ae?"Update Recipe":"Create Recipe"]})})]})})]})]}),document.body)}function uf(l){return new Date(l+"T00:00:00").toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short",year:"numeric"})}function Dj(l){return l===new Date().toISOString().split("T")[0]}function Mj(){const l=Ie(),{campId:i}=ya(),[o,d]=u.useState(new Date().toISOString().split("T")[0]),[x,f]=u.useState([]),[p,j]=u.useState(!0),[h,y]=u.useState(""),[v,b]=u.useState(""),[g,T]=u.useState("name"),[_,A]=u.useState("asc"),[E,k]=u.useState(""),[w,B]=u.useState("");u.useEffect(()=>{Q()},[o,i]);async function Q(){j(!0),y("");try{const K={date:o};i&&(K.camp_id=i);const me=await qb.get(K);f(me.items||[]),b(me.camp_name||"")}catch(K){y(K.message)}finally{j(!1)}}function L(K){const me=new Date(o+"T00:00:00");me.setDate(me.getDate()+K),d(me.toISOString().split("T")[0])}function ne(){d(new Date().toISOString().split("T")[0])}function J(K){g===K?A(me=>me==="asc"?"desc":"asc"):(T(K),A("desc"))}const ye=[...new Set(x.map(K=>K.group_code).filter(Boolean))].sort(),X=x.filter(K=>{if(E&&K.group_code!==E)return!1;if(w){const me=w.toLowerCase();return K.name.toLowerCase().includes(me)||K.item_code.toLowerCase().includes(me)}return!0}).sort((K,me)=>{const Z=_==="asc"?1:-1;return g==="name"?K.name.localeCompare(me.name)*Z:((K[g]||0)-(me[g]||0))*Z}),ae={stock:X.reduce((K,me)=>K+me.stock,0),ordered:X.reduce((K,me)=>K+me.ordered,0),received:X.reduce((K,me)=>K+me.received,0),bar_issued:X.reduce((K,me)=>K+me.bar_issued,0),kitchen_issued:X.reduce((K,me)=>K+me.kitchen_issued,0)},se=({field:K,label:me,icon:Z})=>t.jsxs("button",{onClick:()=>J(K),className:`flex items-center gap-1 text-[10px] sm:text-xs font-medium uppercase tracking-wide ${g===K?"text-green-700":"text-gray-500"}`,children:[Z&&t.jsx(Z,{size:12,className:"hidden sm:block"}),me,g===K&&t.jsx("span",{className:"text-[9px]",children:_==="asc"?"":""})]});return t.jsxs("div",{children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("div",{children:[t.jsxs("h1",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[t.jsx(ks,{size:22,className:"text-green-600"}),"Daily Overview"]}),t.jsx("p",{className:"text-sm text-gray-500",children:v||l?.camp_name||"All Camps"})]})}),t.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-3 mb-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("button",{onClick:()=>L(-1),className:"flex items-center gap-1 px-3 py-2 text-sm font-medium text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition",children:[t.jsx(Ia,{size:18}),t.jsx("span",{className:"hidden sm:inline",children:"Previous"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-lg font-bold text-gray-900",children:uf(o)}),Dj(o)?t.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full font-medium",children:"Today"}):t.jsx("button",{onClick:ne,className:"text-xs text-green-600 hover:text-green-700 font-medium",children:"Go to Today"})]}),t.jsxs("button",{onClick:()=>L(1),className:"flex items-center gap-1 px-3 py-2 text-sm font-medium text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition",children:[t.jsx("span",{className:"hidden sm:inline",children:"Next"}),t.jsx(yt,{size:18})]})]})}),h&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm flex items-center gap-2",children:[t.jsx(St,{size:16}),h]}),t.jsxs("div",{className:"flex items-center gap-2 mb-3 overflow-x-auto pb-1",children:[t.jsxs("button",{onClick:()=>k(""),className:`flex-shrink-0 px-3 py-1.5 rounded-full text-xs font-medium transition ${E?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-green-600 text-white"}`,children:["All (",x.length,")"]}),ye.map(K=>{const me=x.filter(Z=>Z.group_code===K).length;return t.jsxs("button",{onClick:()=>k(K),className:`flex-shrink-0 px-3 py-1.5 rounded-full text-xs font-medium transition whitespace-nowrap ${E===K?"bg-green-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[K," (",me,")"]},K)})]}),t.jsxs("div",{className:"relative mb-4",children:[t.jsx(Vt,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",value:w,onChange:K=>B(K.target.value),placeholder:"Filter items...",className:"w-full pl-9 pr-8 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none"}),w&&t.jsx("button",{onClick:()=>B(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:t.jsx(Ee,{size:14})})]}),p?t.jsx(ot,{message:"Loading daily overview..."}):X.length===0?t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center",children:[t.jsx(Fa,{size:40,className:"mx-auto text-gray-300 mb-3"}),t.jsx("p",{className:"text-gray-500 text-sm",children:"No items with activity for this date"})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-5 gap-2 mb-4",children:[t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-2.5 text-center",children:[t.jsx(Fa,{size:16,className:"mx-auto text-blue-500 mb-1"}),t.jsx("p",{className:"text-sm font-bold text-gray-900",children:Math.round(ae.stock)}),t.jsx("p",{className:"text-[10px] text-gray-500",children:"Stock"})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-2.5 text-center",children:[t.jsx(_t,{size:16,className:"mx-auto text-green-500 mb-1"}),t.jsx("p",{className:"text-sm font-bold text-gray-900",children:Math.round(ae.ordered)}),t.jsx("p",{className:"text-[10px] text-gray-500",children:"Ordered"})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-2.5 text-center",children:[t.jsx(Ts,{size:16,className:"mx-auto text-purple-500 mb-1"}),t.jsx("p",{className:"text-sm font-bold text-gray-900",children:Math.round(ae.received)}),t.jsx("p",{className:"text-[10px] text-gray-500",children:"Received"})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-2.5 text-center",children:[t.jsx(xa,{size:16,className:"mx-auto text-amber-600 mb-1"}),t.jsx("p",{className:"text-sm font-bold text-gray-900",children:Math.round(ae.bar_issued)}),t.jsx("p",{className:"text-[10px] text-gray-500",children:"Bar"})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-2.5 text-center",children:[t.jsx(In,{size:16,className:"mx-auto text-orange-500 mb-1"}),t.jsx("p",{className:"text-sm font-bold text-gray-900",children:Math.round(ae.kitchen_issued)}),t.jsx("p",{className:"text-[10px] text-gray-500",children:"Kitchen"})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[t.jsx("div",{className:"hidden md:block overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[t.jsx("th",{className:"text-left px-4 py-2.5",children:t.jsx(se,{field:"name",label:"Item"})}),t.jsx("th",{className:"text-center px-3 py-2.5",children:t.jsx(se,{field:"stock",label:"Stock",icon:Fa})}),t.jsx("th",{className:"text-center px-3 py-2.5",children:t.jsx(se,{field:"ordered",label:"Ordered",icon:_t})}),t.jsx("th",{className:"text-center px-3 py-2.5",children:t.jsx(se,{field:"received",label:"Received",icon:Ts})}),t.jsx("th",{className:"text-center px-3 py-2.5",children:t.jsx(se,{field:"bar_issued",label:"Bar",icon:xa})}),t.jsx("th",{className:"text-center px-3 py-2.5",children:t.jsx(se,{field:"kitchen_issued",label:"Kitchen",icon:In})})]})}),t.jsx("tbody",{children:X.map(K=>t.jsxs("tr",{className:"border-b border-gray-50 hover:bg-gray-50",children:[t.jsxs("td",{className:"px-4 py-2.5",children:[t.jsx("p",{className:"font-medium text-gray-900",children:K.name}),t.jsxs("p",{className:"text-xs text-gray-400",children:[K.item_code,"  ",K.uom]})]}),t.jsx("td",{className:"text-center px-3 py-2.5",children:t.jsx("span",{className:`inline-flex items-center justify-center min-w-[2.5rem] px-2 py-0.5 rounded-full text-xs font-bold ${K.stock_status==="critical"||K.stock_status==="out"?"bg-red-100 text-red-700":K.stock_status==="low"?"bg-amber-100 text-amber-700":"bg-blue-50 text-blue-700"}`,children:K.stock})}),t.jsx("td",{className:"text-center px-3 py-2.5",children:K.ordered>0?t.jsx("span",{className:"inline-flex items-center justify-center min-w-[2.5rem] px-2 py-0.5 rounded-full text-xs font-bold bg-green-100 text-green-700",children:K.ordered}):t.jsx("span",{className:"text-xs text-gray-300",children:""})}),t.jsx("td",{className:"text-center px-3 py-2.5",children:K.received>0?t.jsx("span",{className:"inline-flex items-center justify-center min-w-[2.5rem] px-2 py-0.5 rounded-full text-xs font-bold bg-purple-100 text-purple-700",children:K.received}):t.jsx("span",{className:"text-xs text-gray-300",children:""})}),t.jsx("td",{className:"text-center px-3 py-2.5",children:K.bar_issued>0?t.jsx("span",{className:"inline-flex items-center justify-center min-w-[2.5rem] px-2 py-0.5 rounded-full text-xs font-bold bg-amber-100 text-amber-700",children:K.bar_issued}):t.jsx("span",{className:"text-xs text-gray-300",children:""})}),t.jsx("td",{className:"text-center px-3 py-2.5",children:K.kitchen_issued>0?t.jsx("span",{className:"inline-flex items-center justify-center min-w-[2.5rem] px-2 py-0.5 rounded-full text-xs font-bold bg-orange-100 text-orange-700",children:K.kitchen_issued}):t.jsx("span",{className:"text-xs text-gray-300",children:""})})]},K.id))})]})}),t.jsxs("div",{className:"md:hidden divide-y divide-gray-100",children:[t.jsx("div",{className:"grid grid-cols-5 gap-1 px-3 py-2 bg-gray-50 text-[9px] font-bold text-gray-500 uppercase text-center",children:t.jsxs("span",{className:"text-left col-span-5 mb-1 text-xs text-gray-700",children:[X.length," items"]})}),X.map(K=>t.jsxs("div",{className:"px-3 py-2.5",children:[t.jsx("div",{className:"flex items-center justify-between mb-1.5",children:t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:K.name}),t.jsxs("p",{className:"text-[10px] text-gray-400",children:[K.item_code,"  ",K.uom]})]})}),t.jsxs("div",{className:"grid grid-cols-5 gap-1.5",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("span",{className:`block text-xs font-bold rounded-md py-0.5 ${K.stock_status==="critical"||K.stock_status==="out"?"bg-red-100 text-red-700":K.stock_status==="low"?"bg-amber-100 text-amber-700":"bg-blue-50 text-blue-700"}`,children:K.stock}),t.jsx("span",{className:"text-[8px] text-gray-400 mt-0.5 block",children:"Stock"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("span",{className:`block text-xs font-bold rounded-md py-0.5 ${K.ordered>0?"bg-green-100 text-green-700":"bg-gray-50 text-gray-300"}`,children:K.ordered||""}),t.jsx("span",{className:"text-[8px] text-gray-400 mt-0.5 block",children:"Order"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("span",{className:`block text-xs font-bold rounded-md py-0.5 ${K.received>0?"bg-purple-100 text-purple-700":"bg-gray-50 text-gray-300"}`,children:K.received||""}),t.jsx("span",{className:"text-[8px] text-gray-400 mt-0.5 block",children:"Recd"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("span",{className:`block text-xs font-bold rounded-md py-0.5 ${K.bar_issued>0?"bg-amber-100 text-amber-700":"bg-gray-50 text-gray-300"}`,children:K.bar_issued||""}),t.jsx("span",{className:"text-[8px] text-gray-400 mt-0.5 block",children:"Bar"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("span",{className:`block text-xs font-bold rounded-md py-0.5 ${K.kitchen_issued>0?"bg-orange-100 text-orange-700":"bg-gray-50 text-gray-300"}`,children:K.kitchen_issued||""}),t.jsx("span",{className:"text-[8px] text-gray-400 mt-0.5 block",children:"Kitchen"})]})]})]},K.id))]})]}),t.jsxs("p",{className:"text-xs text-gray-400 text-center mt-3",children:[X.length," items shown  ",uf(o)]})]})]})}const ih=new Map,Lj=300*1e3;function ch(l,i){return`${l}|${i}`}function mf(l,i){const o=ih.get(ch(l,i));return o||null}function sr(l,i,o,d){ih.set(ch(l,i),{plan:o,dishes:d,ts:Date.now()})}const qj=[{value:"appetizer",label:"Appetizer"},{value:"soup",label:"Soup"},{value:"salad",label:"Salad"},{value:"main_course",label:"Main Course"},{value:"side",label:"Side"},{value:"dessert",label:"Dessert"},{value:"beverage",label:"Beverage"}],Uj=[{value:"lunch",label:"Lunch",icon:""},{value:"dinner",label:"Dinner",icon:""}],Bj={breakfast:"main_course",lunch:"main_course",dinner:"main_course",snack:"side",dessert:"dessert",sauce:"side",soup:"soup",salad:"salad",bread:"side",other:"main_course"};function Hj(l){return new Date(l+"T00:00:00").toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short",year:"numeric"})}function xf(l){return l===new Date().toISOString().split("T")[0]}function Gj(){Ie();const{campId:l}=ya(),[i,o]=u.useState(new Date().toISOString().split("T")[0]),[d,x]=u.useState("lunch"),[f,p]=u.useState(null),[j,h]=u.useState([]),[y,v]=u.useState(!0),[b,g]=u.useState(""),[T,_]=u.useState(!1),[A,E]=u.useState(!1),k=u.useRef(!1),[w,B]=u.useState([]),[Q,L]=u.useState(!1),[ne,J]=u.useState(null),[ye,X]=u.useState(!1);u.useEffect(()=>{ae()},[i,d,l]);async function ae(){g("");const Y=mf(i,d);Y?(p(Y.plan),h(Y.dishes),v(!1),E(!1),k.current=!1):(v(!0),E(!0),k.current=!0);try{const R=await nt.chefInit(i,d);p(R.plan),h(R.dishes||[]),sr(i,d,R.plan,R.dishes||[]),R.recipes&&(B(R.recipes),L(!0))}catch{try{const[R,le]=await Promise.all([nt.plan(i,d),Q?null:$t.recipes()]);p(R.plan),h(R.dishes||[]),sr(i,d,R.plan,R.dishes||[]),le?.recipes&&(B(le.recipes),L(!0))}catch(R){Y||g(R.message)}}finally{v(!1),E(!1),k.current=!1}K(i,d)}async function se(){try{const Y=await nt.plan(i,d);p(Y.plan),h(Y.dishes||[]),sr(i,d,Y.plan,Y.dishes||[])}catch(Y){g(Y.message)}}function K(Y,R){for(const le of[-1,1]){const de=new Date(Y+"T00:00:00");de.setDate(de.getDate()+le);const he=de.toISOString().split("T")[0],Le=mf(he,R);Le&&Date.now()-Le.ts<Lj||nt.chefInit(he,R).then(we=>sr(he,R,we.plan,we.dishes||[])).catch(()=>{nt.plan(he,R).then(we=>sr(he,R,we.plan,we.dishes||[])).catch(()=>{})})}}function me(Y){if(k.current)return;k.current=!0,E(!0);const R=new Date(i+"T00:00:00");R.setDate(R.getDate()+Y),o(R.toISOString().split("T")[0])}async function Z({course:Y,name:R,portions:le,recipeId:de}){if(R.trim()){_(!0),g("");try{let he=f?.id;he||(he=(await nt.createPlan(i,d,le)).plan_id);const we=(await nt.addDish(he,Y,R.trim(),le,de)).dish_id;if(de&&we)try{await nt.loadRecipe(we,de,le)}catch(rt){console.error("Failed to auto-load recipe:",rt)}await se()}catch(he){g(he.message)}finally{_(!1)}}}async function ce(Y){if(confirm("Remove this dish and all its ingredients?")){_(!0);try{await nt.removeDish(Y),await se()}catch(R){g(R.message)}finally{_(!1)}}}async function M(Y,R){if(!(R<1)){_(!0);try{await nt.updatePortions(Y,R),await se()}catch(le){g(le.message)}finally{_(!1)}}}async function P(Y){if(!(!f||Y<1)){_(!0);try{await nt.updatePlanPax(f.id,Y),await se()}catch(R){g(R.message)}finally{_(!1)}}}async function ie(){if(confirm("Confirm this menu plan? No further edits until reopened.")){_(!0);try{await nt.confirmPlan(f.id),await se()}catch(Y){g(Y.message)}finally{_(!1)}}}async function xe(){_(!0);try{await nt.reopenPlan(f.id),await se()}catch(Y){g(Y.message)}finally{_(!1)}}const be=f?.status==="confirmed",C=!f||f?.status==="draft",G=j.reduce((Y,R)=>Y+R.ingredients.filter(le=>!le.is_removed).length,0);return t.jsxs("div",{className:"pb-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[t.jsx(ta,{size:22,className:"text-orange-600"}),"Menu Plan"]}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Plan daily meals with recipes"})]}),f&&t.jsxs("button",{onClick:()=>X(!0),className:"flex items-center gap-1.5 text-xs text-gray-600 bg-gray-100 px-3 py-1.5 rounded-full",children:[t.jsx(Mv,{size:14}),"Audit"]})]}),t.jsxs("div",{className:"flex items-center justify-between bg-white rounded-xl border border-gray-100 px-4 py-3 mb-3",children:[t.jsx("button",{onClick:()=>me(-1),disabled:A,className:"p-2 rounded-lg hover:bg-gray-100 active:bg-gray-200 disabled:opacity-30 disabled:pointer-events-none",children:A?t.jsx(Ue,{size:20,className:"animate-spin text-gray-400"}):t.jsx(Ia,{size:20,className:"text-gray-600"})}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm font-semibold text-gray-900",children:Hj(i)}),xf(i)&&t.jsx("span",{className:"text-[10px] text-green-600 font-medium",children:"Today"}),!xf(i)&&t.jsx("button",{onClick:()=>{k.current||o(new Date().toISOString().split("T")[0])},disabled:A,className:"text-[10px] text-orange-600 font-medium disabled:opacity-40",children:"Go to Today"})]}),t.jsx("button",{onClick:()=>me(1),disabled:A,className:"p-2 rounded-lg hover:bg-gray-100 active:bg-gray-200 disabled:opacity-30 disabled:pointer-events-none",children:A?t.jsx(Ue,{size:20,className:"animate-spin text-gray-400"}):t.jsx(yt,{size:20,className:"text-gray-600"})})]}),t.jsx("div",{className:"flex gap-2 mb-3",children:Uj.map(Y=>t.jsxs("button",{onClick:()=>{k.current||x(Y.value)},disabled:A,className:`flex-1 py-2.5 rounded-xl text-sm font-semibold transition-all disabled:opacity-50 ${d===Y.value?"bg-orange-500 text-white shadow-sm":"bg-white text-gray-600 border border-gray-200"}`,children:[Y.icon," ",Y.label]},Y.value))}),b&&t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl px-4 py-3 mb-3 flex items-center gap-2",children:[t.jsx(St,{size:16,className:"text-red-500 shrink-0"}),t.jsx("p",{className:"text-sm text-red-700 flex-1",children:b}),t.jsx("button",{onClick:()=>g(""),children:t.jsx(Ee,{size:16,className:"text-red-400"})})]}),f&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 px-4 py-2.5 mb-3 space-y-2",children:[t.jsx(Yj,{pax:f.portions,onSave:P,disabled:be||T}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`text-[10px] font-bold uppercase px-2 py-0.5 rounded-full ${be?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:f.status}),t.jsxs("span",{className:"text-[10px] text-gray-400",children:[j.length," dish",j.length!==1?"es":"",G>0&&`  ${G} ingredients`]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[f.status==="draft"&&t.jsxs("button",{onClick:ie,disabled:T||j.length===0,className:"text-xs text-green-700 font-semibold bg-green-50 px-2.5 py-1 rounded-lg flex items-center gap-1 disabled:opacity-40",children:[t.jsx(Ff,{size:13})," Confirm"]}),be&&t.jsxs("button",{onClick:xe,disabled:T,className:"text-xs text-amber-700 font-medium bg-amber-50 px-2.5 py-1 rounded-lg flex items-center gap-1",children:[t.jsx(d1,{size:13})," Reopen"]})]})]})]}),y&&t.jsx(ot,{message:"Loading menu plan..."}),!y&&t.jsxs("div",{className:"space-y-2",children:[j.length===0&&!f&&!be&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 p-6 text-center mb-2",children:[t.jsx(ta,{size:36,className:"text-gray-300 mx-auto mb-2"}),t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"No menu plan yet"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Add a dish below to start planning"})]}),j.length===0&&f&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 p-6 text-center mb-2",children:[t.jsx(In,{size:32,className:"text-gray-300 mx-auto mb-2"}),t.jsx("p",{className:"text-sm text-gray-500",children:"No dishes yet"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Add dishes below to build the menu"})]}),j.map(Y=>t.jsx(Vj,{dish:Y,isConfirmed:be,onRemoveDish:()=>ce(Y.id),onRatePresentation:()=>J(Y),onUpdatePortions:R=>M(Y.id,R),saving:T},Y.id)),C&&!be&&t.jsx($j,{recipes:w,recipesLoaded:Q,onAdd:Z,saving:T})]}),ne&&t.jsx(Qj,{dish:ne,onRated:()=>{J(null),se()},onClose:()=>J(null)}),ye&&f&&t.jsx(Zj,{planId:f.id,onClose:()=>X(!1)})]})}function $j({recipes:l,recipesLoaded:i,onAdd:o,saving:d}){const[x,f]=u.useState(!1),[p,j]=u.useState(""),[h,y]=u.useState(""),[v,b]=u.useState("main_course"),[g,T]=u.useState(20),_={};for(const k of l){const w=k.category||"other";_[w]||(_[w]=[]),_[w].push(k)}function A(k){const w=k.target.value;if(j(w),w){const B=l.find(Q=>String(Q.id)===String(w));B&&(y(B.name),b(Bj[B.category]||"main_course"))}else y("")}function E(){const k=h.trim();k&&(o({course:v,name:k,portions:g,recipeId:p?parseInt(p):null}),j(""),y(""),b("main_course"),T(20))}return x?t.jsxs("div",{className:"bg-white rounded-xl border-2 border-orange-200 overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-orange-50 border-b border-orange-100",children:[t.jsxs("h3",{className:"text-sm font-bold text-orange-800 flex items-center gap-2",children:[t.jsx(Ve,{size:16}),"Add Dish"]}),t.jsx("button",{onClick:()=>{f(!1),j(""),y("")},className:"text-orange-400 hover:text-orange-600",children:t.jsx(Ee,{size:18})})]}),t.jsxs("div",{className:"px-4 py-3 space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[11px] font-medium text-gray-500 uppercase tracking-wide mb-1 block",children:"Pick Recipe"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:p,onChange:A,className:"w-full appearance-none bg-gray-50 border border-gray-200 rounded-lg px-3 py-2.5 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-200 focus:border-orange-400 pr-8",children:[t.jsx("option",{value:"",children:"-- Select a recipe or type name below --"}),Object.entries(_).map(([k,w])=>t.jsx("optgroup",{label:k.replace("_"," ").replace(/\b\w/g,B=>B.toUpperCase()),children:w.map(B=>t.jsxs("option",{value:B.id,children:[B.name," (",B.ingredient_count||0," ing)"]},B.id))},k))]}),t.jsx(vt,{size:16,className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[11px] font-medium text-gray-500 uppercase tracking-wide mb-1 block",children:"Dish Name"}),t.jsx("input",{type:"text",value:h,onChange:k=>{y(k.target.value),p&&j("")},placeholder:"e.g. Grilled Chicken with Herbs",className:"w-full border border-gray-200 rounded-lg px-3 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-orange-200 focus:border-orange-400"}),p&&t.jsxs("p",{className:"text-[10px] text-orange-600 mt-1 flex items-center gap-1",children:[t.jsx(al,{size:10})," Recipe ingredients will be auto-loaded"]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"text-[11px] font-medium text-gray-500 uppercase tracking-wide mb-1 block",children:"Course"}),t.jsxs("div",{className:"relative",children:[t.jsx("select",{value:v,onChange:k=>b(k.target.value),className:"w-full appearance-none bg-gray-50 border border-gray-200 rounded-lg px-3 py-2.5 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-orange-200 pr-8",children:qj.map(k=>t.jsx("option",{value:k.value,children:k.label},k.value))}),t.jsx(vt,{size:14,className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),t.jsxs("div",{className:"w-28",children:[t.jsx("label",{className:"text-[11px] font-medium text-gray-500 uppercase tracking-wide mb-1 block",children:"Portions"}),t.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg overflow-hidden bg-gray-50",children:[t.jsx("button",{onClick:()=>T(Math.max(1,g-5)),className:"px-2 py-2.5 text-gray-600 hover:bg-gray-100 active:bg-gray-200",children:t.jsx(Pa,{size:14})}),t.jsx("input",{type:"number",value:g,onChange:k=>T(Math.max(1,parseInt(k.target.value)||1)),className:"w-full text-center text-sm font-semibold bg-transparent border-0 focus:outline-none py-2.5"}),t.jsx("button",{onClick:()=>T(g+5),className:"px-2 py-2.5 text-gray-600 hover:bg-gray-100 active:bg-gray-200",children:t.jsx(Ve,{size:14})})]})]})]}),t.jsxs("button",{onClick:E,disabled:!h.trim()||d,className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-2.5 rounded-lg text-sm font-semibold disabled:opacity-40 flex items-center justify-center gap-2 transition active:bg-orange-700",children:[d?t.jsx(Ue,{size:16,className:"animate-spin"}):t.jsx(Ve,{size:16}),d?"Adding...":p?"Add with Recipe":"Add Dish"]})]})]}):t.jsxs("button",{onClick:()=>f(!0),className:"w-full flex items-center justify-center gap-2 py-4 border-2 border-dashed border-gray-300 rounded-xl text-gray-500 hover:border-orange-400 hover:text-orange-600 hover:bg-orange-50/50 transition font-semibold text-sm active:bg-orange-50",children:[t.jsx(Ve,{size:18}),"Add Dish"]})}function Yj({pax:l,onSave:i,disabled:o}){const[d,x]=u.useState(!1),[f,p]=u.useState(l),j=u.useRef(null);u.useEffect(()=>{p(l)},[l]),u.useEffect(()=>{d&&j.current&&j.current.select()},[d]);function h(){const y=parseInt(f)||0;y>0&&y!==l&&i(y),x(!1)}return d?t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(_a,{size:14,className:"text-orange-600 shrink-0"}),t.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Total Pax"}),t.jsx("input",{ref:j,type:"number",value:f,onChange:y=>p(y.target.value),onBlur:h,onKeyDown:y=>{y.key==="Enter"&&h(),y.key==="Escape"&&x(!1)},className:"w-20 text-center text-sm font-bold border border-orange-300 rounded-lg px-2 py-1 focus:outline-none focus:ring-2 focus:ring-orange-200",min:"1"}),t.jsx("button",{onClick:h,className:"text-green-600 p-1",children:t.jsx(Yt,{size:16})}),t.jsx("button",{onClick:()=>{p(l),x(!1)},className:"text-gray-400 p-1",children:t.jsx(Ee,{size:14})})]}):t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(_a,{size:14,className:"text-orange-600 shrink-0"}),t.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Total Pax"}),t.jsx("button",{onClick:()=>!o&&x(!0),disabled:o,className:"text-sm font-bold text-orange-700 bg-orange-50 px-3 py-1 rounded-lg hover:bg-orange-100 active:bg-orange-200 disabled:opacity-40 disabled:pointer-events-none transition",children:l}),!o&&t.jsx("span",{className:"text-[10px] text-gray-400",children:"tap to edit"})]})}function Vj({dish:l,isConfirmed:i,onRemoveDish:o,onRatePresentation:d,onUpdatePortions:x,saving:f}){const p=l.portions||20,j=!!l.recipe_id,h=l.presentation_score>0,y=!!l.is_default,v=l.ingredients.filter(T=>!T.is_removed).length,b=l.ingredients.filter(T=>!T.is_removed&&T.is_primary).length,g=l.ingredients.filter(T=>!T.is_removed&&!T.is_primary).length;return t.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 overflow-hidden shadow-sm",children:[t.jsxs("div",{className:"flex items-center gap-2 px-3 py-3",children:[t.jsx(In,{size:15,className:"text-orange-500 shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("span",{className:"font-semibold text-sm text-gray-900 truncate block",children:l.dish_name}),v>0&&t.jsxs("span",{className:"text-[10px] text-gray-400",children:[b," daily  ",g," weekly ingredients"]})]}),y&&t.jsx("span",{className:"text-[9px] bg-blue-50 text-blue-600 px-1.5 py-0.5 rounded-full font-medium shrink-0",children:"Default"}),j&&t.jsx("span",{className:"text-[9px] bg-orange-50 text-orange-600 px-1.5 py-0.5 rounded-full flex items-center gap-0.5 shrink-0",children:t.jsx(al,{size:8})}),h&&t.jsxs("span",{className:"text-[10px] font-medium text-amber-700 bg-amber-50 px-1.5 py-0.5 rounded-full flex items-center gap-0.5 shrink-0",children:[t.jsx(lr,{size:9,className:"fill-amber-500 text-amber-500"})," ",l.presentation_score]}),t.jsxs("button",{onClick:()=>{if(i)return;const T=prompt("Portions:",p);T&&parseInt(T)>0&&parseInt(T)!==p&&x(parseInt(T))},className:`text-[10px] font-medium px-1.5 py-0.5 rounded-full flex items-center gap-0.5 ${i?"text-gray-500 bg-gray-50":"text-orange-700 bg-orange-50 active:bg-orange-100"}`,children:[t.jsx(_a,{size:10})," ",p]}),t.jsx("button",{onClick:d,className:"text-amber-600 p-0.5 shrink-0",children:t.jsx(Kf,{size:15})}),!i&&!y&&t.jsx("button",{onClick:o,disabled:f,className:"text-red-400 p-0.5 shrink-0",children:t.jsx(Es,{size:14})})]}),l.presentation_feedback&&t.jsx("div",{className:"px-3 py-2 bg-amber-50/50 border-t border-amber-100",children:t.jsx("p",{className:"text-[10px] text-amber-800",children:l.presentation_feedback})})]})}function Qj({dish:l,onRated:i,onClose:o}){const[d,x]=u.useState(null),[f,p]=u.useState(null),[j,h]=u.useState(!1),[y,v]=u.useState(null),[b,g]=u.useState(""),[T,_]=u.useState(!1),A=u.useRef(null),E=u.useRef(null);u.useEffect(()=>(As(),()=>{Ds(),A.current&&clearTimeout(A.current),f&&URL.revokeObjectURL(f)}),[]);function k(Q){const L=Q.target.files[0];L&&(x(L),p(URL.createObjectURL(L)),v(null),g(""))}async function w(){if(d){h(!0),g("");try{const L=(await nt.uploadDishPhoto(d)).url,ne=await nt.ratePresentation(l.id,L);v(ne.rating||ne)}catch(Q){g(Q.message)}finally{h(!1)}}}function B(){_(!0),A.current=setTimeout(()=>{y?i():o()},280)}return Rs.createPortal(t.jsxs("div",{className:"fixed inset-0 z-[10010]",children:[t.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:B}),t.jsxs("div",{className:`absolute bottom-0 left-0 right-0 bg-white rounded-t-2xl max-h-[85dvh] flex flex-col ${T?"animate-slide-down":"animate-slide-up"}`,children:[t.jsx("div",{className:"flex justify-center pt-2 pb-1",children:t.jsx("div",{className:"w-10 h-1 rounded-full bg-gray-300"})}),t.jsxs("div",{className:"flex items-center justify-between px-5 py-3 border-b border-gray-100",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-bold text-gray-900 flex items-center gap-2",children:[t.jsx(lr,{size:16,className:"text-amber-500"}),"Rate Presentation"]}),t.jsx("p",{className:"text-[10px] text-gray-400 mt-0.5",children:l.dish_name})]}),t.jsx("button",{onClick:B,className:"p-1",children:t.jsx(Ee,{size:18,className:"text-gray-400"})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto px-5 py-4 scroll-touch",children:[b&&t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl px-4 py-2 mb-3 text-sm text-red-700 flex items-center gap-2",children:[t.jsx(St,{size:14}),b]}),!y&&t.jsxs("div",{className:"text-center",children:[f?t.jsxs("div",{className:"mb-4",children:[t.jsx("img",{src:f,alt:"Dish photo",className:"w-full max-w-xs mx-auto rounded-xl border border-gray-200 shadow-sm"}),t.jsx("button",{onClick:()=>{x(null),p(null)},className:"text-xs text-gray-500 hover:text-red-500 mt-2",children:"Change photo"})]}):t.jsxs("div",{onClick:()=>E.current?.click(),className:"bg-amber-50 border-2 border-dashed border-amber-300 rounded-xl p-8 mb-4 cursor-pointer hover:bg-amber-100 transition",children:[t.jsx(Kf,{size:40,className:"text-amber-400 mx-auto mb-3"}),t.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Tap to upload dish photo"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG, or WebP"})]}),t.jsx("input",{ref:E,type:"file",accept:"image/jpeg,image/png,image/webp",onChange:k,className:"hidden"}),t.jsx("p",{className:"text-[10px] text-gray-400 mt-2 max-w-xs mx-auto",children:"AI will rate plating, color, garnish and portion on a 1-5 scale"})]}),j&&t.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[t.jsx(Ue,{size:28,className:"animate-spin text-amber-500 mb-3"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Analyzing presentation..."})]}),y&&t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"flex items-center justify-center gap-1 mb-3",children:[1,2,3,4,5].map(Q=>t.jsx(lr,{size:28,className:Q<=(y.score||0)?"fill-amber-400 text-amber-400":"text-gray-200"},Q))}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:[y.score,"/5"]}),y.feedback&&t.jsx("p",{className:"text-sm text-gray-600 bg-amber-50 rounded-xl px-4 py-3 mt-3 text-left",children:y.feedback}),y.tips&&y.tips.length>0&&t.jsxs("div",{className:"mt-3 text-left",children:[t.jsx("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Tips"}),t.jsx("ul",{className:"space-y-1.5",children:y.tips.map((Q,L)=>t.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[t.jsx("span",{className:"w-4 h-4 rounded-full bg-amber-100 text-amber-700 text-[10px] flex items-center justify-center shrink-0 mt-0.5 font-bold",children:L+1}),t.jsx("span",{className:"text-gray-700",children:Q})]},L))})]}),f&&t.jsx("img",{src:f,alt:"Rated dish",className:"w-32 h-32 object-cover rounded-xl mx-auto mt-4 border border-gray-200"})]})]}),t.jsx("div",{className:"px-5 py-3 border-t border-gray-100",children:y?t.jsxs("button",{onClick:B,className:"w-full bg-green-600 text-white py-2.5 rounded-xl text-sm font-semibold flex items-center justify-center gap-2",children:[t.jsx(Yt,{size:16})," Done"]}):t.jsxs("button",{onClick:w,disabled:!d||j,className:"w-full bg-amber-500 hover:bg-amber-600 text-white py-2.5 rounded-xl text-sm font-semibold disabled:opacity-40 flex items-center justify-center gap-2",children:[j?t.jsx(Ue,{size:16,className:"animate-spin"}):t.jsx(lr,{size:16}),j?"Analyzing...":"Rate Presentation"]})})]})]}),document.body)}function Zj({planId:l,onClose:i}){const[o,d]=u.useState([]),[x,f]=u.useState(!0),[p,j]=u.useState(!1),h=u.useRef(null);u.useEffect(()=>(As(),y(),()=>{Ds(),h.current&&clearTimeout(h.current)}),[]);async function y(){f(!0);try{const _=await nt.audit(l);d(_.audit||[])}catch{d([])}finally{f(!1)}}function v(){j(!0),h.current=setTimeout(i,280)}function b(_){return{create_plan:"Created plan",update_portions:"Updated portions",change_meal:"Changed meal",add_dish:"Added dish",remove_dish:"Removed dish",ai_suggest:"AI suggested",add_ingredient:"Added ingredient",remove_ingredient:"Removed ingredient",modify_qty:"Modified quantity",confirm_plan:"Confirmed plan",reopen_plan:"Reopened plan",load_recipe:"Loaded recipe",rate_presentation:"Rated presentation"}[_]||_}function g(_){return _?new Date(_).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):""}function T(_){return _.includes("recipe")||_.includes("load")?"text-orange-600 bg-orange-50":_.includes("presentation")||_.includes("rate")?"text-amber-600 bg-amber-50":_.includes("add")?"text-green-600 bg-green-50":_.includes("remove")?"text-red-600 bg-red-50":_.includes("confirm")?"text-green-700 bg-green-50":_.includes("reopen")?"text-amber-700 bg-amber-50":_.includes("modify")||_.includes("update")?"text-blue-600 bg-blue-50":"text-gray-600 bg-gray-50"}return Rs.createPortal(t.jsxs("div",{className:"fixed inset-0 z-[10010]",children:[t.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:v}),t.jsxs("div",{className:`absolute bottom-0 left-0 right-0 bg-white rounded-t-2xl max-h-[85dvh] flex flex-col ${p?"animate-slide-down":"animate-slide-up"}`,children:[t.jsx("div",{className:"flex justify-center pt-2 pb-1",children:t.jsx("div",{className:"w-10 h-1 rounded-full bg-gray-300"})}),t.jsxs("div",{className:"flex items-center justify-between px-5 py-3 border-b border-gray-100",children:[t.jsxs("h3",{className:"text-sm font-bold text-gray-900 flex items-center gap-2",children:[t.jsx(sn,{size:16,className:"text-gray-600"}),"Audit Log"]}),t.jsx("button",{onClick:v,className:"p-1",children:t.jsx(Ee,{size:18,className:"text-gray-400"})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto px-5 py-3 overscroll-contain scroll-touch",children:[x&&t.jsx(ot,{message:"Loading audit trail..."}),!x&&o.length===0&&t.jsx("p",{className:"text-center text-xs text-gray-400 py-8",children:"No audit entries"}),o.map((_,A)=>t.jsxs("div",{className:"flex gap-3 mb-3",children:[t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("div",{className:`w-2 h-2 rounded-full mt-1.5 shrink-0 ${_.action.includes("confirm")?"bg-green-500":_.action.includes("remove")?"bg-red-400":_.action.includes("recipe")||_.action.includes("load")?"bg-orange-500":_.action.includes("presentation")||_.action.includes("rate")?"bg-amber-500":"bg-gray-400"}`}),A<o.length-1&&t.jsx("div",{className:"w-px flex-1 bg-gray-200 mt-1"})]}),t.jsxs("div",{className:"flex-1 pb-2",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[t.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded ${T(_.action)}`,children:b(_.action)}),t.jsx("span",{className:"text-[10px] text-gray-400",children:g(_.created_at)})]}),t.jsx("p",{className:"text-[11px] text-gray-600",children:_.user_name}),_.dish_name&&t.jsx("p",{className:"text-[10px] text-gray-400",children:_.dish_name}),_.new_value&&t.jsxs("div",{className:"text-[10px] text-gray-400 mt-0.5",children:[_.new_value.qty!==void 0&&t.jsxs("span",{children:["Qty: ",_.old_value?.qty??""," \\u2192 ",_.new_value.qty]}),_.new_value.portions!==void 0&&t.jsxs("span",{children:["Portions: ",_.old_value?.portions??""," \\u2192 ",_.new_value.portions]}),_.new_value.dish_name&&t.jsxs("span",{children:["Dish: ",_.new_value.dish_name]}),_.new_value.status&&t.jsxs("span",{children:["Status: ",_.old_value?.status??""," \\u2192 ",_.new_value.status]}),_.new_value.reason&&t.jsxs("span",{children:["Reason: ",_.new_value.reason]}),_.new_value.score!==void 0&&t.jsxs("span",{children:["Score: ",_.new_value.score,"/5"]})]})]})]},_.id))]})]})]}),document.body)}const Xj=[{value:"lunch",label:"Lunch",icon:""},{value:"dinner",label:"Dinner",icon:""}];function Kj(l){return new Date(l+"T00:00:00").toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short",year:"numeric"})}function ff(l){return l===new Date().toISOString().split("T")[0]}function Jj(){Ie();const{campId:l}=ya(),[i,o]=u.useState(new Date().toISOString().split("T")[0]),[d,x]=u.useState("lunch"),[f,p]=u.useState(null),[j,h]=u.useState([]),[y,v]=u.useState([]),[b,g]=u.useState(!0),[T,_]=u.useState("");u.useEffect(()=>{A()},[i,d,l]);async function A(){g(!0),_("");try{const w=await nt.plan(i,d);p(w.plan),h(w.dishes||[]);const B=[];for(const Q of w.dishes||[])for(const L of Q.ingredients)L.is_removed||L.is_primary&&B.push({...L,dish_name:Q.dish_name,dish_id:Q.id});v(B)}catch(w){_(w.message)}finally{g(!1)}}function E(w){const B=new Date(i+"T00:00:00");B.setDate(B.getDate()+w),o(B.toISOString().split("T")[0])}async function k(w,B,Q){const L=Q===""?null:parseFloat(Q);try{await nt.updateDailyTracking(w,{[B]:L}),v(ne=>ne.map(J=>J.id===w?{...J,[B]:L}:J))}catch(ne){_(ne.message)}}return t.jsxs("div",{className:"pb-8",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("div",{children:[t.jsxs("h1",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[t.jsx(sn,{size:22,className:"text-blue-600"}),"Daily Groceries"]}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Order & track daily ingredients"})]})}),t.jsxs("div",{className:"flex items-center justify-between bg-white rounded-xl border border-gray-100 px-4 py-3 mb-3",children:[t.jsx("button",{onClick:()=>E(-1),className:"p-1.5 rounded-lg hover:bg-gray-100 active:bg-gray-200",children:t.jsx(Ia,{size:20,className:"text-gray-600"})}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm font-semibold text-gray-900",children:Kj(i)}),ff(i)&&t.jsx("span",{className:"text-[10px] text-green-600 font-medium",children:"Today"}),!ff(i)&&t.jsx("button",{onClick:()=>o(new Date().toISOString().split("T")[0]),className:"text-[10px] text-blue-600 font-medium",children:"Go to Today"})]}),t.jsx("button",{onClick:()=>E(1),className:"p-1.5 rounded-lg hover:bg-gray-100 active:bg-gray-200",children:t.jsx(yt,{size:20,className:"text-gray-600"})})]}),t.jsx("div",{className:"flex gap-2 mb-3",children:Xj.map(w=>t.jsxs("button",{onClick:()=>x(w.value),className:`flex-1 py-2.5 rounded-xl text-sm font-semibold transition-all ${d===w.value?"bg-blue-500 text-white shadow-sm":"bg-white text-gray-600 border border-gray-200"}`,children:[w.icon," ",w.label]},w.value))}),T&&t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl px-4 py-3 mb-3 flex items-center gap-2",children:[t.jsx(St,{size:16,className:"text-red-500 shrink-0"}),t.jsx("p",{className:"text-sm text-red-700 flex-1",children:T}),t.jsx("button",{onClick:()=>_(""),children:t.jsx(Ee,{size:16,className:"text-red-400"})})]}),b&&t.jsx(ot,{message:"Loading groceries..."}),!b&&t.jsxs(t.Fragment,{children:[!f&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 p-6 text-center",children:[t.jsx(sn,{size:36,className:"text-gray-300 mx-auto mb-2"}),t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"No menu plan for this day"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Create a menu plan first to see daily groceries"})]}),f&&y.length===0&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 p-6 text-center mb-3",children:[t.jsx(sn,{size:32,className:"text-gray-300 mx-auto mb-2"}),t.jsx("p",{className:"text-sm text-gray-500",children:"No daily ingredients yet"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Add daily ingredients from the add row below"})]}),f&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-100",children:[t.jsx(Fj,{dishes:j,onAdded:A,onError:_}),y.length>0&&t.jsxs("div",{className:"grid grid-cols-[1fr_60px_60px_60px_60px] gap-1 px-3 py-2 bg-gray-50 border-y border-gray-100 text-[10px] font-semibold text-gray-500 uppercase tracking-wider",children:[t.jsx("span",{children:"Item"}),t.jsx("span",{className:"text-center",children:"Stock"}),t.jsx("span",{className:"text-center",children:"Order"}),t.jsx("span",{className:"text-center",children:"Recv"}),t.jsx("span",{className:"text-center",children:"Used"})]}),y.map(w=>t.jsx(Ij,{ingredient:w,onUpdate:k},w.id))]})]})]})}function Fj({dishes:l,onAdded:i,onError:o}){const[d,x]=u.useState(!1),[f,p]=u.useState(""),[j,h]=u.useState([]),[y,v]=u.useState(!1),[b,g]=u.useState(null),[T,_]=u.useState(""),[A,E]=u.useState(""),[k,w]=u.useState(!1),B=u.useRef(null),Q=u.useRef(null);u.useEffect(()=>{l.length>0&&!A&&E(String(l[0].id))},[l]),u.useEffect(()=>{if(!f.trim()||f.trim().length<2){h([]);return}return clearTimeout(Q.current),Q.current=setTimeout(async()=>{v(!0);try{const J=await nt.searchItems(f.trim());h(J.items||[])}catch{h([])}finally{v(!1)}},300),()=>clearTimeout(Q.current)},[f]);function L(J){g(J),p(J.name),h([])}async function ne(){if(!(!b||!T||!A)){w(!0);try{await nt.addIngredient(parseInt(A),b.id,parseFloat(T),b.uom||"kg"),g(null),p(""),_(""),h([]),i()}catch(J){o(J.message)}finally{w(!1)}}}return d?t.jsxs("div",{className:"border-b border-gray-100 px-3 py-3 bg-blue-50/30",children:[t.jsxs("div",{className:"relative mb-2",children:[t.jsx(Vt,{size:14,className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{ref:B,type:"text",value:f,onChange:J=>{p(J.target.value),g(null)},placeholder:"Search item...",className:"w-full pl-8 pr-8 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-200 focus:border-blue-400"}),t.jsx("button",{onClick:()=>{x(!1),p(""),g(null),h([])},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t.jsx(Ee,{size:14})}),j.length>0&&!b&&t.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto z-50",children:j.map(J=>t.jsxs("button",{onClick:()=>L(J),className:"w-full text-left px-3 py-2.5 text-sm hover:bg-blue-50 border-b border-gray-50 last:border-0",children:[t.jsx("span",{className:"font-medium text-gray-900",children:J.name}),t.jsx("span",{className:"text-xs text-gray-400 ml-2",children:J.uom}),J.stock_qty!=null&&t.jsxs("span",{className:"text-xs text-gray-400 ml-1",children:[" Stock: ",J.stock_qty]})]},J.id))}),y&&t.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg px-3 py-2 text-xs text-gray-400 flex items-center gap-2",children:[t.jsx(Ue,{size:12,className:"animate-spin"})," Searching..."]})]}),b&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"number",value:T,onChange:J=>_(J.target.value),placeholder:"Qty",className:"w-20 border border-gray-200 rounded-lg px-2 py-1.5 text-sm focus:outline-none focus:ring-2 focus:ring-blue-200"}),t.jsx("span",{className:"text-xs text-gray-500",children:b.uom||"kg"}),l.length>1&&t.jsx("select",{value:A,onChange:J=>E(J.target.value),className:"flex-1 border border-gray-200 rounded-lg px-2 py-1.5 text-xs text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-200 appearance-none bg-white",children:l.map(J=>t.jsx("option",{value:J.id,children:J.dish_name},J.id))}),t.jsxs("button",{onClick:ne,disabled:!T||k,className:"bg-blue-500 text-white px-3 py-1.5 rounded-lg text-sm font-medium disabled:opacity-40 flex items-center gap-1",children:[k?t.jsx(Ue,{size:14,className:"animate-spin"}):t.jsx(Yt,{size:14}),"Add"]})]})]}):t.jsxs("button",{onClick:()=>{x(!0),setTimeout(()=>B.current?.focus(),100)},className:"w-full flex items-center gap-2 px-3 py-3 text-sm text-gray-400 hover:text-blue-600 hover:bg-blue-50/50 transition border-b border-gray-100",children:[t.jsx(Ve,{size:16}),t.jsx("span",{children:"Add item..."})]})}function Ij({ingredient:l,onUpdate:i}){const o=l,[d,x]=u.useState(o.ordered_qty??""),[f,p]=u.useState(o.received_qty??""),[j,h]=u.useState(o.consumed_qty??"");u.useEffect(()=>{x(o.ordered_qty??""),p(o.received_qty??""),h(o.consumed_qty??"")},[o.ordered_qty,o.received_qty,o.consumed_qty]);function y(v,b,g){(b===""?null:parseFloat(b))!==(g??null)&&i(o.id,v,b)}return t.jsxs("div",{className:"grid grid-cols-[1fr_60px_60px_60px_60px] gap-1 px-3 py-2.5 border-b border-gray-50 items-center",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:o.item_name}),t.jsxs("p",{className:"text-[10px] text-gray-400 truncate",children:[o.dish_name,"  ",o.final_qty,o.uom]})]}),t.jsx("div",{className:"text-center",children:t.jsx("span",{className:"text-xs text-gray-600",children:o.stock_qty!=null?o.stock_qty:""})}),t.jsx("div",{children:t.jsx("input",{type:"number",value:d,onChange:v=>x(v.target.value),onBlur:()=>y("ordered_qty",d,o.ordered_qty),placeholder:"",className:"w-full text-center text-xs border border-gray-200 rounded px-1 py-1 focus:outline-none focus:ring-1 focus:ring-blue-300 focus:border-blue-400"})}),t.jsx("div",{children:t.jsx("input",{type:"number",value:f,onChange:v=>p(v.target.value),onBlur:()=>y("received_qty",f,o.received_qty),placeholder:"",className:"w-full text-center text-xs border border-gray-200 rounded px-1 py-1 focus:outline-none focus:ring-1 focus:ring-blue-300 focus:border-blue-400"})}),t.jsx("div",{children:t.jsx("input",{type:"number",value:j,onChange:v=>h(v.target.value),onBlur:()=>y("consumed_qty",j,o.consumed_qty),placeholder:"",className:"w-full text-center text-xs border border-gray-200 rounded px-1 py-1 focus:outline-none focus:ring-1 focus:ring-blue-300 focus:border-blue-400"})})]})}function Ed(l){const i=new Date(l+"T00:00:00"),o=i.getDay(),d=i.getDate()-o+(o===0?-6:1);return i.setDate(d),i.toISOString().split("T")[0]}function Wj(l){const i=new Date(l+"T00:00:00"),o=new Date(l+"T00:00:00");o.setDate(o.getDate()+6);const d={day:"numeric",month:"short"};return`${i.toLocaleDateString("en-GB",d)}  ${o.toLocaleDateString("en-GB",d)}, ${o.getFullYear()}`}function hf(l){return l===Ed(new Date().toISOString().split("T")[0])}function Pj(){Ie();const{campId:l}=ya(),[i,o]=u.useState(()=>Ed(new Date().toISOString().split("T")[0])),[d,x]=u.useState([]),[f,p]=u.useState(!0),[j,h]=u.useState("");u.useEffect(()=>{y()},[i,l]);async function y(){p(!0),h("");try{const g=await nt.weeklyIngredients(i);x(g.ingredients||[])}catch(g){h(g.message)}finally{p(!1)}}function v(g){const T=new Date(i+"T00:00:00");T.setDate(T.getDate()+g*7),o(T.toISOString().split("T")[0])}async function b(g,T,_){const A=_===""?null:parseFloat(_);try{await nt.updateWeeklyGrocery(i,g,{[T]:A}),x(E=>E.map(k=>k.item_id===g?{...k,[T]:A}:k))}catch(E){h(E.message)}}return t.jsxs("div",{className:"pb-8",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("div",{children:[t.jsxs("h1",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[t.jsx(ks,{size:22,className:"text-purple-600"}),"Weekly Groceries"]}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Common ingredients for the week"})]})}),t.jsxs("div",{className:"flex items-center justify-between bg-white rounded-xl border border-gray-100 px-4 py-3 mb-3",children:[t.jsx("button",{onClick:()=>v(-1),className:"p-1.5 rounded-lg hover:bg-gray-100 active:bg-gray-200",children:t.jsx(Ia,{size:20,className:"text-gray-600"})}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm font-semibold text-gray-900",children:Wj(i)}),hf(i)&&t.jsx("span",{className:"text-[10px] text-green-600 font-medium",children:"This Week"}),!hf(i)&&t.jsx("button",{onClick:()=>o(Ed(new Date().toISOString().split("T")[0])),className:"text-[10px] text-purple-600 font-medium",children:"Go to This Week"})]}),t.jsx("button",{onClick:()=>v(1),className:"p-1.5 rounded-lg hover:bg-gray-100 active:bg-gray-200",children:t.jsx(yt,{size:20,className:"text-gray-600"})})]}),j&&t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl px-4 py-3 mb-3 flex items-center gap-2",children:[t.jsx(St,{size:16,className:"text-red-500 shrink-0"}),t.jsx("p",{className:"text-sm text-red-700 flex-1",children:j}),t.jsx("button",{onClick:()=>h(""),children:t.jsx(Ee,{size:16,className:"text-red-400"})})]}),f&&t.jsx(ot,{message:"Loading weekly groceries..."}),!f&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-100",children:[t.jsx(eN,{weekStart:i,onAdded:y,onError:h}),d.length>0&&t.jsxs("div",{className:"grid grid-cols-[1fr_64px_64px_64px] gap-1 px-3 py-2 bg-gray-50 border-y border-gray-100 text-[10px] font-semibold text-gray-500 uppercase tracking-wider",children:[t.jsx("span",{children:"Item"}),t.jsx("span",{className:"text-center",children:"Stock"}),t.jsx("span",{className:"text-center",children:"Order"}),t.jsx("span",{className:"text-center",children:"Recv"})]}),d.map(g=>t.jsx(tN,{item:g,onUpdate:b},g.item_id)),d.length===0&&t.jsxs("div",{className:"p-6 text-center",children:[t.jsx(ks,{size:32,className:"text-gray-300 mx-auto mb-2"}),t.jsx("p",{className:"text-sm text-gray-500",children:"No weekly groceries projected"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Items will appear here from menu plans, or add manually above"})]})]})]})}function eN({weekStart:l,onAdded:i,onError:o}){const[d,x]=u.useState(!1),[f,p]=u.useState(""),[j,h]=u.useState([]),[y,v]=u.useState(!1),[b,g]=u.useState(null),[T,_]=u.useState(""),[A,E]=u.useState(!1),k=u.useRef(null),w=u.useRef(null);u.useEffect(()=>{if(!f.trim()||f.trim().length<2){h([]);return}return clearTimeout(w.current),w.current=setTimeout(async()=>{v(!0);try{const L=await nt.searchItems(f.trim());h(L.items||[])}catch{h([])}finally{v(!1)}},300),()=>clearTimeout(w.current)},[f]);function B(L){g(L),p(L.name),h([])}async function Q(){if(!(!b||!T)){E(!0);try{await nt.addWeeklyGrocery(l,b.id,parseFloat(T)),g(null),p(""),_(""),h([]),i()}catch(L){o(L.message)}finally{E(!1)}}}return d?t.jsxs("div",{className:"border-b border-gray-100 px-3 py-3 bg-purple-50/30",children:[t.jsxs("div",{className:"relative mb-2",children:[t.jsx(Vt,{size:14,className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{ref:k,type:"text",value:f,onChange:L=>{p(L.target.value),g(null)},placeholder:"Search item...",className:"w-full pl-8 pr-8 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-200 focus:border-purple-400"}),t.jsx("button",{onClick:()=>{x(!1),p(""),g(null),h([])},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t.jsx(Ee,{size:14})}),j.length>0&&!b&&t.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto z-50",children:j.map(L=>t.jsxs("button",{onClick:()=>B(L),className:"w-full text-left px-3 py-2.5 text-sm hover:bg-purple-50 border-b border-gray-50 last:border-0",children:[t.jsx("span",{className:"font-medium text-gray-900",children:L.name}),t.jsx("span",{className:"text-xs text-gray-400 ml-2",children:L.uom}),L.stock_qty!=null&&t.jsxs("span",{className:"text-xs text-gray-400 ml-1",children:[" Stock: ",L.stock_qty]})]},L.id))}),y&&t.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg px-3 py-2 text-xs text-gray-400 flex items-center gap-2",children:[t.jsx(Ue,{size:12,className:"animate-spin"})," Searching..."]})]}),b&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"number",value:T,onChange:L=>_(L.target.value),placeholder:"Qty",className:"w-20 border border-gray-200 rounded-lg px-2 py-1.5 text-sm focus:outline-none focus:ring-2 focus:ring-purple-200"}),t.jsx("span",{className:"text-xs text-gray-500",children:b.uom||"kg"}),t.jsxs("button",{onClick:Q,disabled:!T||A,className:"bg-purple-500 text-white px-3 py-1.5 rounded-lg text-sm font-medium disabled:opacity-40 flex items-center gap-1",children:[A?t.jsx(Ue,{size:14,className:"animate-spin"}):t.jsx(Yt,{size:14}),"Add"]})]})]}):t.jsxs("button",{onClick:()=>{x(!0),setTimeout(()=>k.current?.focus(),100)},className:"w-full flex items-center gap-2 px-3 py-3 text-sm text-gray-400 hover:text-purple-600 hover:bg-purple-50/50 transition border-b border-gray-100",children:[t.jsx(Ve,{size:16}),t.jsx("span",{children:"Add item..."})]})}function tN({item:l,onUpdate:i}){const[o,d]=u.useState(l.ordered_qty??""),[x,f]=u.useState(l.received_qty??"");u.useEffect(()=>{d(l.ordered_qty??""),f(l.received_qty??"")},[l.ordered_qty,l.received_qty]);function p(j,h,y){(h===""?null:parseFloat(h))!==(y??null)&&i(l.item_id,j,h)}return t.jsxs("div",{className:"grid grid-cols-[1fr_64px_64px_64px] gap-1 px-3 py-2.5 border-b border-gray-50 items-center",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:l.item_name}),t.jsxs("p",{className:"text-[10px] text-gray-400 truncate",children:["Projected: ",l.total_qty,l.uom,l.is_manual?"  manual":""]})]}),t.jsx("div",{className:"text-center",children:t.jsx("span",{className:"text-xs text-gray-600",children:l.stock_qty!=null?l.stock_qty:""})}),t.jsx("div",{children:t.jsx("input",{type:"number",value:o,onChange:j=>d(j.target.value),onBlur:()=>p("ordered_qty",o,l.ordered_qty),placeholder:"",className:"w-full text-center text-xs border border-gray-200 rounded px-1 py-1 focus:outline-none focus:ring-1 focus:ring-purple-300 focus:border-purple-400"})}),t.jsx("div",{children:t.jsx("input",{type:"number",value:x,onChange:j=>f(j.target.value),onBlur:()=>p("received_qty",x,l.received_qty),placeholder:"",className:"w-full text-center text-xs border border-gray-200 rounded px-1 py-1 focus:outline-none focus:ring-1 focus:ring-purple-300 focus:border-purple-400"})})]})}const za=["chef"],aN=[{path:"/app",icon:Xi,label:"Dashboard",end:!0,access:"all",exclude:za,guide:"nav-dashboard"},{path:"/app/daily",icon:ks,label:"Daily View",access:"all",exclude:za,guide:"nav-daily"},{path:"/app/orders",icon:_t,label:"Orders",access:"all",exclude:za,guide:"nav-orders"},{path:"/app/dispatch",icon:xr,label:"Dispatch",access:"manager",guide:"nav-dispatch"},{path:"/app/stock",icon:Fa,label:"Stock",access:"all",exclude:za,guide:"nav-stock"},{path:"/app/items",icon:ha,label:"Items",access:"all",exclude:za,guide:"nav-items"},{path:"/app/receive",icon:Ts,label:"Receive",access:"all",exclude:za,guide:"nav-receive"},{path:"/app/issue",icon:zs,label:"Issue",access:"all",exclude:za,guide:"nav-issue"},{path:"/app/pos",icon:xa,label:"POS",access:"all",exclude:za,guide:"nav-pos"},{path:"/app/bar-menu",icon:Fn,label:"Bar Menu",access:"all",exclude:za,guide:"nav-bar-menu"},{path:"/app/recipes",icon:al,label:"Recipes",access:"all",guide:"nav-recipes"},{path:"/app/menu-plan",icon:ta,label:"Menu Plan",roles:["chef","camp_manager","admin","director"],guide:"nav-menu-plan"},{path:"/app/daily-groceries",icon:sn,label:"Daily Groceries",roles:["chef","camp_manager","admin","director"],guide:"nav-daily-groceries"},{path:"/app/weekly-groceries",icon:ks,label:"Weekly Groceries",roles:["chef","camp_manager","admin","director"],guide:"nav-weekly-groceries"},{path:"/app/alerts",icon:mr,label:"Alerts",access:"all",exclude:za,guide:"nav-alerts"},{path:"/app/reports",icon:Zi,label:"Reports",access:"manager",guide:"nav-reports"},{path:"/app/users",icon:_a,label:"Users",roles:["admin","director","stores_manager"],guide:"nav-users"},{path:"/app/settings",icon:sh,label:"Settings",access:"manager",guide:"nav-settings"}];function sN(l,i){return l.exclude&&l.exclude.includes(i)?!1:l.roles?l.roles.includes(i):l.access==="all"?!0:l.access==="manager"?el(i):!0}function nN(){const l=Ie();function i(){localStorage.removeItem("kcl_token"),localStorage.removeItem("kcl_stores"),window.location.hash="#/login",window.location.reload()}return t.jsxs("aside",{className:"hidden lg:flex lg:flex-col lg:w-64 lg:fixed lg:inset-y-0 bg-white border-r border-gray-200",children:[t.jsxs("div",{className:"flex items-center gap-3 px-6 py-5 border-b border-gray-100",children:[t.jsx("div",{className:"w-10 h-10 bg-green-600 rounded-xl flex items-center justify-center",children:t.jsx("span",{className:"text-white font-bold text-sm",children:"KC"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"font-bold text-gray-900 text-sm",children:"KCL Stores"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Karibu Camps"})]})]}),t.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:aN.filter(o=>sN(o,l?.role)).map(o=>t.jsxs(Hi,{to:o.path,end:o.end,"data-guide":o.guide,className:({isActive:d})=>`flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition ${d?"bg-green-50 text-green-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[t.jsx(o.icon,{size:20}),o.label]},o.path))}),t.jsxs("div",{className:"border-t border-gray-100 p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("div",{className:"w-9 h-9 bg-green-100 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-green-700 font-medium text-sm",children:l?.name?.charAt(0)||"?"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:l?.name}),t.jsxs("p",{className:"text-xs text-gray-500 truncate",children:[l?.camp_name||"Head Office","  ",l?.role?.replace(/_/g," ")]})]})]}),t.jsxs("button",{onClick:i,className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg transition",children:[t.jsx($d,{size:18}),"Sign Out"]})]})]})}const Ta=["chef"],lN=[{path:"/app",icon:Xi,label:"Home",end:!0},{path:"/app/orders",icon:_t,label:"Orders"},{path:"/app/pos",icon:xa,label:"POS"},{path:"/app/stock",icon:Fa,label:"Stock"}],rN=[{path:"/app/menu-plan",icon:ta,label:"Menu",end:!0},{path:"/app/daily-groceries",icon:sn,label:"Daily"},{path:"/app/weekly-groceries",icon:ks,label:"Weekly"},{path:"/app/recipes",icon:al,label:"Recipes"}],iN=[{path:"/app",icon:Xi,label:"Dashboard",end:!0,access:"all",exclude:Ta},{path:"/app/daily",icon:ks,label:"Daily View",access:"all",exclude:Ta},{path:"/app/orders",icon:_t,label:"Orders",access:"all",exclude:Ta},{path:"/app/dispatch",icon:xr,label:"Dispatch",access:"manager"},{path:"/app/stock",icon:Fa,label:"Stock",access:"all",exclude:Ta},{path:"/app/items",icon:ha,label:"Items",access:"all",exclude:Ta},{path:"/app/receive",icon:Ts,label:"Receive",access:"all",exclude:Ta},{path:"/app/issue",icon:zs,label:"Issue",access:"all",exclude:Ta},{path:"/app/pos",icon:xa,label:"POS",access:"all",exclude:Ta},{path:"/app/bar-menu",icon:Fn,label:"Bar Menu",access:"all",exclude:Ta},{path:"/app/recipes",icon:al,label:"Recipes",access:"all"},{path:"/app/menu-plan",icon:ta,label:"Menu Plan",roles:["chef","camp_manager","admin","director"]},{path:"/app/daily-groceries",icon:sn,label:"Daily Groceries",roles:["chef","camp_manager","admin","director"]},{path:"/app/weekly-groceries",icon:ks,label:"Weekly Groceries",roles:["chef","camp_manager","admin","director"]},{path:"/app/alerts",icon:mr,label:"Alerts",access:"all",exclude:Ta},{path:"/app/reports",icon:Zi,label:"Reports",access:"manager"},{path:"/app/users",icon:_a,label:"Users",roles:["admin","director","stores_manager"]},{path:"/app/settings",icon:sh,label:"Settings",access:"manager"}];function cN(l,i){return l.exclude&&l.exclude.includes(i)?!1:l.roles?l.roles.includes(i):l.access==="all"?!0:l.access==="manager"?el(i):!0}function oN(){const[l,i]=u.useState(!1),[o,d]=u.useState(!1),x=Ie(),f=ga(),p=u.useRef(null),j=x?.role==="chef"?rN:lN,y=!j.map(_=>_.path).some(_=>_==="/app"?f.pathname==="/app"||f.pathname==="/app/":f.pathname.startsWith(_));u.useEffect(()=>{if(l)return As(),()=>Ds()},[l]),u.useEffect(()=>()=>{p.current&&clearTimeout(p.current)},[]);function v(){o||(i(!0),d(!1))}function b(){!l||o||(d(!0),p.current=setTimeout(()=>{i(!1),d(!1)},200))}function g(){l?b():v()}function T(){localStorage.removeItem("kcl_token"),localStorage.removeItem("kcl_stores"),window.location.hash="#/login",window.location.reload()}return t.jsxs(t.Fragment,{children:[t.jsx("nav",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50",children:t.jsxs("div",{className:"flex justify-around items-center h-16 px-1",children:[j.map(_=>t.jsxs(Hi,{to:_.path,end:_.end,onClick:b,className:({isActive:A})=>`flex flex-col items-center justify-center gap-0.5 px-2 py-1 rounded-lg min-w-[52px] transition ${A&&!l?"text-green-600":"text-gray-400 hover:text-gray-600"}`,children:[t.jsx(_.icon,{size:22}),t.jsx("span",{className:"text-[10px] font-medium",children:_.label})]},_.path)),t.jsxs("button",{onClick:g,className:`flex flex-col items-center justify-center gap-0.5 px-2 py-1 rounded-lg min-w-[52px] transition ${l||y?"text-green-600":"text-gray-400 hover:text-gray-600"}`,children:[t.jsx(Kv,{size:22}),t.jsx("span",{className:"text-[10px] font-medium",children:"More"})]})]})}),l&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`lg:hidden fixed inset-0 bg-black/40 z-[60] ${o?"animate-backdrop-out":"animate-backdrop-in"}`,onClick:b}),t.jsxs("div",{className:`lg:hidden fixed bottom-0 left-0 right-0 z-[70] bg-white rounded-t-2xl shadow-xl max-h-[80vh] overflow-hidden ${o?"animate-slide-down":"animate-slide-up"}`,children:[t.jsxs("div",{className:"flex items-center justify-between px-5 pt-3 pb-2 border-b border-gray-100",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-green-700 font-medium text-xs",children:x?.name?.charAt(0)||"?"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:x?.name}),t.jsxs("p",{className:"text-[11px] text-gray-500",children:[x?.camp_name||"Head Office","  ",x?.role?.replace(/_/g," ")]})]})]}),t.jsx("button",{onClick:b,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg compact-btn",style:{minHeight:"auto"},children:t.jsx(Ee,{size:20})})]}),t.jsx("div",{className:"overflow-y-auto max-h-[60vh] px-4 py-3 scroll-touch",children:t.jsx("div",{className:"grid grid-cols-4 gap-2",children:iN.filter(_=>cN(_,x?.role)).map(_=>{const A=_.end?f.pathname===_.path:f.pathname.startsWith(_.path)&&_.path!=="/app";return t.jsxs(Hi,{to:_.path,onClick:b,className:`flex flex-col items-center gap-1.5 px-2 py-3 rounded-xl transition ${A?"bg-green-50 text-green-700":"text-gray-600 hover:bg-gray-50"}`,children:[t.jsx(_.icon,{size:22}),t.jsx("span",{className:"text-[11px] font-medium text-center leading-tight",children:_.label})]},_.path)})})}),t.jsx("div",{className:"border-t border-gray-100 px-4 py-3 pb-6",children:t.jsxs("button",{onClick:T,className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 rounded-xl transition",children:[t.jsx($d,{size:18}),"Sign Out"]})})]})]})]})}function oh(){const[l,i]=u.useState(navigator.onLine),[o,d]=u.useState(0),[x,f]=u.useState("idle"),p=u.useCallback(async()=>{const j=await Gf();d(j)},[]);return u.useEffect(()=>{const j=()=>{i(!0),zd()},h=()=>i(!1),y=()=>f("syncing"),v=_=>{f(_.detail.synced>0?"done":"idle"),p(),_.detail.synced>0&&setTimeout(()=>f("idle"),3e3)},b=()=>f("error"),g=()=>p();window.addEventListener("online",j),window.addEventListener("offline",h),window.addEventListener("sync:start",y),window.addEventListener("sync:complete",v),window.addEventListener("sync:error",b),window.addEventListener("sync:item-synced",g),p();const T=setInterval(p,5e3);return()=>{window.removeEventListener("online",j),window.removeEventListener("offline",h),window.removeEventListener("sync:start",y),window.removeEventListener("sync:complete",v),window.removeEventListener("sync:error",b),window.removeEventListener("sync:item-synced",g),clearInterval(T)}},[p]),{isOnline:l,pendingSyncCount:o,syncState:x}}function dN(){const{isOnline:l,pendingSyncCount:i,syncState:o}=oh();return l?o==="syncing"?t.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-amber-50 rounded-lg",title:"Syncing...",children:[t.jsx(th,{size:16,className:"text-amber-500 animate-spin"}),t.jsx("span",{className:"text-xs font-medium text-amber-600 hidden sm:inline",children:"Syncing"})]}):i>0?t.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-amber-50 rounded-lg",title:`${i} pending`,children:[t.jsxs("div",{className:"relative",children:[t.jsx(lf,{size:16,className:"text-amber-500"}),t.jsx("span",{className:"absolute -top-1 -right-1.5 w-3.5 h-3.5 bg-amber-500 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-[9px] font-bold text-white",children:i>9?"9+":i})})]}),t.jsxs("span",{className:"text-xs font-medium text-amber-600 hidden sm:inline",children:[i," pending"]})]}):o==="done"?t.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-green-50 rounded-lg",title:"All synced",children:[t.jsx(lf,{size:16,className:"text-green-500"}),t.jsx("span",{className:"text-xs font-medium text-green-600 hidden sm:inline",children:"Synced"})]}):null:t.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-red-50 rounded-lg",title:"You're offline",children:[t.jsx(lh,{size:16,className:"text-red-500"}),t.jsx("span",{className:"text-xs font-medium text-red-600 hidden sm:inline",children:"Offline"})]})}function uN(){const l=Ie(),{state:i,dispatch:o}=rn(),[d,x]=u.useState(!1),f=i.camps.find(j=>j.id===i.selectedCampId);function p(j){o({type:"SELECT_CAMP",payload:j}),x(!1)}return t.jsxs("header",{className:"bg-white border-b border-gray-200 px-4 lg:px-6 h-14 flex items-center justify-between sticky top-0 z-40",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"lg:hidden w-8 h-8 bg-green-600 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-white font-bold text-xs",children:"KC"})}),el(l?.role)&&i.camps.length>0?t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>x(!d),"data-guide":"camp-selector",className:"flex items-center gap-2 px-3 py-1.5 bg-gray-50 hover:bg-gray-100 rounded-lg transition text-sm font-medium text-gray-700",children:[f?f.name:"All Camps",t.jsx(vt,{size:16})]}),d&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>x(!1)}),t.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-20 min-w-[180px]",children:[t.jsx("button",{onClick:()=>p(null),className:`w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 ${i.selectedCampId?"text-gray-700":"text-green-600 font-medium"}`,children:"All Camps"}),i.camps.map(j=>t.jsxs("button",{onClick:()=>p(j.id),className:`w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 ${i.selectedCampId===j.id?"text-green-600 font-medium":"text-gray-700"}`,children:[j.code,"  ",j.name]},j.id))]})]})]}):t.jsx("span",{className:"text-sm font-medium text-gray-700",children:l?.camp_name||"KCL Stores"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(dN,{}),t.jsxs("button",{"data-guide":"notifications-btn",className:"relative p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition",children:[t.jsx(mr,{size:20}),t.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full"})]}),t.jsxs("div",{className:"hidden sm:flex items-center gap-2",children:[t.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-green-700 font-medium text-xs",children:l?.name?.charAt(0)||"?"})}),t.jsx("span",{className:"text-sm text-gray-700 font-medium",children:l?.name})]})]})]})}function mN(){const{isOnline:l,pendingSyncCount:i,syncState:o}=oh();return o==="done"?t.jsxs("div",{className:"bg-green-50 border-b border-green-200 px-4 py-2 flex items-center justify-center gap-2",children:[t.jsx(Yt,{size:16,className:"text-green-600"}),t.jsx("span",{className:"text-sm text-green-700 font-medium",children:"All changes synced"})]}):l?o==="syncing"?t.jsxs("div",{className:"bg-blue-50 border-b border-blue-200 px-4 py-2 flex items-center justify-center gap-2",children:[t.jsx(th,{size:16,className:"text-blue-600 animate-spin"}),t.jsxs("span",{className:"text-sm text-blue-700 font-medium",children:["Syncing ",i," item",i!==1?"s":"","..."]})]}):null:t.jsxs("div",{className:"bg-amber-50 border-b border-amber-200 px-4 py-2 flex items-center justify-center gap-2",children:[t.jsx(lh,{size:16,className:"text-amber-600"}),t.jsxs("span",{className:"text-sm text-amber-700 font-medium",children:["You're offline  changes will sync when connected",i>0&&` (${i} pending)`]})]})}const dh=u.createContext(null),pf="karibu_guide_data";function Ui(){return typeof window>"u"?{x:200,y:400}:{x:window.innerWidth/2,y:window.innerHeight/2}}const xN={isPanelOpen:!1,activeGuide:null,currentStepIndex:0,isRunning:!1,targetRect:null,cursorPosition:Ui(),cursorVisible:!1,isReportFormOpen:!1,completedGuides:[],reports:[]};function fN(l,i){switch(i.type){case"OPEN_PANEL":return{...l,isPanelOpen:!0};case"CLOSE_PANEL":return{...l,isPanelOpen:!1};case"TOGGLE_PANEL":return{...l,isPanelOpen:!l.isPanelOpen};case"START_GUIDE":return{...l,activeGuide:i.payload,currentStepIndex:0,isRunning:!0,isPanelOpen:!1,cursorVisible:!1,targetRect:null,cursorPosition:Ui()};case"NEXT_STEP":{const o=l.currentStepIndex+1,d=l.activeGuide?.steps?.length||0;return o>=d?{...l,activeGuide:null,currentStepIndex:0,isRunning:!1,targetRect:null,cursorVisible:!1,cursorPosition:Ui(),completedGuides:l.activeGuide?[...new Set([...l.completedGuides,l.activeGuide.id])]:l.completedGuides}:{...l,currentStepIndex:o,cursorVisible:!1,targetRect:null}}case"PREV_STEP":return{...l,currentStepIndex:Math.max(0,l.currentStepIndex-1),cursorVisible:!1,targetRect:null};case"GO_TO_STEP":return{...l,currentStepIndex:i.payload,cursorVisible:!1,targetRect:null};case"SET_TARGET_RECT":return{...l,targetRect:i.payload};case"SET_CURSOR":return{...l,cursorPosition:i.payload,cursorVisible:!0};case"HIDE_CURSOR":return{...l,cursorVisible:!1};case"END_GUIDE":{const o=l.activeGuide&&l.currentStepIndex>=(l.activeGuide.steps?.length||0)-1;return{...l,activeGuide:null,currentStepIndex:0,isRunning:!1,targetRect:null,cursorVisible:!1,cursorPosition:Ui(),completedGuides:o&&l.activeGuide?[...new Set([...l.completedGuides,l.activeGuide.id])]:l.completedGuides}}case"OPEN_REPORT":return{...l,isReportFormOpen:!0};case"CLOSE_REPORT":return{...l,isReportFormOpen:!1};case"ADD_REPORT":return{...l,reports:[...l.reports,i.payload],isReportFormOpen:!1};case"LOAD_PERSISTED":return{...l,completedGuides:i.payload.completedGuides||[],reports:i.payload.reports||[]};default:return l}}function hN({children:l}){const[i,o]=u.useReducer(fN,xN);return u.useEffect(()=>{try{const d=localStorage.getItem(pf);d&&o({type:"LOAD_PERSISTED",payload:JSON.parse(d)})}catch{}},[]),u.useEffect(()=>{try{localStorage.setItem(pf,JSON.stringify({completedGuides:i.completedGuides,reports:i.reports}))}catch{}},[i.completedGuides,i.reports]),t.jsx(dh.Provider,{value:{state:i,dispatch:o},children:l})}function pN(){const l=u.useContext(dh);if(!l)throw new Error("useGuideContext must be used within GuideProvider");return l}function Fi(){const{state:l,dispatch:i}=pN(),o=Os(),d=ga(),x=u.useCallback(()=>i({type:"OPEN_PANEL"}),[i]),f=u.useCallback(()=>i({type:"CLOSE_PANEL"}),[i]),p=u.useCallback(()=>i({type:"TOGGLE_PANEL"}),[i]),j=u.useCallback(ne=>{i({type:"START_GUIDE",payload:ne})},[i]),h=u.useCallback(()=>i({type:"NEXT_STEP"}),[i]),y=u.useCallback(()=>i({type:"PREV_STEP"}),[i]),v=u.useCallback(()=>i({type:"END_GUIDE"}),[i]),b=u.useCallback(ne=>{i({type:"SET_TARGET_RECT",payload:ne})},[i]),g=u.useCallback(ne=>{i({type:"SET_CURSOR",payload:ne})},[i]),T=u.useCallback(()=>i({type:"HIDE_CURSOR"}),[i]),_=u.useCallback(()=>i({type:"OPEN_REPORT"}),[i]),A=u.useCallback(()=>i({type:"CLOSE_REPORT"}),[i]),E=u.useCallback(ne=>{i({type:"ADD_REPORT",payload:{...ne,id:Date.now(),timestamp:new Date().toISOString(),page:d.pathname}})},[i,d]),k=u.useCallback(ne=>{d.pathname!==ne&&o(ne)},[o,d]),w=l.activeGuide?.steps?.[l.currentStepIndex]||null,B=l.activeGuide?.steps?.length||0,Q=l.currentStepIndex>=B-1,L=l.currentStepIndex===0;return{...l,currentStep:w,totalSteps:B,isLastStep:Q,isFirstStep:L,openPanel:x,closePanel:f,togglePanel:p,startGuide:j,nextStep:h,prevStep:y,endGuide:v,setTargetRect:b,setCursor:g,hideCursor:T,openReport:_,closeReport:A,addReport:E,navigateToRoute:k}}function gN(){const{isRunning:l,isPanelOpen:i,togglePanel:o,endGuide:d}=Fi();return Ie()?.role==="chef"?null:l?t.jsx("button",{onClick:d,className:"fixed z-[9996] flex items-center justify-center w-12 h-12 rounded-full bg-red-500 hover:bg-red-600 text-white shadow-lg transition-all compact-btn",style:{bottom:88,right:20,minHeight:"auto"},title:"Exit guide",children:t.jsx(Ee,{size:22})}):t.jsx("button",{onClick:o,className:"fixed z-[9996] flex items-center justify-center w-12 h-12 rounded-full text-white shadow-lg transition-all compact-btn",style:{bottom:88,right:20,minHeight:"auto",backgroundColor:i?"#15803d":"#16a34a",animation:i?"none":"guide-fab-pulse 3s ease-in-out infinite"},title:"Help & Guides",children:i?t.jsx(Ee,{size:22}):t.jsx(If,{size:22})})}const gf=768;function uh(){const[l,i]=u.useState(()=>typeof window<"u"?window.innerWidth<=gf:!1);return u.useEffect(()=>{const o=window.matchMedia(`(max-width: ${gf}px)`);function d(x){i(x.matches)}return o.addEventListener?o.addEventListener("change",d):o.addListener(d),i(o.matches),()=>{o.removeEventListener?o.removeEventListener("change",d):o.removeListener(d)}},[]),l}const yN=[{id:"app-overview",title:"App Overview Tour",description:"Get familiar with the KCL Stores dashboard and navigation",icon:"LayoutDashboard",category:"Navigation",keywords:["tour","overview","dashboard","start","begin","help","new","getting started"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-dashboard"]',title:"Dashboard",description:"This is your home page. It shows stock overview, pending orders, and quick stats for your camp.",placement:"right",route:"/app",advanceOn:"next-button"},{target:'[data-guide="nav-orders"]',title:"Orders",description:"Create purchase orders for your camp and track their approval status.",placement:"right",route:"/app",advanceOn:"next-button"},{target:'[data-guide="nav-stock"]',title:"Stock",description:"View current stock levels across all camps. Filter by category and see real-time balances.",placement:"right",route:"/app",advanceOn:"next-button"},{target:'[data-guide="nav-pos"]',title:"POS Terminal",description:"Point of Sale for issuing items directly. Browse categories, add to cart, and checkout.",placement:"right",route:"/app",advanceOn:"next-button"},{target:'[data-guide="nav-bar-menu"]',title:"Bar Menu",description:"The drinks menu with cocktails, beers, and spirits. Place bar orders with stock tracking.",placement:"right",route:"/app",advanceOn:"next-button"},{target:'[data-guide="nav-alerts"]',title:"Alerts",description:"Stock alerts show items running low, critical levels, and dead stock warnings.",placement:"right",route:"/app",advanceOn:"next-button"}]},{id:"navigate-features",title:"Navigate Between Features",description:"Quick tour of all main sections in the app",icon:"LayoutDashboard",category:"Navigation",keywords:["navigate","menu","sidebar","features","sections","where","find"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-items"]',title:"Inventory Items",description:"Browse all 1000+ inventory items with details, categories, and specifications.",placement:"right",route:"/app",advanceOn:"next-button"},{target:'[data-guide="nav-receive"]',title:"Receive Goods",description:"Confirm receipt of dispatched goods. Verify quantities against what was sent.",placement:"right",route:"/app",advanceOn:"next-button"},{target:'[data-guide="nav-issue"]',title:"Issue Vouchers",description:"Issue items to departments  kitchen, housekeeping, bar, maintenance, etc.",placement:"right",route:"/app",advanceOn:"next-button"},{target:'[data-guide="nav-recipes"]',title:"AI Recipes",description:"Get smart recipe suggestions based on ingredients currently in stock.",placement:"right",route:"/app",advanceOn:"next-button"}]}],bN=[{id:"create-new-order",title:"Create a New Order",description:"Learn how to create a purchase order from start to finish",icon:"ShoppingCart",category:"Orders",keywords:["order","purchase","buy","new order","create","request"],estimatedTime:"2 min",steps:[{target:'[data-guide="nav-orders"]',title:"Go to Orders",description:"Click on Orders in the sidebar to see all purchase orders.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="new-order-btn"]',title:"Start New Order",description:'Click "New Order" to begin creating a purchase order for your camp.',placement:"bottom",route:"/app/orders",advanceOn:"click"},{target:'[data-guide="order-search"]',title:"Search for Items",description:"Type the name of an item to search the inventory catalog. You can search by name or item code.",placement:"bottom",route:"/app/orders/new",advanceOn:"next-button"},{target:'[data-guide="order-cart"]',title:"Review Your Cart",description:"Items you add will appear here. Adjust quantities as needed before submitting.",placement:"top",route:"/app/orders/new",advanceOn:"next-button"},{target:'[data-guide="submit-order-btn"]',title:"Submit the Order",description:"When ready, click Submit to send your order for approval by the stores manager.",placement:"top",route:"/app/orders/new",advanceOn:"next-button"}]},{id:"approve-reject-order",title:"Approve or Reject an Order",description:"Review and approve/reject pending purchase orders",icon:"ShoppingCart",category:"Orders",keywords:["approve","reject","review","pending","order","authorization"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-orders"]',title:"Go to Orders",description:"Navigate to the Orders page to see all pending orders.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="status-tab-pending"]',title:"Filter Pending Orders",description:'Click "Pending" to see only orders waiting for your review.',placement:"bottom",route:"/app/orders",advanceOn:"next-button"},{target:'[data-guide="order-list-first"]',title:"Open an Order",description:"Click on any order to view its details, items, and quantities.",placement:"bottom",route:"/app/orders",advanceOn:"next-button"}]},{id:"view-order-history",title:"View Order History",description:"Filter and browse past orders by status and date",icon:"ShoppingCart",category:"Orders",keywords:["history","past","previous","view","order","filter","search"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-orders"]',title:"Go to Orders",description:"Navigate to the Orders page to see your order history.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="order-status-tabs"]',title:"Filter by Status",description:"Use these tabs to filter orders: All, Submitted, Pending, Approved, Received, etc.",placement:"bottom",route:"/app/orders",advanceOn:"next-button"},{target:'[data-guide="order-search-input"]',title:"Search Orders",description:"Search by order number or camp name to find a specific order quickly.",placement:"bottom",route:"/app/orders",advanceOn:"next-button"}]}],vN=[{id:"check-stock-levels",title:"Check Stock Levels",description:"View current stock balances across camps and categories",icon:"Boxes",category:"Stock & Items",keywords:["stock","balance","inventory","quantity","level","check","view","how much"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-stock"]',title:"Go to Stock",description:"Click Stock in the sidebar to view real-time stock levels.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="stock-camp-filter"]',title:"Select a Camp",description:"Choose a camp to see its specific stock. Managers can view any camp.",placement:"bottom",route:"/app/stock",advanceOn:"next-button"},{target:'[data-guide="stock-category-filter"]',title:"Filter by Category",description:"Filter by item category  Food, Beverages, Housekeeping, etc. Color badges show stock status.",placement:"bottom",route:"/app/stock",advanceOn:"next-button"}]},{id:"browse-inventory",title:"Browse Inventory Items",description:"Search and explore the full item catalog",icon:"Package",category:"Stock & Items",keywords:["items","catalog","browse","search","product","inventory","find"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-items"]',title:"Go to Items",description:"Click Items to browse the full inventory catalog  over 1000 items.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="items-search"]',title:"Search Items",description:"Search by item name or code. Results update as you type.",placement:"bottom",route:"/app/items",advanceOn:"next-button"},{target:'[data-guide="items-list-first"]',title:"View Item Details",description:"Click any item to see full details: unit of measure, category, pricing, and stock.",placement:"bottom",route:"/app/items",advanceOn:"next-button"}]},{id:"understanding-alerts",title:"Understanding Stock Alerts",description:"Learn to read and act on stock level warnings",icon:"Bell",category:"Stock & Items",keywords:["alert","warning","low","critical","out of stock","excess","dead"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-alerts"]',title:"Go to Alerts",description:"Click Alerts to see all stock level warnings across your camps.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="alerts-summary"]',title:"Alert Summary",description:"The summary shows counts: low stock (amber), critical (red), out of stock, and excess inventory.",placement:"bottom",route:"/app/alerts",advanceOn:"next-button"},{target:'[data-guide="alerts-tabs"]',title:"Filter Alert Types",description:"Switch between alert types to focus on what matters  low stock, dead stock, or excess items.",placement:"bottom",route:"/app/alerts",advanceOn:"next-button"}]}],jN=[{id:"make-pos-sale",title:"Make a POS Sale",description:"Use the Point of Sale to issue items quickly",icon:"Wine",category:"POS & Bar Menu",keywords:["pos","sale","sell","point of sale","checkout","issue","quick"],estimatedTime:"2 min",steps:[{target:'[data-guide="nav-pos"]',title:"Open POS",description:"Click POS in the sidebar to open the Point of Sale terminal.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="pos-categories"]',title:"Browse Categories",description:"Select a category to filter items  Food, Beverages, Housekeeping, etc.",placement:"bottom",route:"/app/pos",advanceOn:"next-button"},{target:'[data-guide="pos-items"]',title:"Add Items to Cart",description:"Tap any item to add it to your cart. Tap again to increase quantity.",placement:"bottom",route:"/app/pos",advanceOn:"next-button"},{target:'[data-guide="pos-cart"]',title:"Review Cart",description:"Check your items and quantities here. Adjust or remove items as needed.",placement:"top",route:"/app/pos",advanceOn:"next-button"},{target:'[data-guide="pos-checkout"]',title:"Checkout",description:"Click Checkout to complete the sale. This creates an issue voucher and deducts stock.",placement:"top",route:"/app/pos",advanceOn:"next-button"}]},{id:"place-bar-order",title:"Place a Bar Order",description:"Order drinks from the Karibu Camps bar menu",icon:"GlassWater",category:"POS & Bar Menu",keywords:["bar","drinks","cocktail","beer","menu","order","beverage","wine"],estimatedTime:"2 min",steps:[{target:'[data-guide="nav-bar-menu"]',title:"Open Bar Menu",description:"Click Bar Menu to see the full Karibu Camps drinks menu.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="bar-category-tabs"]',title:"Browse Categories",description:"Filter by drink type  Cocktails, Mocktails, Beers, Whisky, Gin, Vodka, and more.",placement:"bottom",route:"/app/bar-menu",advanceOn:"next-button"},{target:'[data-guide="bar-menu-items"]',title:"Select Drinks",description:"Each drink shows its stock status. Green means available, red means low or out. Click + to add.",placement:"bottom",route:"/app/bar-menu",advanceOn:"next-button"},{target:'[data-guide="bar-cart-btn"]',title:"View Cart & Order",description:"Click the cart button to review your drink selection and place the bar order.",placement:"top",route:"/app/bar-menu",advanceOn:"next-button"}]},{id:"bar-stock-alerts",title:"Check Bar Stock Alerts",description:"Monitor drink inventory and depletion warnings",icon:"GlassWater",category:"POS & Bar Menu",keywords:["bar","stock","alert","low","drinks","depletion","running out"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-bar-menu"]',title:"Open Bar Menu",description:"Go to the Bar Menu page to check drink stock levels.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="bar-alerts-tab"]',title:"Switch to Alerts",description:"Click the Alerts tab to see which drinks are running low or out of stock.",placement:"bottom",route:"/app/bar-menu",advanceOn:"next-button"},{target:'[data-guide="bar-alerts-summary"]',title:"Depletion Summary",description:"Summary cards show available, low, critical, and out-of-stock drink counts.",placement:"bottom",route:"/app/bar-menu",advanceOn:"next-button"}]}],NN=[{id:"track-dispatches",title:"View & Track Dispatches",description:"Monitor goods dispatched from stores to camps",icon:"Truck",category:"Dispatch & Receive",keywords:["dispatch","track","shipment","delivery","transit","sent"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-dispatch"]',title:"Go to Dispatch",description:"Click Dispatch to view all dispatch notes and their delivery status.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="dispatch-status-tabs"]',title:"Filter by Status",description:"Filter dispatches by status  Dispatched, In Transit, or Delivered.",placement:"bottom",route:"/app/dispatch",advanceOn:"next-button"},{target:'[data-guide="dispatch-list-first"]',title:"Open Dispatch Details",description:"Click on any dispatch to see item details, quantities, and delivery timeline.",placement:"bottom",route:"/app/dispatch",advanceOn:"next-button"}]},{id:"confirm-goods-received",title:"Confirm Goods Received",description:"Verify and confirm receipt of dispatched goods",icon:"PackageCheck",category:"Dispatch & Receive",keywords:["receive","confirm","goods","delivery","arrived","verify"],estimatedTime:"2 min",steps:[{target:'[data-guide="nav-receive"]',title:"Go to Receive",description:"Click Receive to see all goods receipt records.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="receive-status-tabs"]',title:"Filter Pending Receipts",description:'Click "Pending" to see deliveries waiting for your confirmation.',placement:"bottom",route:"/app/receive",advanceOn:"next-button"},{target:'[data-guide="receive-list-first"]',title:"Open Receipt",description:"Click a pending receipt to review items, verify quantities, and confirm.",placement:"bottom",route:"/app/receive",advanceOn:"next-button"}]},{id:"report-discrepancy",title:"Report a Discrepancy",description:"Flag when received quantities don't match the dispatch",icon:"PackageCheck",category:"Dispatch & Receive",keywords:["discrepancy","mismatch","wrong","quantity","shortage","damage","missing"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-receive"]',title:"Go to Receive",description:"Navigate to Receive to find the delivery with issues.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="receive-list-first"]',title:"Open the Receipt",description:"Click on the receipt you need to flag. Look for pending ones.",placement:"bottom",route:"/app/receive",advanceOn:"next-button"}]},{id:"create-issue-voucher",title:"Create an Issue Voucher",description:"Issue items to departments like kitchen, housekeeping, or bar",icon:"FileOutput",category:"Issue Vouchers",keywords:["issue","voucher","kitchen","housekeeping","bar","department","give","distribute"],estimatedTime:"2 min",steps:[{target:'[data-guide="nav-issue"]',title:"Go to Issue",description:"Click Issue in the sidebar to see all issue vouchers.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="new-issue-btn"]',title:"Start New Issue",description:'Click "New Issue" to create an issue voucher.',placement:"bottom",route:"/app/issue",advanceOn:"click"},{target:'[data-guide="issue-type-select"]',title:"Select Department",description:"Choose who you're issuing to  Kitchen, Housekeeping, Bar, Maintenance, etc.",placement:"bottom",route:"/app/issue/new",advanceOn:"next-button"},{target:'[data-guide="issue-item-search"]',title:"Search & Add Items",description:"Search for items, set quantities, and add them to the voucher.",placement:"bottom",route:"/app/issue/new",advanceOn:"next-button"},{target:'[data-guide="issue-submit-btn"]',title:"Submit Voucher",description:"Review and submit. This will deduct stock and create the issue record.",placement:"top",route:"/app/issue/new",advanceOn:"next-button"}]},{id:"view-issue-history",title:"View Issue History",description:"Browse past issue vouchers by department and date",icon:"FileOutput",category:"Issue Vouchers",keywords:["issue","history","past","voucher","records","previous"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-issue"]',title:"Go to Issue",description:"Navigate to the Issue page to see all issue vouchers.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="issue-type-tabs"]',title:"Filter by Department",description:"Use tabs to filter by issue type  Kitchen, Housekeeping, Bar, etc.",placement:"bottom",route:"/app/issue",advanceOn:"next-button"}]},{id:"ai-recipe-suggestions",title:"Get AI Recipe Suggestions",description:"Let AI suggest recipes based on ingredients in stock",icon:"Sparkles",category:"Recipes",keywords:["recipe","ai","suggest","cook","meal","ingredients","gemini"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-recipes"]',title:"Go to Recipes",description:"Click Recipes to access AI-powered recipe suggestions.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="recipe-generate"]',title:"Generate Recipes",description:"Select available ingredients and let the AI suggest recipes you can make with them.",placement:"bottom",route:"/app/recipes",advanceOn:"next-button"}]},{id:"generate-report",title:"Generate a Report",description:"Create consumption, stock, and variance reports",icon:"BarChart3",category:"Admin",keywords:["report","generate","consumption","variance","analysis","export","pdf"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-reports"]',title:"Go to Reports",description:"Click Reports in the sidebar. Available for managers and above.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="report-type-select"]',title:"Select Report Type",description:"Choose from: Consumption, Stock Valuation, Movement Summary, or Variance reports.",placement:"bottom",route:"/app/reports",advanceOn:"next-button"},{target:'[data-guide="report-date-filter"]',title:"Set Date Range",description:"Pick a date range for your report. Default is the current month.",placement:"bottom",route:"/app/reports",advanceOn:"next-button"},{target:'[data-guide="report-generate-btn"]',title:"Generate",description:"Click Generate to create the report. Results appear below.",placement:"bottom",route:"/app/reports",advanceOn:"next-button"}]},{id:"create-new-user",title:"Create a New User",description:"Add new staff members to the system",icon:"Users",category:"Admin",keywords:["user","create","add","staff","account","new user","employee"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-users"]',title:"Go to Users",description:"Click Users in the sidebar. Only available for admins and directors.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="add-user-btn"]',title:"Add User",description:'Click "Add User" to open the new user form.',placement:"bottom",route:"/app/users",advanceOn:"next-button"},{target:'[data-guide="user-form"]',title:"Fill User Details",description:"Enter name, username, password, select a role and assign to a camp.",placement:"bottom",route:"/app/users",advanceOn:"next-button"}]},{id:"edit-user-permissions",title:"Edit User Permissions",description:"Change roles and camp assignments for existing users",icon:"Users",category:"Admin",keywords:["user","edit","role","permission","change","update","camp"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-users"]',title:"Go to Users",description:"Navigate to User Management.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="user-list-first"]',title:"Select a User",description:"Click on the user you want to edit. Find them in the list or use search.",placement:"bottom",route:"/app/users",advanceOn:"next-button"},{target:'[data-guide="user-role-select"]',title:"Change Role",description:"Update their role  admin, director, stores_manager, camp_storekeeper, chef, etc.",placement:"bottom",route:"/app/users",advanceOn:"next-button"}]}],Od=[...yN,...bN,...vN,...jN,...NN];function _N(l){const i=l.toLowerCase().trim();return i?Od.filter(o=>{const d=o.title.toLowerCase().includes(i),x=o.description.toLowerCase().includes(i),f=o.keywords.some(p=>p.toLowerCase().includes(i));return d||x||f}).sort((o,d)=>{const x=o.title.toLowerCase().includes(i)?2:0,f=d.title.toLowerCase().includes(i)?2:0,p=o.keywords.some(h=>h.toLowerCase().includes(i))?1:0,j=d.keywords.some(h=>h.toLowerCase().includes(i))?1:0;return f+j-(x+p)}):Od}function SN(){const l={};for(const i of Od)l[i.category]||(l[i.category]=[]),l[i.category].push(i);return l}const wN={LayoutDashboard:Xi,ShoppingCart:_t,Truck:xr,Boxes:Fa,Package:ha,PackageCheck:Ts,FileOutput:zs,Wine:xa,GlassWater:Fn,Sparkles:nn,Bell:mr,BarChart3:Zi,Users:_a},yf=["How do I create an order?","Where can I check stock levels?","How to use the bar menu?","How do I approve an order?","How to create an issue voucher?","Where are the stock alerts?","How to make a POS sale?","How to generate a report?"];function kN(){const{isPanelOpen:l,closePanel:i,startGuide:o,completedGuides:d,openReport:x}=Fi(),f=uh(),p=ga(),[j,h]=u.useState(""),[y,v]=u.useState(0);u.useEffect(()=>{if(!l)return;const E=setInterval(()=>{v(k=>(k+1)%yf.length)},3e3);return()=>clearInterval(E)},[l]),u.useEffect(()=>{if(l)return As(),()=>Ds()},[l]);const b=u.useMemo(()=>j.trim()?_N(j):null,[j]),g=u.useMemo(()=>SN(),[]),T=u.useMemo(()=>{const E=p.pathname;return E.includes("order")?"Orders":E.includes("dispatch")?"Dispatch & Receive":E.includes("stock")||E.includes("items")?"Stock & Items":E.includes("pos")||E.includes("bar-menu")?"POS & Bar Menu":E.includes("issue")?"Issue Vouchers":E.includes("alert")?"Stock & Items":E.includes("report")||E.includes("user")?"Admin":E.includes("recipe")?"Recipes":"Navigation"},[p]);function _(E){h(""),o(E)}function A(E,k){if(!k.trim())return E;const w=new RegExp(`(${k.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return E.split(w).map((Q,L)=>w.test(Q)?t.jsx("mark",{className:"bg-green-100 text-green-800 rounded px-0.5",children:Q},L):Q)}return l?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/20 z-[9994]",onClick:i,style:{animation:"guide-fade-in 0.2s ease forwards"}}),t.jsxs("div",{className:`fixed bg-white z-[9995] flex flex-col overflow-hidden ${f?"inset-x-0 bottom-0 rounded-t-2xl max-h-[85dvh]":"right-0 top-0 bottom-0 w-96 border-l border-gray-200"}`,style:{animation:f?"guide-slide-up 0.3s ease-out forwards":"guide-slide-right 0.3s ease-out forwards",boxShadow:"-4px 0 20px rgba(0,0,0,0.1)"},children:[f&&t.jsx("div",{className:"flex justify-center pt-2 pb-1",children:t.jsx("div",{className:"w-10 h-1 rounded-full bg-gray-300"})}),t.jsxs("div",{className:"px-5 pt-4 pb-3 border-b border-gray-100",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"How can we help?"}),t.jsx("button",{onClick:i,className:"compact-btn flex items-center justify-center w-8 h-8 rounded-full hover:bg-gray-100 text-gray-400 transition",style:{minHeight:"auto"},children:t.jsx(Ee,{size:18})})]}),t.jsxs("div",{className:"relative",children:[t.jsx(Vt,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",value:j,onChange:E=>h(E.target.value),placeholder:yf[y],className:"w-full pl-9 pr-8 py-2.5 text-sm bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition"}),j&&t.jsx("button",{onClick:()=>h(""),className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 compact-btn",style:{minHeight:"auto",minWidth:"auto"},children:t.jsx(Ee,{size:14})})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto px-5 py-3 scroll-touch",children:b!==null?b.length>0?t.jsxs("div",{children:[t.jsxs("p",{className:"text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-2",children:[b.length," result",b.length!==1?"s":""]}),b.map(E=>t.jsx(_d,{guide:E,completed:d.includes(E.id),onSelect:_,highlightQuery:j,highlightMatch:A},E.id))]}):t.jsxs("div",{className:"text-center py-8",children:[t.jsx(or,{size:32,className:"mx-auto text-gray-300 mb-2"}),t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"No guides found"}),t.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"Try different keywords"}),t.jsx("button",{onClick:()=>{h(""),x()},className:"text-xs text-green-600 hover:text-green-700 font-semibold underline compact-btn",style:{minHeight:"auto"},children:"Can't find help? Report it"})]}):t.jsxs(t.Fragment,{children:[g[T]&&t.jsxs("div",{className:"mb-4",children:[t.jsx("p",{className:"text-[10px] font-semibold text-green-600 uppercase tracking-wider mb-2",children:"For this page"}),g[T].map(E=>t.jsx(_d,{guide:E,completed:d.includes(E.id),onSelect:_},E.id))]}),Object.entries(g).filter(([E])=>E!==T).map(([E,k])=>t.jsxs("div",{className:"mb-4",children:[t.jsx("p",{className:"text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-2",children:E}),k.map(w=>t.jsx(_d,{guide:w,completed:d.includes(w.id),onSelect:_},w.id))]},E))]})}),t.jsx("div",{className:"px-5 py-3 border-t border-gray-100 bg-gray-50",children:t.jsxs("button",{onClick:x,className:"w-full flex items-center justify-center gap-2 py-2.5 text-sm text-gray-600 hover:text-green-700 font-medium transition compact-btn",style:{minHeight:"auto"},children:[t.jsx(or,{size:15}),"Can't find what you need? Report it"]})})]})]}):null}function _d({guide:l,completed:i,onSelect:o,highlightQuery:d,highlightMatch:x}){const f=wN[l.icon]||ha;return t.jsxs("button",{onClick:()=>o(l),className:"w-full flex items-center gap-3 p-3 mb-1.5 rounded-xl hover:bg-green-50 transition text-left group compact-btn",style:{minHeight:"auto"},children:[t.jsx("div",{className:`flex-shrink-0 w-9 h-9 rounded-lg flex items-center justify-center ${i?"bg-green-100 text-green-600":"bg-gray-100 text-gray-500 group-hover:bg-green-100 group-hover:text-green-600"}`,children:i?t.jsx(Gd,{size:18}):t.jsx(f,{size:18})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:x?x(l.title,d||""):l.title}),t.jsx("p",{className:"text-[11px] text-gray-500 truncate",children:x?x(l.description,d||""):l.description})]}),t.jsxs("div",{className:"flex-shrink-0 flex items-center gap-1.5",children:[t.jsxs("span",{className:"text-[10px] text-gray-400 flex items-center gap-0.5",children:[t.jsx(Cs,{size:10}),l.estimatedTime]}),t.jsx(l1,{size:14,className:"text-gray-300 group-hover:text-green-500 transition"})]})]})}function CN({targetRect:l,padding:i=8,onClick:o,clickThrough:d=!1}){const x=u.useRef(null),f=u.useRef(null),p=u.useId()?.replace(/:/g,"_")||"guide-mask";if(u.useEffect(()=>{if(!l)return;const b=l.left-i,g=l.top-i,T=l.width+i*2,_=l.height+i*2;x.current&&(x.current.setAttribute("x",b),x.current.setAttribute("y",g),x.current.setAttribute("width",T),x.current.setAttribute("height",_)),f.current&&(f.current.style.left=`${b}px`,f.current.style.top=`${g}px`,f.current.style.width=`${T}px`,f.current.style.height=`${_}px`)},[l,i]),!l)return null;const j=l.left-i,h=l.top-i,y=l.width+i*2,v=l.height+i*2;return t.jsxs("div",{className:"fixed inset-0",style:{zIndex:9997,pointerEvents:"none"},children:[t.jsxs("svg",{className:"absolute inset-0 w-full h-full",style:{pointerEvents:"none"},children:[t.jsx("defs",{children:t.jsxs("mask",{id:p,children:[t.jsx("rect",{width:"100%",height:"100%",fill:"white"}),t.jsx("rect",{ref:x,x:j,y:h,width:y,height:v,rx:"8",ry:"8",fill:"black",style:{transition:"x 0.4s cubic-bezier(0.4,0,0.2,1), y 0.4s cubic-bezier(0.4,0,0.2,1), width 0.4s cubic-bezier(0.4,0,0.2,1), height 0.4s cubic-bezier(0.4,0,0.2,1)"}})]})}),t.jsx("rect",{width:"100%",height:"100%",fill:"rgba(0,0,0,0.55)",mask:`url(#${p})`,onClick:d?void 0:o,style:{pointerEvents:d?"none":"auto",cursor:d?"default":"pointer"}})]}),t.jsx("div",{ref:f,className:"absolute rounded-lg pointer-events-none",style:{left:j,top:h,width:y,height:v,border:d?"2px solid rgba(22, 163, 74, 0.8)":"2px solid rgba(22, 163, 74, 0.6)",animation:d?"guide-coaching-pulse 1.4s ease-in-out infinite":"guide-spotlight-pulse 2s ease-in-out infinite",animationFillMode:"both",willChange:"box-shadow",boxShadow:d?"0 0 0 4px rgba(22, 163, 74, 0.15), inset 0 0 12px rgba(22, 163, 74, 0.08)":"none"}})]})}function zN({position:l,visible:i,clicking:o,coaching:d=!1}){const x=uh();if(!i)return null;const f="0.5s",p="cubic-bezier(0.34, 1.56, 0.64, 1)";return x?t.jsxs("div",{className:"fixed pointer-events-none",style:{left:l.x-24,top:l.y-24,zIndex:1e4,transition:`left ${f} ${p}, top ${f} ${p}`,animation:"guide-cursor-fade-in 0.3s ease-out forwards",willChange:"left, top"},children:[t.jsx("div",{className:"absolute inset-0 rounded-full bg-green-500/20",style:{width:48,height:48,animation:d?"guide-coaching-tap-ring 1.2s ease-out infinite":"guide-tap-ring 1.5s ease-out infinite",animationFillMode:"both"}}),t.jsx("div",{className:"absolute rounded-full bg-green-500",style:{width:16,height:16,left:16,top:16,boxShadow:d?"0 0 12px rgba(22,163,74,0.6)":"0 0 8px rgba(22,163,74,0.5)"}}),t.jsx("span",{className:"absolute text-[10px] font-bold text-green-700 whitespace-nowrap",style:{left:52,top:14,animation:d?"guide-coaching-dot 1s ease-in-out infinite":void 0},children:d?"Tap here!":"Tap here"})]}):t.jsxs("div",{className:"fixed pointer-events-none",style:{left:l.x,top:l.y,zIndex:1e4,transition:`left ${f} ${p}, top ${f} ${p}`,animation:o?"guide-cursor-click 0.3s ease forwards":d?"guide-coaching-cursor-bounce 1.8s ease-in-out infinite":"guide-cursor-fade-in 0.3s ease-out forwards",willChange:"left, top"},children:[t.jsx("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.3))"},children:t.jsx("path",{d:"M5.5 2L20 12.5L12.5 13.5L9 21L5.5 2Z",fill:"#16a34a",stroke:"#ffffff",strokeWidth:"1.5",strokeLinejoin:"round"})}),d&&t.jsx("div",{className:"absolute rounded-full",style:{width:20,height:20,left:-3,top:-3,animation:"guide-coaching-click-ripple 1.8s ease-out infinite",border:"2px solid rgba(22, 163, 74, 0.5)"}})]})}function TN({current:l,total:i}){return t.jsx("div",{className:"flex items-center gap-1.5",children:Array.from({length:i},(o,d)=>t.jsx("div",{className:`rounded-full transition-all duration-300 ${d===l?"w-5 h-2 bg-green-500":d<l?"w-2 h-2 bg-green-300":"w-2 h-2 bg-gray-300"}`},d))})}function EN({step:l,targetRect:i,currentIndex:o,totalSteps:d,onNext:x,onPrev:f,onEnd:p,isFirst:j,isLast:h,coaching:y=!1}){const v=u.useRef(null),[b,g]=u.useState({top:0,left:0,arrowSide:"top",arrowOffset:"50%"});return u.useEffect(()=>{if(!i||!v.current)return;const T=v.current.getBoundingClientRect(),_=window.innerWidth,A=window.innerHeight,E=14,k=16,w=l?.placement||"bottom";let B,Q,L;if(w==="bottom"||w==="top"?(Q=i.left+i.width/2-T.width/2,w==="bottom"?(B=i.bottom+E,L="top"):(B=i.top-T.height-E,L="bottom")):w==="right"?(Q=i.right+E,B=i.top+i.height/2-T.height/2,L="left"):(Q=i.left-T.width-E,B=i.top+i.height/2-T.height/2,L="right"),B+T.height>A-k&&L==="top"){const J=i.top-T.height-E;J>=k&&(B=J,L="bottom")}else if(B<k&&L==="bottom"){const J=i.bottom+E;J+T.height<=A-k&&(B=J,L="top")}B=Math.max(k,Math.min(B,A-T.height-k)),Q=Math.max(k,Math.min(Q,_-T.width-k));let ne="50%";if(L==="top"||L==="bottom"){const J=i.left+i.width/2;ne=`${Math.max(16,Math.min(J-Q,T.width-16))}px`}g({top:B,left:Q,arrowSide:L,arrowOffset:ne})},[i,l]),!l||!i?null:t.jsxs("div",{ref:v,className:"fixed bg-white rounded-xl shadow-xl border border-gray-200 w-72 max-w-[calc(100vw-32px)]",style:{top:b.top,left:b.left,zIndex:10001,animation:"guide-tooltip-enter 0.3s ease-out forwards",transition:"top 0.5s ease, left 0.5s ease",touchAction:"manipulation",pointerEvents:"auto"},children:[t.jsx("div",{className:"absolute w-3 h-3 bg-white border-gray-200 rotate-45",style:{...b.arrowSide==="top"&&{top:-6,left:b.arrowOffset,marginLeft:-6,borderTop:"1px solid",borderLeft:"1px solid"},...b.arrowSide==="bottom"&&{bottom:-6,left:b.arrowOffset,marginLeft:-6,borderBottom:"1px solid",borderRight:"1px solid"},...b.arrowSide==="left"&&{left:-6,top:"50%",marginTop:-6,borderBottom:"1px solid",borderLeft:"1px solid"},...b.arrowSide==="right"&&{right:-6,top:"50%",marginTop:-6,borderTop:"1px solid",borderRight:"1px solid"}}}),t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2 pr-4",children:[y&&t.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-green-100 flex items-center justify-center",style:{animation:"guide-coaching-icon 1.5s ease-in-out infinite"},children:t.jsx(Pv,{size:11,className:"text-green-600"})}),t.jsx("h4",{className:"text-sm font-bold text-gray-900",children:l.title})]}),t.jsx("button",{onClick:p,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition compact-btn",style:{minHeight:"auto"},children:t.jsx(Ee,{size:16})})]}),t.jsx("p",{className:"text-xs text-gray-600 leading-relaxed mb-3",children:l.description}),y&&t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 mb-3 rounded-lg bg-green-50 border border-green-100",style:{animation:"guide-coaching-prompt 2s ease-in-out infinite"},children:[t.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500",style:{animation:"guide-coaching-dot 1s ease-in-out infinite"}}),t.jsx("span",{className:"text-[11px] font-semibold text-green-700",children:"Go ahead, click it!"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(TN,{current:o,total:d}),t.jsxs("div",{className:"flex items-center gap-1.5",children:[!j&&t.jsx("button",{onClick:f,className:"compact-btn flex items-center justify-center w-7 h-7 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-600 transition",style:{minHeight:"auto"},children:t.jsx(Ia,{size:14})}),y?!h&&t.jsxs("button",{onClick:x,className:"compact-btn flex items-center gap-1 px-3 py-1.5 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-500 text-xs font-medium transition",style:{minHeight:"auto"},children:["Skip",t.jsx(yt,{size:12})]}):t.jsx("button",{onClick:x,className:"compact-btn flex items-center gap-1 px-3 py-1.5 rounded-full bg-green-600 hover:bg-green-700 text-white text-xs font-semibold transition",style:{minHeight:"auto"},children:h?t.jsxs(t.Fragment,{children:[t.jsx(Yt,{size:12}),"Done"]}):t.jsxs(t.Fragment,{children:["Next",t.jsx(yt,{size:12})]})}),y&&h&&t.jsxs("button",{onClick:p,className:"compact-btn flex items-center gap-1 px-3 py-1.5 rounded-full bg-green-600 hover:bg-green-700 text-white text-xs font-semibold transition",style:{minHeight:"auto"},children:[t.jsx(Yt,{size:12}),"Done"]})]})]}),t.jsxs("p",{className:"text-[10px] text-gray-400 mt-2 text-center",children:["Step ",o+1," of ",d,y&&t.jsx("span",{className:"ml-1 text-green-500",children:"- watching your action"})]})]})]},`tooltip-step-${o}`)}function ON(){const{isRunning:l,activeGuide:i,currentStepIndex:o,currentStep:d,totalSteps:x,isFirstStep:f,isLastStep:p,targetRect:j,cursorPosition:h,cursorVisible:y,nextStep:v,prevStep:b,endGuide:g,setTargetRect:T,setCursor:_}=Fi(),A=Os(),E=ga(),k=u.useRef(null),w=u.useRef(null),B=u.useRef(null),Q=u.useRef(null),L=u.useRef(!1),ne=u.useRef(null),J=u.useRef(!1),ye=d?.advanceOn==="click";u.useEffect(()=>{ne.current=d},[d]);const X=u.useCallback(()=>{J.current=!0,k.current&&(clearTimeout(k.current),k.current=null),w.current&&(w.current.el?.removeEventListener("click",w.current.fn,!0),w.current=null),B.current&&(B.current.disconnect(),B.current=null),Q.current&&(clearInterval(Q.current),Q.current=null),L.current=!1},[]);u.useEffect(()=>{if(l)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[l]),u.useEffect(()=>{if(!(!l||!d))return X(),J.current=!1,ae(d),X},[l,o,i?.id]),u.useEffect(()=>{if(!l||!L.current)return;const P=ne.current;if(P?.advanceOn==="click"&&P?.route){const ie=i?.steps?.[o+1];if(ie?.route&&E.pathname===ie.route){L.current=!1,X(),v();return}if(E.pathname!==P.route){L.current=!1,X(),v();return}}},[E.pathname,l]),u.useEffect(()=>{if(!l||!d)return;function P(){const ie=document.querySelector(d.target);if(ie){const xe=ie.getBoundingClientRect();T({top:xe.top,left:xe.left,width:xe.width,height:xe.height,bottom:xe.bottom,right:xe.right})}}return window.addEventListener("scroll",P,{capture:!0,passive:!0}),window.addEventListener("resize",P,{passive:!0}),()=>{window.removeEventListener("scroll",P,{capture:!0}),window.removeEventListener("resize",P)}},[l,o]);async function ae(P){if(P.route&&E.pathname!==P.route&&(A(P.route),await me(500),J.current))return;const ie=await K(P.target,5e3);if(J.current)return;if(!ie){console.warn(`Guide target not found: ${P.target}`),p||v();return}if(ie.scrollIntoView({behavior:"smooth",block:"center"}),await me(400),J.current)return;const xe=ie.getBoundingClientRect();T({top:xe.top,left:xe.left,width:xe.width,height:xe.height,bottom:xe.bottom,right:xe.right});const be=xe.left+xe.width/2,C=xe.top+xe.height/2;_({x:be,y:C}),window.ResizeObserver&&(B.current=new ResizeObserver(()=>{if(J.current)return;const G=ie.getBoundingClientRect();T({top:G.top,left:G.left,width:G.width,height:G.height,bottom:G.bottom,right:G.right})}),B.current.observe(ie)),P.advanceOn==="click"&&se(ie,P)}function se(P,ie){const xe=be=>{L.current=!0,setTimeout(()=>{L.current&&(L.current=!1,X(),v())},600)};if(P.addEventListener("click",xe,{capture:!0,once:!0}),w.current={el:P,fn:xe},ie.route){const be=window.location.hash||window.location.pathname;Q.current=setInterval(()=>{(window.location.hash||window.location.pathname)!==be&&(clearInterval(Q.current),Q.current=null,L.current&&(L.current=!1,X(),v()))},200)}}function K(P,ie=5e3){return new Promise(xe=>{const be=Date.now();function C(){if(J.current)return xe(null);const G=document.querySelector(P);if(G)return xe(G);if(Date.now()-be>ie)return xe(null);k.current=setTimeout(C,150)}C()})}function me(P){return new Promise(ie=>{k.current=setTimeout(ie,P)})}function Z(){X(),p?g():v()}function ce(){X(),b()}function M(){X(),g()}return!l||!i?null:Rs.createPortal(t.jsxs(t.Fragment,{children:[t.jsx(CN,{targetRect:j,onClick:M,clickThrough:ye}),t.jsx(zN,{position:h,visible:y,coaching:ye}),t.jsx(EN,{step:d,targetRect:j,currentIndex:o,totalSteps:x,onNext:Z,onPrev:ce,onEnd:M,isFirst:f,isLast:p,coaching:ye})]}),document.body)}const RN=[{key:"bug",label:"Bug Report",icon:ev,color:"text-red-500 bg-red-50"},{key:"feature",label:"Feature Request",icon:Hv,color:"text-amber-500 bg-amber-50"},{key:"help",label:"Help Not Found",icon:If,color:"text-blue-500 bg-blue-50"}];function AN(){const{isReportFormOpen:l,closeReport:i,addReport:o}=Fi(),[d,x]=u.useState("help"),[f,p]=u.useState(""),[j,h]=u.useState(""),[y,v]=u.useState(!1),b=u.useRef(null);u.useEffect(()=>{if(l)return As(),()=>Ds()},[l]),u.useEffect(()=>()=>{b.current&&clearTimeout(b.current)},[]);function g(_){_.preventDefault(),!(!f.trim()||y)&&(o({type:d,title:f.trim(),description:j.trim()}),v(!0),b.current=setTimeout(()=>{v(!1),x("help"),p(""),h(""),i()},1800))}function T(){b.current&&clearTimeout(b.current),v(!1),x("help"),p(""),h(""),i()}return l?Rs.createPortal(t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/40 z-[10010]",onClick:T,style:{animation:"guide-fade-in 0.2s ease forwards"}}),t.jsx("div",{className:"fixed z-[10011] bg-white rounded-2xl shadow-2xl w-[90vw] max-w-md max-h-[85dvh] overflow-y-auto scroll-touch",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)",animation:"guide-tooltip-enter 0.3s ease-out forwards"},children:y?t.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-6",children:[t.jsx(Ff,{size:48,className:"text-green-500 mb-3"}),t.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:"Thank you!"}),t.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Your report has been saved. We'll look into it."})]}):t.jsxs("form",{onSubmit:g,children:[t.jsxs("div",{className:"flex items-center justify-between px-5 pt-5 pb-3",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Report an Issue"}),t.jsx("button",{type:"button",onClick:T,className:"compact-btn flex items-center justify-center w-8 h-8 rounded-full hover:bg-gray-100 text-gray-400 transition",style:{minHeight:"auto"},children:t.jsx(Ee,{size:18})})]}),t.jsxs("div",{className:"px-5 pb-5 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2 block",children:"Type"}),t.jsx("div",{className:"flex gap-2",children:RN.map(_=>{const A=_.icon;return t.jsxs("button",{type:"button",onClick:()=>x(_.key),className:`flex-1 flex items-center gap-1.5 px-3 py-2.5 rounded-lg text-xs font-semibold transition border compact-btn ${d===_.key?`${_.color} border-current`:"bg-gray-50 text-gray-500 border-gray-200 hover:bg-gray-100"}`,style:{minHeight:"auto"},children:[t.jsx(A,{size:14}),_.label]},_.key)})})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1.5 block",children:["Title ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("input",{type:"text",value:f,onChange:_=>p(_.target.value),placeholder:"Brief summary of the issue...",required:!0,className:"w-full px-3 py-2.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1.5 block",children:"Description"}),t.jsx("textarea",{value:j,onChange:_=>h(_.target.value),placeholder:"Describe what you were trying to do and what went wrong...",rows:4,className:"w-full px-3 py-2.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none resize-none"})]}),t.jsxs("button",{type:"submit",disabled:!f.trim()||y,className:"w-full flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white py-3 rounded-lg text-sm font-semibold transition",children:[t.jsx(ah,{size:16}),"Submit Report"]})]})]})})]}),document.body):null}function DN(){return t.jsx(hN,{children:t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(nN,{}),t.jsxs("div",{className:"lg:ml-64",children:[t.jsx(uN,{}),t.jsx(mN,{}),t.jsx("main",{className:"p-4 lg:p-6 pb-24 lg:pb-6",children:t.jsx(My,{})})]}),t.jsx(oN,{}),t.jsx(gN,{}),t.jsx(kN,{}),t.jsx(ON,{}),t.jsx(AN,{})]})})}function MN({children:l}){return Ie()?l:t.jsx(Yi,{to:"/login",replace:!0})}function LN(){return Ie()?.role==="chef"?t.jsx(Yi,{to:"/app/menu-plan",replace:!0}):t.jsx(H1,{})}function bf({children:l}){return Ie()?t.jsx(Yi,{to:"/app",replace:!0}):l}function qN(){return t.jsxs(qy,{children:[t.jsx(Xe,{path:"/login",element:t.jsx(bf,{children:t.jsx(q1,{})})}),t.jsx(Xe,{path:"/pin-login",element:t.jsx(bf,{children:t.jsx(U1,{})})}),t.jsxs(Xe,{path:"/app",element:t.jsx(MN,{children:t.jsx(DN,{})}),children:[t.jsx(Xe,{index:!0,element:t.jsx(LN,{})}),t.jsx(Xe,{path:"items",element:t.jsx(G1,{})}),t.jsx(Xe,{path:"items/:id",element:t.jsx($1,{})}),t.jsx(Xe,{path:"stock",element:t.jsx(Y1,{})}),t.jsx(Xe,{path:"orders",element:t.jsx(Q1,{})}),t.jsx(Xe,{path:"orders/new",element:t.jsx(Z1,{})}),t.jsx(Xe,{path:"orders/:id",element:t.jsx(X1,{})}),t.jsx(Xe,{path:"dispatch",element:t.jsx(J1,{})}),t.jsx(Xe,{path:"dispatch/:id",element:t.jsx(F1,{})}),t.jsx(Xe,{path:"receive",element:t.jsx(W1,{})}),t.jsx(Xe,{path:"receive/:id",element:t.jsx(P1,{})}),t.jsx(Xe,{path:"issue",element:t.jsx(tj,{})}),t.jsx(Xe,{path:"issue/new",element:t.jsx(ij,{})}),t.jsx(Xe,{path:"alerts",element:t.jsx(dj,{})}),t.jsx(Xe,{path:"reports",element:t.jsx(pj,{})}),t.jsx(Xe,{path:"users",element:t.jsx(yj,{})}),t.jsx(Xe,{path:"settings",element:t.jsx(bj,{})}),t.jsx(Xe,{path:"pos",element:t.jsx(_j,{})}),t.jsx(Xe,{path:"bar-menu",element:t.jsx(zj,{})}),t.jsx(Xe,{path:"recipes",element:t.jsx(Ej,{})}),t.jsx(Xe,{path:"daily",element:t.jsx(Mj,{})}),t.jsx(Xe,{path:"menu-plan",element:t.jsx(Gj,{})}),t.jsx(Xe,{path:"daily-groceries",element:t.jsx(Jj,{})}),t.jsx(Xe,{path:"weekly-groceries",element:t.jsx(Pj,{})})]}),t.jsx(Xe,{path:"*",element:t.jsx(Yi,{to:"/login",replace:!0})})]})}qg.createRoot(document.getElementById("root")).render(t.jsx(u.StrictMode,{children:t.jsx(ib,{children:t.jsx(yb,{children:t.jsx(qN,{})})})}));Bb();const vf=window.Capacitor?.isNativePlatform?.()||!1;"serviceWorker"in navigator&&!vf?window.addEventListener("load",()=>{navigator.serviceWorker.register("./sw.js").catch(()=>{})}):vf&&"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(l=>{l.forEach(i=>i.unregister())}).catch(()=>{});
