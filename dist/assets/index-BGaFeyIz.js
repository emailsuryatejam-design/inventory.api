(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const x of document.querySelectorAll('link[rel="modulepreload"]'))d(x);new MutationObserver(x=>{for(const f of x)if(f.type==="childList")for(const h of f.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&d(h)}).observe(document,{childList:!0,subtree:!0});function o(x){const f={};return x.integrity&&(f.integrity=x.integrity),x.referrerPolicy&&(f.referrerPolicy=x.referrerPolicy),x.crossOrigin==="use-credentials"?f.credentials="include":x.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function d(x){if(x.ep)return;x.ep=!0;const f=o(x);fetch(x.href,f)}})();var dd={exports:{}},Pl={};var Z0;function Lg(){if(Z0)return Pl;Z0=1;var l=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function o(d,x,f){var h=null;if(f!==void 0&&(h=""+f),x.key!==void 0&&(h=""+x.key),"key"in x){f={};for(var v in x)v!=="key"&&(f[v]=x[v])}else f=x;return x=f.ref,{$$typeof:l,type:d,key:h,ref:x!==void 0?x:null,props:f}}return Pl.Fragment=i,Pl.jsx=o,Pl.jsxs=o,Pl}var X0;function qg(){return X0||(X0=1,dd.exports=Lg()),dd.exports}var t=qg(),ud={exports:{}},ke={};var K0;function Ug(){if(K0)return ke;K0=1;var l=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),h=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),y=Symbol.iterator;function z(E){return E===null||typeof E!="object"?null:(E=y&&E[y]||E["@@iterator"],typeof E=="function"?E:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,C={};function w(E,G,Z){this.props=E,this.context=G,this.refs=C,this.updater=Z||S}w.prototype.isReactComponent={},w.prototype.setState=function(E,G){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,G,"setState")},w.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function k(){}k.prototype=w.prototype;function M(E,G,Z){this.props=E,this.context=G,this.refs=C,this.updater=Z||S}var $=M.prototype=new k;$.constructor=M,O($,w.prototype),$.isPureReactComponent=!0;var L=Array.isArray;function te(){}var X={H:null,A:null,T:null,S:null},ge=Object.prototype.hasOwnProperty;function K(E,G,Z){var A=Z.ref;return{$$typeof:l,type:E,key:G,ref:A!==void 0?A:null,props:Z}}function se(E,G){return K(E.type,G,E.props)}function ne(E){return typeof E=="object"&&E!==null&&E.$$typeof===l}function J(E){var G={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(Z){return G[Z]})}var fe=/\/+/g;function Q(E,G){return typeof E=="object"&&E!==null&&E.key!=null?J(""+E.key):G.toString(36)}function ce(E){switch(E.status){case"fulfilled":return E.value;case"rejected":throw E.reason;default:switch(typeof E.status=="string"?E.then(te,te):(E.status="pending",E.then(function(G){E.status==="pending"&&(E.status="fulfilled",E.value=G)},function(G){E.status==="pending"&&(E.status="rejected",E.reason=G)})),E.status){case"fulfilled":return E.value;case"rejected":throw E.reason}}throw E}function q(E,G,Z,A,le){var ue=typeof E;(ue==="undefined"||ue==="boolean")&&(E=null);var he=!1;if(E===null)he=!0;else switch(ue){case"bigint":case"string":case"number":he=!0;break;case"object":switch(E.$$typeof){case l:case i:he=!0;break;case j:return he=E._init,q(he(E._payload),G,Z,A,le)}}if(he)return le=le(E),he=A===""?"."+Q(E,0):A,L(le)?(Z="",he!=null&&(Z=he.replace(fe,"$&/")+"/"),q(le,G,Z,"",function(rt){return rt})):le!=null&&(ne(le)&&(le=se(le,Z+(le.key==null||E&&E.key===le.key?"":(""+le.key).replace(fe,"$&/")+"/")+he)),G.push(le)),1;he=0;var Ue=A===""?".":A+":";if(L(E))for(var Ce=0;Ce<E.length;Ce++)A=E[Ce],ue=Ue+Q(A,Ce),he+=q(A,G,Z,ue,le);else if(Ce=z(E),typeof Ce=="function")for(E=Ce.call(E),Ce=0;!(A=E.next()).done;)A=A.value,ue=Ue+Q(A,Ce++),he+=q(A,G,Z,ue,le);else if(ue==="object"){if(typeof E.then=="function")return q(ce(E),G,Z,A,le);throw G=String(E),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return he}function W(E,G,Z){if(E==null)return E;var A=[],le=0;return q(E,A,"","",function(ue){return G.call(Z,ue,le++)}),A}function ie(E){if(E._status===-1){var G=E._result;G=G(),G.then(function(Z){(E._status===0||E._status===-1)&&(E._status=1,E._result=Z)},function(Z){(E._status===0||E._status===-1)&&(E._status=2,E._result=Z)}),E._status===-1&&(E._status=0,E._result=G)}if(E._status===1)return E._result.default;throw E._result}var me=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)},be={map:W,forEach:function(E,G,Z){W(E,function(){G.apply(this,arguments)},Z)},count:function(E){var G=0;return W(E,function(){G++}),G},toArray:function(E){return W(E,function(G){return G})||[]},only:function(E){if(!ne(E))throw Error("React.Children.only expected to receive a single React element child.");return E}};return ke.Activity=b,ke.Children=be,ke.Component=w,ke.Fragment=o,ke.Profiler=x,ke.PureComponent=M,ke.StrictMode=d,ke.Suspense=p,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,ke.__COMPILER_RUNTIME={__proto__:null,c:function(E){return X.H.useMemoCache(E)}},ke.cache=function(E){return function(){return E.apply(null,arguments)}},ke.cacheSignal=function(){return null},ke.cloneElement=function(E,G,Z){if(E==null)throw Error("The argument must be a React element, but you passed "+E+".");var A=O({},E.props),le=E.key;if(G!=null)for(ue in G.key!==void 0&&(le=""+G.key),G)!ge.call(G,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&G.ref===void 0||(A[ue]=G[ue]);var ue=arguments.length-2;if(ue===1)A.children=Z;else if(1<ue){for(var he=Array(ue),Ue=0;Ue<ue;Ue++)he[Ue]=arguments[Ue+2];A.children=he}return K(E.type,le,A)},ke.createContext=function(E){return E={$$typeof:h,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null},E.Provider=E,E.Consumer={$$typeof:f,_context:E},E},ke.createElement=function(E,G,Z){var A,le={},ue=null;if(G!=null)for(A in G.key!==void 0&&(ue=""+G.key),G)ge.call(G,A)&&A!=="key"&&A!=="__self"&&A!=="__source"&&(le[A]=G[A]);var he=arguments.length-2;if(he===1)le.children=Z;else if(1<he){for(var Ue=Array(he),Ce=0;Ce<he;Ce++)Ue[Ce]=arguments[Ce+2];le.children=Ue}if(E&&E.defaultProps)for(A in he=E.defaultProps,he)le[A]===void 0&&(le[A]=he[A]);return K(E,ue,le)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(E){return{$$typeof:v,render:E}},ke.isValidElement=ne,ke.lazy=function(E){return{$$typeof:j,_payload:{_status:-1,_result:E},_init:ie}},ke.memo=function(E,G){return{$$typeof:g,type:E,compare:G===void 0?null:G}},ke.startTransition=function(E){var G=X.T,Z={};X.T=Z;try{var A=E(),le=X.S;le!==null&&le(Z,A),typeof A=="object"&&A!==null&&typeof A.then=="function"&&A.then(te,me)}catch(ue){me(ue)}finally{G!==null&&Z.types!==null&&(G.types=Z.types),X.T=G}},ke.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},ke.use=function(E){return X.H.use(E)},ke.useActionState=function(E,G,Z){return X.H.useActionState(E,G,Z)},ke.useCallback=function(E,G){return X.H.useCallback(E,G)},ke.useContext=function(E){return X.H.useContext(E)},ke.useDebugValue=function(){},ke.useDeferredValue=function(E,G){return X.H.useDeferredValue(E,G)},ke.useEffect=function(E,G){return X.H.useEffect(E,G)},ke.useEffectEvent=function(E){return X.H.useEffectEvent(E)},ke.useId=function(){return X.H.useId()},ke.useImperativeHandle=function(E,G,Z){return X.H.useImperativeHandle(E,G,Z)},ke.useInsertionEffect=function(E,G){return X.H.useInsertionEffect(E,G)},ke.useLayoutEffect=function(E,G){return X.H.useLayoutEffect(E,G)},ke.useMemo=function(E,G){return X.H.useMemo(E,G)},ke.useOptimistic=function(E,G){return X.H.useOptimistic(E,G)},ke.useReducer=function(E,G,Z){return X.H.useReducer(E,G,Z)},ke.useRef=function(E){return X.H.useRef(E)},ke.useState=function(E){return X.H.useState(E)},ke.useSyncExternalStore=function(E,G,Z){return X.H.useSyncExternalStore(E,G,Z)},ke.useTransition=function(){return X.H.useTransition()},ke.version="19.2.4",ke}var J0;function qd(){return J0||(J0=1,ud.exports=Ug()),ud.exports}var u=qd(),md={exports:{}},Wl={},xd={exports:{}},fd={};var F0;function Bg(){return F0||(F0=1,(function(l){function i(q,W){var ie=q.length;q.push(W);e:for(;0<ie;){var me=ie-1>>>1,be=q[me];if(0<x(be,W))q[me]=W,q[ie]=be,ie=me;else break e}}function o(q){return q.length===0?null:q[0]}function d(q){if(q.length===0)return null;var W=q[0],ie=q.pop();if(ie!==W){q[0]=ie;e:for(var me=0,be=q.length,E=be>>>1;me<E;){var G=2*(me+1)-1,Z=q[G],A=G+1,le=q[A];if(0>x(Z,ie))A<be&&0>x(le,Z)?(q[me]=le,q[A]=ie,me=A):(q[me]=Z,q[G]=ie,me=G);else if(A<be&&0>x(le,ie))q[me]=le,q[A]=ie,me=A;else break e}}return W}function x(q,W){var ie=q.sortIndex-W.sortIndex;return ie!==0?ie:q.id-W.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;l.unstable_now=function(){return f.now()}}else{var h=Date,v=h.now();l.unstable_now=function(){return h.now()-v}}var p=[],g=[],j=1,b=null,y=3,z=!1,S=!1,O=!1,C=!1,w=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function $(q){for(var W=o(g);W!==null;){if(W.callback===null)d(g);else if(W.startTime<=q)d(g),W.sortIndex=W.expirationTime,i(p,W);else break;W=o(g)}}function L(q){if(O=!1,$(q),!S)if(o(p)!==null)S=!0,te||(te=!0,J());else{var W=o(g);W!==null&&ce(L,W.startTime-q)}}var te=!1,X=-1,ge=5,K=-1;function se(){return C?!0:!(l.unstable_now()-K<ge)}function ne(){if(C=!1,te){var q=l.unstable_now();K=q;var W=!0;try{e:{S=!1,O&&(O=!1,k(X),X=-1),z=!0;var ie=y;try{t:{for($(q),b=o(p);b!==null&&!(b.expirationTime>q&&se());){var me=b.callback;if(typeof me=="function"){b.callback=null,y=b.priorityLevel;var be=me(b.expirationTime<=q);if(q=l.unstable_now(),typeof be=="function"){b.callback=be,$(q),W=!0;break t}b===o(p)&&d(p),$(q)}else d(p);b=o(p)}if(b!==null)W=!0;else{var E=o(g);E!==null&&ce(L,E.startTime-q),W=!1}}break e}finally{b=null,y=ie,z=!1}W=void 0}}finally{W?J():te=!1}}}var J;if(typeof M=="function")J=function(){M(ne)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,Q=fe.port2;fe.port1.onmessage=ne,J=function(){Q.postMessage(null)}}else J=function(){w(ne,0)};function ce(q,W){X=w(function(){q(l.unstable_now())},W)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(q){q.callback=null},l.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ge=0<q?Math.floor(1e3/q):5},l.unstable_getCurrentPriorityLevel=function(){return y},l.unstable_next=function(q){switch(y){case 1:case 2:case 3:var W=3;break;default:W=y}var ie=y;y=W;try{return q()}finally{y=ie}},l.unstable_requestPaint=function(){C=!0},l.unstable_runWithPriority=function(q,W){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ie=y;y=q;try{return W()}finally{y=ie}},l.unstable_scheduleCallback=function(q,W,ie){var me=l.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?me+ie:me):ie=me,q){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=ie+be,q={id:j++,callback:W,priorityLevel:q,startTime:ie,expirationTime:be,sortIndex:-1},ie>me?(q.sortIndex=ie,i(g,q),o(p)===null&&q===o(g)&&(O?(k(X),X=-1):O=!0,ce(L,ie-me))):(q.sortIndex=be,i(p,q),S||z||(S=!0,te||(te=!0,J()))),q},l.unstable_shouldYield=se,l.unstable_wrapCallback=function(q){var W=y;return function(){var ie=y;y=W;try{return q.apply(this,arguments)}finally{y=ie}}}})(fd)),fd}var I0;function Hg(){return I0||(I0=1,xd.exports=Bg()),xd.exports}var hd={exports:{}},At={};var P0;function Gg(){if(P0)return At;P0=1;var l=qd();function i(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var j=2;j<arguments.length;j++)g+="&args[]="+encodeURIComponent(arguments[j])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var d={d:{f:o,r:function(){throw Error(i(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},x=Symbol.for("react.portal");function f(p,g,j){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:x,key:b==null?null:""+b,children:p,containerInfo:g,implementation:j}}var h=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function v(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return At.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=d,At.createPortal=function(p,g){var j=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(i(299));return f(p,g,null,j)},At.flushSync=function(p){var g=h.T,j=d.p;try{if(h.T=null,d.p=2,p)return p()}finally{h.T=g,d.p=j,d.d.f()}},At.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,d.d.C(p,g))},At.prefetchDNS=function(p){typeof p=="string"&&d.d.D(p)},At.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var j=g.as,b=v(j,g.crossOrigin),y=typeof g.integrity=="string"?g.integrity:void 0,z=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;j==="style"?d.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:y,fetchPriority:z}):j==="script"&&d.d.X(p,{crossOrigin:b,integrity:y,fetchPriority:z,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},At.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var j=v(g.as,g.crossOrigin);d.d.M(p,{crossOrigin:j,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&d.d.M(p)},At.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var j=g.as,b=v(j,g.crossOrigin);d.d.L(p,j,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},At.preloadModule=function(p,g){if(typeof p=="string")if(g){var j=v(g.as,g.crossOrigin);d.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:j,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else d.d.m(p)},At.requestFormReset=function(p){d.d.r(p)},At.unstable_batchedUpdates=function(p,g){return p(g)},At.useFormState=function(p,g,j){return h.H.useFormState(p,g,j)},At.useFormStatus=function(){return h.H.useHostTransitionStatus()},At.version="19.2.4",At}var W0;function zf(){if(W0)return hd.exports;W0=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(i){console.error(i)}}return l(),hd.exports=Gg(),hd.exports}var ef;function $g(){if(ef)return Wl;ef=1;var l=Hg(),i=qd(),o=zf();function d(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)a+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function x(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var a=e,s=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,(a.flags&4098)!==0&&(s=a.return),e=a.return;while(e)}return a.tag===3?s:null}function h(e){if(e.tag===13){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function v(e){if(e.tag===31){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function p(e){if(f(e)!==e)throw Error(d(188))}function g(e){var a=e.alternate;if(!a){if(a=f(e),a===null)throw Error(d(188));return a!==e?null:e}for(var s=e,n=a;;){var r=s.return;if(r===null)break;var c=r.alternate;if(c===null){if(n=r.return,n!==null){s=n;continue}break}if(r.child===c.child){for(c=r.child;c;){if(c===s)return p(r),e;if(c===n)return p(r),a;c=c.sibling}throw Error(d(188))}if(s.return!==n.return)s=r,n=c;else{for(var m=!1,N=r.child;N;){if(N===s){m=!0,s=r,n=c;break}if(N===n){m=!0,n=r,s=c;break}N=N.sibling}if(!m){for(N=c.child;N;){if(N===s){m=!0,s=c,n=r;break}if(N===n){m=!0,n=c,s=r;break}N=N.sibling}if(!m)throw Error(d(189))}}if(s.alternate!==n)throw Error(d(190))}if(s.tag!==3)throw Error(d(188));return s.stateNode.current===s?e:a}function j(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e;for(e=e.child;e!==null;){if(a=j(e),a!==null)return a;e=e.sibling}return null}var b=Object.assign,y=Symbol.for("react.element"),z=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),M=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),se=Symbol.for("react.memo_cache_sentinel"),ne=Symbol.iterator;function J(e){return e===null||typeof e!="object"?null:(e=ne&&e[ne]||e["@@iterator"],typeof e=="function"?e:null)}var fe=Symbol.for("react.client.reference");function Q(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===fe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case O:return"Fragment";case w:return"Profiler";case C:return"StrictMode";case L:return"Suspense";case te:return"SuspenseList";case K:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case S:return"Portal";case M:return e.displayName||"Context";case k:return(e._context.displayName||"Context")+".Consumer";case $:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case X:return a=e.displayName||null,a!==null?a:Q(e.type)||"Memo";case ge:a=e._payload,e=e._init;try{return Q(e(a))}catch{}}return null}var ce=Array.isArray,q=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},me=[],be=-1;function E(e){return{current:e}}function G(e){0>be||(e.current=me[be],me[be]=null,be--)}function Z(e,a){be++,me[be]=e.current,e.current=a}var A=E(null),le=E(null),ue=E(null),he=E(null);function Ue(e,a){switch(Z(ue,a),Z(le,e),Z(A,null),a.nodeType){case 9:case 11:e=(e=a.documentElement)&&(e=e.namespaceURI)?h0(e):0;break;default:if(e=a.tagName,a=a.namespaceURI)a=h0(a),e=p0(a,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}G(A),Z(A,e)}function Ce(){G(A),G(le),G(ue)}function rt(e){e.memoizedState!==null&&Z(he,e);var a=A.current,s=p0(a,e.type);a!==s&&(Z(le,e),Z(A,s))}function Ot(e){le.current===e&&(G(A),G(le)),he.current===e&&(G(he),Kl._currentValue=ie)}var Rt,wt;function Ae(e){if(Rt===void 0)try{throw Error()}catch(s){var a=s.stack.trim().match(/\n( *(at )?)/);Rt=a&&a[1]||"",wt=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rt+e+wt}var re=!1;function _(e,a){if(!e||re)return"";re=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(a){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(V){var H=V}Reflect.construct(e,[],ae)}else{try{ae.call()}catch(V){H=V}e.call(ae.prototype)}}else{try{throw Error()}catch(V){H=V}(ae=e())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(V){if(V&&H&&typeof V.stack=="string")return[V.stack,H.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var c=n.DetermineComponentFrameRoot(),m=c[0],N=c[1];if(m&&N){var T=m.split(`
`),B=N.split(`
`);for(r=n=0;n<T.length&&!T[n].includes("DetermineComponentFrameRoot");)n++;for(;r<B.length&&!B[r].includes("DetermineComponentFrameRoot");)r++;if(n===T.length||r===B.length)for(n=T.length-1,r=B.length-1;1<=n&&0<=r&&T[n]!==B[r];)r--;for(;1<=n&&0<=r;n--,r--)if(T[n]!==B[r]){if(n!==1||r!==1)do if(n--,r--,0>r||T[n]!==B[r]){var P=`
`+T[n].replace(" at new "," at ");return e.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",e.displayName)),P}while(1<=n&&0<=r);break}}}finally{re=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Ae(s):""}function F(e,a){switch(e.tag){case 26:case 27:case 5:return Ae(e.type);case 16:return Ae("Lazy");case 13:return e.child!==a&&a!==null?Ae("Suspense Fallback"):Ae("Suspense");case 19:return Ae("SuspenseList");case 0:case 15:return _(e.type,!1);case 11:return _(e.type.render,!1);case 1:return _(e.type,!0);case 31:return Ae("Activity");default:return""}}function xe(e){try{var a="",s=null;do a+=F(e,s),s=e,e=e.return;while(e);return a}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var _e=Object.prototype.hasOwnProperty,Zt=l.unstable_scheduleCallback,xt=l.unstable_cancelCallback,ba=l.unstable_shouldYield,I=l.unstable_requestPaint,Ne=l.unstable_now,st=l.unstable_getCurrentPriorityLevel,Y=l.unstable_ImmediatePriority,ve=l.unstable_UserBlockingPriority,Ge=l.unstable_NormalPriority,ft=l.unstable_LowPriority,dn=l.unstable_IdlePriority,ll=l.log,bh=l.unstable_setDisableYieldValue,rl=null,Xt=null;function es(e){if(typeof ll=="function"&&bh(e),Xt&&typeof Xt.setStrictMode=="function")try{Xt.setStrictMode(rl,e)}catch{}}var Kt=Math.clz32?Math.clz32:Nh,vh=Math.log,jh=Math.LN2;function Nh(e){return e>>>=0,e===0?32:31-(vh(e)/jh|0)|0}var fr=256,hr=262144,pr=4194304;function Ms(e){var a=e&42;if(a!==0)return a;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function gr(e,a,s){var n=e.pendingLanes;if(n===0)return 0;var r=0,c=e.suspendedLanes,m=e.pingedLanes;e=e.warmLanes;var N=n&134217727;return N!==0?(n=N&~c,n!==0?r=Ms(n):(m&=N,m!==0?r=Ms(m):s||(s=N&~e,s!==0&&(r=Ms(s))))):(N=n&~c,N!==0?r=Ms(N):m!==0?r=Ms(m):s||(s=n&~e,s!==0&&(r=Ms(s)))),r===0?0:a!==0&&a!==r&&(a&c)===0&&(c=r&-r,s=a&-a,c>=s||c===32&&(s&4194048)!==0)?a:r}function il(e,a){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&a)===0}function Sh(e,a){switch(e){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fd(){var e=pr;return pr<<=1,(pr&62914560)===0&&(pr=4194304),e}function Ii(e){for(var a=[],s=0;31>s;s++)a.push(e);return a}function cl(e,a){e.pendingLanes|=a,a!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function _h(e,a,s,n,r,c){var m=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var N=e.entanglements,T=e.expirationTimes,B=e.hiddenUpdates;for(s=m&~s;0<s;){var P=31-Kt(s),ae=1<<P;N[P]=0,T[P]=-1;var H=B[P];if(H!==null)for(B[P]=null,P=0;P<H.length;P++){var V=H[P];V!==null&&(V.lane&=-536870913)}s&=~ae}n!==0&&Id(e,n,0),c!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=c&~(m&~a))}function Id(e,a,s){e.pendingLanes|=a,e.suspendedLanes&=~a;var n=31-Kt(a);e.entangledLanes|=a,e.entanglements[n]=e.entanglements[n]|1073741824|s&261930}function Pd(e,a){var s=e.entangledLanes|=a;for(e=e.entanglements;s;){var n=31-Kt(s),r=1<<n;r&a|e[n]&a&&(e[n]|=a),s&=~r}}function Wd(e,a){var s=a&-a;return s=(s&42)!==0?1:Pi(s),(s&(e.suspendedLanes|a))!==0?0:s}function Pi(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Wi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function eu(){var e=W.p;return e!==0?e:(e=window.event,e===void 0?32:B0(e.type))}function tu(e,a){var s=W.p;try{return W.p=e,a()}finally{W.p=s}}var ts=Math.random().toString(36).slice(2),kt="__reactFiber$"+ts,Mt="__reactProps$"+ts,un="__reactContainer$"+ts,ec="__reactEvents$"+ts,wh="__reactListeners$"+ts,kh="__reactHandles$"+ts,au="__reactResources$"+ts,ol="__reactMarker$"+ts;function tc(e){delete e[kt],delete e[Mt],delete e[ec],delete e[wh],delete e[kh]}function mn(e){var a=e[kt];if(a)return a;for(var s=e.parentNode;s;){if(a=s[un]||s[kt]){if(s=a.alternate,a.child!==null||s!==null&&s.child!==null)for(e=S0(e);e!==null;){if(s=e[kt])return s;e=S0(e)}return a}e=s,s=e.parentNode}return null}function xn(e){if(e=e[kt]||e[un]){var a=e.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return e}return null}function dl(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e.stateNode;throw Error(d(33))}function fn(e){var a=e[au];return a||(a=e[au]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Nt(e){e[ol]=!0}var su=new Set,nu={};function Ls(e,a){hn(e,a),hn(e+"Capture",a)}function hn(e,a){for(nu[e]=a,e=0;e<a.length;e++)su.add(a[e])}var Ch=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lu={},ru={};function zh(e){return _e.call(ru,e)?!0:_e.call(lu,e)?!1:Ch.test(e)?ru[e]=!0:(lu[e]=!0,!1)}function yr(e,a,s){if(zh(a))if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(a);return;case"boolean":var n=a.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(a);return}}e.setAttribute(a,""+s)}}function br(e,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttribute(a,""+s)}}function Ra(e,a,s,n){if(n===null)e.removeAttribute(s);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(a,s,""+n)}}function na(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function iu(e){var a=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Eh(e,a,s){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,a);if(!e.hasOwnProperty(a)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,c=n.set;return Object.defineProperty(e,a,{configurable:!0,get:function(){return r.call(this)},set:function(m){s=""+m,c.call(this,m)}}),Object.defineProperty(e,a,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(m){s=""+m},stopTracking:function(){e._valueTracker=null,delete e[a]}}}}function ac(e){if(!e._valueTracker){var a=iu(e)?"checked":"value";e._valueTracker=Eh(e,a,""+e[a])}}function cu(e){if(!e)return!1;var a=e._valueTracker;if(!a)return!0;var s=a.getValue(),n="";return e&&(n=iu(e)?e.checked?"true":"false":e.value),e=n,e!==s?(a.setValue(e),!0):!1}function vr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Th=/[\n"\\]/g;function la(e){return e.replace(Th,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function sc(e,a,s,n,r,c,m,N){e.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.type=m:e.removeAttribute("type"),a!=null?m==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+na(a)):e.value!==""+na(a)&&(e.value=""+na(a)):m!=="submit"&&m!=="reset"||e.removeAttribute("value"),a!=null?nc(e,m,na(a)):s!=null?nc(e,m,na(s)):n!=null&&e.removeAttribute("value"),r==null&&c!=null&&(e.defaultChecked=!!c),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?e.name=""+na(N):e.removeAttribute("name")}function ou(e,a,s,n,r,c,m,N){if(c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.type=c),a!=null||s!=null){if(!(c!=="submit"&&c!=="reset"||a!=null)){ac(e);return}s=s!=null?""+na(s):"",a=a!=null?""+na(a):s,N||a===e.value||(e.value=a),e.defaultValue=a}n=n??r,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=N?e.checked:!!n,e.defaultChecked=!!n,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.name=m),ac(e)}function nc(e,a,s){a==="number"&&vr(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function pn(e,a,s,n){if(e=e.options,a){a={};for(var r=0;r<s.length;r++)a["$"+s[r]]=!0;for(s=0;s<e.length;s++)r=a.hasOwnProperty("$"+e[s].value),e[s].selected!==r&&(e[s].selected=r),r&&n&&(e[s].defaultSelected=!0)}else{for(s=""+na(s),a=null,r=0;r<e.length;r++){if(e[r].value===s){e[r].selected=!0,n&&(e[r].defaultSelected=!0);return}a!==null||e[r].disabled||(a=e[r])}a!==null&&(a.selected=!0)}}function du(e,a,s){if(a!=null&&(a=""+na(a),a!==e.value&&(e.value=a),s==null)){e.defaultValue!==a&&(e.defaultValue=a);return}e.defaultValue=s!=null?""+na(s):""}function uu(e,a,s,n){if(a==null){if(n!=null){if(s!=null)throw Error(d(92));if(ce(n)){if(1<n.length)throw Error(d(93));n=n[0]}s=n}s==null&&(s=""),a=s}s=na(a),e.defaultValue=s,n=e.textContent,n===s&&n!==""&&n!==null&&(e.value=n),ac(e)}function gn(e,a){if(a){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=a;return}}e.textContent=a}var Oh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mu(e,a,s){var n=a.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?n?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="":n?e.setProperty(a,s):typeof s!="number"||s===0||Oh.has(a)?a==="float"?e.cssFloat=s:e[a]=(""+s).trim():e[a]=s+"px"}function xu(e,a,s){if(a!=null&&typeof a!="object")throw Error(d(62));if(e=e.style,s!=null){for(var n in s)!s.hasOwnProperty(n)||a!=null&&a.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var r in a)n=a[r],a.hasOwnProperty(r)&&s[r]!==n&&mu(e,r,n)}else for(var c in a)a.hasOwnProperty(c)&&mu(e,c,a[c])}function lc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ah=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jr(e){return Ah.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Aa(){}var rc=null;function ic(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yn=null,bn=null;function fu(e){var a=xn(e);if(a&&(e=a.stateNode)){var s=e[Mt]||null;e:switch(e=a.stateNode,a.type){case"input":if(sc(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),a=s.name,s.type==="radio"&&a!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+la(""+a)+'"][type="radio"]'),a=0;a<s.length;a++){var n=s[a];if(n!==e&&n.form===e.form){var r=n[Mt]||null;if(!r)throw Error(d(90));sc(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(a=0;a<s.length;a++)n=s[a],n.form===e.form&&cu(n)}break e;case"textarea":du(e,s.value,s.defaultValue);break e;case"select":a=s.value,a!=null&&pn(e,!!s.multiple,a,!1)}}}var cc=!1;function hu(e,a,s){if(cc)return e(a,s);cc=!0;try{var n=e(a);return n}finally{if(cc=!1,(yn!==null||bn!==null)&&(ci(),yn&&(a=yn,e=bn,bn=yn=null,fu(a),e)))for(a=0;a<e.length;a++)fu(e[a])}}function ul(e,a){var s=e.stateNode;if(s===null)return null;var n=s[Mt]||null;if(n===null)return null;s=n[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(d(231,a,typeof s));return s}var Da=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oc=!1;if(Da)try{var ml={};Object.defineProperty(ml,"passive",{get:function(){oc=!0}}),window.addEventListener("test",ml,ml),window.removeEventListener("test",ml,ml)}catch{oc=!1}var as=null,dc=null,Nr=null;function pu(){if(Nr)return Nr;var e,a=dc,s=a.length,n,r="value"in as?as.value:as.textContent,c=r.length;for(e=0;e<s&&a[e]===r[e];e++);var m=s-e;for(n=1;n<=m&&a[s-n]===r[c-n];n++);return Nr=r.slice(e,1<n?1-n:void 0)}function Sr(e){var a=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&a===13&&(e=13)):e=a,e===10&&(e=13),32<=e||e===13?e:0}function _r(){return!0}function gu(){return!1}function Lt(e){function a(s,n,r,c,m){this._reactName=s,this._targetInst=r,this.type=n,this.nativeEvent=c,this.target=m,this.currentTarget=null;for(var N in e)e.hasOwnProperty(N)&&(s=e[N],this[N]=s?s(c):c[N]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?_r:gu,this.isPropagationStopped=gu,this}return b(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=_r)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=_r)},persist:function(){},isPersistent:_r}),a}var qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wr=Lt(qs),xl=b({},qs,{view:0,detail:0}),Dh=Lt(xl),uc,mc,fl,kr=b({},xl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fl&&(fl&&e.type==="mousemove"?(uc=e.screenX-fl.screenX,mc=e.screenY-fl.screenY):mc=uc=0,fl=e),uc)},movementY:function(e){return"movementY"in e?e.movementY:mc}}),yu=Lt(kr),Mh=b({},kr,{dataTransfer:0}),Lh=Lt(Mh),qh=b({},xl,{relatedTarget:0}),xc=Lt(qh),Uh=b({},qs,{animationName:0,elapsedTime:0,pseudoElement:0}),Bh=Lt(Uh),Hh=b({},qs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Gh=Lt(Hh),$h=b({},qs,{data:0}),bu=Lt($h),Yh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zh(e){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(e):(e=Qh[e])?!!a[e]:!1}function fc(){return Zh}var Xh=b({},xl,{key:function(e){if(e.key){var a=Yh[e.key]||e.key;if(a!=="Unidentified")return a}return e.type==="keypress"?(e=Sr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Vh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fc,charCode:function(e){return e.type==="keypress"?Sr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Sr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Kh=Lt(Xh),Jh=b({},kr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vu=Lt(Jh),Fh=b({},xl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fc}),Ih=Lt(Fh),Ph=b({},qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wh=Lt(Ph),ep=b({},kr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),tp=Lt(ep),ap=b({},qs,{newState:0,oldState:0}),sp=Lt(ap),np=[9,13,27,32],hc=Da&&"CompositionEvent"in window,hl=null;Da&&"documentMode"in document&&(hl=document.documentMode);var lp=Da&&"TextEvent"in window&&!hl,ju=Da&&(!hc||hl&&8<hl&&11>=hl),Nu=" ",Su=!1;function _u(e,a){switch(e){case"keyup":return np.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vn=!1;function rp(e,a){switch(e){case"compositionend":return wu(a);case"keypress":return a.which!==32?null:(Su=!0,Nu);case"textInput":return e=a.data,e===Nu&&Su?null:e;default:return null}}function ip(e,a){if(vn)return e==="compositionend"||!hc&&_u(e,a)?(e=pu(),Nr=dc=as=null,vn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ju&&a.locale!=="ko"?null:a.data;default:return null}}var cp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ku(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a==="input"?!!cp[e.type]:a==="textarea"}function Cu(e,a,s,n){yn?bn?bn.push(n):bn=[n]:yn=n,a=hi(a,"onChange"),0<a.length&&(s=new wr("onChange","change",null,s,n),e.push({event:s,listeners:a}))}var pl=null,gl=null;function op(e){o0(e,0)}function Cr(e){var a=dl(e);if(cu(a))return e}function zu(e,a){if(e==="change")return a}var Eu=!1;if(Da){var pc;if(Da){var gc="oninput"in document;if(!gc){var Tu=document.createElement("div");Tu.setAttribute("oninput","return;"),gc=typeof Tu.oninput=="function"}pc=gc}else pc=!1;Eu=pc&&(!document.documentMode||9<document.documentMode)}function Ou(){pl&&(pl.detachEvent("onpropertychange",Ru),gl=pl=null)}function Ru(e){if(e.propertyName==="value"&&Cr(gl)){var a=[];Cu(a,gl,e,ic(e)),hu(op,a)}}function dp(e,a,s){e==="focusin"?(Ou(),pl=a,gl=s,pl.attachEvent("onpropertychange",Ru)):e==="focusout"&&Ou()}function up(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Cr(gl)}function mp(e,a){if(e==="click")return Cr(a)}function xp(e,a){if(e==="input"||e==="change")return Cr(a)}function fp(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}var Jt=typeof Object.is=="function"?Object.is:fp;function yl(e,a){if(Jt(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var s=Object.keys(e),n=Object.keys(a);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var r=s[n];if(!_e.call(a,r)||!Jt(e[r],a[r]))return!1}return!0}function Au(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Du(e,a){var s=Au(e);e=0;for(var n;s;){if(s.nodeType===3){if(n=e+s.textContent.length,e<=a&&n>=a)return{node:s,offset:a-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Au(s)}}function Mu(e,a){return e&&a?e===a?!0:e&&e.nodeType===3?!1:a&&a.nodeType===3?Mu(e,a.parentNode):"contains"in e?e.contains(a):e.compareDocumentPosition?!!(e.compareDocumentPosition(a)&16):!1:!1}function Lu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var a=vr(e.document);a instanceof e.HTMLIFrameElement;){try{var s=typeof a.contentWindow.location.href=="string"}catch{s=!1}if(s)e=a.contentWindow;else break;a=vr(e.document)}return a}function yc(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a&&(a==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||a==="textarea"||e.contentEditable==="true")}var hp=Da&&"documentMode"in document&&11>=document.documentMode,jn=null,bc=null,bl=null,vc=!1;function qu(e,a,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;vc||jn==null||jn!==vr(n)||(n=jn,"selectionStart"in n&&yc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),bl&&yl(bl,n)||(bl=n,n=hi(bc,"onSelect"),0<n.length&&(a=new wr("onSelect","select",null,a,s),e.push({event:a,listeners:n}),a.target=jn)))}function Us(e,a){var s={};return s[e.toLowerCase()]=a.toLowerCase(),s["Webkit"+e]="webkit"+a,s["Moz"+e]="moz"+a,s}var Nn={animationend:Us("Animation","AnimationEnd"),animationiteration:Us("Animation","AnimationIteration"),animationstart:Us("Animation","AnimationStart"),transitionrun:Us("Transition","TransitionRun"),transitionstart:Us("Transition","TransitionStart"),transitioncancel:Us("Transition","TransitionCancel"),transitionend:Us("Transition","TransitionEnd")},jc={},Uu={};Da&&(Uu=document.createElement("div").style,"AnimationEvent"in window||(delete Nn.animationend.animation,delete Nn.animationiteration.animation,delete Nn.animationstart.animation),"TransitionEvent"in window||delete Nn.transitionend.transition);function Bs(e){if(jc[e])return jc[e];if(!Nn[e])return e;var a=Nn[e],s;for(s in a)if(a.hasOwnProperty(s)&&s in Uu)return jc[e]=a[s];return e}var Bu=Bs("animationend"),Hu=Bs("animationiteration"),Gu=Bs("animationstart"),pp=Bs("transitionrun"),gp=Bs("transitionstart"),yp=Bs("transitioncancel"),$u=Bs("transitionend"),Yu=new Map,Nc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Nc.push("scrollEnd");function va(e,a){Yu.set(e,a),Ls(a,[e])}var zr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ra=[],Sn=0,Sc=0;function Er(){for(var e=Sn,a=Sc=Sn=0;a<e;){var s=ra[a];ra[a++]=null;var n=ra[a];ra[a++]=null;var r=ra[a];ra[a++]=null;var c=ra[a];if(ra[a++]=null,n!==null&&r!==null){var m=n.pending;m===null?r.next=r:(r.next=m.next,m.next=r),n.pending=r}c!==0&&Vu(s,r,c)}}function Tr(e,a,s,n){ra[Sn++]=e,ra[Sn++]=a,ra[Sn++]=s,ra[Sn++]=n,Sc|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function _c(e,a,s,n){return Tr(e,a,s,n),Or(e)}function Hs(e,a){return Tr(e,null,null,a),Or(e)}function Vu(e,a,s){e.lanes|=s;var n=e.alternate;n!==null&&(n.lanes|=s);for(var r=!1,c=e.return;c!==null;)c.childLanes|=s,n=c.alternate,n!==null&&(n.childLanes|=s),c.tag===22&&(e=c.stateNode,e===null||e._visibility&1||(r=!0)),e=c,c=c.return;return e.tag===3?(c=e.stateNode,r&&a!==null&&(r=31-Kt(s),e=c.hiddenUpdates,n=e[r],n===null?e[r]=[a]:n.push(a),a.lane=s|536870912),c):null}function Or(e){if(50<Gl)throw Gl=0,Do=null,Error(d(185));for(var a=e.return;a!==null;)e=a,a=e.return;return e.tag===3?e.stateNode:null}var _n={};function bp(e,a,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ft(e,a,s,n){return new bp(e,a,s,n)}function wc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ma(e,a){var s=e.alternate;return s===null?(s=Ft(e.tag,a,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=a,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,a=e.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Qu(e,a){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=a,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,a=s.dependencies,e.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),e}function Rr(e,a,s,n,r,c){var m=0;if(n=e,typeof e=="function")wc(e)&&(m=1);else if(typeof e=="string")m=_g(e,s,A.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case K:return e=Ft(31,s,a,r),e.elementType=K,e.lanes=c,e;case O:return Gs(s.children,r,c,a);case C:m=8,r|=24;break;case w:return e=Ft(12,s,a,r|2),e.elementType=w,e.lanes=c,e;case L:return e=Ft(13,s,a,r),e.elementType=L,e.lanes=c,e;case te:return e=Ft(19,s,a,r),e.elementType=te,e.lanes=c,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M:m=10;break e;case k:m=9;break e;case $:m=11;break e;case X:m=14;break e;case ge:m=16,n=null;break e}m=29,s=Error(d(130,e===null?"null":typeof e,"")),n=null}return a=Ft(m,s,a,r),a.elementType=e,a.type=n,a.lanes=c,a}function Gs(e,a,s,n){return e=Ft(7,e,n,a),e.lanes=s,e}function kc(e,a,s){return e=Ft(6,e,null,a),e.lanes=s,e}function Zu(e){var a=Ft(18,null,null,0);return a.stateNode=e,a}function Cc(e,a,s){return a=Ft(4,e.children!==null?e.children:[],e.key,a),a.lanes=s,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}var Xu=new WeakMap;function ia(e,a){if(typeof e=="object"&&e!==null){var s=Xu.get(e);return s!==void 0?s:(a={value:e,source:a,stack:xe(a)},Xu.set(e,a),a)}return{value:e,source:a,stack:xe(a)}}var wn=[],kn=0,Ar=null,vl=0,ca=[],oa=0,ss=null,_a=1,wa="";function La(e,a){wn[kn++]=vl,wn[kn++]=Ar,Ar=e,vl=a}function Ku(e,a,s){ca[oa++]=_a,ca[oa++]=wa,ca[oa++]=ss,ss=e;var n=_a;e=wa;var r=32-Kt(n)-1;n&=~(1<<r),s+=1;var c=32-Kt(a)+r;if(30<c){var m=r-r%5;c=(n&(1<<m)-1).toString(32),n>>=m,r-=m,_a=1<<32-Kt(a)+r|s<<r|n,wa=c+e}else _a=1<<c|s<<r|n,wa=e}function zc(e){e.return!==null&&(La(e,1),Ku(e,1,0))}function Ec(e){for(;e===Ar;)Ar=wn[--kn],wn[kn]=null,vl=wn[--kn],wn[kn]=null;for(;e===ss;)ss=ca[--oa],ca[oa]=null,wa=ca[--oa],ca[oa]=null,_a=ca[--oa],ca[oa]=null}function Ju(e,a){ca[oa++]=_a,ca[oa++]=wa,ca[oa++]=ss,_a=a.id,wa=a.overflow,ss=e}var Ct=null,et=null,Le=!1,ns=null,da=!1,Tc=Error(d(519));function ls(e){var a=Error(d(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw jl(ia(a,e)),Tc}function Fu(e){var a=e.stateNode,s=e.type,n=e.memoizedProps;switch(a[kt]=e,a[Mt]=n,s){case"dialog":Re("cancel",a),Re("close",a);break;case"iframe":case"object":case"embed":Re("load",a);break;case"video":case"audio":for(s=0;s<Yl.length;s++)Re(Yl[s],a);break;case"source":Re("error",a);break;case"img":case"image":case"link":Re("error",a),Re("load",a);break;case"details":Re("toggle",a);break;case"input":Re("invalid",a),ou(a,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":Re("invalid",a);break;case"textarea":Re("invalid",a),uu(a,n.value,n.defaultValue,n.children)}s=n.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||a.textContent===""+s||n.suppressHydrationWarning===!0||x0(a.textContent,s)?(n.popover!=null&&(Re("beforetoggle",a),Re("toggle",a)),n.onScroll!=null&&Re("scroll",a),n.onScrollEnd!=null&&Re("scrollend",a),n.onClick!=null&&(a.onclick=Aa),a=!0):a=!1,a||ls(e,!0)}function Iu(e){for(Ct=e.return;Ct;)switch(Ct.tag){case 5:case 31:case 13:da=!1;return;case 27:case 3:da=!0;return;default:Ct=Ct.return}}function Cn(e){if(e!==Ct)return!1;if(!Le)return Iu(e),Le=!0,!1;var a=e.tag,s;if((s=a!==3&&a!==27)&&((s=a===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Jo(e.type,e.memoizedProps)),s=!s),s&&et&&ls(e),Iu(e),a===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));et=N0(e)}else if(a===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));et=N0(e)}else a===27?(a=et,bs(e.type)?(e=ed,ed=null,et=e):et=a):et=Ct?ma(e.stateNode.nextSibling):null;return!0}function $s(){et=Ct=null,Le=!1}function Oc(){var e=ns;return e!==null&&(Ht===null?Ht=e:Ht.push.apply(Ht,e),ns=null),e}function jl(e){ns===null?ns=[e]:ns.push(e)}var Rc=E(null),Ys=null,qa=null;function rs(e,a,s){Z(Rc,a._currentValue),a._currentValue=s}function Ua(e){e._currentValue=Rc.current,G(Rc)}function Ac(e,a,s){for(;e!==null;){var n=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,n!==null&&(n.childLanes|=a)):n!==null&&(n.childLanes&a)!==a&&(n.childLanes|=a),e===s)break;e=e.return}}function Dc(e,a,s,n){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var c=r.dependencies;if(c!==null){var m=r.child;c=c.firstContext;e:for(;c!==null;){var N=c;c=r;for(var T=0;T<a.length;T++)if(N.context===a[T]){c.lanes|=s,N=c.alternate,N!==null&&(N.lanes|=s),Ac(c.return,s,e),n||(m=null);break e}c=N.next}}else if(r.tag===18){if(m=r.return,m===null)throw Error(d(341));m.lanes|=s,c=m.alternate,c!==null&&(c.lanes|=s),Ac(m,s,e),m=null}else m=r.child;if(m!==null)m.return=r;else for(m=r;m!==null;){if(m===e){m=null;break}if(r=m.sibling,r!==null){r.return=m.return,m=r;break}m=m.return}r=m}}function zn(e,a,s,n){e=null;for(var r=a,c=!1;r!==null;){if(!c){if((r.flags&524288)!==0)c=!0;else if((r.flags&262144)!==0)break}if(r.tag===10){var m=r.alternate;if(m===null)throw Error(d(387));if(m=m.memoizedProps,m!==null){var N=r.type;Jt(r.pendingProps.value,m.value)||(e!==null?e.push(N):e=[N])}}else if(r===he.current){if(m=r.alternate,m===null)throw Error(d(387));m.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(Kl):e=[Kl])}r=r.return}e!==null&&Dc(a,e,s,n),a.flags|=262144}function Dr(e){for(e=e.firstContext;e!==null;){if(!Jt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Vs(e){Ys=e,qa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function zt(e){return Pu(Ys,e)}function Mr(e,a){return Ys===null&&Vs(e),Pu(e,a)}function Pu(e,a){var s=a._currentValue;if(a={context:a,memoizedValue:s,next:null},qa===null){if(e===null)throw Error(d(308));qa=a,e.dependencies={lanes:0,firstContext:a},e.flags|=524288}else qa=qa.next=a;return s}var vp=typeof AbortController<"u"?AbortController:function(){var e=[],a=this.signal={aborted:!1,addEventListener:function(s,n){e.push(n)}};this.abort=function(){a.aborted=!0,e.forEach(function(s){return s()})}},jp=l.unstable_scheduleCallback,Np=l.unstable_NormalPriority,ht={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mc(){return{controller:new vp,data:new Map,refCount:0}}function Nl(e){e.refCount--,e.refCount===0&&jp(Np,function(){e.controller.abort()})}var Sl=null,Lc=0,En=0,Tn=null;function Sp(e,a){if(Sl===null){var s=Sl=[];Lc=0,En=Ho(),Tn={status:"pending",value:void 0,then:function(n){s.push(n)}}}return Lc++,a.then(Wu,Wu),a}function Wu(){if(--Lc===0&&Sl!==null){Tn!==null&&(Tn.status="fulfilled");var e=Sl;Sl=null,En=0,Tn=null;for(var a=0;a<e.length;a++)(0,e[a])()}}function _p(e,a){var s=[],n={status:"pending",value:null,reason:null,then:function(r){s.push(r)}};return e.then(function(){n.status="fulfilled",n.value=a;for(var r=0;r<s.length;r++)(0,s[r])(a)},function(r){for(n.status="rejected",n.reason=r,r=0;r<s.length;r++)(0,s[r])(void 0)}),n}var em=q.S;q.S=function(e,a){qx=Ne(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Sp(e,a),em!==null&&em(e,a)};var Qs=E(null);function qc(){var e=Qs.current;return e!==null?e:Pe.pooledCache}function Lr(e,a){a===null?Z(Qs,Qs.current):Z(Qs,a.pool)}function tm(){var e=qc();return e===null?null:{parent:ht._currentValue,pool:e}}var On=Error(d(460)),Uc=Error(d(474)),qr=Error(d(542)),Ur={then:function(){}};function am(e){return e=e.status,e==="fulfilled"||e==="rejected"}function sm(e,a,s){switch(s=e[s],s===void 0?e.push(a):s!==a&&(a.then(Aa,Aa),a=s),a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,lm(e),e;default:if(typeof a.status=="string")a.then(Aa,Aa);else{if(e=Pe,e!==null&&100<e.shellSuspendCounter)throw Error(d(482));e=a,e.status="pending",e.then(function(n){if(a.status==="pending"){var r=a;r.status="fulfilled",r.value=n}},function(n){if(a.status==="pending"){var r=a;r.status="rejected",r.reason=n}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,lm(e),e}throw Xs=a,On}}function Zs(e){try{var a=e._init;return a(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(Xs=s,On):s}}var Xs=null;function nm(){if(Xs===null)throw Error(d(459));var e=Xs;return Xs=null,e}function lm(e){if(e===On||e===qr)throw Error(d(483))}var Rn=null,_l=0;function Br(e){var a=_l;return _l+=1,Rn===null&&(Rn=[]),sm(Rn,e,a)}function wl(e,a){a=a.props.ref,e.ref=a!==void 0?a:null}function Hr(e,a){throw a.$$typeof===y?Error(d(525)):(e=Object.prototype.toString.call(a),Error(d(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e)))}function rm(e){function a(D,R){if(e){var U=D.deletions;U===null?(D.deletions=[R],D.flags|=16):U.push(R)}}function s(D,R){if(!e)return null;for(;R!==null;)a(D,R),R=R.sibling;return null}function n(D){for(var R=new Map;D!==null;)D.key!==null?R.set(D.key,D):R.set(D.index,D),D=D.sibling;return R}function r(D,R){return D=Ma(D,R),D.index=0,D.sibling=null,D}function c(D,R,U){return D.index=U,e?(U=D.alternate,U!==null?(U=U.index,U<R?(D.flags|=67108866,R):U):(D.flags|=67108866,R)):(D.flags|=1048576,R)}function m(D){return e&&D.alternate===null&&(D.flags|=67108866),D}function N(D,R,U,ee){return R===null||R.tag!==6?(R=kc(U,D.mode,ee),R.return=D,R):(R=r(R,U),R.return=D,R)}function T(D,R,U,ee){var je=U.type;return je===O?P(D,R,U.props.children,ee,U.key):R!==null&&(R.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===ge&&Zs(je)===R.type)?(R=r(R,U.props),wl(R,U),R.return=D,R):(R=Rr(U.type,U.key,U.props,null,D.mode,ee),wl(R,U),R.return=D,R)}function B(D,R,U,ee){return R===null||R.tag!==4||R.stateNode.containerInfo!==U.containerInfo||R.stateNode.implementation!==U.implementation?(R=Cc(U,D.mode,ee),R.return=D,R):(R=r(R,U.children||[]),R.return=D,R)}function P(D,R,U,ee,je){return R===null||R.tag!==7?(R=Gs(U,D.mode,ee,je),R.return=D,R):(R=r(R,U),R.return=D,R)}function ae(D,R,U){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=kc(""+R,D.mode,U),R.return=D,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case z:return U=Rr(R.type,R.key,R.props,null,D.mode,U),wl(U,R),U.return=D,U;case S:return R=Cc(R,D.mode,U),R.return=D,R;case ge:return R=Zs(R),ae(D,R,U)}if(ce(R)||J(R))return R=Gs(R,D.mode,U,null),R.return=D,R;if(typeof R.then=="function")return ae(D,Br(R),U);if(R.$$typeof===M)return ae(D,Mr(D,R),U);Hr(D,R)}return null}function H(D,R,U,ee){var je=R!==null?R.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return je!==null?null:N(D,R,""+U,ee);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case z:return U.key===je?T(D,R,U,ee):null;case S:return U.key===je?B(D,R,U,ee):null;case ge:return U=Zs(U),H(D,R,U,ee)}if(ce(U)||J(U))return je!==null?null:P(D,R,U,ee,null);if(typeof U.then=="function")return H(D,R,Br(U),ee);if(U.$$typeof===M)return H(D,R,Mr(D,U),ee);Hr(D,U)}return null}function V(D,R,U,ee,je){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return D=D.get(U)||null,N(R,D,""+ee,je);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case z:return D=D.get(ee.key===null?U:ee.key)||null,T(R,D,ee,je);case S:return D=D.get(ee.key===null?U:ee.key)||null,B(R,D,ee,je);case ge:return ee=Zs(ee),V(D,R,U,ee,je)}if(ce(ee)||J(ee))return D=D.get(U)||null,P(R,D,ee,je,null);if(typeof ee.then=="function")return V(D,R,U,Br(ee),je);if(ee.$$typeof===M)return V(D,R,U,Mr(R,ee),je);Hr(R,ee)}return null}function pe(D,R,U,ee){for(var je=null,Be=null,ye=R,Ee=R=0,Me=null;ye!==null&&Ee<U.length;Ee++){ye.index>Ee?(Me=ye,ye=null):Me=ye.sibling;var He=H(D,ye,U[Ee],ee);if(He===null){ye===null&&(ye=Me);break}e&&ye&&He.alternate===null&&a(D,ye),R=c(He,R,Ee),Be===null?je=He:Be.sibling=He,Be=He,ye=Me}if(Ee===U.length)return s(D,ye),Le&&La(D,Ee),je;if(ye===null){for(;Ee<U.length;Ee++)ye=ae(D,U[Ee],ee),ye!==null&&(R=c(ye,R,Ee),Be===null?je=ye:Be.sibling=ye,Be=ye);return Le&&La(D,Ee),je}for(ye=n(ye);Ee<U.length;Ee++)Me=V(ye,D,Ee,U[Ee],ee),Me!==null&&(e&&Me.alternate!==null&&ye.delete(Me.key===null?Ee:Me.key),R=c(Me,R,Ee),Be===null?je=Me:Be.sibling=Me,Be=Me);return e&&ye.forEach(function(_s){return a(D,_s)}),Le&&La(D,Ee),je}function Se(D,R,U,ee){if(U==null)throw Error(d(151));for(var je=null,Be=null,ye=R,Ee=R=0,Me=null,He=U.next();ye!==null&&!He.done;Ee++,He=U.next()){ye.index>Ee?(Me=ye,ye=null):Me=ye.sibling;var _s=H(D,ye,He.value,ee);if(_s===null){ye===null&&(ye=Me);break}e&&ye&&_s.alternate===null&&a(D,ye),R=c(_s,R,Ee),Be===null?je=_s:Be.sibling=_s,Be=_s,ye=Me}if(He.done)return s(D,ye),Le&&La(D,Ee),je;if(ye===null){for(;!He.done;Ee++,He=U.next())He=ae(D,He.value,ee),He!==null&&(R=c(He,R,Ee),Be===null?je=He:Be.sibling=He,Be=He);return Le&&La(D,Ee),je}for(ye=n(ye);!He.done;Ee++,He=U.next())He=V(ye,D,Ee,He.value,ee),He!==null&&(e&&He.alternate!==null&&ye.delete(He.key===null?Ee:He.key),R=c(He,R,Ee),Be===null?je=He:Be.sibling=He,Be=He);return e&&ye.forEach(function(Mg){return a(D,Mg)}),Le&&La(D,Ee),je}function Fe(D,R,U,ee){if(typeof U=="object"&&U!==null&&U.type===O&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case z:e:{for(var je=U.key;R!==null;){if(R.key===je){if(je=U.type,je===O){if(R.tag===7){s(D,R.sibling),ee=r(R,U.props.children),ee.return=D,D=ee;break e}}else if(R.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===ge&&Zs(je)===R.type){s(D,R.sibling),ee=r(R,U.props),wl(ee,U),ee.return=D,D=ee;break e}s(D,R);break}else a(D,R);R=R.sibling}U.type===O?(ee=Gs(U.props.children,D.mode,ee,U.key),ee.return=D,D=ee):(ee=Rr(U.type,U.key,U.props,null,D.mode,ee),wl(ee,U),ee.return=D,D=ee)}return m(D);case S:e:{for(je=U.key;R!==null;){if(R.key===je)if(R.tag===4&&R.stateNode.containerInfo===U.containerInfo&&R.stateNode.implementation===U.implementation){s(D,R.sibling),ee=r(R,U.children||[]),ee.return=D,D=ee;break e}else{s(D,R);break}else a(D,R);R=R.sibling}ee=Cc(U,D.mode,ee),ee.return=D,D=ee}return m(D);case ge:return U=Zs(U),Fe(D,R,U,ee)}if(ce(U))return pe(D,R,U,ee);if(J(U)){if(je=J(U),typeof je!="function")throw Error(d(150));return U=je.call(U),Se(D,R,U,ee)}if(typeof U.then=="function")return Fe(D,R,Br(U),ee);if(U.$$typeof===M)return Fe(D,R,Mr(D,U),ee);Hr(D,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,R!==null&&R.tag===6?(s(D,R.sibling),ee=r(R,U),ee.return=D,D=ee):(s(D,R),ee=kc(U,D.mode,ee),ee.return=D,D=ee),m(D)):s(D,R)}return function(D,R,U,ee){try{_l=0;var je=Fe(D,R,U,ee);return Rn=null,je}catch(ye){if(ye===On||ye===qr)throw ye;var Be=Ft(29,ye,null,D.mode);return Be.lanes=ee,Be.return=D,Be}}}var Ks=rm(!0),im=rm(!1),is=!1;function Bc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hc(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function cs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function os(e,a,s){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,($e&2)!==0){var r=n.pending;return r===null?a.next=a:(a.next=r.next,r.next=a),n.pending=a,a=Or(e),Vu(e,null,s),a}return Tr(e,n,a,s),Or(e)}function kl(e,a,s){if(a=a.updateQueue,a!==null&&(a=a.shared,(s&4194048)!==0)){var n=a.lanes;n&=e.pendingLanes,s|=n,a.lanes=s,Pd(e,s)}}function Gc(e,a){var s=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var r=null,c=null;if(s=s.firstBaseUpdate,s!==null){do{var m={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};c===null?r=c=m:c=c.next=m,s=s.next}while(s!==null);c===null?r=c=a:c=c.next=a}else r=c=a;s={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:c,shared:n.shared,callbacks:n.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=a:e.next=a,s.lastBaseUpdate=a}var $c=!1;function Cl(){if($c){var e=Tn;if(e!==null)throw e}}function zl(e,a,s,n){$c=!1;var r=e.updateQueue;is=!1;var c=r.firstBaseUpdate,m=r.lastBaseUpdate,N=r.shared.pending;if(N!==null){r.shared.pending=null;var T=N,B=T.next;T.next=null,m===null?c=B:m.next=B,m=T;var P=e.alternate;P!==null&&(P=P.updateQueue,N=P.lastBaseUpdate,N!==m&&(N===null?P.firstBaseUpdate=B:N.next=B,P.lastBaseUpdate=T))}if(c!==null){var ae=r.baseState;m=0,P=B=T=null,N=c;do{var H=N.lane&-536870913,V=H!==N.lane;if(V?(De&H)===H:(n&H)===H){H!==0&&H===En&&($c=!0),P!==null&&(P=P.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var pe=e,Se=N;H=a;var Fe=s;switch(Se.tag){case 1:if(pe=Se.payload,typeof pe=="function"){ae=pe.call(Fe,ae,H);break e}ae=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=Se.payload,H=typeof pe=="function"?pe.call(Fe,ae,H):pe,H==null)break e;ae=b({},ae,H);break e;case 2:is=!0}}H=N.callback,H!==null&&(e.flags|=64,V&&(e.flags|=8192),V=r.callbacks,V===null?r.callbacks=[H]:V.push(H))}else V={lane:H,tag:N.tag,payload:N.payload,callback:N.callback,next:null},P===null?(B=P=V,T=ae):P=P.next=V,m|=H;if(N=N.next,N===null){if(N=r.shared.pending,N===null)break;V=N,N=V.next,V.next=null,r.lastBaseUpdate=V,r.shared.pending=null}}while(!0);P===null&&(T=ae),r.baseState=T,r.firstBaseUpdate=B,r.lastBaseUpdate=P,c===null&&(r.shared.lanes=0),fs|=m,e.lanes=m,e.memoizedState=ae}}function cm(e,a){if(typeof e!="function")throw Error(d(191,e));e.call(a)}function om(e,a){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)cm(s[e],a)}var An=E(null),Gr=E(0);function dm(e,a){e=Xa,Z(Gr,e),Z(An,a),Xa=e|a.baseLanes}function Yc(){Z(Gr,Xa),Z(An,An.current)}function Vc(){Xa=Gr.current,G(An),G(Gr)}var It=E(null),ua=null;function ds(e){var a=e.alternate;Z(ut,ut.current&1),Z(It,e),ua===null&&(a===null||An.current!==null||a.memoizedState!==null)&&(ua=e)}function Qc(e){Z(ut,ut.current),Z(It,e),ua===null&&(ua=e)}function um(e){e.tag===22?(Z(ut,ut.current),Z(It,e),ua===null&&(ua=e)):us()}function us(){Z(ut,ut.current),Z(It,It.current)}function Pt(e){G(It),ua===e&&(ua=null),G(ut)}var ut=E(0);function $r(e){for(var a=e;a!==null;){if(a.tag===13){var s=a.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||Po(s)||Wo(s)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ba=0,ze=null,Ke=null,pt=null,Yr=!1,Dn=!1,Js=!1,Vr=0,El=0,Mn=null,wp=0;function it(){throw Error(d(321))}function Zc(e,a){if(a===null)return!1;for(var s=0;s<a.length&&s<e.length;s++)if(!Jt(e[s],a[s]))return!1;return!0}function Xc(e,a,s,n,r,c){return Ba=c,ze=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,q.H=e===null||e.memoizedState===null?Km:co,Js=!1,c=s(n,r),Js=!1,Dn&&(c=xm(a,s,n,r)),mm(e),c}function mm(e){q.H=Rl;var a=Ke!==null&&Ke.next!==null;if(Ba=0,pt=Ke=ze=null,Yr=!1,El=0,Mn=null,a)throw Error(d(300));e===null||gt||(e=e.dependencies,e!==null&&Dr(e)&&(gt=!0))}function xm(e,a,s,n){ze=e;var r=0;do{if(Dn&&(Mn=null),El=0,Dn=!1,25<=r)throw Error(d(301));if(r+=1,pt=Ke=null,e.updateQueue!=null){var c=e.updateQueue;c.lastEffect=null,c.events=null,c.stores=null,c.memoCache!=null&&(c.memoCache.index=0)}q.H=Jm,c=a(s,n)}while(Dn);return c}function kp(){var e=q.H,a=e.useState()[0];return a=typeof a.then=="function"?Tl(a):a,e=e.useState()[0],(Ke!==null?Ke.memoizedState:null)!==e&&(ze.flags|=1024),a}function Kc(){var e=Vr!==0;return Vr=0,e}function Jc(e,a,s){a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~s}function Fc(e){if(Yr){for(e=e.memoizedState;e!==null;){var a=e.queue;a!==null&&(a.pending=null),e=e.next}Yr=!1}Ba=0,pt=Ke=ze=null,Dn=!1,El=Vr=0,Mn=null}function Dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?ze.memoizedState=pt=e:pt=pt.next=e,pt}function mt(){if(Ke===null){var e=ze.alternate;e=e!==null?e.memoizedState:null}else e=Ke.next;var a=pt===null?ze.memoizedState:pt.next;if(a!==null)pt=a,Ke=e;else{if(e===null)throw ze.alternate===null?Error(d(467)):Error(d(310));Ke=e,e={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},pt===null?ze.memoizedState=pt=e:pt=pt.next=e}return pt}function Qr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tl(e){var a=El;return El+=1,Mn===null&&(Mn=[]),e=sm(Mn,e,a),a=ze,(pt===null?a.memoizedState:pt.next)===null&&(a=a.alternate,q.H=a===null||a.memoizedState===null?Km:co),e}function Zr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Tl(e);if(e.$$typeof===M)return zt(e)}throw Error(d(438,String(e)))}function Ic(e){var a=null,s=ze.updateQueue;if(s!==null&&(a=s.memoCache),a==null){var n=ze.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(a={data:n.data.map(function(r){return r.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),s===null&&(s=Qr(),ze.updateQueue=s),s.memoCache=a,s=a.data[a.index],s===void 0)for(s=a.data[a.index]=Array(e),n=0;n<e;n++)s[n]=se;return a.index++,s}function Ha(e,a){return typeof a=="function"?a(e):a}function Xr(e){var a=mt();return Pc(a,Ke,e)}function Pc(e,a,s){var n=e.queue;if(n===null)throw Error(d(311));n.lastRenderedReducer=s;var r=e.baseQueue,c=n.pending;if(c!==null){if(r!==null){var m=r.next;r.next=c.next,c.next=m}a.baseQueue=r=c,n.pending=null}if(c=e.baseState,r===null)e.memoizedState=c;else{a=r.next;var N=m=null,T=null,B=a,P=!1;do{var ae=B.lane&-536870913;if(ae!==B.lane?(De&ae)===ae:(Ba&ae)===ae){var H=B.revertLane;if(H===0)T!==null&&(T=T.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),ae===En&&(P=!0);else if((Ba&H)===H){B=B.next,H===En&&(P=!0);continue}else ae={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},T===null?(N=T=ae,m=c):T=T.next=ae,ze.lanes|=H,fs|=H;ae=B.action,Js&&s(c,ae),c=B.hasEagerState?B.eagerState:s(c,ae)}else H={lane:ae,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},T===null?(N=T=H,m=c):T=T.next=H,ze.lanes|=ae,fs|=ae;B=B.next}while(B!==null&&B!==a);if(T===null?m=c:T.next=N,!Jt(c,e.memoizedState)&&(gt=!0,P&&(s=Tn,s!==null)))throw s;e.memoizedState=c,e.baseState=m,e.baseQueue=T,n.lastRenderedState=c}return r===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function Wc(e){var a=mt(),s=a.queue;if(s===null)throw Error(d(311));s.lastRenderedReducer=e;var n=s.dispatch,r=s.pending,c=a.memoizedState;if(r!==null){s.pending=null;var m=r=r.next;do c=e(c,m.action),m=m.next;while(m!==r);Jt(c,a.memoizedState)||(gt=!0),a.memoizedState=c,a.baseQueue===null&&(a.baseState=c),s.lastRenderedState=c}return[c,n]}function fm(e,a,s){var n=ze,r=mt(),c=Le;if(c){if(s===void 0)throw Error(d(407));s=s()}else s=a();var m=!Jt((Ke||r).memoizedState,s);if(m&&(r.memoizedState=s,gt=!0),r=r.queue,ao(gm.bind(null,n,r,e),[e]),r.getSnapshot!==a||m||pt!==null&&pt.memoizedState.tag&1){if(n.flags|=2048,Ln(9,{destroy:void 0},pm.bind(null,n,r,s,a),null),Pe===null)throw Error(d(349));c||(Ba&127)!==0||hm(n,a,s)}return s}function hm(e,a,s){e.flags|=16384,e={getSnapshot:a,value:s},a=ze.updateQueue,a===null?(a=Qr(),ze.updateQueue=a,a.stores=[e]):(s=a.stores,s===null?a.stores=[e]:s.push(e))}function pm(e,a,s,n){a.value=s,a.getSnapshot=n,ym(a)&&bm(e)}function gm(e,a,s){return s(function(){ym(a)&&bm(e)})}function ym(e){var a=e.getSnapshot;e=e.value;try{var s=a();return!Jt(e,s)}catch{return!0}}function bm(e){var a=Hs(e,2);a!==null&&Gt(a,e,2)}function eo(e){var a=Dt();if(typeof e=="function"){var s=e;if(e=s(),Js){es(!0);try{s()}finally{es(!1)}}}return a.memoizedState=a.baseState=e,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:e},a}function vm(e,a,s,n){return e.baseState=s,Pc(e,Ke,typeof n=="function"?n:Ha)}function Cp(e,a,s,n,r){if(Fr(e))throw Error(d(485));if(e=a.action,e!==null){var c={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){c.listeners.push(m)}};q.T!==null?s(!0):c.isTransition=!1,n(c),s=a.pending,s===null?(c.next=a.pending=c,jm(a,c)):(c.next=s.next,a.pending=s.next=c)}}function jm(e,a){var s=a.action,n=a.payload,r=e.state;if(a.isTransition){var c=q.T,m={};q.T=m;try{var N=s(r,n),T=q.S;T!==null&&T(m,N),Nm(e,a,N)}catch(B){to(e,a,B)}finally{c!==null&&m.types!==null&&(c.types=m.types),q.T=c}}else try{c=s(r,n),Nm(e,a,c)}catch(B){to(e,a,B)}}function Nm(e,a,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(n){Sm(e,a,n)},function(n){return to(e,a,n)}):Sm(e,a,s)}function Sm(e,a,s){a.status="fulfilled",a.value=s,_m(a),e.state=s,a=e.pending,a!==null&&(s=a.next,s===a?e.pending=null:(s=s.next,a.next=s,jm(e,s)))}function to(e,a,s){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do a.status="rejected",a.reason=s,_m(a),a=a.next;while(a!==n)}e.action=null}function _m(e){e=e.listeners;for(var a=0;a<e.length;a++)(0,e[a])()}function wm(e,a){return a}function km(e,a){if(Le){var s=Pe.formState;if(s!==null){e:{var n=ze;if(Le){if(et){t:{for(var r=et,c=da;r.nodeType!==8;){if(!c){r=null;break t}if(r=ma(r.nextSibling),r===null){r=null;break t}}c=r.data,r=c==="F!"||c==="F"?r:null}if(r){et=ma(r.nextSibling),n=r.data==="F!";break e}}ls(n)}n=!1}n&&(a=s[0])}}return s=Dt(),s.memoizedState=s.baseState=a,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wm,lastRenderedState:a},s.queue=n,s=Qm.bind(null,ze,n),n.dispatch=s,n=eo(!1),c=io.bind(null,ze,!1,n.queue),n=Dt(),r={state:a,dispatch:null,action:e,pending:null},n.queue=r,s=Cp.bind(null,ze,r,c,s),r.dispatch=s,n.memoizedState=e,[a,s,!1]}function Cm(e){var a=mt();return zm(a,Ke,e)}function zm(e,a,s){if(a=Pc(e,a,wm)[0],e=Xr(Ha)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var n=Tl(a)}catch(m){throw m===On?qr:m}else n=a;a=mt();var r=a.queue,c=r.dispatch;return s!==a.memoizedState&&(ze.flags|=2048,Ln(9,{destroy:void 0},zp.bind(null,r,s),null)),[n,c,e]}function zp(e,a){e.action=a}function Em(e){var a=mt(),s=Ke;if(s!==null)return zm(a,s,e);mt(),a=a.memoizedState,s=mt();var n=s.queue.dispatch;return s.memoizedState=e,[a,n,!1]}function Ln(e,a,s,n){return e={tag:e,create:s,deps:n,inst:a,next:null},a=ze.updateQueue,a===null&&(a=Qr(),ze.updateQueue=a),s=a.lastEffect,s===null?a.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,a.lastEffect=e),e}function Tm(){return mt().memoizedState}function Kr(e,a,s,n){var r=Dt();ze.flags|=e,r.memoizedState=Ln(1|a,{destroy:void 0},s,n===void 0?null:n)}function Jr(e,a,s,n){var r=mt();n=n===void 0?null:n;var c=r.memoizedState.inst;Ke!==null&&n!==null&&Zc(n,Ke.memoizedState.deps)?r.memoizedState=Ln(a,c,s,n):(ze.flags|=e,r.memoizedState=Ln(1|a,c,s,n))}function Om(e,a){Kr(8390656,8,e,a)}function ao(e,a){Jr(2048,8,e,a)}function Ep(e){ze.flags|=4;var a=ze.updateQueue;if(a===null)a=Qr(),ze.updateQueue=a,a.events=[e];else{var s=a.events;s===null?a.events=[e]:s.push(e)}}function Rm(e){var a=mt().memoizedState;return Ep({ref:a,nextImpl:e}),function(){if(($e&2)!==0)throw Error(d(440));return a.impl.apply(void 0,arguments)}}function Am(e,a){return Jr(4,2,e,a)}function Dm(e,a){return Jr(4,4,e,a)}function Mm(e,a){if(typeof a=="function"){e=e();var s=a(e);return function(){typeof s=="function"?s():a(null)}}if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function Lm(e,a,s){s=s!=null?s.concat([e]):null,Jr(4,4,Mm.bind(null,a,e),s)}function so(){}function qm(e,a){var s=mt();a=a===void 0?null:a;var n=s.memoizedState;return a!==null&&Zc(a,n[1])?n[0]:(s.memoizedState=[e,a],e)}function Um(e,a){var s=mt();a=a===void 0?null:a;var n=s.memoizedState;if(a!==null&&Zc(a,n[1]))return n[0];if(n=e(),Js){es(!0);try{e()}finally{es(!1)}}return s.memoizedState=[n,a],n}function no(e,a,s){return s===void 0||(Ba&1073741824)!==0&&(De&261930)===0?e.memoizedState=a:(e.memoizedState=s,e=Bx(),ze.lanes|=e,fs|=e,s)}function Bm(e,a,s,n){return Jt(s,a)?s:An.current!==null?(e=no(e,s,n),Jt(e,a)||(gt=!0),e):(Ba&42)===0||(Ba&1073741824)!==0&&(De&261930)===0?(gt=!0,e.memoizedState=s):(e=Bx(),ze.lanes|=e,fs|=e,a)}function Hm(e,a,s,n,r){var c=W.p;W.p=c!==0&&8>c?c:8;var m=q.T,N={};q.T=N,io(e,!1,a,s);try{var T=r(),B=q.S;if(B!==null&&B(N,T),T!==null&&typeof T=="object"&&typeof T.then=="function"){var P=_p(T,n);Ol(e,a,P,ta(e))}else Ol(e,a,n,ta(e))}catch(ae){Ol(e,a,{then:function(){},status:"rejected",reason:ae},ta())}finally{W.p=c,m!==null&&N.types!==null&&(m.types=N.types),q.T=m}}function Tp(){}function lo(e,a,s,n){if(e.tag!==5)throw Error(d(476));var r=Gm(e).queue;Hm(e,r,a,ie,s===null?Tp:function(){return $m(e),s(n)})}function Gm(e){var a=e.memoizedState;if(a!==null)return a;a={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:ie},next:null};var s={};return a.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:s},next:null},e.memoizedState=a,e=e.alternate,e!==null&&(e.memoizedState=a),a}function $m(e){var a=Gm(e);a.next===null&&(a=e.alternate.memoizedState),Ol(e,a.next.queue,{},ta())}function ro(){return zt(Kl)}function Ym(){return mt().memoizedState}function Vm(){return mt().memoizedState}function Op(e){for(var a=e.return;a!==null;){switch(a.tag){case 24:case 3:var s=ta();e=cs(s);var n=os(a,e,s);n!==null&&(Gt(n,a,s),kl(n,a,s)),a={cache:Mc()},e.payload=a;return}a=a.return}}function Rp(e,a,s){var n=ta();s={lane:n,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Fr(e)?Zm(a,s):(s=_c(e,a,s,n),s!==null&&(Gt(s,e,n),Xm(s,a,n)))}function Qm(e,a,s){var n=ta();Ol(e,a,s,n)}function Ol(e,a,s,n){var r={lane:n,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Fr(e))Zm(a,r);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=a.lastRenderedReducer,c!==null))try{var m=a.lastRenderedState,N=c(m,s);if(r.hasEagerState=!0,r.eagerState=N,Jt(N,m))return Tr(e,a,r,0),Pe===null&&Er(),!1}catch{}if(s=_c(e,a,r,n),s!==null)return Gt(s,e,n),Xm(s,a,n),!0}return!1}function io(e,a,s,n){if(n={lane:2,revertLane:Ho(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Fr(e)){if(a)throw Error(d(479))}else a=_c(e,s,n,2),a!==null&&Gt(a,e,2)}function Fr(e){var a=e.alternate;return e===ze||a!==null&&a===ze}function Zm(e,a){Dn=Yr=!0;var s=e.pending;s===null?a.next=a:(a.next=s.next,s.next=a),e.pending=a}function Xm(e,a,s){if((s&4194048)!==0){var n=a.lanes;n&=e.pendingLanes,s|=n,a.lanes=s,Pd(e,s)}}var Rl={readContext:zt,use:Zr,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useLayoutEffect:it,useInsertionEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useSyncExternalStore:it,useId:it,useHostTransitionStatus:it,useFormState:it,useActionState:it,useOptimistic:it,useMemoCache:it,useCacheRefresh:it};Rl.useEffectEvent=it;var Km={readContext:zt,use:Zr,useCallback:function(e,a){return Dt().memoizedState=[e,a===void 0?null:a],e},useContext:zt,useEffect:Om,useImperativeHandle:function(e,a,s){s=s!=null?s.concat([e]):null,Kr(4194308,4,Mm.bind(null,a,e),s)},useLayoutEffect:function(e,a){return Kr(4194308,4,e,a)},useInsertionEffect:function(e,a){Kr(4,2,e,a)},useMemo:function(e,a){var s=Dt();a=a===void 0?null:a;var n=e();if(Js){es(!0);try{e()}finally{es(!1)}}return s.memoizedState=[n,a],n},useReducer:function(e,a,s){var n=Dt();if(s!==void 0){var r=s(a);if(Js){es(!0);try{s(a)}finally{es(!1)}}}else r=a;return n.memoizedState=n.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},n.queue=e,e=e.dispatch=Rp.bind(null,ze,e),[n.memoizedState,e]},useRef:function(e){var a=Dt();return e={current:e},a.memoizedState=e},useState:function(e){e=eo(e);var a=e.queue,s=Qm.bind(null,ze,a);return a.dispatch=s,[e.memoizedState,s]},useDebugValue:so,useDeferredValue:function(e,a){var s=Dt();return no(s,e,a)},useTransition:function(){var e=eo(!1);return e=Hm.bind(null,ze,e.queue,!0,!1),Dt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,a,s){var n=ze,r=Dt();if(Le){if(s===void 0)throw Error(d(407));s=s()}else{if(s=a(),Pe===null)throw Error(d(349));(De&127)!==0||hm(n,a,s)}r.memoizedState=s;var c={value:s,getSnapshot:a};return r.queue=c,Om(gm.bind(null,n,c,e),[e]),n.flags|=2048,Ln(9,{destroy:void 0},pm.bind(null,n,c,s,a),null),s},useId:function(){var e=Dt(),a=Pe.identifierPrefix;if(Le){var s=wa,n=_a;s=(n&~(1<<32-Kt(n)-1)).toString(32)+s,a="_"+a+"R_"+s,s=Vr++,0<s&&(a+="H"+s.toString(32)),a+="_"}else s=wp++,a="_"+a+"r_"+s.toString(32)+"_";return e.memoizedState=a},useHostTransitionStatus:ro,useFormState:km,useActionState:km,useOptimistic:function(e){var a=Dt();a.memoizedState=a.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=s,a=io.bind(null,ze,!0,s),s.dispatch=a,[e,a]},useMemoCache:Ic,useCacheRefresh:function(){return Dt().memoizedState=Op.bind(null,ze)},useEffectEvent:function(e){var a=Dt(),s={impl:e};return a.memoizedState=s,function(){if(($e&2)!==0)throw Error(d(440));return s.impl.apply(void 0,arguments)}}},co={readContext:zt,use:Zr,useCallback:qm,useContext:zt,useEffect:ao,useImperativeHandle:Lm,useInsertionEffect:Am,useLayoutEffect:Dm,useMemo:Um,useReducer:Xr,useRef:Tm,useState:function(){return Xr(Ha)},useDebugValue:so,useDeferredValue:function(e,a){var s=mt();return Bm(s,Ke.memoizedState,e,a)},useTransition:function(){var e=Xr(Ha)[0],a=mt().memoizedState;return[typeof e=="boolean"?e:Tl(e),a]},useSyncExternalStore:fm,useId:Ym,useHostTransitionStatus:ro,useFormState:Cm,useActionState:Cm,useOptimistic:function(e,a){var s=mt();return vm(s,Ke,e,a)},useMemoCache:Ic,useCacheRefresh:Vm};co.useEffectEvent=Rm;var Jm={readContext:zt,use:Zr,useCallback:qm,useContext:zt,useEffect:ao,useImperativeHandle:Lm,useInsertionEffect:Am,useLayoutEffect:Dm,useMemo:Um,useReducer:Wc,useRef:Tm,useState:function(){return Wc(Ha)},useDebugValue:so,useDeferredValue:function(e,a){var s=mt();return Ke===null?no(s,e,a):Bm(s,Ke.memoizedState,e,a)},useTransition:function(){var e=Wc(Ha)[0],a=mt().memoizedState;return[typeof e=="boolean"?e:Tl(e),a]},useSyncExternalStore:fm,useId:Ym,useHostTransitionStatus:ro,useFormState:Em,useActionState:Em,useOptimistic:function(e,a){var s=mt();return Ke!==null?vm(s,Ke,e,a):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:Ic,useCacheRefresh:Vm};Jm.useEffectEvent=Rm;function oo(e,a,s,n){a=e.memoizedState,s=s(n,a),s=s==null?a:b({},a,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var uo={enqueueSetState:function(e,a,s){e=e._reactInternals;var n=ta(),r=cs(n);r.payload=a,s!=null&&(r.callback=s),a=os(e,r,n),a!==null&&(Gt(a,e,n),kl(a,e,n))},enqueueReplaceState:function(e,a,s){e=e._reactInternals;var n=ta(),r=cs(n);r.tag=1,r.payload=a,s!=null&&(r.callback=s),a=os(e,r,n),a!==null&&(Gt(a,e,n),kl(a,e,n))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var s=ta(),n=cs(s);n.tag=2,a!=null&&(n.callback=a),a=os(e,n,s),a!==null&&(Gt(a,e,s),kl(a,e,s))}};function Fm(e,a,s,n,r,c,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,c,m):a.prototype&&a.prototype.isPureReactComponent?!yl(s,n)||!yl(r,c):!0}function Im(e,a,s,n){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(s,n),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(s,n),a.state!==e&&uo.enqueueReplaceState(a,a.state,null)}function Fs(e,a){var s=a;if("ref"in a){s={};for(var n in a)n!=="ref"&&(s[n]=a[n])}if(e=e.defaultProps){s===a&&(s=b({},s));for(var r in e)s[r]===void 0&&(s[r]=e[r])}return s}function Pm(e){zr(e)}function Wm(e){console.error(e)}function ex(e){zr(e)}function Ir(e,a){try{var s=e.onUncaughtError;s(a.value,{componentStack:a.stack})}catch(n){setTimeout(function(){throw n})}}function tx(e,a,s){try{var n=e.onCaughtError;n(s.value,{componentStack:s.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function mo(e,a,s){return s=cs(s),s.tag=3,s.payload={element:null},s.callback=function(){Ir(e,a)},s}function ax(e){return e=cs(e),e.tag=3,e}function sx(e,a,s,n){var r=s.type.getDerivedStateFromError;if(typeof r=="function"){var c=n.value;e.payload=function(){return r(c)},e.callback=function(){tx(a,s,n)}}var m=s.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(e.callback=function(){tx(a,s,n),typeof r!="function"&&(hs===null?hs=new Set([this]):hs.add(this));var N=n.stack;this.componentDidCatch(n.value,{componentStack:N!==null?N:""})})}function Ap(e,a,s,n,r){if(s.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(a=s.alternate,a!==null&&zn(a,s,r,!0),s=It.current,s!==null){switch(s.tag){case 31:case 13:return ua===null?oi():s.alternate===null&&ct===0&&(ct=3),s.flags&=-257,s.flags|=65536,s.lanes=r,n===Ur?s.flags|=16384:(a=s.updateQueue,a===null?s.updateQueue=new Set([n]):a.add(n),qo(e,n,r)),!1;case 22:return s.flags|=65536,n===Ur?s.flags|=16384:(a=s.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([n])},s.updateQueue=a):(s=a.retryQueue,s===null?a.retryQueue=new Set([n]):s.add(n)),qo(e,n,r)),!1}throw Error(d(435,s.tag))}return qo(e,n,r),oi(),!1}if(Le)return a=It.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=r,n!==Tc&&(e=Error(d(422),{cause:n}),jl(ia(e,s)))):(n!==Tc&&(a=Error(d(423),{cause:n}),jl(ia(a,s))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,n=ia(n,s),r=mo(e.stateNode,n,r),Gc(e,r),ct!==4&&(ct=2)),!1;var c=Error(d(520),{cause:n});if(c=ia(c,s),Hl===null?Hl=[c]:Hl.push(c),ct!==4&&(ct=2),a===null)return!0;n=ia(n,s),s=a;do{switch(s.tag){case 3:return s.flags|=65536,e=r&-r,s.lanes|=e,e=mo(s.stateNode,n,e),Gc(s,e),!1;case 1:if(a=s.type,c=s.stateNode,(s.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(hs===null||!hs.has(c))))return s.flags|=65536,r&=-r,s.lanes|=r,r=ax(r),sx(r,e,s,n),Gc(s,r),!1}s=s.return}while(s!==null);return!1}var xo=Error(d(461)),gt=!1;function Et(e,a,s,n){a.child=e===null?im(a,null,s,n):Ks(a,e.child,s,n)}function nx(e,a,s,n,r){s=s.render;var c=a.ref;if("ref"in n){var m={};for(var N in n)N!=="ref"&&(m[N]=n[N])}else m=n;return Vs(a),n=Xc(e,a,s,m,c,r),N=Kc(),e!==null&&!gt?(Jc(e,a,r),Ga(e,a,r)):(Le&&N&&zc(a),a.flags|=1,Et(e,a,n,r),a.child)}function lx(e,a,s,n,r){if(e===null){var c=s.type;return typeof c=="function"&&!wc(c)&&c.defaultProps===void 0&&s.compare===null?(a.tag=15,a.type=c,rx(e,a,c,n,r)):(e=Rr(s.type,null,n,a,a.mode,r),e.ref=a.ref,e.return=a,a.child=e)}if(c=e.child,!jo(e,r)){var m=c.memoizedProps;if(s=s.compare,s=s!==null?s:yl,s(m,n)&&e.ref===a.ref)return Ga(e,a,r)}return a.flags|=1,e=Ma(c,n),e.ref=a.ref,e.return=a,a.child=e}function rx(e,a,s,n,r){if(e!==null){var c=e.memoizedProps;if(yl(c,n)&&e.ref===a.ref)if(gt=!1,a.pendingProps=n=c,jo(e,r))(e.flags&131072)!==0&&(gt=!0);else return a.lanes=e.lanes,Ga(e,a,r)}return fo(e,a,s,n,r)}function ix(e,a,s,n){var r=n.children,c=e!==null?e.memoizedState:null;if(e===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if((a.flags&128)!==0){if(c=c!==null?c.baseLanes|s:s,e!==null){for(n=a.child=e.child,r=0;n!==null;)r=r|n.lanes|n.childLanes,n=n.sibling;n=r&~c}else n=0,a.child=null;return cx(e,a,c,s,n)}if((s&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},e!==null&&Lr(a,c!==null?c.cachePool:null),c!==null?dm(a,c):Yc(),um(a);else return n=a.lanes=536870912,cx(e,a,c!==null?c.baseLanes|s:s,s,n)}else c!==null?(Lr(a,c.cachePool),dm(a,c),us(),a.memoizedState=null):(e!==null&&Lr(a,null),Yc(),us());return Et(e,a,r,s),a.child}function Al(e,a){return e!==null&&e.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function cx(e,a,s,n,r){var c=qc();return c=c===null?null:{parent:ht._currentValue,pool:c},a.memoizedState={baseLanes:s,cachePool:c},e!==null&&Lr(a,null),Yc(),um(a),e!==null&&zn(e,a,n,!0),a.childLanes=r,null}function Pr(e,a){return a=ei({mode:a.mode,children:a.children},e.mode),a.ref=e.ref,e.child=a,a.return=e,a}function ox(e,a,s){return Ks(a,e.child,null,s),e=Pr(a,a.pendingProps),e.flags|=2,Pt(a),a.memoizedState=null,e}function Dp(e,a,s){var n=a.pendingProps,r=(a.flags&128)!==0;if(a.flags&=-129,e===null){if(Le){if(n.mode==="hidden")return e=Pr(a,n),a.lanes=536870912,Al(null,e);if(Qc(a),(e=et)?(e=j0(e,da),e=e!==null&&e.data==="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:ss!==null?{id:_a,overflow:wa}:null,retryLane:536870912,hydrationErrors:null},s=Zu(e),s.return=a,a.child=s,Ct=a,et=null)):e=null,e===null)throw ls(a);return a.lanes=536870912,null}return Pr(a,n)}var c=e.memoizedState;if(c!==null){var m=c.dehydrated;if(Qc(a),r)if(a.flags&256)a.flags&=-257,a=ox(e,a,s);else if(a.memoizedState!==null)a.child=e.child,a.flags|=128,a=null;else throw Error(d(558));else if(gt||zn(e,a,s,!1),r=(s&e.childLanes)!==0,gt||r){if(n=Pe,n!==null&&(m=Wd(n,s),m!==0&&m!==c.retryLane))throw c.retryLane=m,Hs(e,m),Gt(n,e,m),xo;oi(),a=ox(e,a,s)}else e=c.treeContext,et=ma(m.nextSibling),Ct=a,Le=!0,ns=null,da=!1,e!==null&&Ju(a,e),a=Pr(a,n),a.flags|=4096;return a}return e=Ma(e.child,{mode:n.mode,children:n.children}),e.ref=a.ref,a.child=e,e.return=a,e}function Wr(e,a){var s=a.ref;if(s===null)e!==null&&e.ref!==null&&(a.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(d(284));(e===null||e.ref!==s)&&(a.flags|=4194816)}}function fo(e,a,s,n,r){return Vs(a),s=Xc(e,a,s,n,void 0,r),n=Kc(),e!==null&&!gt?(Jc(e,a,r),Ga(e,a,r)):(Le&&n&&zc(a),a.flags|=1,Et(e,a,s,r),a.child)}function dx(e,a,s,n,r,c){return Vs(a),a.updateQueue=null,s=xm(a,n,s,r),mm(e),n=Kc(),e!==null&&!gt?(Jc(e,a,c),Ga(e,a,c)):(Le&&n&&zc(a),a.flags|=1,Et(e,a,s,c),a.child)}function ux(e,a,s,n,r){if(Vs(a),a.stateNode===null){var c=_n,m=s.contextType;typeof m=="object"&&m!==null&&(c=zt(m)),c=new s(n,c),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=uo,a.stateNode=c,c._reactInternals=a,c=a.stateNode,c.props=n,c.state=a.memoizedState,c.refs={},Bc(a),m=s.contextType,c.context=typeof m=="object"&&m!==null?zt(m):_n,c.state=a.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(oo(a,s,m,n),c.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(m=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),m!==c.state&&uo.enqueueReplaceState(c,c.state,null),zl(a,n,c,r),Cl(),c.state=a.memoizedState),typeof c.componentDidMount=="function"&&(a.flags|=4194308),n=!0}else if(e===null){c=a.stateNode;var N=a.memoizedProps,T=Fs(s,N);c.props=T;var B=c.context,P=s.contextType;m=_n,typeof P=="object"&&P!==null&&(m=zt(P));var ae=s.getDerivedStateFromProps;P=typeof ae=="function"||typeof c.getSnapshotBeforeUpdate=="function",N=a.pendingProps!==N,P||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(N||B!==m)&&Im(a,c,n,m),is=!1;var H=a.memoizedState;c.state=H,zl(a,n,c,r),Cl(),B=a.memoizedState,N||H!==B||is?(typeof ae=="function"&&(oo(a,s,ae,n),B=a.memoizedState),(T=is||Fm(a,s,T,n,H,B,m))?(P||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(a.flags|=4194308)):(typeof c.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=n,a.memoizedState=B),c.props=n,c.state=B,c.context=m,n=T):(typeof c.componentDidMount=="function"&&(a.flags|=4194308),n=!1)}else{c=a.stateNode,Hc(e,a),m=a.memoizedProps,P=Fs(s,m),c.props=P,ae=a.pendingProps,H=c.context,B=s.contextType,T=_n,typeof B=="object"&&B!==null&&(T=zt(B)),N=s.getDerivedStateFromProps,(B=typeof N=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(m!==ae||H!==T)&&Im(a,c,n,T),is=!1,H=a.memoizedState,c.state=H,zl(a,n,c,r),Cl();var V=a.memoizedState;m!==ae||H!==V||is||e!==null&&e.dependencies!==null&&Dr(e.dependencies)?(typeof N=="function"&&(oo(a,s,N,n),V=a.memoizedState),(P=is||Fm(a,s,P,n,H,V,T)||e!==null&&e.dependencies!==null&&Dr(e.dependencies))?(B||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(n,V,T),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(n,V,T)),typeof c.componentDidUpdate=="function"&&(a.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof c.componentDidUpdate!="function"||m===e.memoizedProps&&H===e.memoizedState||(a.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&H===e.memoizedState||(a.flags|=1024),a.memoizedProps=n,a.memoizedState=V),c.props=n,c.state=V,c.context=T,n=P):(typeof c.componentDidUpdate!="function"||m===e.memoizedProps&&H===e.memoizedState||(a.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&H===e.memoizedState||(a.flags|=1024),n=!1)}return c=n,Wr(e,a),n=(a.flags&128)!==0,c||n?(c=a.stateNode,s=n&&typeof s.getDerivedStateFromError!="function"?null:c.render(),a.flags|=1,e!==null&&n?(a.child=Ks(a,e.child,null,r),a.child=Ks(a,null,s,r)):Et(e,a,s,r),a.memoizedState=c.state,e=a.child):e=Ga(e,a,r),e}function mx(e,a,s,n){return $s(),a.flags|=256,Et(e,a,s,n),a.child}var ho={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function po(e){return{baseLanes:e,cachePool:tm()}}function go(e,a,s){return e=e!==null?e.childLanes&~s:0,a&&(e|=ea),e}function xx(e,a,s){var n=a.pendingProps,r=!1,c=(a.flags&128)!==0,m;if((m=c)||(m=e!==null&&e.memoizedState===null?!1:(ut.current&2)!==0),m&&(r=!0,a.flags&=-129),m=(a.flags&32)!==0,a.flags&=-33,e===null){if(Le){if(r?ds(a):us(),(e=et)?(e=j0(e,da),e=e!==null&&e.data!=="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:ss!==null?{id:_a,overflow:wa}:null,retryLane:536870912,hydrationErrors:null},s=Zu(e),s.return=a,a.child=s,Ct=a,et=null)):e=null,e===null)throw ls(a);return Wo(e)?a.lanes=32:a.lanes=536870912,null}var N=n.children;return n=n.fallback,r?(us(),r=a.mode,N=ei({mode:"hidden",children:N},r),n=Gs(n,r,s,null),N.return=a,n.return=a,N.sibling=n,a.child=N,n=a.child,n.memoizedState=po(s),n.childLanes=go(e,m,s),a.memoizedState=ho,Al(null,n)):(ds(a),yo(a,N))}var T=e.memoizedState;if(T!==null&&(N=T.dehydrated,N!==null)){if(c)a.flags&256?(ds(a),a.flags&=-257,a=bo(e,a,s)):a.memoizedState!==null?(us(),a.child=e.child,a.flags|=128,a=null):(us(),N=n.fallback,r=a.mode,n=ei({mode:"visible",children:n.children},r),N=Gs(N,r,s,null),N.flags|=2,n.return=a,N.return=a,n.sibling=N,a.child=n,Ks(a,e.child,null,s),n=a.child,n.memoizedState=po(s),n.childLanes=go(e,m,s),a.memoizedState=ho,a=Al(null,n));else if(ds(a),Wo(N)){if(m=N.nextSibling&&N.nextSibling.dataset,m)var B=m.dgst;m=B,n=Error(d(419)),n.stack="",n.digest=m,jl({value:n,source:null,stack:null}),a=bo(e,a,s)}else if(gt||zn(e,a,s,!1),m=(s&e.childLanes)!==0,gt||m){if(m=Pe,m!==null&&(n=Wd(m,s),n!==0&&n!==T.retryLane))throw T.retryLane=n,Hs(e,n),Gt(m,e,n),xo;Po(N)||oi(),a=bo(e,a,s)}else Po(N)?(a.flags|=192,a.child=e.child,a=null):(e=T.treeContext,et=ma(N.nextSibling),Ct=a,Le=!0,ns=null,da=!1,e!==null&&Ju(a,e),a=yo(a,n.children),a.flags|=4096);return a}return r?(us(),N=n.fallback,r=a.mode,T=e.child,B=T.sibling,n=Ma(T,{mode:"hidden",children:n.children}),n.subtreeFlags=T.subtreeFlags&65011712,B!==null?N=Ma(B,N):(N=Gs(N,r,s,null),N.flags|=2),N.return=a,n.return=a,n.sibling=N,a.child=n,Al(null,n),n=a.child,N=e.child.memoizedState,N===null?N=po(s):(r=N.cachePool,r!==null?(T=ht._currentValue,r=r.parent!==T?{parent:T,pool:T}:r):r=tm(),N={baseLanes:N.baseLanes|s,cachePool:r}),n.memoizedState=N,n.childLanes=go(e,m,s),a.memoizedState=ho,Al(e.child,n)):(ds(a),s=e.child,e=s.sibling,s=Ma(s,{mode:"visible",children:n.children}),s.return=a,s.sibling=null,e!==null&&(m=a.deletions,m===null?(a.deletions=[e],a.flags|=16):m.push(e)),a.child=s,a.memoizedState=null,s)}function yo(e,a){return a=ei({mode:"visible",children:a},e.mode),a.return=e,e.child=a}function ei(e,a){return e=Ft(22,e,null,a),e.lanes=0,e}function bo(e,a,s){return Ks(a,e.child,null,s),e=yo(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function fx(e,a,s){e.lanes|=a;var n=e.alternate;n!==null&&(n.lanes|=a),Ac(e.return,a,s)}function vo(e,a,s,n,r,c){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:r,treeForkCount:c}:(m.isBackwards=a,m.rendering=null,m.renderingStartTime=0,m.last=n,m.tail=s,m.tailMode=r,m.treeForkCount=c)}function hx(e,a,s){var n=a.pendingProps,r=n.revealOrder,c=n.tail;n=n.children;var m=ut.current,N=(m&2)!==0;if(N?(m=m&1|2,a.flags|=128):m&=1,Z(ut,m),Et(e,a,n,s),n=Le?vl:0,!N&&e!==null&&(e.flags&128)!==0)e:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&fx(e,s,a);else if(e.tag===19)fx(e,s,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break e;for(;e.sibling===null;){if(e.return===null||e.return===a)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(r){case"forwards":for(s=a.child,r=null;s!==null;)e=s.alternate,e!==null&&$r(e)===null&&(r=s),s=s.sibling;s=r,s===null?(r=a.child,a.child=null):(r=s.sibling,s.sibling=null),vo(a,!1,r,s,c,n);break;case"backwards":case"unstable_legacy-backwards":for(s=null,r=a.child,a.child=null;r!==null;){if(e=r.alternate,e!==null&&$r(e)===null){a.child=r;break}e=r.sibling,r.sibling=s,s=r,r=e}vo(a,!0,s,null,c,n);break;case"together":vo(a,!1,null,null,void 0,n);break;default:a.memoizedState=null}return a.child}function Ga(e,a,s){if(e!==null&&(a.dependencies=e.dependencies),fs|=a.lanes,(s&a.childLanes)===0)if(e!==null){if(zn(e,a,s,!1),(s&a.childLanes)===0)return null}else return null;if(e!==null&&a.child!==e.child)throw Error(d(153));if(a.child!==null){for(e=a.child,s=Ma(e,e.pendingProps),a.child=s,s.return=a;e.sibling!==null;)e=e.sibling,s=s.sibling=Ma(e,e.pendingProps),s.return=a;s.sibling=null}return a.child}function jo(e,a){return(e.lanes&a)!==0?!0:(e=e.dependencies,!!(e!==null&&Dr(e)))}function Mp(e,a,s){switch(a.tag){case 3:Ue(a,a.stateNode.containerInfo),rs(a,ht,e.memoizedState.cache),$s();break;case 27:case 5:rt(a);break;case 4:Ue(a,a.stateNode.containerInfo);break;case 10:rs(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Qc(a),null;break;case 13:var n=a.memoizedState;if(n!==null)return n.dehydrated!==null?(ds(a),a.flags|=128,null):(s&a.child.childLanes)!==0?xx(e,a,s):(ds(a),e=Ga(e,a,s),e!==null?e.sibling:null);ds(a);break;case 19:var r=(e.flags&128)!==0;if(n=(s&a.childLanes)!==0,n||(zn(e,a,s,!1),n=(s&a.childLanes)!==0),r){if(n)return hx(e,a,s);a.flags|=128}if(r=a.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Z(ut,ut.current),n)break;return null;case 22:return a.lanes=0,ix(e,a,s,a.pendingProps);case 24:rs(a,ht,e.memoizedState.cache)}return Ga(e,a,s)}function px(e,a,s){if(e!==null)if(e.memoizedProps!==a.pendingProps)gt=!0;else{if(!jo(e,s)&&(a.flags&128)===0)return gt=!1,Mp(e,a,s);gt=(e.flags&131072)!==0}else gt=!1,Le&&(a.flags&1048576)!==0&&Ku(a,vl,a.index);switch(a.lanes=0,a.tag){case 16:e:{var n=a.pendingProps;if(e=Zs(a.elementType),a.type=e,typeof e=="function")wc(e)?(n=Fs(e,n),a.tag=1,a=ux(null,a,e,n,s)):(a.tag=0,a=fo(null,a,e,n,s));else{if(e!=null){var r=e.$$typeof;if(r===$){a.tag=11,a=nx(null,a,e,n,s);break e}else if(r===X){a.tag=14,a=lx(null,a,e,n,s);break e}}throw a=Q(e)||e,Error(d(306,a,""))}}return a;case 0:return fo(e,a,a.type,a.pendingProps,s);case 1:return n=a.type,r=Fs(n,a.pendingProps),ux(e,a,n,r,s);case 3:e:{if(Ue(a,a.stateNode.containerInfo),e===null)throw Error(d(387));n=a.pendingProps;var c=a.memoizedState;r=c.element,Hc(e,a),zl(a,n,null,s);var m=a.memoizedState;if(n=m.cache,rs(a,ht,n),n!==c.cache&&Dc(a,[ht],s,!0),Cl(),n=m.element,c.isDehydrated)if(c={element:n,isDehydrated:!1,cache:m.cache},a.updateQueue.baseState=c,a.memoizedState=c,a.flags&256){a=mx(e,a,n,s);break e}else if(n!==r){r=ia(Error(d(424)),a),jl(r),a=mx(e,a,n,s);break e}else for(e=a.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,et=ma(e.firstChild),Ct=a,Le=!0,ns=null,da=!0,s=im(a,null,n,s),a.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if($s(),n===r){a=Ga(e,a,s);break e}Et(e,a,n,s)}a=a.child}return a;case 26:return Wr(e,a),e===null?(s=C0(a.type,null,a.pendingProps,null))?a.memoizedState=s:Le||(s=a.type,e=a.pendingProps,n=pi(ue.current).createElement(s),n[kt]=a,n[Mt]=e,Tt(n,s,e),Nt(n),a.stateNode=n):a.memoizedState=C0(a.type,e.memoizedProps,a.pendingProps,e.memoizedState),null;case 27:return rt(a),e===null&&Le&&(n=a.stateNode=_0(a.type,a.pendingProps,ue.current),Ct=a,da=!0,r=et,bs(a.type)?(ed=r,et=ma(n.firstChild)):et=r),Et(e,a,a.pendingProps.children,s),Wr(e,a),e===null&&(a.flags|=4194304),a.child;case 5:return e===null&&Le&&((r=n=et)&&(n=ug(n,a.type,a.pendingProps,da),n!==null?(a.stateNode=n,Ct=a,et=ma(n.firstChild),da=!1,r=!0):r=!1),r||ls(a)),rt(a),r=a.type,c=a.pendingProps,m=e!==null?e.memoizedProps:null,n=c.children,Jo(r,c)?n=null:m!==null&&Jo(r,m)&&(a.flags|=32),a.memoizedState!==null&&(r=Xc(e,a,kp,null,null,s),Kl._currentValue=r),Wr(e,a),Et(e,a,n,s),a.child;case 6:return e===null&&Le&&((e=s=et)&&(s=mg(s,a.pendingProps,da),s!==null?(a.stateNode=s,Ct=a,et=null,e=!0):e=!1),e||ls(a)),null;case 13:return xx(e,a,s);case 4:return Ue(a,a.stateNode.containerInfo),n=a.pendingProps,e===null?a.child=Ks(a,null,n,s):Et(e,a,n,s),a.child;case 11:return nx(e,a,a.type,a.pendingProps,s);case 7:return Et(e,a,a.pendingProps,s),a.child;case 8:return Et(e,a,a.pendingProps.children,s),a.child;case 12:return Et(e,a,a.pendingProps.children,s),a.child;case 10:return n=a.pendingProps,rs(a,a.type,n.value),Et(e,a,n.children,s),a.child;case 9:return r=a.type._context,n=a.pendingProps.children,Vs(a),r=zt(r),n=n(r),a.flags|=1,Et(e,a,n,s),a.child;case 14:return lx(e,a,a.type,a.pendingProps,s);case 15:return rx(e,a,a.type,a.pendingProps,s);case 19:return hx(e,a,s);case 31:return Dp(e,a,s);case 22:return ix(e,a,s,a.pendingProps);case 24:return Vs(a),n=zt(ht),e===null?(r=qc(),r===null&&(r=Pe,c=Mc(),r.pooledCache=c,c.refCount++,c!==null&&(r.pooledCacheLanes|=s),r=c),a.memoizedState={parent:n,cache:r},Bc(a),rs(a,ht,r)):((e.lanes&s)!==0&&(Hc(e,a),zl(a,null,null,s),Cl()),r=e.memoizedState,c=a.memoizedState,r.parent!==n?(r={parent:n,cache:n},a.memoizedState=r,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=r),rs(a,ht,n)):(n=c.cache,rs(a,ht,n),n!==r.cache&&Dc(a,[ht],s,!0))),Et(e,a,a.pendingProps.children,s),a.child;case 29:throw a.pendingProps}throw Error(d(156,a.tag))}function $a(e){e.flags|=4}function No(e,a,s,n,r){if((a=(e.mode&32)!==0)&&(a=!1),a){if(e.flags|=16777216,(r&335544128)===r)if(e.stateNode.complete)e.flags|=8192;else if(Yx())e.flags|=8192;else throw Xs=Ur,Uc}else e.flags&=-16777217}function gx(e,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!R0(a))if(Yx())e.flags|=8192;else throw Xs=Ur,Uc}function ti(e,a){a!==null&&(e.flags|=4),e.flags&16384&&(a=e.tag!==22?Fd():536870912,e.lanes|=a,Hn|=a)}function Dl(e,a){if(!Le)switch(e.tailMode){case"hidden":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function tt(e){var a=e.alternate!==null&&e.alternate.child===e.child,s=0,n=0;if(a)for(var r=e.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags&65011712,n|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=n,e.childLanes=s,a}function Lp(e,a,s){var n=a.pendingProps;switch(Ec(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(a),null;case 1:return tt(a),null;case 3:return s=a.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),a.memoizedState.cache!==n&&(a.flags|=2048),Ua(ht),Ce(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Cn(a)?$a(a):e===null||e.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Oc())),tt(a),null;case 26:var r=a.type,c=a.memoizedState;return e===null?($a(a),c!==null?(tt(a),gx(a,c)):(tt(a),No(a,r,null,n,s))):c?c!==e.memoizedState?($a(a),tt(a),gx(a,c)):(tt(a),a.flags&=-16777217):(e=e.memoizedProps,e!==n&&$a(a),tt(a),No(a,r,e,n,s)),null;case 27:if(Ot(a),s=ue.current,r=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==n&&$a(a);else{if(!n){if(a.stateNode===null)throw Error(d(166));return tt(a),null}e=A.current,Cn(a)?Fu(a):(e=_0(r,n,s),a.stateNode=e,$a(a))}return tt(a),null;case 5:if(Ot(a),r=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==n&&$a(a);else{if(!n){if(a.stateNode===null)throw Error(d(166));return tt(a),null}if(c=A.current,Cn(a))Fu(a);else{var m=pi(ue.current);switch(c){case 1:c=m.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:c=m.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":c=m.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":c=m.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":c=m.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof n.is=="string"?m.createElement("select",{is:n.is}):m.createElement("select"),n.multiple?c.multiple=!0:n.size&&(c.size=n.size);break;default:c=typeof n.is=="string"?m.createElement(r,{is:n.is}):m.createElement(r)}}c[kt]=a,c[Mt]=n;e:for(m=a.child;m!==null;){if(m.tag===5||m.tag===6)c.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===a)break e;for(;m.sibling===null;){if(m.return===null||m.return===a)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}a.stateNode=c;e:switch(Tt(c,r,n),r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&$a(a)}}return tt(a),No(a,a.type,e===null?null:e.memoizedProps,a.pendingProps,s),null;case 6:if(e&&a.stateNode!=null)e.memoizedProps!==n&&$a(a);else{if(typeof n!="string"&&a.stateNode===null)throw Error(d(166));if(e=ue.current,Cn(a)){if(e=a.stateNode,s=a.memoizedProps,n=null,r=Ct,r!==null)switch(r.tag){case 27:case 5:n=r.memoizedProps}e[kt]=a,e=!!(e.nodeValue===s||n!==null&&n.suppressHydrationWarning===!0||x0(e.nodeValue,s)),e||ls(a,!0)}else e=pi(e).createTextNode(n),e[kt]=a,a.stateNode=e}return tt(a),null;case 31:if(s=a.memoizedState,e===null||e.memoizedState!==null){if(n=Cn(a),s!==null){if(e===null){if(!n)throw Error(d(318));if(e=a.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(557));e[kt]=a}else $s(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;tt(a),e=!1}else s=Oc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return a.flags&256?(Pt(a),a):(Pt(a),null);if((a.flags&128)!==0)throw Error(d(558))}return tt(a),null;case 13:if(n=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=Cn(a),n!==null&&n.dehydrated!==null){if(e===null){if(!r)throw Error(d(318));if(r=a.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(d(317));r[kt]=a}else $s(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;tt(a),r=!1}else r=Oc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return a.flags&256?(Pt(a),a):(Pt(a),null)}return Pt(a),(a.flags&128)!==0?(a.lanes=s,a):(s=n!==null,e=e!==null&&e.memoizedState!==null,s&&(n=a.child,r=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(r=n.alternate.memoizedState.cachePool.pool),c=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),c!==r&&(n.flags|=2048)),s!==e&&s&&(a.child.flags|=8192),ti(a,a.updateQueue),tt(a),null);case 4:return Ce(),e===null&&Vo(a.stateNode.containerInfo),tt(a),null;case 10:return Ua(a.type),tt(a),null;case 19:if(G(ut),n=a.memoizedState,n===null)return tt(a),null;if(r=(a.flags&128)!==0,c=n.rendering,c===null)if(r)Dl(n,!1);else{if(ct!==0||e!==null&&(e.flags&128)!==0)for(e=a.child;e!==null;){if(c=$r(e),c!==null){for(a.flags|=128,Dl(n,!1),e=c.updateQueue,a.updateQueue=e,ti(a,e),a.subtreeFlags=0,e=s,s=a.child;s!==null;)Qu(s,e),s=s.sibling;return Z(ut,ut.current&1|2),Le&&La(a,n.treeForkCount),a.child}e=e.sibling}n.tail!==null&&Ne()>ri&&(a.flags|=128,r=!0,Dl(n,!1),a.lanes=4194304)}else{if(!r)if(e=$r(c),e!==null){if(a.flags|=128,r=!0,e=e.updateQueue,a.updateQueue=e,ti(a,e),Dl(n,!0),n.tail===null&&n.tailMode==="hidden"&&!c.alternate&&!Le)return tt(a),null}else 2*Ne()-n.renderingStartTime>ri&&s!==536870912&&(a.flags|=128,r=!0,Dl(n,!1),a.lanes=4194304);n.isBackwards?(c.sibling=a.child,a.child=c):(e=n.last,e!==null?e.sibling=c:a.child=c,n.last=c)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=Ne(),e.sibling=null,s=ut.current,Z(ut,r?s&1|2:s&1),Le&&La(a,n.treeForkCount),e):(tt(a),null);case 22:case 23:return Pt(a),Vc(),n=a.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(a.flags|=8192):n&&(a.flags|=8192),n?(s&536870912)!==0&&(a.flags&128)===0&&(tt(a),a.subtreeFlags&6&&(a.flags|=8192)):tt(a),s=a.updateQueue,s!==null&&ti(a,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==s&&(a.flags|=2048),e!==null&&G(Qs),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),a.memoizedState.cache!==s&&(a.flags|=2048),Ua(ht),tt(a),null;case 25:return null;case 30:return null}throw Error(d(156,a.tag))}function qp(e,a){switch(Ec(a),a.tag){case 1:return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return Ua(ht),Ce(),e=a.flags,(e&65536)!==0&&(e&128)===0?(a.flags=e&-65537|128,a):null;case 26:case 27:case 5:return Ot(a),null;case 31:if(a.memoizedState!==null){if(Pt(a),a.alternate===null)throw Error(d(340));$s()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 13:if(Pt(a),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(d(340));$s()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return G(ut),null;case 4:return Ce(),null;case 10:return Ua(a.type),null;case 22:case 23:return Pt(a),Vc(),e!==null&&G(Qs),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 24:return Ua(ht),null;case 25:return null;default:return null}}function yx(e,a){switch(Ec(a),a.tag){case 3:Ua(ht),Ce();break;case 26:case 27:case 5:Ot(a);break;case 4:Ce();break;case 31:a.memoizedState!==null&&Pt(a);break;case 13:Pt(a);break;case 19:G(ut);break;case 10:Ua(a.type);break;case 22:case 23:Pt(a),Vc(),e!==null&&G(Qs);break;case 24:Ua(ht)}}function Ml(e,a){try{var s=a.updateQueue,n=s!==null?s.lastEffect:null;if(n!==null){var r=n.next;s=r;do{if((s.tag&e)===e){n=void 0;var c=s.create,m=s.inst;n=c(),m.destroy=n}s=s.next}while(s!==r)}}catch(N){Ze(a,a.return,N)}}function ms(e,a,s){try{var n=a.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var c=r.next;n=c;do{if((n.tag&e)===e){var m=n.inst,N=m.destroy;if(N!==void 0){m.destroy=void 0,r=a;var T=s,B=N;try{B()}catch(P){Ze(r,T,P)}}}n=n.next}while(n!==c)}}catch(P){Ze(a,a.return,P)}}function bx(e){var a=e.updateQueue;if(a!==null){var s=e.stateNode;try{om(a,s)}catch(n){Ze(e,e.return,n)}}}function vx(e,a,s){s.props=Fs(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(n){Ze(e,a,n)}}function Ll(e,a){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof s=="function"?e.refCleanup=s(n):s.current=n}}catch(r){Ze(e,a,r)}}function ka(e,a){var s=e.ref,n=e.refCleanup;if(s!==null)if(typeof n=="function")try{n()}catch(r){Ze(e,a,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(r){Ze(e,a,r)}else s.current=null}function jx(e){var a=e.type,s=e.memoizedProps,n=e.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":s.autoFocus&&n.focus();break e;case"img":s.src?n.src=s.src:s.srcSet&&(n.srcset=s.srcSet)}}catch(r){Ze(e,e.return,r)}}function So(e,a,s){try{var n=e.stateNode;lg(n,e.type,s,a),n[Mt]=a}catch(r){Ze(e,e.return,r)}}function Nx(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&bs(e.type)||e.tag===4}function _o(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Nx(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&bs(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wo(e,a,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,a?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,a):(a=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.appendChild(e),s=s._reactRootContainer,s!=null||a.onclick!==null||(a.onclick=Aa));else if(n!==4&&(n===27&&bs(e.type)&&(s=e.stateNode,a=null),e=e.child,e!==null))for(wo(e,a,s),e=e.sibling;e!==null;)wo(e,a,s),e=e.sibling}function ai(e,a,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,a?s.insertBefore(e,a):s.appendChild(e);else if(n!==4&&(n===27&&bs(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(ai(e,a,s),e=e.sibling;e!==null;)ai(e,a,s),e=e.sibling}function Sx(e){var a=e.stateNode,s=e.memoizedProps;try{for(var n=e.type,r=a.attributes;r.length;)a.removeAttributeNode(r[0]);Tt(a,n,s),a[kt]=e,a[Mt]=s}catch(c){Ze(e,e.return,c)}}var Ya=!1,yt=!1,ko=!1,_x=typeof WeakSet=="function"?WeakSet:Set,St=null;function Up(e,a){if(e=e.containerInfo,Xo=Si,e=Lu(e),yc(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var r=n.anchorOffset,c=n.focusNode;n=n.focusOffset;try{s.nodeType,c.nodeType}catch{s=null;break e}var m=0,N=-1,T=-1,B=0,P=0,ae=e,H=null;t:for(;;){for(var V;ae!==s||r!==0&&ae.nodeType!==3||(N=m+r),ae!==c||n!==0&&ae.nodeType!==3||(T=m+n),ae.nodeType===3&&(m+=ae.nodeValue.length),(V=ae.firstChild)!==null;)H=ae,ae=V;for(;;){if(ae===e)break t;if(H===s&&++B===r&&(N=m),H===c&&++P===n&&(T=m),(V=ae.nextSibling)!==null)break;ae=H,H=ae.parentNode}ae=V}s=N===-1||T===-1?null:{start:N,end:T}}else s=null}s=s||{start:0,end:0}}else s=null;for(Ko={focusedElem:e,selectionRange:s},Si=!1,St=a;St!==null;)if(a=St,e=a.child,(a.subtreeFlags&1028)!==0&&e!==null)e.return=a,St=e;else for(;St!==null;){switch(a=St,c=a.alternate,e=a.flags,a.tag){case 0:if((e&4)!==0&&(e=a.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)r=e[s],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&c!==null){e=void 0,s=a,r=c.memoizedProps,c=c.memoizedState,n=s.stateNode;try{var pe=Fs(s.type,r);e=n.getSnapshotBeforeUpdate(pe,c),n.__reactInternalSnapshotBeforeUpdate=e}catch(Se){Ze(s,s.return,Se)}}break;case 3:if((e&1024)!==0){if(e=a.stateNode.containerInfo,s=e.nodeType,s===9)Io(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Io(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(d(163))}if(e=a.sibling,e!==null){e.return=a.return,St=e;break}St=a.return}}function wx(e,a,s){var n=s.flags;switch(s.tag){case 0:case 11:case 15:Qa(e,s),n&4&&Ml(5,s);break;case 1:if(Qa(e,s),n&4)if(e=s.stateNode,a===null)try{e.componentDidMount()}catch(m){Ze(s,s.return,m)}else{var r=Fs(s.type,a.memoizedProps);a=a.memoizedState;try{e.componentDidUpdate(r,a,e.__reactInternalSnapshotBeforeUpdate)}catch(m){Ze(s,s.return,m)}}n&64&&bx(s),n&512&&Ll(s,s.return);break;case 3:if(Qa(e,s),n&64&&(e=s.updateQueue,e!==null)){if(a=null,s.child!==null)switch(s.child.tag){case 27:case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}try{om(e,a)}catch(m){Ze(s,s.return,m)}}break;case 27:a===null&&n&4&&Sx(s);case 26:case 5:Qa(e,s),a===null&&n&4&&jx(s),n&512&&Ll(s,s.return);break;case 12:Qa(e,s);break;case 31:Qa(e,s),n&4&&zx(e,s);break;case 13:Qa(e,s),n&4&&Ex(e,s),n&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=Xp.bind(null,s),xg(e,s))));break;case 22:if(n=s.memoizedState!==null||Ya,!n){a=a!==null&&a.memoizedState!==null||yt,r=Ya;var c=yt;Ya=n,(yt=a)&&!c?Za(e,s,(s.subtreeFlags&8772)!==0):Qa(e,s),Ya=r,yt=c}break;case 30:break;default:Qa(e,s)}}function kx(e){var a=e.alternate;a!==null&&(e.alternate=null,kx(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&tc(a)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var nt=null,qt=!1;function Va(e,a,s){for(s=s.child;s!==null;)Cx(e,a,s),s=s.sibling}function Cx(e,a,s){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(rl,s)}catch{}switch(s.tag){case 26:yt||ka(s,a),Va(e,a,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:yt||ka(s,a);var n=nt,r=qt;bs(s.type)&&(nt=s.stateNode,qt=!1),Va(e,a,s),Ql(s.stateNode),nt=n,qt=r;break;case 5:yt||ka(s,a);case 6:if(n=nt,r=qt,nt=null,Va(e,a,s),nt=n,qt=r,nt!==null)if(qt)try{(nt.nodeType===9?nt.body:nt.nodeName==="HTML"?nt.ownerDocument.body:nt).removeChild(s.stateNode)}catch(c){Ze(s,a,c)}else try{nt.removeChild(s.stateNode)}catch(c){Ze(s,a,c)}break;case 18:nt!==null&&(qt?(e=nt,b0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),Kn(e)):b0(nt,s.stateNode));break;case 4:n=nt,r=qt,nt=s.stateNode.containerInfo,qt=!0,Va(e,a,s),nt=n,qt=r;break;case 0:case 11:case 14:case 15:ms(2,s,a),yt||ms(4,s,a),Va(e,a,s);break;case 1:yt||(ka(s,a),n=s.stateNode,typeof n.componentWillUnmount=="function"&&vx(s,a,n)),Va(e,a,s);break;case 21:Va(e,a,s);break;case 22:yt=(n=yt)||s.memoizedState!==null,Va(e,a,s),yt=n;break;default:Va(e,a,s)}}function zx(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Kn(e)}catch(s){Ze(a,a.return,s)}}}function Ex(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Kn(e)}catch(s){Ze(a,a.return,s)}}function Bp(e){switch(e.tag){case 31:case 13:case 19:var a=e.stateNode;return a===null&&(a=e.stateNode=new _x),a;case 22:return e=e.stateNode,a=e._retryCache,a===null&&(a=e._retryCache=new _x),a;default:throw Error(d(435,e.tag))}}function si(e,a){var s=Bp(e);a.forEach(function(n){if(!s.has(n)){s.add(n);var r=Kp.bind(null,e,n);n.then(r,r)}})}function Ut(e,a){var s=a.deletions;if(s!==null)for(var n=0;n<s.length;n++){var r=s[n],c=e,m=a,N=m;e:for(;N!==null;){switch(N.tag){case 27:if(bs(N.type)){nt=N.stateNode,qt=!1;break e}break;case 5:nt=N.stateNode,qt=!1;break e;case 3:case 4:nt=N.stateNode.containerInfo,qt=!0;break e}N=N.return}if(nt===null)throw Error(d(160));Cx(c,m,r),nt=null,qt=!1,c=r.alternate,c!==null&&(c.return=null),r.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Tx(a,e),a=a.sibling}var ja=null;function Tx(e,a){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ut(a,e),Bt(e),n&4&&(ms(3,e,e.return),Ml(3,e),ms(5,e,e.return));break;case 1:Ut(a,e),Bt(e),n&512&&(yt||s===null||ka(s,s.return)),n&64&&Ya&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?n:s.concat(n))));break;case 26:var r=ja;if(Ut(a,e),Bt(e),n&512&&(yt||s===null||ka(s,s.return)),n&4){var c=s!==null?s.memoizedState:null;if(n=e.memoizedState,s===null)if(n===null)if(e.stateNode===null){e:{n=e.type,s=e.memoizedProps,r=r.ownerDocument||r;t:switch(n){case"title":c=r.getElementsByTagName("title")[0],(!c||c[ol]||c[kt]||c.namespaceURI==="http://www.w3.org/2000/svg"||c.hasAttribute("itemprop"))&&(c=r.createElement(n),r.head.insertBefore(c,r.querySelector("head > title"))),Tt(c,n,s),c[kt]=e,Nt(c),n=c;break e;case"link":var m=T0("link","href",r).get(n+(s.href||""));if(m){for(var N=0;N<m.length;N++)if(c=m[N],c.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&c.getAttribute("rel")===(s.rel==null?null:s.rel)&&c.getAttribute("title")===(s.title==null?null:s.title)&&c.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){m.splice(N,1);break t}}c=r.createElement(n),Tt(c,n,s),r.head.appendChild(c);break;case"meta":if(m=T0("meta","content",r).get(n+(s.content||""))){for(N=0;N<m.length;N++)if(c=m[N],c.getAttribute("content")===(s.content==null?null:""+s.content)&&c.getAttribute("name")===(s.name==null?null:s.name)&&c.getAttribute("property")===(s.property==null?null:s.property)&&c.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&c.getAttribute("charset")===(s.charSet==null?null:s.charSet)){m.splice(N,1);break t}}c=r.createElement(n),Tt(c,n,s),r.head.appendChild(c);break;default:throw Error(d(468,n))}c[kt]=e,Nt(c),n=c}e.stateNode=n}else O0(r,e.type,e.stateNode);else e.stateNode=E0(r,n,e.memoizedProps);else c!==n?(c===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):c.count--,n===null?O0(r,e.type,e.stateNode):E0(r,n,e.memoizedProps)):n===null&&e.stateNode!==null&&So(e,e.memoizedProps,s.memoizedProps)}break;case 27:Ut(a,e),Bt(e),n&512&&(yt||s===null||ka(s,s.return)),s!==null&&n&4&&So(e,e.memoizedProps,s.memoizedProps);break;case 5:if(Ut(a,e),Bt(e),n&512&&(yt||s===null||ka(s,s.return)),e.flags&32){r=e.stateNode;try{gn(r,"")}catch(pe){Ze(e,e.return,pe)}}n&4&&e.stateNode!=null&&(r=e.memoizedProps,So(e,r,s!==null?s.memoizedProps:r)),n&1024&&(ko=!0);break;case 6:if(Ut(a,e),Bt(e),n&4){if(e.stateNode===null)throw Error(d(162));n=e.memoizedProps,s=e.stateNode;try{s.nodeValue=n}catch(pe){Ze(e,e.return,pe)}}break;case 3:if(bi=null,r=ja,ja=gi(a.containerInfo),Ut(a,e),ja=r,Bt(e),n&4&&s!==null&&s.memoizedState.isDehydrated)try{Kn(a.containerInfo)}catch(pe){Ze(e,e.return,pe)}ko&&(ko=!1,Ox(e));break;case 4:n=ja,ja=gi(e.stateNode.containerInfo),Ut(a,e),Bt(e),ja=n;break;case 12:Ut(a,e),Bt(e);break;case 31:Ut(a,e),Bt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,si(e,n)));break;case 13:Ut(a,e),Bt(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(li=Ne()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,si(e,n)));break;case 22:r=e.memoizedState!==null;var T=s!==null&&s.memoizedState!==null,B=Ya,P=yt;if(Ya=B||r,yt=P||T,Ut(a,e),yt=P,Ya=B,Bt(e),n&8192)e:for(a=e.stateNode,a._visibility=r?a._visibility&-2:a._visibility|1,r&&(s===null||T||Ya||yt||Is(e)),s=null,a=e;;){if(a.tag===5||a.tag===26){if(s===null){T=s=a;try{if(c=T.stateNode,r)m=c.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{N=T.stateNode;var ae=T.memoizedProps.style,H=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;N.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(pe){Ze(T,T.return,pe)}}}else if(a.tag===6){if(s===null){T=a;try{T.stateNode.nodeValue=r?"":T.memoizedProps}catch(pe){Ze(T,T.return,pe)}}}else if(a.tag===18){if(s===null){T=a;try{var V=T.stateNode;r?v0(V,!0):v0(T.stateNode,!1)}catch(pe){Ze(T,T.return,pe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===e)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;s===a&&(s=null),a=a.return}s===a&&(s=null),a.sibling.return=a.return,a=a.sibling}n&4&&(n=e.updateQueue,n!==null&&(s=n.retryQueue,s!==null&&(n.retryQueue=null,si(e,s))));break;case 19:Ut(a,e),Bt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,si(e,n)));break;case 30:break;case 21:break;default:Ut(a,e),Bt(e)}}function Bt(e){var a=e.flags;if(a&2){try{for(var s,n=e.return;n!==null;){if(Nx(n)){s=n;break}n=n.return}if(s==null)throw Error(d(160));switch(s.tag){case 27:var r=s.stateNode,c=_o(e);ai(e,c,r);break;case 5:var m=s.stateNode;s.flags&32&&(gn(m,""),s.flags&=-33);var N=_o(e);ai(e,N,m);break;case 3:case 4:var T=s.stateNode.containerInfo,B=_o(e);wo(e,B,T);break;default:throw Error(d(161))}}catch(P){Ze(e,e.return,P)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function Ox(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var a=e;Ox(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),e=e.sibling}}function Qa(e,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)wx(e,a.alternate,a),a=a.sibling}function Is(e){for(e=e.child;e!==null;){var a=e;switch(a.tag){case 0:case 11:case 14:case 15:ms(4,a,a.return),Is(a);break;case 1:ka(a,a.return);var s=a.stateNode;typeof s.componentWillUnmount=="function"&&vx(a,a.return,s),Is(a);break;case 27:Ql(a.stateNode);case 26:case 5:ka(a,a.return),Is(a);break;case 22:a.memoizedState===null&&Is(a);break;case 30:Is(a);break;default:Is(a)}e=e.sibling}}function Za(e,a,s){for(s=s&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var n=a.alternate,r=e,c=a,m=c.flags;switch(c.tag){case 0:case 11:case 15:Za(r,c,s),Ml(4,c);break;case 1:if(Za(r,c,s),n=c,r=n.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(B){Ze(n,n.return,B)}if(n=c,r=n.updateQueue,r!==null){var N=n.stateNode;try{var T=r.shared.hiddenCallbacks;if(T!==null)for(r.shared.hiddenCallbacks=null,r=0;r<T.length;r++)cm(T[r],N)}catch(B){Ze(n,n.return,B)}}s&&m&64&&bx(c),Ll(c,c.return);break;case 27:Sx(c);case 26:case 5:Za(r,c,s),s&&n===null&&m&4&&jx(c),Ll(c,c.return);break;case 12:Za(r,c,s);break;case 31:Za(r,c,s),s&&m&4&&zx(r,c);break;case 13:Za(r,c,s),s&&m&4&&Ex(r,c);break;case 22:c.memoizedState===null&&Za(r,c,s),Ll(c,c.return);break;case 30:break;default:Za(r,c,s)}a=a.sibling}}function Co(e,a){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(e=a.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&Nl(s))}function zo(e,a){e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Nl(e))}function Na(e,a,s,n){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Rx(e,a,s,n),a=a.sibling}function Rx(e,a,s,n){var r=a.flags;switch(a.tag){case 0:case 11:case 15:Na(e,a,s,n),r&2048&&Ml(9,a);break;case 1:Na(e,a,s,n);break;case 3:Na(e,a,s,n),r&2048&&(e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Nl(e)));break;case 12:if(r&2048){Na(e,a,s,n),e=a.stateNode;try{var c=a.memoizedProps,m=c.id,N=c.onPostCommit;typeof N=="function"&&N(m,a.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(T){Ze(a,a.return,T)}}else Na(e,a,s,n);break;case 31:Na(e,a,s,n);break;case 13:Na(e,a,s,n);break;case 23:break;case 22:c=a.stateNode,m=a.alternate,a.memoizedState!==null?c._visibility&2?Na(e,a,s,n):ql(e,a):c._visibility&2?Na(e,a,s,n):(c._visibility|=2,qn(e,a,s,n,(a.subtreeFlags&10256)!==0||!1)),r&2048&&Co(m,a);break;case 24:Na(e,a,s,n),r&2048&&zo(a.alternate,a);break;default:Na(e,a,s,n)}}function qn(e,a,s,n,r){for(r=r&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var c=e,m=a,N=s,T=n,B=m.flags;switch(m.tag){case 0:case 11:case 15:qn(c,m,N,T,r),Ml(8,m);break;case 23:break;case 22:var P=m.stateNode;m.memoizedState!==null?P._visibility&2?qn(c,m,N,T,r):ql(c,m):(P._visibility|=2,qn(c,m,N,T,r)),r&&B&2048&&Co(m.alternate,m);break;case 24:qn(c,m,N,T,r),r&&B&2048&&zo(m.alternate,m);break;default:qn(c,m,N,T,r)}a=a.sibling}}function ql(e,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var s=e,n=a,r=n.flags;switch(n.tag){case 22:ql(s,n),r&2048&&Co(n.alternate,n);break;case 24:ql(s,n),r&2048&&zo(n.alternate,n);break;default:ql(s,n)}a=a.sibling}}var Ul=8192;function Un(e,a,s){if(e.subtreeFlags&Ul)for(e=e.child;e!==null;)Ax(e,a,s),e=e.sibling}function Ax(e,a,s){switch(e.tag){case 26:Un(e,a,s),e.flags&Ul&&e.memoizedState!==null&&wg(s,ja,e.memoizedState,e.memoizedProps);break;case 5:Un(e,a,s);break;case 3:case 4:var n=ja;ja=gi(e.stateNode.containerInfo),Un(e,a,s),ja=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=Ul,Ul=16777216,Un(e,a,s),Ul=n):Un(e,a,s));break;default:Un(e,a,s)}}function Dx(e){var a=e.alternate;if(a!==null&&(e=a.child,e!==null)){a.child=null;do a=e.sibling,e.sibling=null,e=a;while(e!==null)}}function Bl(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var n=a[s];St=n,Lx(n,e)}Dx(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Mx(e),e=e.sibling}function Mx(e){switch(e.tag){case 0:case 11:case 15:Bl(e),e.flags&2048&&ms(9,e,e.return);break;case 3:Bl(e);break;case 12:Bl(e);break;case 22:var a=e.stateNode;e.memoizedState!==null&&a._visibility&2&&(e.return===null||e.return.tag!==13)?(a._visibility&=-3,ni(e)):Bl(e);break;default:Bl(e)}}function ni(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var n=a[s];St=n,Lx(n,e)}Dx(e)}for(e=e.child;e!==null;){switch(a=e,a.tag){case 0:case 11:case 15:ms(8,a,a.return),ni(a);break;case 22:s=a.stateNode,s._visibility&2&&(s._visibility&=-3,ni(a));break;default:ni(a)}e=e.sibling}}function Lx(e,a){for(;St!==null;){var s=St;switch(s.tag){case 0:case 11:case 15:ms(8,s,a);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var n=s.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Nl(s.memoizedState.cache)}if(n=s.child,n!==null)n.return=s,St=n;else e:for(s=e;St!==null;){n=St;var r=n.sibling,c=n.return;if(kx(n),n===s){St=null;break e}if(r!==null){r.return=c,St=r;break e}St=c}}}var Hp={getCacheForType:function(e){var a=zt(ht),s=a.data.get(e);return s===void 0&&(s=e(),a.data.set(e,s)),s},cacheSignal:function(){return zt(ht).controller.signal}},Gp=typeof WeakMap=="function"?WeakMap:Map,$e=0,Pe=null,Oe=null,De=0,Qe=0,Wt=null,xs=!1,Bn=!1,Eo=!1,Xa=0,ct=0,fs=0,Ps=0,To=0,ea=0,Hn=0,Hl=null,Ht=null,Oo=!1,li=0,qx=0,ri=1/0,ii=null,hs=null,bt=0,ps=null,Gn=null,Ka=0,Ro=0,Ao=null,Ux=null,Gl=0,Do=null;function ta(){return($e&2)!==0&&De!==0?De&-De:q.T!==null?Ho():eu()}function Bx(){if(ea===0)if((De&536870912)===0||Le){var e=hr;hr<<=1,(hr&3932160)===0&&(hr=262144),ea=e}else ea=536870912;return e=It.current,e!==null&&(e.flags|=32),ea}function Gt(e,a,s){(e===Pe&&(Qe===2||Qe===9)||e.cancelPendingCommit!==null)&&($n(e,0),gs(e,De,ea,!1)),cl(e,s),(($e&2)===0||e!==Pe)&&(e===Pe&&(($e&2)===0&&(Ps|=s),ct===4&&gs(e,De,ea,!1)),Ca(e))}function Hx(e,a,s){if(($e&6)!==0)throw Error(d(327));var n=!s&&(a&127)===0&&(a&e.expiredLanes)===0||il(e,a),r=n?Vp(e,a):Lo(e,a,!0),c=n;do{if(r===0){Bn&&!n&&gs(e,a,0,!1);break}else{if(s=e.current.alternate,c&&!$p(s)){r=Lo(e,a,!1),c=!1;continue}if(r===2){if(c=a,e.errorRecoveryDisabledLanes&c)var m=0;else m=e.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){a=m;e:{var N=e;r=Hl;var T=N.current.memoizedState.isDehydrated;if(T&&($n(N,m).flags|=256),m=Lo(N,m,!1),m!==2){if(Eo&&!T){N.errorRecoveryDisabledLanes|=c,Ps|=c,r=4;break e}c=Ht,Ht=r,c!==null&&(Ht===null?Ht=c:Ht.push.apply(Ht,c))}r=m}if(c=!1,r!==2)continue}}if(r===1){$n(e,0),gs(e,a,0,!0);break}e:{switch(n=e,c=r,c){case 0:case 1:throw Error(d(345));case 4:if((a&4194048)!==a)break;case 6:gs(n,a,ea,!xs);break e;case 2:Ht=null;break;case 3:case 5:break;default:throw Error(d(329))}if((a&62914560)===a&&(r=li+300-Ne(),10<r)){if(gs(n,a,ea,!xs),gr(n,0,!0)!==0)break e;Ka=a,n.timeoutHandle=g0(Gx.bind(null,n,s,Ht,ii,Oo,a,ea,Ps,Hn,xs,c,"Throttled",-0,0),r);break e}Gx(n,s,Ht,ii,Oo,a,ea,Ps,Hn,xs,c,null,-0,0)}}break}while(!0);Ca(e)}function Gx(e,a,s,n,r,c,m,N,T,B,P,ae,H,V){if(e.timeoutHandle=-1,ae=a.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Aa},Ax(a,c,ae);var pe=(c&62914560)===c?li-Ne():(c&4194048)===c?qx-Ne():0;if(pe=kg(ae,pe),pe!==null){Ka=c,e.cancelPendingCommit=pe(Jx.bind(null,e,a,c,s,n,r,m,N,T,P,ae,null,H,V)),gs(e,c,m,!B);return}}Jx(e,a,c,s,n,r,m,N,T)}function $p(e){for(var a=e;;){var s=a.tag;if((s===0||s===11||s===15)&&a.flags&16384&&(s=a.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var n=0;n<s.length;n++){var r=s[n],c=r.getSnapshot;r=r.value;try{if(!Jt(c(),r))return!1}catch{return!1}}if(s=a.child,a.subtreeFlags&16384&&s!==null)s.return=a,a=s;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function gs(e,a,s,n){a&=~To,a&=~Ps,e.suspendedLanes|=a,e.pingedLanes&=~a,n&&(e.warmLanes|=a),n=e.expirationTimes;for(var r=a;0<r;){var c=31-Kt(r),m=1<<c;n[c]=-1,r&=~m}s!==0&&Id(e,s,a)}function ci(){return($e&6)===0?($l(0),!1):!0}function Mo(){if(Oe!==null){if(Qe===0)var e=Oe.return;else e=Oe,qa=Ys=null,Fc(e),Rn=null,_l=0,e=Oe;for(;e!==null;)yx(e.alternate,e),e=e.return;Oe=null}}function $n(e,a){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,cg(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Ka=0,Mo(),Pe=e,Oe=s=Ma(e.current,null),De=a,Qe=0,Wt=null,xs=!1,Bn=il(e,a),Eo=!1,Hn=ea=To=Ps=fs=ct=0,Ht=Hl=null,Oo=!1,(a&8)!==0&&(a|=a&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=a;0<n;){var r=31-Kt(n),c=1<<r;a|=e[r],n&=~c}return Xa=a,Er(),s}function $x(e,a){ze=null,q.H=Rl,a===On||a===qr?(a=nm(),Qe=3):a===Uc?(a=nm(),Qe=4):Qe=a===xo?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Wt=a,Oe===null&&(ct=1,Ir(e,ia(a,e.current)))}function Yx(){var e=It.current;return e===null?!0:(De&4194048)===De?ua===null:(De&62914560)===De||(De&536870912)!==0?e===ua:!1}function Vx(){var e=q.H;return q.H=Rl,e===null?Rl:e}function Qx(){var e=q.A;return q.A=Hp,e}function oi(){ct=4,xs||(De&4194048)!==De&&It.current!==null||(Bn=!0),(fs&134217727)===0&&(Ps&134217727)===0||Pe===null||gs(Pe,De,ea,!1)}function Lo(e,a,s){var n=$e;$e|=2;var r=Vx(),c=Qx();(Pe!==e||De!==a)&&(ii=null,$n(e,a)),a=!1;var m=ct;e:do try{if(Qe!==0&&Oe!==null){var N=Oe,T=Wt;switch(Qe){case 8:Mo(),m=6;break e;case 3:case 2:case 9:case 6:It.current===null&&(a=!0);var B=Qe;if(Qe=0,Wt=null,Yn(e,N,T,B),s&&Bn){m=0;break e}break;default:B=Qe,Qe=0,Wt=null,Yn(e,N,T,B)}}Yp(),m=ct;break}catch(P){$x(e,P)}while(!0);return a&&e.shellSuspendCounter++,qa=Ys=null,$e=n,q.H=r,q.A=c,Oe===null&&(Pe=null,De=0,Er()),m}function Yp(){for(;Oe!==null;)Zx(Oe)}function Vp(e,a){var s=$e;$e|=2;var n=Vx(),r=Qx();Pe!==e||De!==a?(ii=null,ri=Ne()+500,$n(e,a)):Bn=il(e,a);e:do try{if(Qe!==0&&Oe!==null){a=Oe;var c=Wt;t:switch(Qe){case 1:Qe=0,Wt=null,Yn(e,a,c,1);break;case 2:case 9:if(am(c)){Qe=0,Wt=null,Xx(a);break}a=function(){Qe!==2&&Qe!==9||Pe!==e||(Qe=7),Ca(e)},c.then(a,a);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:am(c)?(Qe=0,Wt=null,Xx(a)):(Qe=0,Wt=null,Yn(e,a,c,7));break;case 5:var m=null;switch(Oe.tag){case 26:m=Oe.memoizedState;case 5:case 27:var N=Oe;if(m?R0(m):N.stateNode.complete){Qe=0,Wt=null;var T=N.sibling;if(T!==null)Oe=T;else{var B=N.return;B!==null?(Oe=B,di(B)):Oe=null}break t}}Qe=0,Wt=null,Yn(e,a,c,5);break;case 6:Qe=0,Wt=null,Yn(e,a,c,6);break;case 8:Mo(),ct=6;break e;default:throw Error(d(462))}}Qp();break}catch(P){$x(e,P)}while(!0);return qa=Ys=null,q.H=n,q.A=r,$e=s,Oe!==null?0:(Pe=null,De=0,Er(),ct)}function Qp(){for(;Oe!==null&&!ba();)Zx(Oe)}function Zx(e){var a=px(e.alternate,e,Xa);e.memoizedProps=e.pendingProps,a===null?di(e):Oe=a}function Xx(e){var a=e,s=a.alternate;switch(a.tag){case 15:case 0:a=dx(s,a,a.pendingProps,a.type,void 0,De);break;case 11:a=dx(s,a,a.pendingProps,a.type.render,a.ref,De);break;case 5:Fc(a);default:yx(s,a),a=Oe=Qu(a,Xa),a=px(s,a,Xa)}e.memoizedProps=e.pendingProps,a===null?di(e):Oe=a}function Yn(e,a,s,n){qa=Ys=null,Fc(a),Rn=null,_l=0;var r=a.return;try{if(Ap(e,r,a,s,De)){ct=1,Ir(e,ia(s,e.current)),Oe=null;return}}catch(c){if(r!==null)throw Oe=r,c;ct=1,Ir(e,ia(s,e.current)),Oe=null;return}a.flags&32768?(Le||n===1?e=!0:Bn||(De&536870912)!==0?e=!1:(xs=e=!0,(n===2||n===9||n===3||n===6)&&(n=It.current,n!==null&&n.tag===13&&(n.flags|=16384))),Kx(a,e)):di(a)}function di(e){var a=e;do{if((a.flags&32768)!==0){Kx(a,xs);return}e=a.return;var s=Lp(a.alternate,a,Xa);if(s!==null){Oe=s;return}if(a=a.sibling,a!==null){Oe=a;return}Oe=a=e}while(a!==null);ct===0&&(ct=5)}function Kx(e,a){do{var s=qp(e.alternate,e);if(s!==null){s.flags&=32767,Oe=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!a&&(e=e.sibling,e!==null)){Oe=e;return}Oe=e=s}while(e!==null);ct=6,Oe=null}function Jx(e,a,s,n,r,c,m,N,T){e.cancelPendingCommit=null;do ui();while(bt!==0);if(($e&6)!==0)throw Error(d(327));if(a!==null){if(a===e.current)throw Error(d(177));if(c=a.lanes|a.childLanes,c|=Sc,_h(e,s,c,m,N,T),e===Pe&&(Oe=Pe=null,De=0),Gn=a,ps=e,Ka=s,Ro=c,Ao=r,Ux=n,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Jp(Ge,function(){return e0(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||n){n=q.T,q.T=null,r=W.p,W.p=2,m=$e,$e|=4;try{Up(e,a,s)}finally{$e=m,W.p=r,q.T=n}}bt=1,Fx(),Ix(),Px()}}function Fx(){if(bt===1){bt=0;var e=ps,a=Gn,s=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||s){s=q.T,q.T=null;var n=W.p;W.p=2;var r=$e;$e|=4;try{Tx(a,e);var c=Ko,m=Lu(e.containerInfo),N=c.focusedElem,T=c.selectionRange;if(m!==N&&N&&N.ownerDocument&&Mu(N.ownerDocument.documentElement,N)){if(T!==null&&yc(N)){var B=T.start,P=T.end;if(P===void 0&&(P=B),"selectionStart"in N)N.selectionStart=B,N.selectionEnd=Math.min(P,N.value.length);else{var ae=N.ownerDocument||document,H=ae&&ae.defaultView||window;if(H.getSelection){var V=H.getSelection(),pe=N.textContent.length,Se=Math.min(T.start,pe),Fe=T.end===void 0?Se:Math.min(T.end,pe);!V.extend&&Se>Fe&&(m=Fe,Fe=Se,Se=m);var D=Du(N,Se),R=Du(N,Fe);if(D&&R&&(V.rangeCount!==1||V.anchorNode!==D.node||V.anchorOffset!==D.offset||V.focusNode!==R.node||V.focusOffset!==R.offset)){var U=ae.createRange();U.setStart(D.node,D.offset),V.removeAllRanges(),Se>Fe?(V.addRange(U),V.extend(R.node,R.offset)):(U.setEnd(R.node,R.offset),V.addRange(U))}}}}for(ae=[],V=N;V=V.parentNode;)V.nodeType===1&&ae.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<ae.length;N++){var ee=ae[N];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Si=!!Xo,Ko=Xo=null}finally{$e=r,W.p=n,q.T=s}}e.current=a,bt=2}}function Ix(){if(bt===2){bt=0;var e=ps,a=Gn,s=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||s){s=q.T,q.T=null;var n=W.p;W.p=2;var r=$e;$e|=4;try{wx(e,a.alternate,a)}finally{$e=r,W.p=n,q.T=s}}bt=3}}function Px(){if(bt===4||bt===3){bt=0,I();var e=ps,a=Gn,s=Ka,n=Ux;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?bt=5:(bt=0,Gn=ps=null,Wx(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(hs=null),Wi(s),a=a.stateNode,Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(rl,a,void 0,(a.current.flags&128)===128)}catch{}if(n!==null){a=q.T,r=W.p,W.p=2,q.T=null;try{for(var c=e.onRecoverableError,m=0;m<n.length;m++){var N=n[m];c(N.value,{componentStack:N.stack})}}finally{q.T=a,W.p=r}}(Ka&3)!==0&&ui(),Ca(e),r=e.pendingLanes,(s&261930)!==0&&(r&42)!==0?e===Do?Gl++:(Gl=0,Do=e):Gl=0,$l(0)}}function Wx(e,a){(e.pooledCacheLanes&=a)===0&&(a=e.pooledCache,a!=null&&(e.pooledCache=null,Nl(a)))}function ui(){return Fx(),Ix(),Px(),e0()}function e0(){if(bt!==5)return!1;var e=ps,a=Ro;Ro=0;var s=Wi(Ka),n=q.T,r=W.p;try{W.p=32>s?32:s,q.T=null,s=Ao,Ao=null;var c=ps,m=Ka;if(bt=0,Gn=ps=null,Ka=0,($e&6)!==0)throw Error(d(331));var N=$e;if($e|=4,Mx(c.current),Rx(c,c.current,m,s),$e=N,$l(0,!1),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(rl,c)}catch{}return!0}finally{W.p=r,q.T=n,Wx(e,a)}}function t0(e,a,s){a=ia(s,a),a=mo(e.stateNode,a,2),e=os(e,a,2),e!==null&&(cl(e,2),Ca(e))}function Ze(e,a,s){if(e.tag===3)t0(e,e,s);else for(;a!==null;){if(a.tag===3){t0(a,e,s);break}else if(a.tag===1){var n=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(hs===null||!hs.has(n))){e=ia(s,e),s=ax(2),n=os(a,s,2),n!==null&&(sx(s,n,a,e),cl(n,2),Ca(n));break}}a=a.return}}function qo(e,a,s){var n=e.pingCache;if(n===null){n=e.pingCache=new Gp;var r=new Set;n.set(a,r)}else r=n.get(a),r===void 0&&(r=new Set,n.set(a,r));r.has(s)||(Eo=!0,r.add(s),e=Zp.bind(null,e,a,s),a.then(e,e))}function Zp(e,a,s){var n=e.pingCache;n!==null&&n.delete(a),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,Pe===e&&(De&s)===s&&(ct===4||ct===3&&(De&62914560)===De&&300>Ne()-li?($e&2)===0&&$n(e,0):To|=s,Hn===De&&(Hn=0)),Ca(e)}function a0(e,a){a===0&&(a=Fd()),e=Hs(e,a),e!==null&&(cl(e,a),Ca(e))}function Xp(e){var a=e.memoizedState,s=0;a!==null&&(s=a.retryLane),a0(e,s)}function Kp(e,a){var s=0;switch(e.tag){case 31:case 13:var n=e.stateNode,r=e.memoizedState;r!==null&&(s=r.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(d(314))}n!==null&&n.delete(a),a0(e,s)}function Jp(e,a){return Zt(e,a)}var mi=null,Vn=null,Uo=!1,xi=!1,Bo=!1,ys=0;function Ca(e){e!==Vn&&e.next===null&&(Vn===null?mi=Vn=e:Vn=Vn.next=e),xi=!0,Uo||(Uo=!0,Ip())}function $l(e,a){if(!Bo&&xi){Bo=!0;do for(var s=!1,n=mi;n!==null;){if(e!==0){var r=n.pendingLanes;if(r===0)var c=0;else{var m=n.suspendedLanes,N=n.pingedLanes;c=(1<<31-Kt(42|e)+1)-1,c&=r&~(m&~N),c=c&201326741?c&201326741|1:c?c|2:0}c!==0&&(s=!0,r0(n,c))}else c=De,c=gr(n,n===Pe?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(c&3)===0||il(n,c)||(s=!0,r0(n,c));n=n.next}while(s);Bo=!1}}function Fp(){s0()}function s0(){xi=Uo=!1;var e=0;ys!==0&&ig()&&(e=ys);for(var a=Ne(),s=null,n=mi;n!==null;){var r=n.next,c=n0(n,a);c===0?(n.next=null,s===null?mi=r:s.next=r,r===null&&(Vn=s)):(s=n,(e!==0||(c&3)!==0)&&(xi=!0)),n=r}bt!==0&&bt!==5||$l(e),ys!==0&&(ys=0)}function n0(e,a){for(var s=e.suspendedLanes,n=e.pingedLanes,r=e.expirationTimes,c=e.pendingLanes&-62914561;0<c;){var m=31-Kt(c),N=1<<m,T=r[m];T===-1?((N&s)===0||(N&n)!==0)&&(r[m]=Sh(N,a)):T<=a&&(e.expiredLanes|=N),c&=~N}if(a=Pe,s=De,s=gr(e,e===a?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,s===0||e===a&&(Qe===2||Qe===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&xt(n),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||il(e,s)){if(a=s&-s,a===e.callbackPriority)return a;switch(n!==null&&xt(n),Wi(s)){case 2:case 8:s=ve;break;case 32:s=Ge;break;case 268435456:s=dn;break;default:s=Ge}return n=l0.bind(null,e),s=Zt(s,n),e.callbackPriority=a,e.callbackNode=s,a}return n!==null&&n!==null&&xt(n),e.callbackPriority=2,e.callbackNode=null,2}function l0(e,a){if(bt!==0&&bt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(ui()&&e.callbackNode!==s)return null;var n=De;return n=gr(e,e===Pe?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(Hx(e,n,a),n0(e,Ne()),e.callbackNode!=null&&e.callbackNode===s?l0.bind(null,e):null)}function r0(e,a){if(ui())return null;Hx(e,a,!0)}function Ip(){og(function(){($e&6)!==0?Zt(Y,Fp):s0()})}function Ho(){if(ys===0){var e=En;e===0&&(e=fr,fr<<=1,(fr&261888)===0&&(fr=256)),ys=e}return ys}function i0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:jr(""+e)}function c0(e,a){var s=a.ownerDocument.createElement("input");return s.name=a.name,s.value=a.value,e.id&&s.setAttribute("form",e.id),a.parentNode.insertBefore(s,a),e=new FormData(e),s.parentNode.removeChild(s),e}function Pp(e,a,s,n,r){if(a==="submit"&&s&&s.stateNode===r){var c=i0((r[Mt]||null).action),m=n.submitter;m&&(a=(a=m[Mt]||null)?i0(a.formAction):m.getAttribute("formAction"),a!==null&&(c=a,m=null));var N=new wr("action","action",null,n,r);e.push({event:N,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(ys!==0){var T=m?c0(r,m):new FormData(r);lo(s,{pending:!0,data:T,method:r.method,action:c},null,T)}}else typeof c=="function"&&(N.preventDefault(),T=m?c0(r,m):new FormData(r),lo(s,{pending:!0,data:T,method:r.method,action:c},c,T))},currentTarget:r}]})}}for(var Go=0;Go<Nc.length;Go++){var $o=Nc[Go],Wp=$o.toLowerCase(),eg=$o[0].toUpperCase()+$o.slice(1);va(Wp,"on"+eg)}va(Bu,"onAnimationEnd"),va(Hu,"onAnimationIteration"),va(Gu,"onAnimationStart"),va("dblclick","onDoubleClick"),va("focusin","onFocus"),va("focusout","onBlur"),va(pp,"onTransitionRun"),va(gp,"onTransitionStart"),va(yp,"onTransitionCancel"),va($u,"onTransitionEnd"),hn("onMouseEnter",["mouseout","mouseover"]),hn("onMouseLeave",["mouseout","mouseover"]),hn("onPointerEnter",["pointerout","pointerover"]),hn("onPointerLeave",["pointerout","pointerover"]),Ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ls("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yl));function o0(e,a){a=(a&4)!==0;for(var s=0;s<e.length;s++){var n=e[s],r=n.event;n=n.listeners;e:{var c=void 0;if(a)for(var m=n.length-1;0<=m;m--){var N=n[m],T=N.instance,B=N.currentTarget;if(N=N.listener,T!==c&&r.isPropagationStopped())break e;c=N,r.currentTarget=B;try{c(r)}catch(P){zr(P)}r.currentTarget=null,c=T}else for(m=0;m<n.length;m++){if(N=n[m],T=N.instance,B=N.currentTarget,N=N.listener,T!==c&&r.isPropagationStopped())break e;c=N,r.currentTarget=B;try{c(r)}catch(P){zr(P)}r.currentTarget=null,c=T}}}}function Re(e,a){var s=a[ec];s===void 0&&(s=a[ec]=new Set);var n=e+"__bubble";s.has(n)||(d0(a,e,2,!1),s.add(n))}function Yo(e,a,s){var n=0;a&&(n|=4),d0(s,e,n,a)}var fi="_reactListening"+Math.random().toString(36).slice(2);function Vo(e){if(!e[fi]){e[fi]=!0,su.forEach(function(s){s!=="selectionchange"&&(tg.has(s)||Yo(s,!1,e),Yo(s,!0,e))});var a=e.nodeType===9?e:e.ownerDocument;a===null||a[fi]||(a[fi]=!0,Yo("selectionchange",!1,a))}}function d0(e,a,s,n){switch(B0(a)){case 2:var r=Eg;break;case 8:r=Tg;break;default:r=ld}s=r.bind(null,a,s,e),r=void 0,!oc||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(r=!0),n?r!==void 0?e.addEventListener(a,s,{capture:!0,passive:r}):e.addEventListener(a,s,!0):r!==void 0?e.addEventListener(a,s,{passive:r}):e.addEventListener(a,s,!1)}function Qo(e,a,s,n,r){var c=n;if((a&1)===0&&(a&2)===0&&n!==null)e:for(;;){if(n===null)return;var m=n.tag;if(m===3||m===4){var N=n.stateNode.containerInfo;if(N===r)break;if(m===4)for(m=n.return;m!==null;){var T=m.tag;if((T===3||T===4)&&m.stateNode.containerInfo===r)return;m=m.return}for(;N!==null;){if(m=mn(N),m===null)return;if(T=m.tag,T===5||T===6||T===26||T===27){n=c=m;continue e}N=N.parentNode}}n=n.return}hu(function(){var B=c,P=ic(s),ae=[];e:{var H=Yu.get(e);if(H!==void 0){var V=wr,pe=e;switch(e){case"keypress":if(Sr(s)===0)break e;case"keydown":case"keyup":V=Kh;break;case"focusin":pe="focus",V=xc;break;case"focusout":pe="blur",V=xc;break;case"beforeblur":case"afterblur":V=xc;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=yu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=Lh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=Ih;break;case Bu:case Hu:case Gu:V=Bh;break;case $u:V=Wh;break;case"scroll":case"scrollend":V=Dh;break;case"wheel":V=tp;break;case"copy":case"cut":case"paste":V=Gh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=vu;break;case"toggle":case"beforetoggle":V=sp}var Se=(a&4)!==0,Fe=!Se&&(e==="scroll"||e==="scrollend"),D=Se?H!==null?H+"Capture":null:H;Se=[];for(var R=B,U;R!==null;){var ee=R;if(U=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||U===null||D===null||(ee=ul(R,D),ee!=null&&Se.push(Vl(R,ee,U))),Fe)break;R=R.return}0<Se.length&&(H=new V(H,pe,null,s,P),ae.push({event:H,listeners:Se}))}}if((a&7)===0){e:{if(H=e==="mouseover"||e==="pointerover",V=e==="mouseout"||e==="pointerout",H&&s!==rc&&(pe=s.relatedTarget||s.fromElement)&&(mn(pe)||pe[un]))break e;if((V||H)&&(H=P.window===P?P:(H=P.ownerDocument)?H.defaultView||H.parentWindow:window,V?(pe=s.relatedTarget||s.toElement,V=B,pe=pe?mn(pe):null,pe!==null&&(Fe=f(pe),Se=pe.tag,pe!==Fe||Se!==5&&Se!==27&&Se!==6)&&(pe=null)):(V=null,pe=B),V!==pe)){if(Se=yu,ee="onMouseLeave",D="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(Se=vu,ee="onPointerLeave",D="onPointerEnter",R="pointer"),Fe=V==null?H:dl(V),U=pe==null?H:dl(pe),H=new Se(ee,R+"leave",V,s,P),H.target=Fe,H.relatedTarget=U,ee=null,mn(P)===B&&(Se=new Se(D,R+"enter",pe,s,P),Se.target=U,Se.relatedTarget=Fe,ee=Se),Fe=ee,V&&pe)t:{for(Se=ag,D=V,R=pe,U=0,ee=D;ee;ee=Se(ee))U++;ee=0;for(var je=R;je;je=Se(je))ee++;for(;0<U-ee;)D=Se(D),U--;for(;0<ee-U;)R=Se(R),ee--;for(;U--;){if(D===R||R!==null&&D===R.alternate){Se=D;break t}D=Se(D),R=Se(R)}Se=null}else Se=null;V!==null&&u0(ae,H,V,Se,!1),pe!==null&&Fe!==null&&u0(ae,Fe,pe,Se,!0)}}e:{if(H=B?dl(B):window,V=H.nodeName&&H.nodeName.toLowerCase(),V==="select"||V==="input"&&H.type==="file")var Be=zu;else if(ku(H))if(Eu)Be=xp;else{Be=up;var ye=dp}else V=H.nodeName,!V||V.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?B&&lc(B.elementType)&&(Be=zu):Be=mp;if(Be&&(Be=Be(e,B))){Cu(ae,Be,s,P);break e}ye&&ye(e,H,B),e==="focusout"&&B&&H.type==="number"&&B.memoizedProps.value!=null&&nc(H,"number",H.value)}switch(ye=B?dl(B):window,e){case"focusin":(ku(ye)||ye.contentEditable==="true")&&(jn=ye,bc=B,bl=null);break;case"focusout":bl=bc=jn=null;break;case"mousedown":vc=!0;break;case"contextmenu":case"mouseup":case"dragend":vc=!1,qu(ae,s,P);break;case"selectionchange":if(hp)break;case"keydown":case"keyup":qu(ae,s,P)}var Ee;if(hc)e:{switch(e){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else vn?_u(e,s)&&(Me="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Me="onCompositionStart");Me&&(ju&&s.locale!=="ko"&&(vn||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&vn&&(Ee=pu()):(as=P,dc="value"in as?as.value:as.textContent,vn=!0)),ye=hi(B,Me),0<ye.length&&(Me=new bu(Me,e,null,s,P),ae.push({event:Me,listeners:ye}),Ee?Me.data=Ee:(Ee=wu(s),Ee!==null&&(Me.data=Ee)))),(Ee=lp?rp(e,s):ip(e,s))&&(Me=hi(B,"onBeforeInput"),0<Me.length&&(ye=new bu("onBeforeInput","beforeinput",null,s,P),ae.push({event:ye,listeners:Me}),ye.data=Ee)),Pp(ae,e,B,s,P)}o0(ae,a)})}function Vl(e,a,s){return{instance:e,listener:a,currentTarget:s}}function hi(e,a){for(var s=a+"Capture",n=[];e!==null;){var r=e,c=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||c===null||(r=ul(e,s),r!=null&&n.unshift(Vl(e,r,c)),r=ul(e,a),r!=null&&n.push(Vl(e,r,c))),e.tag===3)return n;e=e.return}return[]}function ag(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function u0(e,a,s,n,r){for(var c=a._reactName,m=[];s!==null&&s!==n;){var N=s,T=N.alternate,B=N.stateNode;if(N=N.tag,T!==null&&T===n)break;N!==5&&N!==26&&N!==27||B===null||(T=B,r?(B=ul(s,c),B!=null&&m.unshift(Vl(s,B,T))):r||(B=ul(s,c),B!=null&&m.push(Vl(s,B,T)))),s=s.return}m.length!==0&&e.push({event:a,listeners:m})}var sg=/\r\n?/g,ng=/\u0000|\uFFFD/g;function m0(e){return(typeof e=="string"?e:""+e).replace(sg,`
`).replace(ng,"")}function x0(e,a){return a=m0(a),m0(e)===a}function Je(e,a,s,n,r,c){switch(s){case"children":typeof n=="string"?a==="body"||a==="textarea"&&n===""||gn(e,n):(typeof n=="number"||typeof n=="bigint")&&a!=="body"&&gn(e,""+n);break;case"className":br(e,"class",n);break;case"tabIndex":br(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":br(e,s,n);break;case"style":xu(e,n,c);break;case"data":if(a!=="object"){br(e,"data",n);break}case"src":case"href":if(n===""&&(a!=="a"||s!=="href")){e.removeAttribute(s);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(s);break}n=jr(""+n),e.setAttribute(s,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof c=="function"&&(s==="formAction"?(a!=="input"&&Je(e,a,"name",r.name,r,null),Je(e,a,"formEncType",r.formEncType,r,null),Je(e,a,"formMethod",r.formMethod,r,null),Je(e,a,"formTarget",r.formTarget,r,null)):(Je(e,a,"encType",r.encType,r,null),Je(e,a,"method",r.method,r,null),Je(e,a,"target",r.target,r,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(s);break}n=jr(""+n),e.setAttribute(s,n);break;case"onClick":n!=null&&(e.onclick=Aa);break;case"onScroll":n!=null&&Re("scroll",e);break;case"onScrollEnd":n!=null&&Re("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(d(61));if(s=n.__html,s!=null){if(r.children!=null)throw Error(d(60));e.innerHTML=s}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}s=jr(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(s,""+n):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":n===!0?e.setAttribute(s,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(s,n):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(s,n):e.removeAttribute(s);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(s):e.setAttribute(s,n);break;case"popover":Re("beforetoggle",e),Re("toggle",e),yr(e,"popover",n);break;case"xlinkActuate":Ra(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":Ra(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":Ra(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":Ra(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":Ra(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":Ra(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":Ra(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":Ra(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":Ra(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":yr(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Rh.get(s)||s,yr(e,s,n))}}function Zo(e,a,s,n,r,c){switch(s){case"style":xu(e,n,c);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(d(61));if(s=n.__html,s!=null){if(r.children!=null)throw Error(d(60));e.innerHTML=s}}break;case"children":typeof n=="string"?gn(e,n):(typeof n=="number"||typeof n=="bigint")&&gn(e,""+n);break;case"onScroll":n!=null&&Re("scroll",e);break;case"onScrollEnd":n!=null&&Re("scrollend",e);break;case"onClick":n!=null&&(e.onclick=Aa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!nu.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(r=s.endsWith("Capture"),a=s.slice(2,r?s.length-7:void 0),c=e[Mt]||null,c=c!=null?c[s]:null,typeof c=="function"&&e.removeEventListener(a,c,r),typeof n=="function")){typeof c!="function"&&c!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(a,n,r);break e}s in e?e[s]=n:n===!0?e.setAttribute(s,""):yr(e,s,n)}}}function Tt(e,a,s){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",e),Re("load",e);var n=!1,r=!1,c;for(c in s)if(s.hasOwnProperty(c)){var m=s[c];if(m!=null)switch(c){case"src":n=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(d(137,a));default:Je(e,a,c,m,s,null)}}r&&Je(e,a,"srcSet",s.srcSet,s,null),n&&Je(e,a,"src",s.src,s,null);return;case"input":Re("invalid",e);var N=c=m=r=null,T=null,B=null;for(n in s)if(s.hasOwnProperty(n)){var P=s[n];if(P!=null)switch(n){case"name":r=P;break;case"type":m=P;break;case"checked":T=P;break;case"defaultChecked":B=P;break;case"value":c=P;break;case"defaultValue":N=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(d(137,a));break;default:Je(e,a,n,P,s,null)}}ou(e,c,N,T,B,m,r,!1);return;case"select":Re("invalid",e),n=m=c=null;for(r in s)if(s.hasOwnProperty(r)&&(N=s[r],N!=null))switch(r){case"value":c=N;break;case"defaultValue":m=N;break;case"multiple":n=N;default:Je(e,a,r,N,s,null)}a=c,s=m,e.multiple=!!n,a!=null?pn(e,!!n,a,!1):s!=null&&pn(e,!!n,s,!0);return;case"textarea":Re("invalid",e),c=r=n=null;for(m in s)if(s.hasOwnProperty(m)&&(N=s[m],N!=null))switch(m){case"value":n=N;break;case"defaultValue":r=N;break;case"children":c=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(d(91));break;default:Je(e,a,m,N,s,null)}uu(e,n,r,c);return;case"option":for(T in s)s.hasOwnProperty(T)&&(n=s[T],n!=null)&&(T==="selected"?e.selected=n&&typeof n!="function"&&typeof n!="symbol":Je(e,a,T,n,s,null));return;case"dialog":Re("beforetoggle",e),Re("toggle",e),Re("cancel",e),Re("close",e);break;case"iframe":case"object":Re("load",e);break;case"video":case"audio":for(n=0;n<Yl.length;n++)Re(Yl[n],e);break;case"image":Re("error",e),Re("load",e);break;case"details":Re("toggle",e);break;case"embed":case"source":case"link":Re("error",e),Re("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in s)if(s.hasOwnProperty(B)&&(n=s[B],n!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(d(137,a));default:Je(e,a,B,n,s,null)}return;default:if(lc(a)){for(P in s)s.hasOwnProperty(P)&&(n=s[P],n!==void 0&&Zo(e,a,P,n,s,void 0));return}}for(N in s)s.hasOwnProperty(N)&&(n=s[N],n!=null&&Je(e,a,N,n,s,null))}function lg(e,a,s,n){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,c=null,m=null,N=null,T=null,B=null,P=null;for(V in s){var ae=s[V];if(s.hasOwnProperty(V)&&ae!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":T=ae;default:n.hasOwnProperty(V)||Je(e,a,V,null,n,ae)}}for(var H in n){var V=n[H];if(ae=s[H],n.hasOwnProperty(H)&&(V!=null||ae!=null))switch(H){case"type":c=V;break;case"name":r=V;break;case"checked":B=V;break;case"defaultChecked":P=V;break;case"value":m=V;break;case"defaultValue":N=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(d(137,a));break;default:V!==ae&&Je(e,a,H,V,n,ae)}}sc(e,m,N,T,B,P,c,r);return;case"select":V=m=N=H=null;for(c in s)if(T=s[c],s.hasOwnProperty(c)&&T!=null)switch(c){case"value":break;case"multiple":V=T;default:n.hasOwnProperty(c)||Je(e,a,c,null,n,T)}for(r in n)if(c=n[r],T=s[r],n.hasOwnProperty(r)&&(c!=null||T!=null))switch(r){case"value":H=c;break;case"defaultValue":N=c;break;case"multiple":m=c;default:c!==T&&Je(e,a,r,c,n,T)}a=N,s=m,n=V,H!=null?pn(e,!!s,H,!1):!!n!=!!s&&(a!=null?pn(e,!!s,a,!0):pn(e,!!s,s?[]:"",!1));return;case"textarea":V=H=null;for(N in s)if(r=s[N],s.hasOwnProperty(N)&&r!=null&&!n.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:Je(e,a,N,null,n,r)}for(m in n)if(r=n[m],c=s[m],n.hasOwnProperty(m)&&(r!=null||c!=null))switch(m){case"value":H=r;break;case"defaultValue":V=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(d(91));break;default:r!==c&&Je(e,a,m,r,n,c)}du(e,H,V);return;case"option":for(var pe in s)H=s[pe],s.hasOwnProperty(pe)&&H!=null&&!n.hasOwnProperty(pe)&&(pe==="selected"?e.selected=!1:Je(e,a,pe,null,n,H));for(T in n)H=n[T],V=s[T],n.hasOwnProperty(T)&&H!==V&&(H!=null||V!=null)&&(T==="selected"?e.selected=H&&typeof H!="function"&&typeof H!="symbol":Je(e,a,T,H,n,V));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in s)H=s[Se],s.hasOwnProperty(Se)&&H!=null&&!n.hasOwnProperty(Se)&&Je(e,a,Se,null,n,H);for(B in n)if(H=n[B],V=s[B],n.hasOwnProperty(B)&&H!==V&&(H!=null||V!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(d(137,a));break;default:Je(e,a,B,H,n,V)}return;default:if(lc(a)){for(var Fe in s)H=s[Fe],s.hasOwnProperty(Fe)&&H!==void 0&&!n.hasOwnProperty(Fe)&&Zo(e,a,Fe,void 0,n,H);for(P in n)H=n[P],V=s[P],!n.hasOwnProperty(P)||H===V||H===void 0&&V===void 0||Zo(e,a,P,H,n,V);return}}for(var D in s)H=s[D],s.hasOwnProperty(D)&&H!=null&&!n.hasOwnProperty(D)&&Je(e,a,D,null,n,H);for(ae in n)H=n[ae],V=s[ae],!n.hasOwnProperty(ae)||H===V||H==null&&V==null||Je(e,a,ae,H,n,V)}function f0(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function rg(){if(typeof performance.getEntriesByType=="function"){for(var e=0,a=0,s=performance.getEntriesByType("resource"),n=0;n<s.length;n++){var r=s[n],c=r.transferSize,m=r.initiatorType,N=r.duration;if(c&&N&&f0(m)){for(m=0,N=r.responseEnd,n+=1;n<s.length;n++){var T=s[n],B=T.startTime;if(B>N)break;var P=T.transferSize,ae=T.initiatorType;P&&f0(ae)&&(T=T.responseEnd,m+=P*(T<N?1:(N-B)/(T-B)))}if(--n,a+=8*(c+m)/(r.duration/1e3),e++,10<e)break}}if(0<e)return a/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Xo=null,Ko=null;function pi(e){return e.nodeType===9?e:e.ownerDocument}function h0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function p0(e,a){if(e===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&a==="foreignObject"?0:e}function Jo(e,a){return e==="textarea"||e==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Fo=null;function ig(){var e=window.event;return e&&e.type==="popstate"?e===Fo?!1:(Fo=e,!0):(Fo=null,!1)}var g0=typeof setTimeout=="function"?setTimeout:void 0,cg=typeof clearTimeout=="function"?clearTimeout:void 0,y0=typeof Promise=="function"?Promise:void 0,og=typeof queueMicrotask=="function"?queueMicrotask:typeof y0<"u"?function(e){return y0.resolve(null).then(e).catch(dg)}:g0;function dg(e){setTimeout(function(){throw e})}function bs(e){return e==="head"}function b0(e,a){var s=a,n=0;do{var r=s.nextSibling;if(e.removeChild(s),r&&r.nodeType===8)if(s=r.data,s==="/$"||s==="/&"){if(n===0){e.removeChild(r),Kn(a);return}n--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")n++;else if(s==="html")Ql(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,Ql(s);for(var c=s.firstChild;c;){var m=c.nextSibling,N=c.nodeName;c[ol]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&c.rel.toLowerCase()==="stylesheet"||s.removeChild(c),c=m}}else s==="body"&&Ql(e.ownerDocument.body);s=r}while(s);Kn(a)}function v0(e,a){var s=e;e=0;do{var n=s.nextSibling;if(s.nodeType===1?a?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(a?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),n&&n.nodeType===8)if(s=n.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=n}while(s)}function Io(e){var a=e.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var s=a;switch(a=a.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Io(s),tc(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function ug(e,a,s,n){for(;e.nodeType===1;){var r=s;if(e.nodeName.toLowerCase()!==a.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[ol])switch(a){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(c=e.getAttribute("rel"),c==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(c!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(c=e.getAttribute("src"),(c!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&c&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(a==="input"&&e.type==="hidden"){var c=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===c)return e}else return e;if(e=ma(e.nextSibling),e===null)break}return null}function mg(e,a,s){if(a==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=ma(e.nextSibling),e===null))return null;return e}function j0(e,a){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=ma(e.nextSibling),e===null))return null;return e}function Po(e){return e.data==="$?"||e.data==="$~"}function Wo(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function xg(e,a){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=a;else if(e.data!=="$?"||s.readyState!=="loading")a();else{var n=function(){a(),s.removeEventListener("DOMContentLoaded",n)};s.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function ma(e){for(;e!=null;e=e.nextSibling){var a=e.nodeType;if(a===1||a===3)break;if(a===8){if(a=e.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return e}var ed=null;function N0(e){e=e.nextSibling;for(var a=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(a===0)return ma(e.nextSibling);a--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||a++}e=e.nextSibling}return null}function S0(e){e=e.previousSibling;for(var a=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(a===0)return e;a--}else s!=="/$"&&s!=="/&"||a++}e=e.previousSibling}return null}function _0(e,a,s){switch(a=pi(s),e){case"html":if(e=a.documentElement,!e)throw Error(d(452));return e;case"head":if(e=a.head,!e)throw Error(d(453));return e;case"body":if(e=a.body,!e)throw Error(d(454));return e;default:throw Error(d(451))}}function Ql(e){for(var a=e.attributes;a.length;)e.removeAttributeNode(a[0]);tc(e)}var xa=new Map,w0=new Set;function gi(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ja=W.d;W.d={f:fg,r:hg,D:pg,C:gg,L:yg,m:bg,X:jg,S:vg,M:Ng};function fg(){var e=Ja.f(),a=ci();return e||a}function hg(e){var a=xn(e);a!==null&&a.tag===5&&a.type==="form"?$m(a):Ja.r(e)}var Qn=typeof document>"u"?null:document;function k0(e,a,s){var n=Qn;if(n&&typeof a=="string"&&a){var r=la(a);r='link[rel="'+e+'"][href="'+r+'"]',typeof s=="string"&&(r+='[crossorigin="'+s+'"]'),w0.has(r)||(w0.add(r),e={rel:e,crossOrigin:s,href:a},n.querySelector(r)===null&&(a=n.createElement("link"),Tt(a,"link",e),Nt(a),n.head.appendChild(a)))}}function pg(e){Ja.D(e),k0("dns-prefetch",e,null)}function gg(e,a){Ja.C(e,a),k0("preconnect",e,a)}function yg(e,a,s){Ja.L(e,a,s);var n=Qn;if(n&&e&&a){var r='link[rel="preload"][as="'+la(a)+'"]';a==="image"&&s&&s.imageSrcSet?(r+='[imagesrcset="'+la(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(r+='[imagesizes="'+la(s.imageSizes)+'"]')):r+='[href="'+la(e)+'"]';var c=r;switch(a){case"style":c=Zn(e);break;case"script":c=Xn(e)}xa.has(c)||(e=b({rel:"preload",href:a==="image"&&s&&s.imageSrcSet?void 0:e,as:a},s),xa.set(c,e),n.querySelector(r)!==null||a==="style"&&n.querySelector(Zl(c))||a==="script"&&n.querySelector(Xl(c))||(a=n.createElement("link"),Tt(a,"link",e),Nt(a),n.head.appendChild(a)))}}function bg(e,a){Ja.m(e,a);var s=Qn;if(s&&e){var n=a&&typeof a.as=="string"?a.as:"script",r='link[rel="modulepreload"][as="'+la(n)+'"][href="'+la(e)+'"]',c=r;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":c=Xn(e)}if(!xa.has(c)&&(e=b({rel:"modulepreload",href:e},a),xa.set(c,e),s.querySelector(r)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Xl(c)))return}n=s.createElement("link"),Tt(n,"link",e),Nt(n),s.head.appendChild(n)}}}function vg(e,a,s){Ja.S(e,a,s);var n=Qn;if(n&&e){var r=fn(n).hoistableStyles,c=Zn(e);a=a||"default";var m=r.get(c);if(!m){var N={loading:0,preload:null};if(m=n.querySelector(Zl(c)))N.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":a},s),(s=xa.get(c))&&td(e,s);var T=m=n.createElement("link");Nt(T),Tt(T,"link",e),T._p=new Promise(function(B,P){T.onload=B,T.onerror=P}),T.addEventListener("load",function(){N.loading|=1}),T.addEventListener("error",function(){N.loading|=2}),N.loading|=4,yi(m,a,n)}m={type:"stylesheet",instance:m,count:1,state:N},r.set(c,m)}}}function jg(e,a){Ja.X(e,a);var s=Qn;if(s&&e){var n=fn(s).hoistableScripts,r=Xn(e),c=n.get(r);c||(c=s.querySelector(Xl(r)),c||(e=b({src:e,async:!0},a),(a=xa.get(r))&&ad(e,a),c=s.createElement("script"),Nt(c),Tt(c,"link",e),s.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},n.set(r,c))}}function Ng(e,a){Ja.M(e,a);var s=Qn;if(s&&e){var n=fn(s).hoistableScripts,r=Xn(e),c=n.get(r);c||(c=s.querySelector(Xl(r)),c||(e=b({src:e,async:!0,type:"module"},a),(a=xa.get(r))&&ad(e,a),c=s.createElement("script"),Nt(c),Tt(c,"link",e),s.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},n.set(r,c))}}function C0(e,a,s,n){var r=(r=ue.current)?gi(r):null;if(!r)throw Error(d(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(a=Zn(s.href),s=fn(r).hoistableStyles,n=s.get(a),n||(n={type:"style",instance:null,count:0,state:null},s.set(a,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=Zn(s.href);var c=fn(r).hoistableStyles,m=c.get(e);if(m||(r=r.ownerDocument||r,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,m),(c=r.querySelector(Zl(e)))&&!c._p&&(m.instance=c,m.state.loading=5),xa.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},xa.set(e,s),c||Sg(r,e,s,m.state))),a&&n===null)throw Error(d(528,""));return m}if(a&&n!==null)throw Error(d(529,""));return null;case"script":return a=s.async,s=s.src,typeof s=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Xn(s),s=fn(r).hoistableScripts,n=s.get(a),n||(n={type:"script",instance:null,count:0,state:null},s.set(a,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(d(444,e))}}function Zn(e){return'href="'+la(e)+'"'}function Zl(e){return'link[rel="stylesheet"]['+e+"]"}function z0(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function Sg(e,a,s,n){e.querySelector('link[rel="preload"][as="style"]['+a+"]")?n.loading=1:(a=e.createElement("link"),n.preload=a,a.addEventListener("load",function(){return n.loading|=1}),a.addEventListener("error",function(){return n.loading|=2}),Tt(a,"link",s),Nt(a),e.head.appendChild(a))}function Xn(e){return'[src="'+la(e)+'"]'}function Xl(e){return"script[async]"+e}function E0(e,a,s){if(a.count++,a.instance===null)switch(a.type){case"style":var n=e.querySelector('style[data-href~="'+la(s.href)+'"]');if(n)return a.instance=n,Nt(n),n;var r=b({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),Nt(n),Tt(n,"style",r),yi(n,s.precedence,e),a.instance=n;case"stylesheet":r=Zn(s.href);var c=e.querySelector(Zl(r));if(c)return a.state.loading|=4,a.instance=c,Nt(c),c;n=z0(s),(r=xa.get(r))&&td(n,r),c=(e.ownerDocument||e).createElement("link"),Nt(c);var m=c;return m._p=new Promise(function(N,T){m.onload=N,m.onerror=T}),Tt(c,"link",n),a.state.loading|=4,yi(c,s.precedence,e),a.instance=c;case"script":return c=Xn(s.src),(r=e.querySelector(Xl(c)))?(a.instance=r,Nt(r),r):(n=s,(r=xa.get(c))&&(n=b({},s),ad(n,r)),e=e.ownerDocument||e,r=e.createElement("script"),Nt(r),Tt(r,"link",n),e.head.appendChild(r),a.instance=r);case"void":return null;default:throw Error(d(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(n=a.instance,a.state.loading|=4,yi(n,s.precedence,e));return a.instance}function yi(e,a,s){for(var n=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=n.length?n[n.length-1]:null,c=r,m=0;m<n.length;m++){var N=n[m];if(N.dataset.precedence===a)c=N;else if(c!==r)break}c?c.parentNode.insertBefore(e,c.nextSibling):(a=s.nodeType===9?s.head:s,a.insertBefore(e,a.firstChild))}function td(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.title==null&&(e.title=a.title)}function ad(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.integrity==null&&(e.integrity=a.integrity)}var bi=null;function T0(e,a,s){if(bi===null){var n=new Map,r=bi=new Map;r.set(s,n)}else r=bi,n=r.get(s),n||(n=new Map,r.set(s,n));if(n.has(e))return n;for(n.set(e,null),s=s.getElementsByTagName(e),r=0;r<s.length;r++){var c=s[r];if(!(c[ol]||c[kt]||e==="link"&&c.getAttribute("rel")==="stylesheet")&&c.namespaceURI!=="http://www.w3.org/2000/svg"){var m=c.getAttribute(a)||"";m=e+m;var N=n.get(m);N?N.push(c):n.set(m,[c])}}return n}function O0(e,a,s){e=e.ownerDocument||e,e.head.insertBefore(s,a==="title"?e.querySelector("head > title"):null)}function _g(e,a,s){if(s===1||a.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(e=a.disabled,typeof a.precedence=="string"&&e==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function R0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function wg(e,a,s,n){if(s.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var r=Zn(n.href),c=a.querySelector(Zl(r));if(c){a=c._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(e.count++,e=vi.bind(e),a.then(e,e)),s.state.loading|=4,s.instance=c,Nt(c);return}c=a.ownerDocument||a,n=z0(n),(r=xa.get(r))&&td(n,r),c=c.createElement("link"),Nt(c);var m=c;m._p=new Promise(function(N,T){m.onload=N,m.onerror=T}),Tt(c,"link",n),s.instance=c}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,a),(a=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=vi.bind(e),a.addEventListener("load",s),a.addEventListener("error",s))}}var sd=0;function kg(e,a){return e.stylesheets&&e.count===0&&Ni(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var n=setTimeout(function(){if(e.stylesheets&&Ni(e,e.stylesheets),e.unsuspend){var c=e.unsuspend;e.unsuspend=null,c()}},6e4+a);0<e.imgBytes&&sd===0&&(sd=62500*rg());var r=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Ni(e,e.stylesheets),e.unsuspend)){var c=e.unsuspend;e.unsuspend=null,c()}},(e.imgBytes>sd?50:800)+a);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(r)}}:null}function vi(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ni(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ji=null;function Ni(e,a){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ji=new Map,a.forEach(Cg,e),ji=null,vi.call(e))}function Cg(e,a){if(!(a.state.loading&4)){var s=ji.get(e);if(s)var n=s.get(null);else{s=new Map,ji.set(e,s);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),c=0;c<r.length;c++){var m=r[c];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(s.set(m.dataset.precedence,m),n=m)}n&&s.set(null,n)}r=a.instance,m=r.getAttribute("data-precedence"),c=s.get(m)||n,c===n&&s.set(null,r),s.set(m,r),this.count++,n=vi.bind(this),r.addEventListener("load",n),r.addEventListener("error",n),c?c.parentNode.insertBefore(r,c.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),a.state.loading|=4}}var Kl={$$typeof:M,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function zg(e,a,s,n,r,c,m,N,T){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ii(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ii(0),this.hiddenUpdates=Ii(null),this.identifierPrefix=n,this.onUncaughtError=r,this.onCaughtError=c,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function A0(e,a,s,n,r,c,m,N,T,B,P,ae){return e=new zg(e,a,s,m,T,B,P,ae,N),a=1,c===!0&&(a|=24),c=Ft(3,null,null,a),e.current=c,c.stateNode=e,a=Mc(),a.refCount++,e.pooledCache=a,a.refCount++,c.memoizedState={element:n,isDehydrated:s,cache:a},Bc(c),e}function D0(e){return e?(e=_n,e):_n}function M0(e,a,s,n,r,c){r=D0(r),n.context===null?n.context=r:n.pendingContext=r,n=cs(a),n.payload={element:s},c=c===void 0?null:c,c!==null&&(n.callback=c),s=os(e,n,a),s!==null&&(Gt(s,e,a),kl(s,e,a))}function L0(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<a?s:a}}function nd(e,a){L0(e,a),(e=e.alternate)&&L0(e,a)}function q0(e){if(e.tag===13||e.tag===31){var a=Hs(e,67108864);a!==null&&Gt(a,e,67108864),nd(e,67108864)}}function U0(e){if(e.tag===13||e.tag===31){var a=ta();a=Pi(a);var s=Hs(e,a);s!==null&&Gt(s,e,a),nd(e,a)}}var Si=!0;function Eg(e,a,s,n){var r=q.T;q.T=null;var c=W.p;try{W.p=2,ld(e,a,s,n)}finally{W.p=c,q.T=r}}function Tg(e,a,s,n){var r=q.T;q.T=null;var c=W.p;try{W.p=8,ld(e,a,s,n)}finally{W.p=c,q.T=r}}function ld(e,a,s,n){if(Si){var r=rd(n);if(r===null)Qo(e,a,n,_i,s),H0(e,n);else if(Rg(r,e,a,s,n))n.stopPropagation();else if(H0(e,n),a&4&&-1<Og.indexOf(e)){for(;r!==null;){var c=xn(r);if(c!==null)switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var m=Ms(c.pendingLanes);if(m!==0){var N=c;for(N.pendingLanes|=2,N.entangledLanes|=2;m;){var T=1<<31-Kt(m);N.entanglements[1]|=T,m&=~T}Ca(c),($e&6)===0&&(ri=Ne()+500,$l(0))}}break;case 31:case 13:N=Hs(c,2),N!==null&&Gt(N,c,2),ci(),nd(c,2)}if(c=rd(n),c===null&&Qo(e,a,n,_i,s),c===r)break;r=c}r!==null&&n.stopPropagation()}else Qo(e,a,n,null,s)}}function rd(e){return e=ic(e),id(e)}var _i=null;function id(e){if(_i=null,e=mn(e),e!==null){var a=f(e);if(a===null)e=null;else{var s=a.tag;if(s===13){if(e=h(a),e!==null)return e;e=null}else if(s===31){if(e=v(a),e!==null)return e;e=null}else if(s===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;e=null}else a!==e&&(e=null)}}return _i=e,null}function B0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(st()){case Y:return 2;case ve:return 8;case Ge:case ft:return 32;case dn:return 268435456;default:return 32}default:return 32}}var cd=!1,vs=null,js=null,Ns=null,Jl=new Map,Fl=new Map,Ss=[],Og="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function H0(e,a){switch(e){case"focusin":case"focusout":vs=null;break;case"dragenter":case"dragleave":js=null;break;case"mouseover":case"mouseout":Ns=null;break;case"pointerover":case"pointerout":Jl.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fl.delete(a.pointerId)}}function Il(e,a,s,n,r,c){return e===null||e.nativeEvent!==c?(e={blockedOn:a,domEventName:s,eventSystemFlags:n,nativeEvent:c,targetContainers:[r]},a!==null&&(a=xn(a),a!==null&&q0(a)),e):(e.eventSystemFlags|=n,a=e.targetContainers,r!==null&&a.indexOf(r)===-1&&a.push(r),e)}function Rg(e,a,s,n,r){switch(a){case"focusin":return vs=Il(vs,e,a,s,n,r),!0;case"dragenter":return js=Il(js,e,a,s,n,r),!0;case"mouseover":return Ns=Il(Ns,e,a,s,n,r),!0;case"pointerover":var c=r.pointerId;return Jl.set(c,Il(Jl.get(c)||null,e,a,s,n,r)),!0;case"gotpointercapture":return c=r.pointerId,Fl.set(c,Il(Fl.get(c)||null,e,a,s,n,r)),!0}return!1}function G0(e){var a=mn(e.target);if(a!==null){var s=f(a);if(s!==null){if(a=s.tag,a===13){if(a=h(s),a!==null){e.blockedOn=a,tu(e.priority,function(){U0(s)});return}}else if(a===31){if(a=v(s),a!==null){e.blockedOn=a,tu(e.priority,function(){U0(s)});return}}else if(a===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wi(e){if(e.blockedOn!==null)return!1;for(var a=e.targetContainers;0<a.length;){var s=rd(e.nativeEvent);if(s===null){s=e.nativeEvent;var n=new s.constructor(s.type,s);rc=n,s.target.dispatchEvent(n),rc=null}else return a=xn(s),a!==null&&q0(a),e.blockedOn=s,!1;a.shift()}return!0}function $0(e,a,s){wi(e)&&s.delete(a)}function Ag(){cd=!1,vs!==null&&wi(vs)&&(vs=null),js!==null&&wi(js)&&(js=null),Ns!==null&&wi(Ns)&&(Ns=null),Jl.forEach($0),Fl.forEach($0)}function ki(e,a){e.blockedOn===a&&(e.blockedOn=null,cd||(cd=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Ag)))}var Ci=null;function Y0(e){Ci!==e&&(Ci=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){Ci===e&&(Ci=null);for(var a=0;a<e.length;a+=3){var s=e[a],n=e[a+1],r=e[a+2];if(typeof n!="function"){if(id(n||s)===null)continue;break}var c=xn(s);c!==null&&(e.splice(a,3),a-=3,lo(c,{pending:!0,data:r,method:s.method,action:n},n,r))}}))}function Kn(e){function a(T){return ki(T,e)}vs!==null&&ki(vs,e),js!==null&&ki(js,e),Ns!==null&&ki(Ns,e),Jl.forEach(a),Fl.forEach(a);for(var s=0;s<Ss.length;s++){var n=Ss[s];n.blockedOn===e&&(n.blockedOn=null)}for(;0<Ss.length&&(s=Ss[0],s.blockedOn===null);)G0(s),s.blockedOn===null&&Ss.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(n=0;n<s.length;n+=3){var r=s[n],c=s[n+1],m=r[Mt]||null;if(typeof c=="function")m||Y0(s);else if(m){var N=null;if(c&&c.hasAttribute("formAction")){if(r=c,m=c[Mt]||null)N=m.formAction;else if(id(r)!==null)continue}else N=m.action;typeof N=="function"?s[n+1]=N:(s.splice(n,3),n-=3),Y0(s)}}}function V0(){function e(c){c.canIntercept&&c.info==="react-transition"&&c.intercept({handler:function(){return new Promise(function(m){return r=m})},focusReset:"manual",scroll:"manual"})}function a(){r!==null&&(r(),r=null),n||setTimeout(s,20)}function s(){if(!n&&!navigation.transition){var c=navigation.currentEntry;c&&c.url!=null&&navigation.navigate(c.url,{state:c.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,r=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(s,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),r!==null&&(r(),r=null)}}}function od(e){this._internalRoot=e}zi.prototype.render=od.prototype.render=function(e){var a=this._internalRoot;if(a===null)throw Error(d(409));var s=a.current,n=ta();M0(s,n,e,a,null,null)},zi.prototype.unmount=od.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var a=e.containerInfo;M0(e.current,2,null,e,null,null),ci(),a[un]=null}};function zi(e){this._internalRoot=e}zi.prototype.unstable_scheduleHydration=function(e){if(e){var a=eu();e={blockedOn:null,target:e,priority:a};for(var s=0;s<Ss.length&&a!==0&&a<Ss[s].priority;s++);Ss.splice(s,0,e),s===0&&G0(e)}};var Q0=i.version;if(Q0!=="19.2.4")throw Error(d(527,Q0,"19.2.4"));W.findDOMNode=function(e){var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(d(188)):(e=Object.keys(e).join(","),Error(d(268,e)));return e=g(a),e=e!==null?j(e):null,e=e===null?null:e.stateNode,e};var Dg={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ei=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ei.isDisabled&&Ei.supportsFiber)try{rl=Ei.inject(Dg),Xt=Ei}catch{}}return Wl.createRoot=function(e,a){if(!x(e))throw Error(d(299));var s=!1,n="",r=Pm,c=Wm,m=ex;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(n=a.identifierPrefix),a.onUncaughtError!==void 0&&(r=a.onUncaughtError),a.onCaughtError!==void 0&&(c=a.onCaughtError),a.onRecoverableError!==void 0&&(m=a.onRecoverableError)),a=A0(e,1,!1,null,null,s,n,null,r,c,m,V0),e[un]=a.current,Vo(e),new od(a)},Wl.hydrateRoot=function(e,a,s){if(!x(e))throw Error(d(299));var n=!1,r="",c=Pm,m=Wm,N=ex,T=null;return s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(r=s.identifierPrefix),s.onUncaughtError!==void 0&&(c=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(N=s.onRecoverableError),s.formState!==void 0&&(T=s.formState)),a=A0(e,1,!0,a,s??null,n,r,T,c,m,N,V0),a.context=D0(null),s=a.current,n=ta(),n=Pi(n),r=cs(n),r.callback=null,os(s,r,n),s=n,a.current.lanes=s,cl(a,s),Ca(a),e[un]=a.current,Vo(e),new zi(a)},Wl.version="19.2.4",Wl}var tf;function Yg(){if(tf)return md.exports;tf=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(i){console.error(i)}}return l(),md.exports=$g(),md.exports}var Vg=Yg();var af="popstate";function Qg(l={}){function i(x,f){let{pathname:h="/",search:v="",hash:p=""}=rn(x.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),_d("",{pathname:h,search:v,hash:p},f.state&&f.state.usr||null,f.state&&f.state.key||"default")}function o(x,f){let h=x.document.querySelector("base"),v="";if(h&&h.getAttribute("href")){let p=x.location.href,g=p.indexOf("#");v=g===-1?p:p.slice(0,g)}return v+"#"+(typeof f=="string"?f:rr(f))}function d(x,f){ha(x.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(f)})`)}return Xg(i,o,d,l)}function lt(l,i){if(l===!1||l===null||typeof l>"u")throw new Error(i)}function ha(l,i){if(!l){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function Zg(){return Math.random().toString(36).substring(2,10)}function sf(l,i){return{usr:l.state,key:l.key,idx:i}}function _d(l,i,o=null,d){return{pathname:typeof l=="string"?l:l.pathname,search:"",hash:"",...typeof i=="string"?rn(i):i,state:o,key:i&&i.key||d||Zg()}}function rr({pathname:l="/",search:i="",hash:o=""}){return i&&i!=="?"&&(l+=i.charAt(0)==="?"?i:"?"+i),o&&o!=="#"&&(l+=o.charAt(0)==="#"?o:"#"+o),l}function rn(l){let i={};if(l){let o=l.indexOf("#");o>=0&&(i.hash=l.substring(o),l=l.substring(0,o));let d=l.indexOf("?");d>=0&&(i.search=l.substring(d),l=l.substring(0,d)),l&&(i.pathname=l)}return i}function Xg(l,i,o,d={}){let{window:x=document.defaultView,v5Compat:f=!1}=d,h=x.history,v="POP",p=null,g=j();g==null&&(g=0,h.replaceState({...h.state,idx:g},""));function j(){return(h.state||{idx:null}).idx}function b(){v="POP";let C=j(),w=C==null?null:C-g;g=C,p&&p({action:v,location:O.location,delta:w})}function y(C,w){v="PUSH";let k=_d(O.location,C,w);o&&o(k,C),g=j()+1;let M=sf(k,g),$=O.createHref(k);try{h.pushState(M,"",$)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;x.location.assign($)}f&&p&&p({action:v,location:O.location,delta:1})}function z(C,w){v="REPLACE";let k=_d(O.location,C,w);o&&o(k,C),g=j();let M=sf(k,g),$=O.createHref(k);h.replaceState(M,"",$),f&&p&&p({action:v,location:O.location,delta:0})}function S(C){return Kg(C)}let O={get action(){return v},get location(){return l(x,h)},listen(C){if(p)throw new Error("A history only accepts one active listener");return x.addEventListener(af,b),p=C,()=>{x.removeEventListener(af,b),p=null}},createHref(C){return i(x,C)},createURL:S,encodeLocation(C){let w=S(C);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:y,replace:z,go(C){return h.go(C)}};return O}function Kg(l,i=!1){let o="http://localhost";typeof window<"u"&&(o=window.location.origin!=="null"?window.location.origin:window.location.href),lt(o,"No window.location.(origin|href) available to create URL");let d=typeof l=="string"?l:rr(l);return d=d.replace(/ $/,"%20"),!i&&d.startsWith("//")&&(d=o+d),new URL(d,o)}function Ef(l,i,o="/"){return Jg(l,i,o,!1)}function Jg(l,i,o,d){let x=typeof i=="string"?rn(i):i,f=Pa(x.pathname||"/",o);if(f==null)return null;let h=Tf(l);Fg(h);let v=null;for(let p=0;v==null&&p<h.length;++p){let g=iy(f);v=ly(h[p],g,d)}return v}function Tf(l,i=[],o=[],d="",x=!1){let f=(h,v,p=x,g)=>{let j={relativePath:g===void 0?h.path||"":g,caseSensitive:h.caseSensitive===!0,childrenIndex:v,route:h};if(j.relativePath.startsWith("/")){if(!j.relativePath.startsWith(d)&&p)return;lt(j.relativePath.startsWith(d),`Absolute route path "${j.relativePath}" nested under path "${d}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),j.relativePath=j.relativePath.slice(d.length)}let b=Fa([d,j.relativePath]),y=o.concat(j);h.children&&h.children.length>0&&(lt(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),Tf(h.children,i,y,b,p)),!(h.path==null&&!h.index)&&i.push({path:b,score:sy(b,h.index),routesMeta:y})};return l.forEach((h,v)=>{if(h.path===""||!h.path?.includes("?"))f(h,v);else for(let p of Of(h.path))f(h,v,!0,p)}),i}function Of(l){let i=l.split("/");if(i.length===0)return[];let[o,...d]=i,x=o.endsWith("?"),f=o.replace(/\?$/,"");if(d.length===0)return x?[f,""]:[f];let h=Of(d.join("/")),v=[];return v.push(...h.map(p=>p===""?f:[f,p].join("/"))),x&&v.push(...h),v.map(p=>l.startsWith("/")&&p===""?"/":p)}function Fg(l){l.sort((i,o)=>i.score!==o.score?o.score-i.score:ny(i.routesMeta.map(d=>d.childrenIndex),o.routesMeta.map(d=>d.childrenIndex)))}var Ig=/^:[\w-]+$/,Pg=3,Wg=2,ey=1,ty=10,ay=-2,nf=l=>l==="*";function sy(l,i){let o=l.split("/"),d=o.length;return o.some(nf)&&(d+=ay),i&&(d+=Wg),o.filter(x=>!nf(x)).reduce((x,f)=>x+(Ig.test(f)?Pg:f===""?ey:ty),d)}function ny(l,i){return l.length===i.length&&l.slice(0,-1).every((d,x)=>d===i[x])?l[l.length-1]-i[i.length-1]:0}function ly(l,i,o=!1){let{routesMeta:d}=l,x={},f="/",h=[];for(let v=0;v<d.length;++v){let p=d[v],g=v===d.length-1,j=f==="/"?i:i.slice(f.length)||"/",b=Bi({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},j),y=p.route;if(!b&&g&&o&&!d[d.length-1].route.index&&(b=Bi({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},j)),!b)return null;Object.assign(x,b.params),h.push({params:x,pathname:Fa([f,b.pathname]),pathnameBase:uy(Fa([f,b.pathnameBase])),route:y}),b.pathnameBase!=="/"&&(f=Fa([f,b.pathnameBase]))}return h}function Bi(l,i){typeof l=="string"&&(l={path:l,caseSensitive:!1,end:!0});let[o,d]=ry(l.path,l.caseSensitive,l.end),x=i.match(o);if(!x)return null;let f=x[0],h=f.replace(/(.)\/+$/,"$1"),v=x.slice(1);return{params:d.reduce((g,{paramName:j,isOptional:b},y)=>{if(j==="*"){let S=v[y]||"";h=f.slice(0,f.length-S.length).replace(/(.)\/+$/,"$1")}const z=v[y];return b&&!z?g[j]=void 0:g[j]=(z||"").replace(/%2F/g,"/"),g},{}),pathname:f,pathnameBase:h,pattern:l}}function ry(l,i=!1,o=!0){ha(l==="*"||!l.endsWith("*")||l.endsWith("/*"),`Route path "${l}" will be treated as if it were "${l.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${l.replace(/\*$/,"/*")}".`);let d=[],x="^"+l.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,v,p)=>(d.push({paramName:v,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return l.endsWith("*")?(d.push({paramName:"*"}),x+=l==="*"||l==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?x+="\\/*$":l!==""&&l!=="/"&&(x+="(?:(?=\\/|$))"),[new RegExp(x,i?void 0:"i"),d]}function iy(l){try{return l.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return ha(!1,`The URL path "${l}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${i}).`),l}}function Pa(l,i){if(i==="/")return l;if(!l.toLowerCase().startsWith(i.toLowerCase()))return null;let o=i.endsWith("/")?i.length-1:i.length,d=l.charAt(o);return d&&d!=="/"?null:l.slice(o)||"/"}var cy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function oy(l,i="/"){let{pathname:o,search:d="",hash:x=""}=typeof l=="string"?rn(l):l,f;return o?(o=o.replace(/\/\/+/g,"/"),o.startsWith("/")?f=lf(o.substring(1),"/"):f=lf(o,i)):f=i,{pathname:f,search:my(d),hash:xy(x)}}function lf(l,i){let o=i.replace(/\/+$/,"").split("/");return l.split("/").forEach(x=>{x===".."?o.length>1&&o.pop():x!=="."&&o.push(x)}),o.length>1?o.join("/"):"/"}function pd(l,i,o,d){return`Cannot include a '${l}' character in a manually specified \`to.${i}\` field [${JSON.stringify(d)}].  Please separate it out to the \`to.${o}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function dy(l){return l.filter((i,o)=>o===0||i.route.path&&i.route.path.length>0)}function Ud(l){let i=dy(l);return i.map((o,d)=>d===i.length-1?o.pathname:o.pathnameBase)}function Bd(l,i,o,d=!1){let x;typeof l=="string"?x=rn(l):(x={...l},lt(!x.pathname||!x.pathname.includes("?"),pd("?","pathname","search",x)),lt(!x.pathname||!x.pathname.includes("#"),pd("#","pathname","hash",x)),lt(!x.search||!x.search.includes("#"),pd("#","search","hash",x)));let f=l===""||x.pathname==="",h=f?"/":x.pathname,v;if(h==null)v=o;else{let b=i.length-1;if(!d&&h.startsWith("..")){let y=h.split("/");for(;y[0]==="..";)y.shift(),b-=1;x.pathname=y.join("/")}v=b>=0?i[b]:"/"}let p=oy(x,v),g=h&&h!=="/"&&h.endsWith("/"),j=(f||h===".")&&o.endsWith("/");return!p.pathname.endsWith("/")&&(g||j)&&(p.pathname+="/"),p}var Fa=l=>l.join("/").replace(/\/\/+/g,"/"),uy=l=>l.replace(/\/+$/,"").replace(/^\/*/,"/"),my=l=>!l||l==="?"?"":l.startsWith("?")?l:"?"+l,xy=l=>!l||l==="#"?"":l.startsWith("#")?l:"#"+l,fy=class{constructor(l,i,o,d=!1){this.status=l,this.statusText=i||"",this.internal=d,o instanceof Error?(this.data=o.toString(),this.error=o):this.data=o}};function hy(l){return l!=null&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.internal=="boolean"&&"data"in l}function py(l){return l.map(i=>i.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Rf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Af(l,i){let o=l;if(typeof o!="string"||!cy.test(o))return{absoluteURL:void 0,isExternal:!1,to:o};let d=o,x=!1;if(Rf)try{let f=new URL(window.location.href),h=o.startsWith("//")?new URL(f.protocol+o):new URL(o),v=Pa(h.pathname,i);h.origin===f.origin&&v!=null?o=v+h.search+h.hash:x=!0}catch{ha(!1,`<Link to="${o}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:d,isExternal:x,to:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Df=["POST","PUT","PATCH","DELETE"];new Set(Df);var gy=["GET",...Df];new Set(gy);var Wn=u.createContext(null);Wn.displayName="DataRouter";var Gi=u.createContext(null);Gi.displayName="DataRouterState";var yy=u.createContext(!1),Mf=u.createContext({isTransitioning:!1});Mf.displayName="ViewTransition";var by=u.createContext(new Map);by.displayName="Fetchers";var vy=u.createContext(null);vy.displayName="Await";var sa=u.createContext(null);sa.displayName="Navigation";var or=u.createContext(null);or.displayName="Location";var ga=u.createContext({outlet:null,matches:[],isDataRoute:!1});ga.displayName="Route";var Hd=u.createContext(null);Hd.displayName="RouteError";var Lf="REACT_ROUTER_ERROR",jy="REDIRECT",Ny="ROUTE_ERROR_RESPONSE";function Sy(l){if(l.startsWith(`${Lf}:${jy}:{`))try{let i=JSON.parse(l.slice(28));if(typeof i=="object"&&i&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.location=="string"&&typeof i.reloadDocument=="boolean"&&typeof i.replace=="boolean")return i}catch{}}function _y(l){if(l.startsWith(`${Lf}:${Ny}:{`))try{let i=JSON.parse(l.slice(40));if(typeof i=="object"&&i&&typeof i.status=="number"&&typeof i.statusText=="string")return new fy(i.status,i.statusText,i.data)}catch{}}function wy(l,{relative:i}={}){lt(el(),"useHref() may be used only in the context of a <Router> component.");let{basename:o,navigator:d}=u.useContext(sa),{hash:x,pathname:f,search:h}=dr(l,{relative:i}),v=f;return o!=="/"&&(v=f==="/"?o:Fa([o,f])),d.createHref({pathname:v,search:h,hash:x})}function el(){return u.useContext(or)!=null}function Qt(){return lt(el(),"useLocation() may be used only in the context of a <Router> component."),u.useContext(or).location}var qf="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Uf(l){u.useContext(sa).static||u.useLayoutEffect(l)}function Os(){let{isDataRoute:l}=u.useContext(ga);return l?Hy():ky()}function ky(){lt(el(),"useNavigate() may be used only in the context of a <Router> component.");let l=u.useContext(Wn),{basename:i,navigator:o}=u.useContext(sa),{matches:d}=u.useContext(ga),{pathname:x}=Qt(),f=JSON.stringify(Ud(d)),h=u.useRef(!1);return Uf(()=>{h.current=!0}),u.useCallback((p,g={})=>{if(ha(h.current,qf),!h.current)return;if(typeof p=="number"){o.go(p);return}let j=Bd(p,JSON.parse(f),x,g.relative==="path");l==null&&i!=="/"&&(j.pathname=j.pathname==="/"?i:Fa([i,j.pathname])),(g.replace?o.replace:o.push)(j,g.state,g)},[i,o,f,x,l])}var Cy=u.createContext(null);function zy(l){let i=u.useContext(ga).outlet;return u.useMemo(()=>i&&u.createElement(Cy.Provider,{value:l},i),[i,l])}function $i(){let{matches:l}=u.useContext(ga),i=l[l.length-1];return i?i.params:{}}function dr(l,{relative:i}={}){let{matches:o}=u.useContext(ga),{pathname:d}=Qt(),x=JSON.stringify(Ud(o));return u.useMemo(()=>Bd(l,JSON.parse(x),d,i==="path"),[l,x,d,i])}function Ey(l,i){return Bf(l,i)}function Bf(l,i,o,d,x){lt(el(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:f}=u.useContext(sa),{matches:h}=u.useContext(ga),v=h[h.length-1],p=v?v.params:{},g=v?v.pathname:"/",j=v?v.pathnameBase:"/",b=v&&v.route;{let k=b&&b.path||"";Gf(g,!b||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let y=Qt(),z;if(i){let k=typeof i=="string"?rn(i):i;lt(j==="/"||k.pathname?.startsWith(j),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${j}" but pathname "${k.pathname}" was given in the \`location\` prop.`),z=k}else z=y;let S=z.pathname||"/",O=S;if(j!=="/"){let k=j.replace(/^\//,"").split("/");O="/"+S.replace(/^\//,"").split("/").slice(k.length).join("/")}let C=Ef(l,{pathname:O});ha(b||C!=null,`No routes matched location "${z.pathname}${z.search}${z.hash}" `),ha(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${z.pathname}${z.search}${z.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=Dy(C&&C.map(k=>Object.assign({},k,{params:Object.assign({},p,k.params),pathname:Fa([j,f.encodeLocation?f.encodeLocation(k.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?j:Fa([j,f.encodeLocation?f.encodeLocation(k.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathnameBase])})),h,o,d,x);return i&&w?u.createElement(or.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...z},navigationType:"POP"}},w):w}function Ty(){let l=By(),i=hy(l)?`${l.status} ${l.statusText}`:l instanceof Error?l.message:JSON.stringify(l),o=l instanceof Error?l.stack:null,d="rgba(200,200,200, 0.5)",x={padding:"0.5rem",backgroundColor:d},f={padding:"2px 4px",backgroundColor:d},h=null;return console.error("Error handled by React Router default ErrorBoundary:",l),h=u.createElement(u.Fragment,null,u.createElement("p",null," Hey developer "),u.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",u.createElement("code",{style:f},"ErrorBoundary")," or"," ",u.createElement("code",{style:f},"errorElement")," prop on your route.")),u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},i),o?u.createElement("pre",{style:x},o):null,h)}var Oy=u.createElement(Ty,null),Hf=class extends u.Component{constructor(l){super(l),this.state={location:l.location,revalidation:l.revalidation,error:l.error}}static getDerivedStateFromError(l){return{error:l}}static getDerivedStateFromProps(l,i){return i.location!==l.location||i.revalidation!=="idle"&&l.revalidation==="idle"?{error:l.error,location:l.location,revalidation:l.revalidation}:{error:l.error!==void 0?l.error:i.error,location:i.location,revalidation:l.revalidation||i.revalidation}}componentDidCatch(l,i){this.props.onError?this.props.onError(l,i):console.error("React Router caught the following error during render",l)}render(){let l=this.state.error;if(this.context&&typeof l=="object"&&l&&"digest"in l&&typeof l.digest=="string"){const o=_y(l.digest);o&&(l=o)}let i=l!==void 0?u.createElement(ga.Provider,{value:this.props.routeContext},u.createElement(Hd.Provider,{value:l,children:this.props.component})):this.props.children;return this.context?u.createElement(Ry,{error:l},i):i}};Hf.contextType=yy;var gd=new WeakMap;function Ry({children:l,error:i}){let{basename:o}=u.useContext(sa);if(typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){let d=Sy(i.digest);if(d){let x=gd.get(i);if(x)throw x;let f=Af(d.location,o);if(Rf&&!gd.get(i))if(f.isExternal||d.reloadDocument)window.location.href=f.absoluteURL||f.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(f.to,{replace:d.replace}));throw gd.set(i,h),h}return u.createElement("meta",{httpEquiv:"refresh",content:`0;url=${f.absoluteURL||f.to}`})}}return l}function Ay({routeContext:l,match:i,children:o}){let d=u.useContext(Wn);return d&&d.static&&d.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(d.staticContext._deepestRenderedBoundaryId=i.route.id),u.createElement(ga.Provider,{value:l},o)}function Dy(l,i=[],o=null,d=null,x=null){if(l==null){if(!o)return null;if(o.errors)l=o.matches;else if(i.length===0&&!o.initialized&&o.matches.length>0)l=o.matches;else return null}let f=l,h=o?.errors;if(h!=null){let j=f.findIndex(b=>b.route.id&&h?.[b.route.id]!==void 0);lt(j>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),f=f.slice(0,Math.min(f.length,j+1))}let v=!1,p=-1;if(o)for(let j=0;j<f.length;j++){let b=f[j];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(p=j),b.route.id){let{loaderData:y,errors:z}=o,S=b.route.loader&&!y.hasOwnProperty(b.route.id)&&(!z||z[b.route.id]===void 0);if(b.route.lazy||S){v=!0,p>=0?f=f.slice(0,p+1):f=[f[0]];break}}}let g=o&&d?(j,b)=>{d(j,{location:o.location,params:o.matches?.[0]?.params??{},unstable_pattern:py(o.matches),errorInfo:b})}:void 0;return f.reduceRight((j,b,y)=>{let z,S=!1,O=null,C=null;o&&(z=h&&b.route.id?h[b.route.id]:void 0,O=b.route.errorElement||Oy,v&&(p<0&&y===0?(Gf("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,C=null):p===y&&(S=!0,C=b.route.hydrateFallbackElement||null)));let w=i.concat(f.slice(0,y+1)),k=()=>{let M;return z?M=O:S?M=C:b.route.Component?M=u.createElement(b.route.Component,null):b.route.element?M=b.route.element:M=j,u.createElement(Ay,{match:b,routeContext:{outlet:j,matches:w,isDataRoute:o!=null},children:M})};return o&&(b.route.ErrorBoundary||b.route.errorElement||y===0)?u.createElement(Hf,{location:o.location,revalidation:o.revalidation,component:O,error:z,children:k(),routeContext:{outlet:null,matches:w,isDataRoute:!0},onError:g}):k()},null)}function Gd(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function My(l){let i=u.useContext(Wn);return lt(i,Gd(l)),i}function Ly(l){let i=u.useContext(Gi);return lt(i,Gd(l)),i}function qy(l){let i=u.useContext(ga);return lt(i,Gd(l)),i}function $d(l){let i=qy(l),o=i.matches[i.matches.length-1];return lt(o.route.id,`${l} can only be used on routes that contain a unique "id"`),o.route.id}function Uy(){return $d("useRouteId")}function By(){let l=u.useContext(Hd),i=Ly("useRouteError"),o=$d("useRouteError");return l!==void 0?l:i.errors?.[o]}function Hy(){let{router:l}=My("useNavigate"),i=$d("useNavigate"),o=u.useRef(!1);return Uf(()=>{o.current=!0}),u.useCallback(async(x,f={})=>{ha(o.current,qf),o.current&&(typeof x=="number"?await l.navigate(x):await l.navigate(x,{fromRouteId:i,...f}))},[l,i])}var rf={};function Gf(l,i,o){!i&&!rf[l]&&(rf[l]=!0,ha(!1,o))}u.memo(Gy);function Gy({routes:l,future:i,state:o,onError:d}){return Bf(l,void 0,o,d,i)}function Yi({to:l,replace:i,state:o,relative:d}){lt(el(),"<Navigate> may be used only in the context of a <Router> component.");let{static:x}=u.useContext(sa);ha(!x,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:f}=u.useContext(ga),{pathname:h}=Qt(),v=Os(),p=Bd(l,Ud(f),h,d==="path"),g=JSON.stringify(p);return u.useEffect(()=>{v(JSON.parse(g),{replace:i,state:o,relative:d})},[v,g,d,i,o]),null}function $y(l){return zy(l.context)}function Xe(l){lt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Yy({basename:l="/",children:i=null,location:o,navigationType:d="POP",navigator:x,static:f=!1,unstable_useTransitions:h}){lt(!el(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let v=l.replace(/^\/*/,"/"),p=u.useMemo(()=>({basename:v,navigator:x,static:f,unstable_useTransitions:h,future:{}}),[v,x,f,h]);typeof o=="string"&&(o=rn(o));let{pathname:g="/",search:j="",hash:b="",state:y=null,key:z="default"}=o,S=u.useMemo(()=>{let O=Pa(g,v);return O==null?null:{location:{pathname:O,search:j,hash:b,state:y,key:z},navigationType:d}},[v,g,j,b,y,z,d]);return ha(S!=null,`<Router basename="${v}"> is not able to match the URL "${g}${j}${b}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:u.createElement(sa.Provider,{value:p},u.createElement(or.Provider,{children:i,value:S}))}function Vy({children:l,location:i}){return Ey(wd(l),i)}function wd(l,i=[]){let o=[];return u.Children.forEach(l,(d,x)=>{if(!u.isValidElement(d))return;let f=[...i,x];if(d.type===u.Fragment){o.push.apply(o,wd(d.props.children,f));return}lt(d.type===Xe,`[${typeof d.type=="string"?d.type:d.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),lt(!d.props.index||!d.props.children,"An index route cannot have child routes.");let h={id:d.props.id||f.join("-"),caseSensitive:d.props.caseSensitive,element:d.props.element,Component:d.props.Component,index:d.props.index,path:d.props.path,middleware:d.props.middleware,loader:d.props.loader,action:d.props.action,hydrateFallbackElement:d.props.hydrateFallbackElement,HydrateFallback:d.props.HydrateFallback,errorElement:d.props.errorElement,ErrorBoundary:d.props.ErrorBoundary,hasErrorBoundary:d.props.hasErrorBoundary===!0||d.props.ErrorBoundary!=null||d.props.errorElement!=null,shouldRevalidate:d.props.shouldRevalidate,handle:d.props.handle,lazy:d.props.lazy};d.props.children&&(h.children=wd(d.props.children,f)),o.push(h)}),o}var Li="get",qi="application/x-www-form-urlencoded";function Vi(l){return typeof HTMLElement<"u"&&l instanceof HTMLElement}function Qy(l){return Vi(l)&&l.tagName.toLowerCase()==="button"}function Zy(l){return Vi(l)&&l.tagName.toLowerCase()==="form"}function Xy(l){return Vi(l)&&l.tagName.toLowerCase()==="input"}function Ky(l){return!!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)}function Jy(l,i){return l.button===0&&(!i||i==="_self")&&!Ky(l)}var Ti=null;function Fy(){if(Ti===null)try{new FormData(document.createElement("form"),0),Ti=!1}catch{Ti=!0}return Ti}var Iy=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function yd(l){return l!=null&&!Iy.has(l)?(ha(!1,`"${l}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qi}"`),null):l}function Py(l,i){let o,d,x,f,h;if(Zy(l)){let v=l.getAttribute("action");d=v?Pa(v,i):null,o=l.getAttribute("method")||Li,x=yd(l.getAttribute("enctype"))||qi,f=new FormData(l)}else if(Qy(l)||Xy(l)&&(l.type==="submit"||l.type==="image")){let v=l.form;if(v==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=l.getAttribute("formaction")||v.getAttribute("action");if(d=p?Pa(p,i):null,o=l.getAttribute("formmethod")||v.getAttribute("method")||Li,x=yd(l.getAttribute("formenctype"))||yd(v.getAttribute("enctype"))||qi,f=new FormData(v,l),!Fy()){let{name:g,type:j,value:b}=l;if(j==="image"){let y=g?`${g}.`:"";f.append(`${y}x`,"0"),f.append(`${y}y`,"0")}else g&&f.append(g,b)}}else{if(Vi(l))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');o=Li,d=null,x=qi,h=l}return f&&x==="text/plain"&&(h=f,f=void 0),{action:d,method:o.toLowerCase(),encType:x,formData:f,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Yd(l,i){if(l===!1||l===null||typeof l>"u")throw new Error(i)}function Wy(l,i,o,d){let x=typeof l=="string"?new URL(l,typeof window>"u"?"server://singlefetch/":window.location.origin):l;return o?x.pathname.endsWith("/")?x.pathname=`${x.pathname}_.${d}`:x.pathname=`${x.pathname}.${d}`:x.pathname==="/"?x.pathname=`_root.${d}`:i&&Pa(x.pathname,i)==="/"?x.pathname=`${i.replace(/\/$/,"")}/_root.${d}`:x.pathname=`${x.pathname.replace(/\/$/,"")}.${d}`,x}async function eb(l,i){if(l.id in i)return i[l.id];try{let o=await import(l.module);return i[l.id]=o,o}catch(o){return console.error(`Error loading route module \`${l.module}\`, reloading page...`),console.error(o),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function tb(l){return l==null?!1:l.href==null?l.rel==="preload"&&typeof l.imageSrcSet=="string"&&typeof l.imageSizes=="string":typeof l.rel=="string"&&typeof l.href=="string"}async function ab(l,i,o){let d=await Promise.all(l.map(async x=>{let f=i.routes[x.route.id];if(f){let h=await eb(f,o);return h.links?h.links():[]}return[]}));return rb(d.flat(1).filter(tb).filter(x=>x.rel==="stylesheet"||x.rel==="preload").map(x=>x.rel==="stylesheet"?{...x,rel:"prefetch",as:"style"}:{...x,rel:"prefetch"}))}function cf(l,i,o,d,x,f){let h=(p,g)=>o[g]?p.route.id!==o[g].route.id:!0,v=(p,g)=>o[g].pathname!==p.pathname||o[g].route.path?.endsWith("*")&&o[g].params["*"]!==p.params["*"];return f==="assets"?i.filter((p,g)=>h(p,g)||v(p,g)):f==="data"?i.filter((p,g)=>{let j=d.routes[p.route.id];if(!j||!j.hasLoader)return!1;if(h(p,g)||v(p,g))return!0;if(p.route.shouldRevalidate){let b=p.route.shouldRevalidate({currentUrl:new URL(x.pathname+x.search+x.hash,window.origin),currentParams:o[0]?.params||{},nextUrl:new URL(l,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function sb(l,i,{includeHydrateFallback:o}={}){return nb(l.map(d=>{let x=i.routes[d.route.id];if(!x)return[];let f=[x.module];return x.clientActionModule&&(f=f.concat(x.clientActionModule)),x.clientLoaderModule&&(f=f.concat(x.clientLoaderModule)),o&&x.hydrateFallbackModule&&(f=f.concat(x.hydrateFallbackModule)),x.imports&&(f=f.concat(x.imports)),f}).flat(1))}function nb(l){return[...new Set(l)]}function lb(l){let i={},o=Object.keys(l).sort();for(let d of o)i[d]=l[d];return i}function rb(l,i){let o=new Set;return new Set(i),l.reduce((d,x)=>{let f=JSON.stringify(lb(x));return o.has(f)||(o.add(f),d.push({key:f,link:x})),d},[])}function $f(){let l=u.useContext(Wn);return Yd(l,"You must render this element inside a <DataRouterContext.Provider> element"),l}function ib(){let l=u.useContext(Gi);return Yd(l,"You must render this element inside a <DataRouterStateContext.Provider> element"),l}var Vd=u.createContext(void 0);Vd.displayName="FrameworkContext";function Yf(){let l=u.useContext(Vd);return Yd(l,"You must render this element inside a <HydratedRouter> element"),l}function cb(l,i){let o=u.useContext(Vd),[d,x]=u.useState(!1),[f,h]=u.useState(!1),{onFocus:v,onBlur:p,onMouseEnter:g,onMouseLeave:j,onTouchStart:b}=i,y=u.useRef(null);u.useEffect(()=>{if(l==="render"&&h(!0),l==="viewport"){let O=w=>{w.forEach(k=>{h(k.isIntersecting)})},C=new IntersectionObserver(O,{threshold:.5});return y.current&&C.observe(y.current),()=>{C.disconnect()}}},[l]),u.useEffect(()=>{if(d){let O=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(O)}}},[d]);let z=()=>{x(!0)},S=()=>{x(!1),h(!1)};return o?l!=="intent"?[f,y,{}]:[f,y,{onFocus:er(v,z),onBlur:er(p,S),onMouseEnter:er(g,z),onMouseLeave:er(j,S),onTouchStart:er(b,z)}]:[!1,y,{}]}function er(l,i){return o=>{l&&l(o),o.defaultPrevented||i(o)}}function ob({page:l,...i}){let{router:o}=$f(),d=u.useMemo(()=>Ef(o.routes,l,o.basename),[o.routes,l,o.basename]);return d?u.createElement(ub,{page:l,matches:d,...i}):null}function db(l){let{manifest:i,routeModules:o}=Yf(),[d,x]=u.useState([]);return u.useEffect(()=>{let f=!1;return ab(l,i,o).then(h=>{f||x(h)}),()=>{f=!0}},[l,i,o]),d}function ub({page:l,matches:i,...o}){let d=Qt(),{future:x,manifest:f,routeModules:h}=Yf(),{basename:v}=$f(),{loaderData:p,matches:g}=ib(),j=u.useMemo(()=>cf(l,i,g,f,d,"data"),[l,i,g,f,d]),b=u.useMemo(()=>cf(l,i,g,f,d,"assets"),[l,i,g,f,d]),y=u.useMemo(()=>{if(l===d.pathname+d.search+d.hash)return[];let O=new Set,C=!1;if(i.forEach(k=>{let M=f.routes[k.route.id];!M||!M.hasLoader||(!j.some($=>$.route.id===k.route.id)&&k.route.id in p&&h[k.route.id]?.shouldRevalidate||M.hasClientLoader?C=!0:O.add(k.route.id))}),O.size===0)return[];let w=Wy(l,v,x.unstable_trailingSlashAwareDataRequests,"data");return C&&O.size>0&&w.searchParams.set("_routes",i.filter(k=>O.has(k.route.id)).map(k=>k.route.id).join(",")),[w.pathname+w.search]},[v,x.unstable_trailingSlashAwareDataRequests,p,d,f,j,i,l,h]),z=u.useMemo(()=>sb(b,f),[b,f]),S=db(b);return u.createElement(u.Fragment,null,y.map(O=>u.createElement("link",{key:O,rel:"prefetch",as:"fetch",href:O,...o})),z.map(O=>u.createElement("link",{key:O,rel:"modulepreload",href:O,...o})),S.map(({key:O,link:C})=>u.createElement("link",{key:O,nonce:o.nonce,...C,crossOrigin:C.crossOrigin??o.crossOrigin})))}function mb(...l){return i=>{l.forEach(o=>{typeof o=="function"?o(i):o!=null&&(o.current=i)})}}var xb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{xb&&(window.__reactRouterVersion="7.13.0")}catch{}function fb({basename:l,children:i,unstable_useTransitions:o,window:d}){let x=u.useRef();x.current==null&&(x.current=Qg({window:d,v5Compat:!0}));let f=x.current,[h,v]=u.useState({action:f.action,location:f.location}),p=u.useCallback(g=>{o===!1?v(g):u.startTransition(()=>v(g))},[o]);return u.useLayoutEffect(()=>f.listen(p),[f,p]),u.createElement(Yy,{basename:l,children:i,location:h.location,navigationType:h.action,navigator:f,unstable_useTransitions:o})}var Vf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,we=u.forwardRef(function({onClick:i,discover:o="render",prefetch:d="none",relative:x,reloadDocument:f,replace:h,state:v,target:p,to:g,preventScrollReset:j,viewTransition:b,unstable_defaultShouldRevalidate:y,...z},S){let{basename:O,unstable_useTransitions:C}=u.useContext(sa),w=typeof g=="string"&&Vf.test(g),k=Af(g,O);g=k.to;let M=wy(g,{relative:x}),[$,L,te]=cb(d,z),X=gb(g,{replace:h,state:v,target:p,preventScrollReset:j,relative:x,viewTransition:b,unstable_defaultShouldRevalidate:y,unstable_useTransitions:C});function ge(se){i&&i(se),se.defaultPrevented||X(se)}let K=u.createElement("a",{...z,...te,href:k.absoluteURL||M,onClick:k.isExternal||f?i:ge,ref:mb(S,L),target:p,"data-discover":!w&&o==="render"?"true":void 0});return $&&!w?u.createElement(u.Fragment,null,K,u.createElement(ob,{page:M})):K});we.displayName="Link";var Hi=u.forwardRef(function({"aria-current":i="page",caseSensitive:o=!1,className:d="",end:x=!1,style:f,to:h,viewTransition:v,children:p,...g},j){let b=dr(h,{relative:g.relative}),y=Qt(),z=u.useContext(Gi),{navigator:S,basename:O}=u.useContext(sa),C=z!=null&&Nb(b)&&v===!0,w=S.encodeLocation?S.encodeLocation(b).pathname:b.pathname,k=y.pathname,M=z&&z.navigation&&z.navigation.location?z.navigation.location.pathname:null;o||(k=k.toLowerCase(),M=M?M.toLowerCase():null,w=w.toLowerCase()),M&&O&&(M=Pa(M,O)||M);const $=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let L=k===w||!x&&k.startsWith(w)&&k.charAt($)==="/",te=M!=null&&(M===w||!x&&M.startsWith(w)&&M.charAt(w.length)==="/"),X={isActive:L,isPending:te,isTransitioning:C},ge=L?i:void 0,K;typeof d=="function"?K=d(X):K=[d,L?"active":null,te?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let se=typeof f=="function"?f(X):f;return u.createElement(we,{...g,"aria-current":ge,className:K,ref:j,style:se,to:h,viewTransition:v},typeof p=="function"?p(X):p)});Hi.displayName="NavLink";var hb=u.forwardRef(({discover:l="render",fetcherKey:i,navigate:o,reloadDocument:d,replace:x,state:f,method:h=Li,action:v,onSubmit:p,relative:g,preventScrollReset:j,viewTransition:b,unstable_defaultShouldRevalidate:y,...z},S)=>{let{unstable_useTransitions:O}=u.useContext(sa),C=vb(),w=jb(v,{relative:g}),k=h.toLowerCase()==="get"?"get":"post",M=typeof v=="string"&&Vf.test(v),$=L=>{if(p&&p(L),L.defaultPrevented)return;L.preventDefault();let te=L.nativeEvent.submitter,X=te?.getAttribute("formmethod")||h,ge=()=>C(te||L.currentTarget,{fetcherKey:i,method:X,navigate:o,replace:x,state:f,relative:g,preventScrollReset:j,viewTransition:b,unstable_defaultShouldRevalidate:y});O&&o!==!1?u.startTransition(()=>ge()):ge()};return u.createElement("form",{ref:S,method:k,action:w,onSubmit:d?p:$,...z,"data-discover":!M&&l==="render"?"true":void 0})});hb.displayName="Form";function pb(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Qf(l){let i=u.useContext(Wn);return lt(i,pb(l)),i}function gb(l,{target:i,replace:o,state:d,preventScrollReset:x,relative:f,viewTransition:h,unstable_defaultShouldRevalidate:v,unstable_useTransitions:p}={}){let g=Os(),j=Qt(),b=dr(l,{relative:f});return u.useCallback(y=>{if(Jy(y,i)){y.preventDefault();let z=o!==void 0?o:rr(j)===rr(b),S=()=>g(l,{replace:z,state:d,preventScrollReset:x,relative:f,viewTransition:h,unstable_defaultShouldRevalidate:v});p?u.startTransition(()=>S()):S()}},[j,g,b,o,d,i,l,x,f,h,v,p])}var yb=0,bb=()=>`__${String(++yb)}__`;function vb(){let{router:l}=Qf("useSubmit"),{basename:i}=u.useContext(sa),o=Uy(),d=l.fetch,x=l.navigate;return u.useCallback(async(f,h={})=>{let{action:v,method:p,encType:g,formData:j,body:b}=Py(f,i);if(h.navigate===!1){let y=h.fetcherKey||bb();await d(y,o,h.action||v,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:j,body:b,formMethod:h.method||p,formEncType:h.encType||g,flushSync:h.flushSync})}else await x(h.action||v,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:j,body:b,formMethod:h.method||p,formEncType:h.encType||g,replace:h.replace,state:h.state,fromRouteId:o,flushSync:h.flushSync,viewTransition:h.viewTransition})},[d,x,i,o])}function jb(l,{relative:i}={}){let{basename:o}=u.useContext(sa),d=u.useContext(ga);lt(d,"useFormAction must be used inside a RouteContext");let[x]=d.matches.slice(-1),f={...dr(l||".",{relative:i})},h=Qt();if(l==null){f.search=h.search;let v=new URLSearchParams(f.search),p=v.getAll("index");if(p.some(j=>j==="")){v.delete("index"),p.filter(b=>b).forEach(b=>v.append("index",b));let j=v.toString();f.search=j?`?${j}`:""}}return(!l||l===".")&&x.route.index&&(f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index"),o!=="/"&&(f.pathname=f.pathname==="/"?o:Fa([o,f.pathname])),rr(f)}function Nb(l,{relative:i}={}){let o=u.useContext(Mf);lt(o!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:d}=Qf("useViewTransitionState"),x=dr(l,{relative:i});if(!o.isTransitioning)return!1;let f=Pa(o.currentLocation.pathname,d)||o.currentLocation.pathname,h=Pa(o.nextLocation.pathname,d)||o.nextLocation.pathname;return Bi(x.pathname,h)!=null||Bi(x.pathname,f)!=null}var Rs=zf();const Zf=u.createContext(null),Qd="kcl_stores";function Sb(){try{const l=localStorage.getItem(Qd);if(l)return JSON.parse(l)}catch(l){console.error("Failed to load state:",l)}return null}const Xf={user:null,selectedCampId:null,camps:[],notifications:[],isLoading:!1};function _b(l,i){switch(i.type){case"LOGIN":return{...l,user:i.payload.user,camps:i.payload.camps||l.camps,selectedCampId:i.payload.user.camp_id||null};case"LOGOUT":return localStorage.removeItem(Qd),localStorage.removeItem("kcl_token"),{...Xf};case"SET_CAMPS":return{...l,camps:i.payload};case"SELECT_CAMP":return{...l,selectedCampId:i.payload};case"SET_LOADING":return{...l,isLoading:i.payload};case"ADD_NOTIFICATION":return{...l,notifications:[i.payload,...l.notifications].slice(0,50)};case"MARK_NOTIFICATION_READ":return{...l,notifications:l.notifications.map(o=>o.id===i.payload?{...o,is_read:!0}:o)};case"RESTORE_STATE":return{...l,...i.payload};default:return l}}function wb({children:l}){const[i,o]=u.useReducer(_b,Xf);return u.useEffect(()=>{const d=Sb();d?.user&&o({type:"RESTORE_STATE",payload:d})},[]),u.useEffect(()=>{i.user&&localStorage.setItem(Qd,JSON.stringify({user:i.user,selectedCampId:i.selectedCampId,camps:i.camps}))},[i.user,i.selectedCampId,i.camps]),t.jsx(Zf.Provider,{value:{state:i,dispatch:o},children:l})}function cn(){const l=u.useContext(Zf);if(!l)throw new Error("useApp must be used within AppProvider");return l}function Ie(){const{state:l}=cn();return l.user}function ya(){const{state:l}=cn(),i=l.selectedCampId,o=l.camps.find(d=>d.id===i);return{campId:i,camp:o,camps:l.camps}}function ln(l){return["stores_manager","procurement_officer","director","admin"].includes(l)}const kb="kcl_offline",Cb=1;let Oi=null;function on(){return Oi?Promise.resolve(Oi):new Promise((l,i)=>{const o=indexedDB.open(kb,Cb);o.onupgradeneeded=d=>{const x=d.target.result;if(x.objectStoreNames.contains("apiCache")||x.createObjectStore("apiCache",{keyPath:"key"}),!x.objectStoreNames.contains("syncQueue")){const f=x.createObjectStore("syncQueue",{keyPath:"id",autoIncrement:!0});f.createIndex("status","status",{unique:!1}),f.createIndex("timestamp","timestamp",{unique:!1})}},o.onsuccess=()=>{Oi=o.result,l(Oi)},o.onerror=()=>i(o.error)})}async function zb(l){try{const i=await on();return new Promise(o=>{const f=i.transaction("apiCache","readonly").objectStore("apiCache").get(l);f.onsuccess=()=>{const h=f.result;if(!h)return o(null);h.expiresAt&&Date.now()>h.expiresAt?o({data:h.data,stale:!0,timestamp:h.timestamp}):o({data:h.data,stale:!1,timestamp:h.timestamp})},f.onerror=()=>o(null)})}catch{return null}}async function Eb(l,i,o=30){try{const x=(await on()).transaction("apiCache","readwrite");return x.objectStore("apiCache").put({key:l,data:i,timestamp:Date.now(),expiresAt:Date.now()+o*60*1e3}),new Promise(h=>{x.oncomplete=()=>h(!0),x.onerror=()=>h(!1)})}catch{return!1}}async function Tb(l){try{const i=await on();return new Promise((o,d)=>{const x=i.transaction("syncQueue","readwrite"),h=x.objectStore("syncQueue").add({...l,timestamp:Date.now(),retries:0,status:"pending"});h.onsuccess=()=>o(h.result),h.onerror=()=>d(h.error),x.onerror=()=>d(x.error)})}catch(i){throw console.error("Failed to add to sync queue:",i),i}}async function Ob(){try{const l=await on();return new Promise(i=>{const x=l.transaction("syncQueue","readonly").objectStore("syncQueue").getAll();x.onsuccess=()=>i(x.result||[]),x.onerror=()=>i([])})}catch{return[]}}async function Kf(){try{const l=await on();return new Promise(i=>{const x=l.transaction("syncQueue","readonly").objectStore("syncQueue").count();x.onsuccess=()=>i(x.result||0),x.onerror=()=>i(0)})}catch{return 0}}async function Rb(l){try{const i=await on();return new Promise(o=>{const d=i.transaction("syncQueue","readwrite");d.objectStore("syncQueue").delete(l),d.oncomplete=()=>o(!0),d.onerror=()=>o(!1)})}catch{return!1}}async function bd(l,i){try{const o=await on();return new Promise(d=>{const x=o.transaction("syncQueue","readwrite"),f=x.objectStore("syncQueue"),h=f.get(l);h.onsuccess=()=>{h.result&&f.put({...h.result,...i})},x.oncomplete=()=>d(!0),x.onerror=()=>d(!1)})}catch{return!1}}const Jf="https://darkblue-goshawk-672880.hostingersite.com";function Ff(){return localStorage.getItem("kcl_token")}const Ta=new Map,Ab=80;function Db(l){const i=Ta.get(l);return i?Date.now()>i.expiresAt?(Ta.delete(l),{data:i.data,stale:!0}):{data:i.data,stale:!1}:null}function of(l,i,o){if(Ta.size>=Ab){const d=Ta.keys().next().value;Ta.delete(d)}Ta.set(l,{data:i,expiresAt:Date.now()+o*60*1e3})}function Mb(l){const i=l.split("?")[0].replace(/-detail|-approve|-reject|-query/,"");for(const o of Ta.keys())o.includes(i)&&Ta.delete(o);for(const o of Ta.keys())(o.includes("dashboard.php")||o.includes("alerts.php"))&&Ta.delete(o)}const Lb=["auth-login.php","auth-pin-login.php","auth-me.php"],qb=["recipes.php","reports.php","debug-schema.php"];function df(l){return l.includes("pos.php?action=categories")||l.includes("menu.php?action=categories")?60:l.includes("items.php")||l.includes("dashboard.php")||l.includes("stock")||l.includes("users.php")&&!l.includes("?id=")?30:l.includes("orders.php")||l.includes("dispatch.php")||l.includes("receive.php")||l.includes("issue.php")||l.includes("daily-overview.php")||l.includes("pos.php")||l.includes("menu.php")?15:l.includes("alerts.php")?5:l.includes("detail")?10:15}function Ub(){return navigator.onLine}function ir(l){return Lb.some(i=>l.includes(i))}function Bb(l){return qb.some(i=>l.includes(i))||ir(l)}async function oe(l,i={}){const o=`${Jf}/${l}`,d=Ff(),x=(i.method||"GET").toUpperCase(),h={...i.isFormData||i.body instanceof FormData?{}:{"Content-Type":"application/json"},...d?{Authorization:`Bearer ${d}`}:{},...i.headers},{isFormData:v,...p}=i,g={headers:h,...p};if((x==="POST"||x==="PUT")&&(Mb(l),!Ub()&&!ir(l))){if(Bb(l))throw new Error("This action requires an internet connection.");return await Tb({endpoint:l,method:x,body:i.body||null,headers:g.headers}),{success:!0,_offline:!0,_queued_at:Date.now(),message:"Saved offline. Will sync when connected."}}if(x==="GET"&&!ir(l)){const j=Db(l);if(j&&!j.stale)return j.data;if(j&&j.stale)return uf(l,o,g).catch(()=>{}),j.data}return uf(l,o,g,x)}async function uf(l,i,o,d="GET"){try{const x=await fetch(i,o);if(x.status===401&&!l.includes("auth-login"))throw localStorage.removeItem("kcl_token"),localStorage.removeItem("kcl_stores"),window.location.hash="#/login",new Error("Session expired. Please login again.");const f=await x.text();let h;try{h=f?JSON.parse(f):{}}catch{throw console.error("API response not valid JSON:",f.substring(0,200)),new Error("Server returned an invalid response. Please try again.")}if(!x.ok)throw new Error(h.error||h.message||`Request failed (${x.status})`);if(d==="GET"&&!ir(l)){const v=df(l);of(l,h,v),Eb(l,h,v).catch(()=>{})}return h}catch(x){if(d==="GET"&&!ir(l)){const f=await zb(l);if(f)return of(l,f.data,f.stale?.5:df(l)),{...f.data,_cached:!0,_cached_at:f.timestamp}}throw x.name==="TypeError"&&x.message.includes("fetch")?new Error("Network error. Please check your connection."):x}}async function Hb(l,i={}){const o=`${Jf}/${l}`,d=Ff(),x={headers:{"Content-Type":"application/json",...d?{Authorization:`Bearer ${d}`}:{},...i.headers},...i},f=await fetch(o,x),h=await f.text(),v=h?JSON.parse(h):{};if(!f.ok)throw new Error(v.error||v.message||`Request failed (${f.status})`);return v}const If={login:(l,i)=>oe("auth-login.php",{method:"POST",body:JSON.stringify({username:l,password:i})}),pinLogin:(l,i)=>oe("auth-pin-login.php",{method:"POST",body:JSON.stringify({username:l,pin:i})}),me:()=>oe("auth-me.php")},Gb={get:l=>oe(`dashboard.php${l?`?camp_id=${l}`:""}`)},Qi={list:(l={})=>{const i=new URLSearchParams(l).toString();return oe(`items.php${i?`?${i}`:""}`)},get:l=>oe(`items-detail.php?id=${l}`)},$b={list:(l={})=>{const i=new URLSearchParams(l).toString();return oe(`stock.php${i?`?${i}`:""}`)},camp:(l,i={})=>{const o=new URLSearchParams(i).toString();return oe(`stock-camp.php?camp_id=${l}${o?`&${o}`:""}`)}},tn={list:(l={})=>{const i=new URLSearchParams(l).toString();return oe(`orders.php${i?`?${i}`:""}`)},get:l=>oe(`orders-detail.php?id=${l}`),create:l=>oe("orders.php",{method:"POST",body:JSON.stringify(l)}),update:(l,i)=>oe("orders-detail.php",{method:"PUT",body:JSON.stringify({id:l,...i})}),approve:(l,i)=>oe("orders-approve.php",{method:"PUT",body:JSON.stringify({order_id:l,lines:i})}),reject:(l,i)=>oe("orders-reject.php",{method:"PUT",body:JSON.stringify({order_id:l,reason:i})}),query:(l,i,o=null)=>oe("orders-query.php",{method:"POST",body:JSON.stringify({order_id:l,message:i,order_line_id:o})})},Pf={list:(l={})=>{const i=new URLSearchParams(l).toString();return oe(`dispatch.php${i?`?${i}`:""}`)},get:l=>oe(`dispatch-detail.php?id=${l}`),create:l=>oe("dispatch.php",{method:"POST",body:JSON.stringify(l)}),update:(l,i)=>oe("dispatch-detail.php",{method:"PUT",body:JSON.stringify({id:l,...i})})},kd={list:(l={})=>{const i=new URLSearchParams(l).toString();return oe(`receive.php${i?`?${i}`:""}`)},get:l=>oe(`receive-detail.php?id=${l}`),create:l=>oe("receive.php",{method:"POST",body:JSON.stringify(l)}),confirm:(l,i)=>oe("receive-detail.php",{method:"PUT",body:JSON.stringify({id:l,lines:i})})},Cd={list:(l={})=>{const i=new URLSearchParams(l).toString();return oe(`issue.php${i?`?${i}`:""}`)},get:l=>oe(`issue-detail.php?id=${l}`),create:l=>oe("issue.php",{method:"POST",body:JSON.stringify(l)})},Fn={summary:l=>oe(`alerts.php?type=summary${l?`&camp_id=${l}`:""}`),lowStock:l=>oe(`alerts.php?type=low_stock${l?`&camp_id=${l}`:""}`),projections:(l=14,i)=>oe(`alerts.php?type=projections&days=${l}${i?`&camp_id=${i}`:""}`),deadStock:(l=60,i)=>oe(`alerts.php?type=dead_stock&min_days=${l}${i?`&camp_id=${i}`:""}`),excess:l=>oe(`alerts.php?type=excess${l?`&camp_id=${l}`:""}`)},Yb={get:(l,i={})=>{const o=new URLSearchParams({type:l,...i}).toString();return oe(`reports.php?${o}`)}},an={list:()=>oe("users.php"),create:l=>oe("users.php",{method:"POST",body:JSON.stringify(l)}),update:(l,i)=>oe(`users.php?id=${l}`,{method:"PUT",body:JSON.stringify(i)})},tr={categories:()=>oe("pos.php?action=categories"),items:(l={})=>{const i=new URLSearchParams(l).toString();return oe(`pos.php?action=items${i?`&${i}`:""}`)},recent:(l={})=>{const i=new URLSearchParams(l).toString();return oe(`pos.php?action=recent${i?`&${i}`:""}`)},today:()=>oe("pos.php?action=today"),create:l=>oe("pos.php",{method:"POST",body:JSON.stringify(l)})},ws={categories:()=>oe("menu.php?action=categories"),items:(l={})=>{const i=new URLSearchParams(l).toString();return oe(`menu.php?action=items${i?`&${i}`:""}`)},item:l=>oe(`menu.php?action=item&id=${l}`),suggestAlternatives:(l,i)=>{const o=new URLSearchParams({ingredient:l,drink:i||""});return oe(`menu.php?action=suggest_alternatives&${o}`)},searchIngredients:l=>oe(`menu.php?action=search_ingredients&q=${encodeURIComponent(l)}`),stockStatus:()=>oe("menu.php?action=stock_status"),depletion:(l={})=>{const i=new URLSearchParams(l).toString();return oe(`menu.php?action=depletion${i?`&${i}`:""}`)},order:l=>oe("menu.php",{method:"POST",body:JSON.stringify(l)})},$t={recipes:(l={})=>{const i=new URLSearchParams(l).toString();return oe(`kitchen.php?action=recipes${i?`&${i}`:""}`)},recipe:l=>oe(`kitchen.php?action=recipe&id=${l}`),searchRecipes:l=>oe(`kitchen.php?action=search_recipes&q=${encodeURIComponent(l)}`),suggestRecipe:l=>oe(`kitchen.php?action=suggest_recipe&items=${encodeURIComponent(l)}`),suggestAlternatives:(l,i)=>{const o=new URLSearchParams({ingredient:l,dish:i||""});return oe(`kitchen.php?action=suggest_alternatives&${o}`)},searchIngredients:l=>oe(`kitchen.php?action=search_ingredients&q=${encodeURIComponent(l)}`),saveRecipe:l=>oe("kitchen.php",{method:"POST",body:JSON.stringify({action:"save_recipe",...l})}),logPattern:(l,i,o)=>oe("kitchen.php",{method:"POST",body:JSON.stringify({action:"log_pattern",items:l,source:i,reference_id:o})}),preferences:l=>{const i=l?`&type=${l}`:"";return oe(`kitchen.php?action=preferences${i}`)},suggestedItems:(l="issue")=>oe(`kitchen.php?action=suggested_items&context=${l}`),learn:()=>oe("kitchen.php",{method:"POST",body:JSON.stringify({action:"learn"})}),deleteRecipe:l=>oe("kitchen.php",{method:"POST",body:JSON.stringify({action:"delete_recipe",id:l})})},We={chefInit:(l,i)=>oe(`kitchen-menu.php?action=chef_init&date=${l}&meal=${i}`),plan:(l,i)=>oe(`kitchen-menu.php?action=plan&date=${l}&meal=${i}`),plans:l=>oe(`kitchen-menu.php?action=plans&month=${l}`),audit:l=>oe(`kitchen-menu.php?action=audit&plan_id=${l}`),recipeIngredients:(l,i)=>oe(`kitchen-menu.php?action=recipe_ingredients&recipe_id=${l}&portions=${i||0}`),searchItems:l=>oe(`kitchen-menu.php?action=search_items&q=${encodeURIComponent(l)}`),createPlan:(l,i,o)=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"create_plan",date:l,meal:i,portions:o})}),addDish:(l,i,o,d,x)=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"add_dish",plan_id:l,course:i,dish_name:o,portions:d,recipe_id:x||null})}),removeDish:l=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"remove_dish",dish_id:l})}),loadRecipe:(l,i,o)=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"load_recipe",dish_id:l,recipe_id:i,portions:o})}),ratePresentation:(l,i)=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"rate_presentation",dish_id:l,photo_url:i})}),uploadDishPhoto:l=>{const i=new FormData;return i.append("photo",l),oe("upload-dish-photo.php",{method:"POST",body:i,isFormData:!0})},addIngredient:(l,i,o,d)=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"add_ingredient",dish_id:l,item_id:i,qty:o,uom:d})}),removeIngredient:(l,i)=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"remove_ingredient",ingredient_id:l,reason:i})}),updateQty:(l,i)=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"update_qty",ingredient_id:l,qty:i})}),updatePortions:(l,i)=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"update_portions",dish_id:l,portions:i})}),updatePlanPax:(l,i)=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"update_plan_pax",plan_id:l,pax:i})}),confirmPlan:l=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"confirm_plan",plan_id:l})}),reopenPlan:l=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"reopen_plan",plan_id:l})}),weeklyIngredients:l=>oe(`kitchen-menu.php?action=weekly_ingredients&week_start=${l}`),updateDailyTracking:(l,i)=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"update_daily_tracking",ingredient_id:l,...i})}),updateWeeklyGrocery:(l,i,o)=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"update_weekly_grocery",week_start:l,item_id:i,...o})}),addWeeklyGrocery:(l,i,o)=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"add_weekly_grocery",week_start:l,item_id:i,projected_qty:o})}),updateStock:(l,i)=>oe("kitchen-menu.php",{method:"POST",body:JSON.stringify({action:"update_stock",item_id:l,qty:i})}),defaultMenu:(l,i)=>oe(`kitchen-menu.php?action=default_menu&day=${l}&meal=${i}`)},Vb={get:(l={})=>{const i=new URLSearchParams(l).toString();return oe(`daily-overview.php${i?`?${i}`:""}`)}},Qb=5;let vd=!1;function Ri(l,i={}){window.dispatchEvent(new CustomEvent(l,{detail:i}))}async function zd(){if(vd||!navigator.onLine)return;const i=(await Ob()).filter(x=>x.status!=="failed");if(i.length===0)return;vd=!0,Ri("sync:start",{count:i.length});let o=0,d=0;for(const x of i){if(!navigator.onLine)break;try{await bd(x.id,{status:"syncing"}),await Hb(x.endpoint,{method:x.method,body:x.body||void 0,headers:x.headers||{}}),await Rb(x.id),o++,Ri("sync:item-synced",{id:x.id,synced:o,total:i.length})}catch(f){const h=(x.retries||0)+1;h>=Qb?(await bd(x.id,{status:"failed",retries:h,lastError:f.message}),d++):await bd(x.id,{status:"pending",retries:h,lastError:f.message}),Ri("sync:error",{id:x.id,error:f.message,retries:h})}}vd=!1,Ri("sync:complete",{synced:o,failed:d,remaining:await Kf()})}function Zb(){window.addEventListener("online",()=>{setTimeout(zd,1e3)}),navigator.onLine&&setTimeout(zd,2e3)}const Wf=(...l)=>l.filter((i,o,d)=>!!i&&i.trim()!==""&&d.indexOf(i)===o).join(" ").trim();const Xb=l=>l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const Kb=l=>l.replace(/^([A-Z])|[\s-_]+(\w)/g,(i,o,d)=>d?d.toUpperCase():o.toLowerCase());const mf=l=>{const i=Kb(l);return i.charAt(0).toUpperCase()+i.slice(1)};var Jb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Fb=l=>{for(const i in l)if(i.startsWith("aria-")||i==="role"||i==="title")return!0;return!1};const Ib=u.forwardRef(({color:l="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:d,className:x="",children:f,iconNode:h,...v},p)=>u.createElement("svg",{ref:p,...Jb,width:i,height:i,stroke:l,strokeWidth:d?Number(o)*24/Number(i):o,className:Wf("lucide",x),...!f&&!Fb(v)&&{"aria-hidden":"true"},...v},[...h.map(([g,j])=>u.createElement(g,j)),...Array.isArray(f)?f:[f]]));const de=(l,i)=>{const o=u.forwardRef(({className:d,...x},f)=>u.createElement(Ib,{ref:f,iconNode:i,className:Wf(`lucide-${Xb(mf(l))}`,`lucide-${l}`,d),...x}));return o.displayName=mf(l),o};const Pb=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],tl=de("arrow-left",Pb);const Wb=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],sr=de("arrow-right",Wb);const ev=[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]],eh=de("beaker",ev);const tv=[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]],av=de("bed-double",tv);const sv=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],ur=de("bell",sv);const nv=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],al=de("book-open",nv);const lv=[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]],Ia=de("boxes",lv);const rv=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],iv=de("bug",rv);const cv=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],ov=de("building-2",cv);const dv=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ks=de("calendar",dv);const uv=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],th=de("camera",uv);const mv=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Zi=de("chart-column",mv);const xv=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Yt=de("check",xv);const fv=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],aa=de("chef-hat",fv);const hv=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],vt=de("chevron-down",hv);const pv=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Oa=de("chevron-left",pv);const gv=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ot=de("chevron-right",gv);const yv=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ah=de("chevron-up",yv);const bv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],cr=de("circle-alert",bv);const vv=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Zd=de("circle-check-big",vv);const jv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Xd=de("circle-check",jv);const Nv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],sh=de("circle-question-mark",Nv);const Sv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],_v=de("circle-x",Sv);const wv=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],sn=de("clipboard-list",wv);const kv=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Cs=de("clock",kv);const Cv=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],zv=de("coffee",Cv);const Ev=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],nh=de("credit-card",Ev);const Tv=[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]],Ov=de("delete",Tv);const Rv=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Av=de("eye-off",Rv);const Dv=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Mv=de("eye",Dv);const Lv=[["path",{d:"M4.226 20.925A2 2 0 0 0 6 22h12a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v3.127",key:"wfxp4w"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m5 11-3 3",key:"1dgrs4"}],["path",{d:"m5 17-3-3h10",key:"1mvvaf"}]],zs=de("file-output",Lv);const qv=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],lh=de("funnel",qv);const Uv=[["path",{d:"M5.116 4.104A1 1 0 0 1 6.11 3h11.78a1 1 0 0 1 .994 1.105L17.19 20.21A2 2 0 0 1 15.2 22H8.8a2 2 0 0 1-2-1.79z",key:"p55z4y"}],["path",{d:"M6 12a5 5 0 0 1 6 0 5 5 0 0 0 6 0",key:"mjntcy"}]],In=de("glass-water",Uv);const Bv=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Hv=de("grid-3x3",Bv);const Gv=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],$v=de("hash",Gv);const Yv=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Vv=de("history",Yv);const Qv=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],Zv=de("inbox",Qv);const Xv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Kv=de("info",Xv);const Jv=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Xi=de("layout-dashboard",Jv);const Fv=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Iv=de("lightbulb",Fv);const Pv=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],qe=de("loader-circle",Pv);const Wv=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],e1=de("log-in",Wv);const t1=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Kd=de("log-out",t1);const a1=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],s1=de("map-pin",a1);const n1=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],rh=de("menu",n1);const l1=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],r1=de("message-square",l1);const i1=[["path",{d:"M5 12h14",key:"1ays0h"}]],Wa=de("minus",i1);const c1=[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]],o1=de("mouse-pointer-click",c1);const d1=[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]],Es=de("package-check",d1);const u1=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],pa=de("package",u1);const m1=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],x1=de("pencil",m1);const f1=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],h1=de("play",f1);const p1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ve=de("plus",p1);const g1=[["path",{d:"M13 16H8",key:"wsln4y"}],["path",{d:"M14 8H8",key:"1l3xfs"}],["path",{d:"M16 12H8",key:"1fr5h0"}],["path",{d:"M4 3a1 1 0 0 1 1-1 1.3 1.3 0 0 1 .7.2l.933.6a1.3 1.3 0 0 0 1.4 0l.934-.6a1.3 1.3 0 0 1 1.4 0l.933.6a1.3 1.3 0 0 0 1.4 0l.933-.6a1.3 1.3 0 0 1 1.4 0l.934.6a1.3 1.3 0 0 0 1.4 0l.933-.6A1.3 1.3 0 0 1 19 2a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1 1.3 1.3 0 0 1-.7-.2l-.933-.6a1.3 1.3 0 0 0-1.4 0l-.934.6a1.3 1.3 0 0 1-1.4 0l-.933-.6a1.3 1.3 0 0 0-1.4 0l-.933.6a1.3 1.3 0 0 1-1.4 0l-.934-.6a1.3 1.3 0 0 0-1.4 0l-.933.6a1.3 1.3 0 0 1-.7.2 1 1 0 0 1-1-1z",key:"ycz6yz"}]],ih=de("receipt-text",g1);const y1=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ch=de("refresh-cw",y1);const b1=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],v1=de("rotate-ccw",b1);const j1=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Vt=de("search",j1);const N1=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],oh=de("send",N1);const S1=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],dh=de("settings",S1);const _1=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],w1=de("shield-check",_1);const k1=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],C1=de("shield",k1);const z1=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],_t=de("shopping-cart",z1);const E1=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],nn=de("sparkles",E1);const T1=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],nr=de("star",T1);const O1=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ts=de("trash-2",O1);const R1=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],uh=de("trending-down",R1);const A1=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],D1=de("trending-up",A1);const M1=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],jt=de("triangle-alert",M1);const L1=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],mr=de("truck",L1);const q1=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],U1=de("user",q1);const B1=[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]],Pn=de("utensils-crossed",B1);const H1=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Sa=de("users",H1);const G1=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],mh=de("wifi-off",G1);const $1=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],xf=de("wifi",$1);const Y1=[["path",{d:"M8 22h8",key:"rmew8v"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M12 15v7",key:"t2xh3l"}],["path",{d:"M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z",key:"10ffi3"}]],fa=de("wine",Y1);const V1=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Q1=de("wrench",V1);const Z1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Te=de("x",Z1);function X1(){const[l,i]=u.useState(""),[o,d]=u.useState(""),[x,f]=u.useState(!1),[h,v]=u.useState(""),[p,g]=u.useState(!1),j=Os(),{dispatch:b}=cn();async function y(z){z.preventDefault(),v(""),g(!0);try{const S=await If.login(l,o);localStorage.setItem("kcl_token",S.token),b({type:"LOGIN",payload:{user:S.user,camps:S.camps}}),j("/app")}catch(S){v(S.message)}finally{g(!1)}}return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-green-100 flex items-center justify-center p-4",children:t.jsxs("div",{className:"w-full max-w-md",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-600 rounded-2xl mb-4",children:t.jsx("span",{className:"text-white text-2xl font-bold",children:"KC"})}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"KCL Stores"}),t.jsx("p",{className:"text-gray-500 mt-1",children:"Karibu Camps  Inventory Management"})]}),t.jsxs("form",{onSubmit:y,className:"bg-white rounded-2xl shadow-lg p-8",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Manager Login"}),h&&t.jsx("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm",children:h}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),t.jsx("input",{type:"text",value:l,onChange:z=>i(z.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition",placeholder:"Enter username",autoComplete:"username",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:x?"text":"password",value:o,onChange:z=>d(z.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition pr-12",placeholder:"Enter password",autoComplete:"current-password",required:!0}),t.jsx("button",{type:"button",onClick:()=>f(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:x?t.jsx(Av,{size:20}):t.jsx(Mv,{size:20})})]})]})]}),t.jsxs("button",{type:"submit",disabled:p,className:"w-full mt-6 bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-4 rounded-xl transition flex items-center justify-center gap-2 disabled:opacity-50",children:[p?t.jsx(qe,{size:20,className:"animate-spin"}):t.jsx(e1,{size:20}),p?"Signing in...":"Sign In"]}),t.jsx("div",{className:"mt-6 text-center",children:t.jsx(we,{to:"/pin-login",className:"text-green-600 hover:text-green-700 text-sm font-medium",children:"Camp Staff? Login with PIN "})})]})]})})}function K1(){const[l,i]=u.useState(""),[o,d]=u.useState(""),[x,f]=u.useState("username"),[h,v]=u.useState(""),[p,g]=u.useState(!1),[j,b]=u.useState([]),[y,z]=u.useState(!0),S=Os(),{dispatch:O}=cn();u.useEffect(()=>{async function L(){try{const X=((await an.list()).users||[]).filter(ge=>ge.is_active&&ge.pin_enabled);b(X)}catch(te){console.error("Failed to load staff:",te)}finally{z(!1)}}L()},[]);function C(L){if(o.length<4){const te=o+L;d(te),te.length===4&&k(te)}}function w(){d(o.slice(0,-1))}async function k(L){v(""),g(!0);try{const te=await If.pinLogin(l,L);localStorage.setItem("kcl_token",te.token),O({type:"LOGIN",payload:{user:te.user,camps:te.camps}}),S("/app")}catch(te){v(te.message),d("")}finally{g(!1)}}function M(L){L.preventDefault(),l.trim()&&(f("pin"),v(""))}const $=j.find(L=>L.username===l);return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-green-100 flex items-center justify-center p-4",children:t.jsxs("div",{className:"w-full max-w-sm",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-600 rounded-2xl mb-4",children:t.jsx("span",{className:"text-white text-2xl font-bold",children:"KC"})}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"KCL Stores"}),t.jsx("p",{className:"text-gray-500 mt-1",children:"Camp Staff Login"})]}),t.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[h&&t.jsx("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm text-center",children:h}),x==="username"?t.jsxs("form",{onSubmit:M,children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Staff Member"}),y?t.jsxs("div",{className:"flex items-center justify-center py-4 text-gray-400 gap-2",children:[t.jsx(qe,{size:18,className:"animate-spin"}),t.jsx("span",{className:"text-sm",children:"Loading staff..."})]}):j.length>0?t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:l,onChange:L=>i(L.target.value),className:"w-full px-4 py-4 text-lg border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none appearance-none bg-white",required:!0,children:[t.jsx("option",{value:"",children:" Pick your name "}),j.map(L=>t.jsxs("option",{value:L.username,children:[L.name," (",L.camp_code||"HO",")"]},L.id))]}),t.jsx(vt,{size:20,className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]}):t.jsx("input",{type:"text",value:l,onChange:L=>i(L.target.value),className:"w-full px-4 py-4 text-lg border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",placeholder:"Enter username",autoFocus:!0,required:!0}),t.jsx("button",{type:"submit",disabled:!l,className:"w-full mt-4 bg-green-600 hover:bg-green-700 disabled:bg-gray-300 text-white font-medium py-4 rounded-xl transition text-lg",children:"Next"})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("p",{className:"text-gray-500 text-sm",children:"Logging in as"}),t.jsx("p",{className:"font-semibold text-gray-900",children:$?.name||l}),$?.camp_code&&t.jsx("p",{className:"text-xs text-gray-400",children:$.camp_code}),t.jsx("button",{onClick:()=>{f("username"),d(""),v("")},className:"text-green-600 text-sm mt-1",children:"Change"})]}),t.jsx("p",{className:"text-center text-sm text-gray-600 mb-4",children:"Enter 4-digit PIN"}),t.jsx("div",{className:"flex justify-center gap-4 mb-8",children:[0,1,2,3].map(L=>t.jsx("div",{className:`w-4 h-4 rounded-full transition ${L<o.length?"bg-green-600 scale-110":"bg-gray-200"}`},L))}),p&&t.jsx("div",{className:"flex justify-center mb-4",children:t.jsx(qe,{size:24,className:"animate-spin text-green-600"})}),t.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[[1,2,3,4,5,6,7,8,9].map(L=>t.jsx("button",{onClick:()=>C(String(L)),disabled:p,className:"h-16 text-2xl font-medium text-gray-800 bg-gray-50 hover:bg-gray-100 active:bg-green-50 rounded-xl transition disabled:opacity-50",children:L},L)),t.jsx("div",{})," ",t.jsx("button",{onClick:()=>C("0"),disabled:p,className:"h-16 text-2xl font-medium text-gray-800 bg-gray-50 hover:bg-gray-100 active:bg-green-50 rounded-xl transition disabled:opacity-50",children:"0"}),t.jsx("button",{onClick:w,disabled:p,className:"h-16 flex items-center justify-center text-gray-500 hover:text-gray-700 bg-gray-50 hover:bg-gray-100 rounded-xl transition disabled:opacity-50",children:t.jsx(Ov,{size:24})})]})]}),t.jsx("div",{className:"mt-6 text-center",children:t.jsx(we,{to:"/login",className:"text-green-600 hover:text-green-700 text-sm font-medium",children:" Manager Login (Password)"})})]})]})})}const ff={out:"bg-red-100 text-red-700",critical:"bg-red-100 text-red-700",low:"bg-amber-100 text-amber-700",ok:"bg-green-100 text-green-700",excess:"bg-blue-100 text-blue-700",A:"bg-red-100 text-red-700",B:"bg-amber-100 text-amber-700",C:"bg-gray-100 text-gray-600",ambient:"bg-gray-100 text-gray-600",chilled:"bg-blue-100 text-blue-700",frozen:"bg-cyan-100 text-cyan-700",hazardous:"bg-red-100 text-red-700",draft:"bg-gray-100 text-gray-600",submitted:"bg-blue-100 text-blue-700",pending_review:"bg-amber-100 text-amber-700",queried:"bg-orange-100 text-orange-700",stores_approved:"bg-green-100 text-green-700",stores_partial:"bg-yellow-100 text-yellow-700",stores_rejected:"bg-red-100 text-red-700",procurement_ready:"bg-indigo-100 text-indigo-700",dispatching:"bg-purple-100 text-purple-700",dispatched:"bg-purple-100 text-purple-700",in_transit:"bg-violet-100 text-violet-700",delivered:"bg-teal-100 text-teal-700",received:"bg-green-100 text-green-700",closed:"bg-gray-100 text-gray-600",high_risk:"bg-red-100 text-red-700",medium_risk:"bg-amber-100 text-amber-700",low_risk:"bg-green-100 text-green-700",non_food:"bg-gray-100 text-gray-600",pending:"bg-amber-100 text-amber-700",confirmed:"bg-green-100 text-green-700",partial:"bg-yellow-100 text-yellow-700",cancelled:"bg-red-100 text-red-700",kitchen:"bg-orange-100 text-orange-700",housekeeping:"bg-violet-100 text-violet-700",bar:"bg-pink-100 text-pink-700",maintenance:"bg-slate-100 text-slate-700",guest:"bg-teal-100 text-teal-700",office:"bg-sky-100 text-sky-700",other:"bg-gray-100 text-gray-600",good:"bg-green-100 text-green-700",damaged:"bg-red-100 text-red-700",short:"bg-amber-100 text-amber-700",success:"bg-green-100 text-green-700",warning:"bg-amber-100 text-amber-700",danger:"bg-red-100 text-red-700",info:"bg-blue-100 text-blue-700",default:"bg-gray-100 text-gray-600"},J1={pending_review:"Pending Review",stores_approved:"Approved",stores_partial:"Partial",stores_rejected:"Rejected",procurement_ready:"Procurement",in_transit:"In Transit",high_risk:"High Risk",medium_risk:"Medium Risk",low_risk:"Low Risk",non_food:"Non-Food"};function Ye({variant:l="default",children:i,className:o=""}){const d=ff[l]||ff.default,x=i||J1[l]||l?.replace(/_/g," ");return t.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium capitalize ${d} ${o}`,children:x})}function dt({message:l="Loading..."}){return t.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[t.jsx(qe,{size:32,className:"animate-spin text-green-600 mb-3"}),t.jsx("p",{className:"text-sm text-gray-500",children:l})]})}function F1(){const l=Ie(),{campId:i}=ya(),[o,d]=u.useState(null),[x,f]=u.useState(null),[h,v]=u.useState(!0),[p,g]=u.useState("");u.useEffect(()=>{j()},[i]);async function j(){v(!0),g("");try{const S=i||l?.camp_id,[O,C]=await Promise.all([Gb.get(S),Fn.summary(S).catch(()=>null)]);d(O),C&&f(C.alerts)}catch(S){g(S.message)}finally{v(!1)}}const b=()=>{const S=new Date().getHours();return S<12?"Good morning":S<17?"Good afternoon":"Good evening"};function y(S){return S?S>=1e6?`TZS ${(S/1e6).toFixed(1)}M`:S>=1e3?`TZS ${(S/1e3).toFixed(0)}K`:`TZS ${Math.round(S).toLocaleString()}`:"TZS 0"}function z(S){if(!S)return"";const O=new Date(S),w=new Date-O,k=Math.floor(w/6e4);if(k<60)return`${k}m ago`;const M=Math.floor(k/60);return M<24?`${M}h ago`:O.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}return h&&!o?t.jsx(dt,{message:"Loading dashboard..."}):t.jsxs("div",{children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[b(),", ",l?.name?.split(" ")[0]]}),t.jsxs("p",{className:"text-gray-500 mt-1",children:[l?.camp_name||"Head Office","  ",new Date().toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"})]})]}),p&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm",children:[p,t.jsx("button",{onClick:j,className:"ml-2 underline",children:"Retry"})]}),t.jsxs("div",{"data-guide":"dashboard-stats",className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[t.jsx(Ai,{icon:_t,label:"Pending Orders",value:o?.pending_orders??0,color:"blue",link:"/app/orders"}),t.jsx(Ai,{icon:jt,label:"Low Stock Items",value:x?x.low_stock+x.out_of_stock:o?.low_stock_items??0,color:"amber",link:"/app/alerts"}),t.jsx(Ai,{icon:Es,label:"Pending Receipts",value:o?.pending_receipts??0,color:"green",link:"/app/receive"}),t.jsx(Ai,{icon:zs,label:"Issues Today",value:o?.issues_today??0,color:"purple",link:"/app/issue"})]}),o&&t.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-700 rounded-xl p-5 mb-6 text-white",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-green-100 text-sm",children:"Total Stock Value"}),t.jsx("p",{className:"text-3xl font-bold mt-1",children:y(o.total_stock_value)})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-green-100 text-sm",children:"Active Items"}),t.jsx("p",{className:"text-2xl font-bold mt-1",children:o.items_count?.toLocaleString()})]})]})}),x&&x.total_alerts>0&&t.jsxs(we,{to:"/app/alerts",className:"flex items-center gap-3 bg-amber-50 border border-amber-200 rounded-xl p-4 mb-6 hover:bg-amber-100 transition",children:[t.jsx(ur,{size:20,className:"text-amber-600 flex-shrink-0"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("p",{className:"text-sm font-medium text-amber-800",children:[x.total_alerts," stock alerts require attention"]}),t.jsxs("p",{className:"text-xs text-amber-600 mt-0.5",children:[x.out_of_stock>0&&`${x.out_of_stock} out of stock  `,x.critical>0&&`${x.critical} critical  `,x.stockout_7days>0&&`${x.stockout_7days} running out in 7 days  `,x.dead_stock>0&&`${x.dead_stock} dead stock`]})]}),t.jsx(sr,{size:16,className:"text-amber-400"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[t.jsx("h2",{className:"font-semibold text-gray-900 mb-4",children:"Quick Actions"}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx(Di,{to:"/app/orders/new",icon:_t,label:"New Order",color:"green"}),t.jsx(Di,{to:"/app/issue/new",icon:zs,label:"New Issue",color:"blue"}),t.jsx(Di,{to:"/app/stock",icon:Ia,label:"Check Stock",color:"amber"}),t.jsx(Di,{to:"/app/items",icon:D1,label:"Items List",color:"gray"})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"font-semibold text-gray-900",children:"Recent Orders"}),t.jsxs(we,{to:"/app/orders",className:"text-green-600 text-sm font-medium flex items-center gap-1",children:["View all ",t.jsx(sr,{size:14})]})]}),o?.recent_orders?.length?t.jsx("div",{className:"space-y-2",children:o.recent_orders.map(S=>t.jsxs(we,{to:`/app/orders/${S.id}`,className:"flex items-center gap-3 p-2.5 rounded-lg hover:bg-gray-50 transition -mx-2",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[t.jsx("span",{className:"text-sm font-mono font-medium text-gray-900",children:S.order_number}),t.jsx(Ye,{variant:S.status})]}),t.jsxs("p",{className:"text-xs text-gray-400",children:[S.camp_code,"  ",S.created_by,"  ",z(S.created_at)]})]}),t.jsx("span",{className:"text-sm font-semibold text-gray-700 flex-shrink-0",children:y(S.total_value)})]},S.id))}):t.jsxs("div",{className:"text-center py-6",children:[t.jsx(_t,{size:32,className:"mx-auto text-gray-200 mb-2"}),t.jsx("p",{className:"text-sm text-gray-400",children:"No recent orders"})]})]})]}),o?.low_stock_alerts?.length>0&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h2",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[t.jsx(jt,{size:18,className:"text-amber-500"}),"Low Stock Alerts"]}),t.jsxs(we,{to:"/app/alerts",className:"text-green-600 text-sm font-medium flex items-center gap-1",children:["View all ",t.jsx(sr,{size:14})]})]}),t.jsx("div",{className:"hidden lg:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-100",children:[t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 pb-2",children:"Item"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 pb-2",children:"Camp"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 pb-2",children:"Current"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 pb-2",children:"Par Level"}),t.jsx("th",{className:"text-center text-xs font-medium text-gray-500 pb-2",children:"Status"})]})}),t.jsx("tbody",{children:o.low_stock_alerts.map((S,O)=>t.jsxs("tr",{className:"border-b border-gray-50",children:[t.jsxs("td",{className:"py-2.5",children:[t.jsx(we,{to:`/app/items/${S.item_id}`,className:"text-sm font-medium text-gray-900 hover:text-green-600",children:S.item_name}),t.jsx("p",{className:"text-xs text-gray-400",children:S.item_code})]}),t.jsx("td",{className:"py-2.5",children:t.jsx("span",{className:"text-sm text-gray-500",children:S.camp_code})}),t.jsx("td",{className:"py-2.5 text-right",children:t.jsxs("span",{className:`text-sm font-semibold ${S.stock_status==="out"?"text-red-600":S.stock_status==="critical"?"text-red-500":"text-amber-600"}`,children:[S.current_qty," ",S.uom]})}),t.jsx("td",{className:"py-2.5 text-right",children:t.jsxs("span",{className:"text-sm text-gray-400",children:[S.par_level||""," ",S.uom]})}),t.jsx("td",{className:"py-2.5 text-center",children:t.jsx(Ye,{variant:S.stock_status})})]},O))})]})}),t.jsx("div",{className:"lg:hidden space-y-2",children:o.low_stock_alerts.map((S,O)=>t.jsxs(we,{to:`/app/items/${S.item_id}`,className:"flex items-center gap-3 p-2.5 rounded-lg hover:bg-gray-50 transition -mx-2",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:S.item_name}),t.jsxs("p",{className:"text-xs text-gray-400",children:[S.item_code,"  ",S.camp_code]})]}),t.jsxs("div",{className:"text-right flex-shrink-0",children:[t.jsx("span",{className:`text-sm font-bold ${S.stock_status==="out"?"text-red-600":"text-amber-600"}`,children:S.current_qty}),t.jsx("span",{className:"text-xs text-gray-400 ml-0.5",children:S.uom})]}),t.jsx(Ye,{variant:S.stock_status})]},O))})]})]})}function Ai({icon:l,label:i,value:o,color:d,link:x}){const f={blue:"bg-blue-50 text-blue-600",amber:"bg-amber-50 text-amber-600",green:"bg-green-50 text-green-600",purple:"bg-purple-50 text-purple-600"};return t.jsxs(we,{to:x,className:"bg-white rounded-xl border border-gray-200 p-4 hover:shadow-md transition",children:[t.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center mb-3 ${f[d]}`,children:t.jsx(l,{size:20})}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o}),t.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:i})]})}function Di({to:l,icon:i,label:o,color:d}){const x={green:"bg-green-50 text-green-600 hover:bg-green-100",blue:"bg-blue-50 text-blue-600 hover:bg-blue-100",amber:"bg-amber-50 text-amber-600 hover:bg-amber-100",gray:"bg-gray-50 text-gray-600 hover:bg-gray-100"};return t.jsxs(we,{to:l,className:`flex items-center gap-3 p-3 rounded-lg transition ${x[d]}`,children:[t.jsx(i,{size:20}),t.jsx("span",{className:"text-sm font-medium",children:o})]})}function xr({value:l="",onChange:i,placeholder:o="Search...",debounce:d=300}){const[x,f]=u.useState(l),h=u.useRef(null);u.useEffect(()=>{f(l)},[l]);function v(g){const j=g.target.value;f(j),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{i(j)},d)}function p(){f(""),i("")}return t.jsxs("div",{className:"relative",children:[t.jsx(Vt,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",value:x,onChange:v,placeholder:o,className:"w-full pl-10 pr-10 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none"}),x&&t.jsx("button",{onClick:p,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t.jsx(Te,{size:16})})]})}function sl({page:l,totalPages:i,total:o,perPage:d,onChange:x}){if(i<=1)return null;const f=(l-1)*d+1,h=Math.min(l*d,o);return t.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[t.jsxs("p",{className:"text-sm text-gray-500",children:[f,"",h," of ",o.toLocaleString()]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>x(l-1),disabled:l<=1,className:"p-2 rounded-lg text-gray-500 hover:bg-gray-100 disabled:opacity-30 disabled:cursor-not-allowed",children:t.jsx(Oa,{size:18})}),t.jsxs("span",{className:"text-sm text-gray-600 px-2",children:[l," / ",i]}),t.jsx("button",{onClick:()=>x(l+1),disabled:l>=i,className:"p-2 rounded-lg text-gray-500 hover:bg-gray-100 disabled:opacity-30 disabled:cursor-not-allowed",children:t.jsx(ot,{size:18})})]})]})}function nl({icon:l=Zv,title:i="No data",message:o="",action:d}){return t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gray-100 rounded-full mb-4",children:t.jsx(l,{size:28,className:"text-gray-400"})}),t.jsx("h3",{className:"text-gray-900 font-medium mb-1",children:i}),o&&t.jsx("p",{className:"text-sm text-gray-500 mb-4",children:o}),d]})}function I1(){const[l,i]=u.useState(null),[o,d]=u.useState(!0),[x,f]=u.useState(""),[h,v]=u.useState({search:"",group:"",abc_class:"",storage_type:"",page:1}),[p,g]=u.useState(!1);u.useEffect(()=>{j()},[h]);async function j(){d(!0),f("");try{const S=await Qi.list({page:h.page,per_page:25,search:h.search,group:h.group,abc_class:h.abc_class,storage_type:h.storage_type});i(S)}catch(S){f(S.message)}finally{d(!1)}}function b(S){v(O=>({...O,search:S,page:1}))}function y(S,O){v(C=>({...C,[S]:O,page:1}))}const z=[h.group,h.abc_class,h.storage_type].filter(Boolean).length;return t.jsxs("div",{children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Items Catalog"}),t.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[l?.pagination?.total?.toLocaleString()||""," items"]})]})}),t.jsxs("div",{"data-guide":"items-search",className:"flex gap-2 mb-4",children:[t.jsx("div",{className:"flex-1",children:t.jsx(xr,{value:h.search,onChange:b,placeholder:"Search items by name or code..."})}),t.jsxs("button",{onClick:()=>g(!p),"data-guide":"items-filter-btn",className:`flex items-center gap-2 px-4 py-2.5 rounded-lg border text-sm font-medium transition ${z>0?"border-green-300 bg-green-50 text-green-700":"border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[t.jsx(lh,{size:16}),t.jsx("span",{className:"hidden sm:inline",children:"Filters"}),z>0&&t.jsx("span",{className:"w-5 h-5 bg-green-600 text-white rounded-full text-xs flex items-center justify-center",children:z})]})]}),p&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 mb-4",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Item Group"}),t.jsxs("select",{value:h.group,onChange:S=>y("group",S.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[t.jsx("option",{value:"",children:"All Groups"}),l?.groups?.map(S=>t.jsxs("option",{value:S.id,children:[S.code,"  ",S.name]},S.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"ABC Class"}),t.jsxs("select",{value:h.abc_class,onChange:S=>y("abc_class",S.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[t.jsx("option",{value:"",children:"All Classes"}),t.jsx("option",{value:"A",children:"A  High Value"}),t.jsx("option",{value:"B",children:"B  Medium Value"}),t.jsx("option",{value:"C",children:"C  Low Value"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Storage Type"}),t.jsxs("select",{value:h.storage_type,onChange:S=>y("storage_type",S.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[t.jsx("option",{value:"",children:"All Types"}),t.jsx("option",{value:"ambient",children:"Ambient"}),t.jsx("option",{value:"chilled",children:"Chilled"}),t.jsx("option",{value:"frozen",children:"Frozen"}),t.jsx("option",{value:"hazardous",children:"Hazardous"})]})]})]}),z>0&&t.jsx("button",{onClick:()=>v(S=>({...S,group:"",abc_class:"",storage_type:"",page:1})),className:"mt-3 text-sm text-red-600 hover:text-red-700 font-medium",children:"Clear all filters"})]}),x&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm",children:[x,t.jsx("button",{onClick:j,className:"ml-2 underline",children:"Retry"})]}),o&&!l&&t.jsx(dt,{message:"Loading items..."}),l&&t.jsx("div",{className:"bg-white rounded-xl border border-gray-200",children:l.items.length===0?t.jsx(nl,{icon:pa,title:"No items found",message:h.search?`No items matching "${h.search}"`:"No items in catalog"}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"hidden lg:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-100",children:[t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Code"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Item Name"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Group"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"UOM"}),t.jsx("th",{className:"text-center text-xs font-medium text-gray-500 px-4 py-3",children:"ABC"}),t.jsx("th",{className:"text-center text-xs font-medium text-gray-500 px-4 py-3",children:"Storage"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-3",children:"Price (TZS)"}),t.jsx("th",{className:"w-8"})]})}),t.jsx("tbody",{children:l.items.map(S=>t.jsxs("tr",{className:"border-b border-gray-50 hover:bg-gray-50 transition",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm font-mono text-gray-900",children:S.item_code})}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx(we,{to:`/app/items/${S.id}`,className:"text-sm font-medium text-gray-900 hover:text-green-600",children:S.name}),S.is_critical&&t.jsx("span",{className:"ml-1 text-red-500 text-xs",title:"Critical item",children:""}),S.is_perishable&&t.jsx("span",{className:"ml-1 text-amber-500 text-xs",title:"Perishable",children:""})]}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-gray-500",children:S.group_code})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-gray-500",children:S.stock_uom})}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx(Ye,{variant:S.abc_class,children:S.abc_class})}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx(Ye,{variant:S.storage_type,children:S.storage_type})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:"text-sm text-gray-900",children:S.last_purchase_price?Math.round(S.last_purchase_price).toLocaleString():""})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(we,{to:`/app/items/${S.id}`,children:t.jsx(ot,{size:16,className:"text-gray-400"})})})]},S.id))})]})}),t.jsx("div",{className:"lg:hidden divide-y divide-gray-100",children:l.items.map(S=>t.jsxs(we,{to:`/app/items/${S.id}`,className:"flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[t.jsx("span",{className:"text-xs font-mono text-gray-400",children:S.item_code}),t.jsx(Ye,{variant:S.abc_class,children:S.abc_class}),S.is_critical&&t.jsx("span",{className:"text-red-500 text-xs",children:""})]}),t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:S.name}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.jsx("span",{className:"text-xs text-gray-400",children:S.group_name}),t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsx("span",{className:"text-xs text-gray-400",children:S.stock_uom}),S.last_purchase_price&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsxs("span",{className:"text-xs text-gray-500",children:["TZS ",Math.round(S.last_purchase_price).toLocaleString()]})]})]})]}),t.jsx(ot,{size:16,className:"text-gray-400 flex-shrink-0"})]},S.id))}),t.jsx("div",{className:"px-4 pb-4",children:t.jsx(sl,{page:l.pagination.page,totalPages:l.pagination.total_pages,total:l.pagination.total,perPage:l.pagination.per_page,onChange:S=>v(O=>({...O,page:S}))})})]})})]})}function P1(){const{id:l}=$i(),[i,o]=u.useState(null),[d,x]=u.useState(!0),[f,h]=u.useState("");u.useEffect(()=>{v()},[l]);async function v(){x(!0);try{const j=await Qi.get(l);o(j)}catch(j){h(j.message)}finally{x(!1)}}if(d)return t.jsx(dt,{message:"Loading item..."});if(f)return t.jsxs("div",{className:"text-center py-16",children:[t.jsx("p",{className:"text-red-600 mb-4",children:f}),t.jsx(we,{to:"/app/items",className:"text-green-600 font-medium",children:"Back to Items"})]});if(!i)return null;const p=i.item,g=j=>j?`TZS ${Math.round(j).toLocaleString()}`:"";return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx(we,{to:"/app/items",className:"p-2 hover:bg-gray-100 rounded-lg transition",children:t.jsx(tl,{size:20,className:"text-gray-600"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[t.jsx("span",{className:"text-sm font-mono text-gray-400",children:p.item_code}),t.jsx(Ye,{variant:p.abc_class,children:p.abc_class}),t.jsx(Ye,{variant:p.storage_type,children:p.storage_type}),p.is_critical&&t.jsx(Ye,{variant:"danger",children:"Critical"})]}),t.jsx("h1",{className:"text-xl font-bold text-gray-900 truncate",children:p.name})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[t.jsxs("h2",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx(pa,{size:18}),"Item Details"]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(at,{label:"Item Code",value:p.item_code}),t.jsx(at,{label:"SAP Item No",value:p.sap_item_no||""}),t.jsx(at,{label:"Group",value:p.group_name?`${p.group_code}  ${p.group_name}`:""}),t.jsx(at,{label:"Sub-Category",value:p.sub_cat_name?`${p.sub_cat_code}  ${p.sub_cat_name}`:""}),t.jsx(at,{label:"Cost Center",value:p.cost_center_name||""}),t.jsx(at,{label:"Manufacturer",value:p.manufacturer||""}),t.jsx(at,{label:"Barcode",value:p.barcode||""}),t.jsx(at,{label:"Description",value:p.description||""})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[t.jsxs("h2",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx(Zi,{size:18}),"Units & Pricing"]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(at,{label:"Stock UOM",value:p.stock_uom_name||p.stock_uom||""}),t.jsx(at,{label:"Purchase UOM",value:p.purchase_uom_name||p.purchase_uom||""}),t.jsx(at,{label:"Issue UOM",value:p.issue_uom_name||p.issue_uom||""}),t.jsx(at,{label:"Pack Size",value:p.standard_pack_size||""}),t.jsx(at,{label:"Purchase  Stock",value:`${p.purchase_to_stock_factor}x`}),t.jsx(at,{label:"Stock  Issue",value:`${p.stock_to_issue_factor}x`}),t.jsx(at,{label:"Last Purchase Price",value:g(p.last_purchase_price),highlight:!0}),t.jsx(at,{label:"Weighted Avg Cost",value:g(p.weighted_avg_cost)}),t.jsx(at,{label:"Min Order Qty",value:p.min_order_qty||""}),t.jsx(at,{label:"Yield %",value:p.yield_percentage?`${p.yield_percentage}%`:""})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[t.jsxs("h2",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx(w1,{size:18}),"Storage & Safety"]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(at,{label:"Storage Type",value:p.storage_type}),t.jsx(at,{label:"Temp Range",value:p.storage_temp_min!=null||p.storage_temp_max!=null?`${p.storage_temp_min??"?"}C to ${p.storage_temp_max??"?"}C`:""}),t.jsx(at,{label:"HACCP Category",value:p.haccp_category?.replace(/_/g," ")||""}),t.jsx(at,{label:"Perishable",value:p.is_perishable?"Yes":"No"}),t.jsx(at,{label:"Shelf Life",value:p.shelf_life_days?`${p.shelf_life_days} days`:""}),t.jsx(at,{label:"After Opening",value:p.shelf_life_after_opening_days?`${p.shelf_life_after_opening_days} days`:""}),t.jsx(at,{label:"Allergen Info",value:p.allergen_info||""})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[t.jsxs("h2",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx(mr,{size:18}),"Stock by Camp"]}),i.stock_balances.length===0?t.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No stock records"}):t.jsx("div",{className:"space-y-3",children:i.stock_balances.map(j=>t.jsxs("div",{className:"border border-gray-100 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("span",{className:"text-sm font-medium text-gray-900",children:j.camp_name}),t.jsx(Ye,{variant:j.stock_status,children:j.stock_status})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"text-lg font-bold text-gray-900",children:[j.current_qty.toLocaleString()," ",t.jsx("span",{className:"text-xs text-gray-400 font-normal",children:p.stock_uom})]}),t.jsxs("span",{className:"text-xs text-gray-400",children:["Par: ",j.par_level??""]})]}),j.days_stock_on_hand!=null&&t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[j.days_stock_on_hand," days on hand"]})]},j.camp_id))})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[t.jsx("h2",{className:"font-semibold text-gray-900 mb-4",children:"Suppliers"}),i.suppliers.length===0?t.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No suppliers linked"}):t.jsx("div",{className:"space-y-2",children:i.suppliers.map(j=>t.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-50 last:border-0",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[j.supplier_name,j.is_preferred&&t.jsx("span",{className:"ml-1 text-green-600 text-xs",children:""})]}),t.jsxs("p",{className:"text-xs text-gray-400",children:["Lead: ",j.lead_time_days?`${j.lead_time_days}d`:""]})]}),t.jsx("span",{className:"text-sm text-gray-600",children:j.unit_price?g(j.unit_price):""})]},j.supplier_id))})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[t.jsxs("h2",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx(Cs,{size:18}),"Recent Movements"]}),i.recent_movements.length===0?t.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No movements yet"}):t.jsx("div",{className:"space-y-2",children:i.recent_movements.map(j=>t.jsx("div",{className:"flex items-center justify-between py-2 border-b border-gray-50 last:border-0",children:t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm text-gray-900",children:[t.jsxs("span",{className:j.type==="receipt"||j.type==="adjustment_in"?"text-green-600":"text-red-600",children:[j.type==="receipt"||j.type==="adjustment_in"?"+":"",j.quantity]}),t.jsx("span",{className:"text-gray-400 ml-1",children:j.camp_code})]}),t.jsxs("p",{className:"text-xs text-gray-400",children:[j.reference_number||j.type,"  ",new Date(j.created_at).toLocaleDateString("en-GB")]})]})},j.id))})]})]})]})]})}function at({label:l,value:i,highlight:o}){return t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400 mb-0.5",children:l}),t.jsx("p",{className:`text-sm ${o?"font-semibold text-gray-900":"text-gray-700"}`,children:i})]})}function W1(){const l=Ie(),{campId:i}=ya(),[o,d]=u.useState(null),[x,f]=u.useState(!0),[h,v]=u.useState(""),[p,g]=u.useState({camp_id:i||l?.camp_id||"",search:"",status:"",group:"",page:1}),[j,b]=u.useState(!1);u.useEffect(()=>{g(w=>({...w,camp_id:i||l?.camp_id||"",page:1}))},[i]),u.useEffect(()=>{y()},[p]);async function y(){f(!0),v("");try{const w=await $b.list({camp_id:p.camp_id,page:p.page,per_page:25,search:p.search,status:p.status,group:p.group});d(w)}catch(w){v(w.message)}finally{f(!1)}}function z(w){g(k=>({...k,search:w,page:1}))}const S=[p.status,p.group].filter(Boolean).length,O=o?.summary,C={out:"bg-red-600",critical:"bg-red-500",low:"bg-amber-500",ok:"bg-green-500",excess:"bg-blue-500"};return t.jsxs("div",{children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Stock Balances"}),t.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[o?.pagination?.total?.toLocaleString()||""," items tracked"]})]})}),O&&t.jsxs("div",{"data-guide":"stock-summary",className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3 mb-4",children:[t.jsx(Jn,{label:"Total Value",value:`TZS ${(O.total_value/1e6).toFixed(1)}M`,color:"gray"}),t.jsx(Jn,{label:"OK",value:O.ok_count,color:"green",onClick:()=>g(w=>({...w,status:w.status==="ok"?"":"ok",page:1})),active:p.status==="ok"}),t.jsx(Jn,{label:"Low",value:O.low_count,color:"amber",onClick:()=>g(w=>({...w,status:w.status==="low"?"":"low",page:1})),active:p.status==="low"}),t.jsx(Jn,{label:"Critical",value:O.critical_count,color:"red",onClick:()=>g(w=>({...w,status:w.status==="critical"?"":"critical",page:1})),active:p.status==="critical"}),t.jsx(Jn,{label:"Out",value:O.out_count,color:"red",onClick:()=>g(w=>({...w,status:w.status==="out"?"":"out",page:1})),active:p.status==="out"}),t.jsx(Jn,{label:"Excess",value:O.excess_count,color:"blue",onClick:()=>g(w=>({...w,status:w.status==="excess"?"":"excess",page:1})),active:p.status==="excess"})]}),t.jsxs("div",{"data-guide":"stock-search",className:"flex gap-2 mb-4",children:[t.jsx("div",{className:"flex-1",children:t.jsx(xr,{value:p.search,onChange:z,placeholder:"Search stock by item name or code..."})}),ln(l?.role)&&t.jsxs("select",{value:p.camp_id,onChange:w=>g(k=>({...k,camp_id:w.target.value,page:1})),className:"px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[t.jsx("option",{value:"",children:"All Camps"}),o?.camps?.map(w=>t.jsxs("option",{value:w.id,children:[w.code,"  ",w.name]},w.id))]}),t.jsxs("button",{onClick:()=>b(!j),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg border text-sm font-medium transition ${S>0?"border-green-300 bg-green-50 text-green-700":"border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[t.jsx(lh,{size:16}),t.jsx("span",{className:"hidden sm:inline",children:"Filters"})]})]}),j&&t.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4 mb-4",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Status"}),t.jsxs("select",{value:p.status,onChange:w=>g(k=>({...k,status:w.target.value,page:1})),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[t.jsx("option",{value:"",children:"All Status"}),t.jsx("option",{value:"out",children:"Out of Stock"}),t.jsx("option",{value:"critical",children:"Critical"}),t.jsx("option",{value:"low",children:"Low"}),t.jsx("option",{value:"ok",children:"OK"}),t.jsx("option",{value:"excess",children:"Excess"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Item Group"}),t.jsxs("select",{value:p.group,onChange:w=>g(k=>({...k,group:w.target.value,page:1})),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[t.jsx("option",{value:"",children:"All Groups"}),o?.groups?.map(w=>t.jsxs("option",{value:w.id,children:[w.code,"  ",w.name]},w.id))]})]})]})}),h&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm",children:[h,t.jsx("button",{onClick:y,className:"ml-2 underline",children:"Retry"})]}),x&&!o&&t.jsx(dt,{message:"Loading stock..."}),o&&t.jsx("div",{className:"bg-white rounded-xl border border-gray-200",children:o.stock.length===0?t.jsx(nl,{icon:Ia,title:"No stock records",message:"Stock balances will appear here once items are received"}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"hidden lg:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-100",children:[t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Item"}),!p.camp_id&&t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Camp"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-3",children:"Qty"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-3",children:"Par"}),t.jsx("th",{className:"text-center text-xs font-medium text-gray-500 px-4 py-3",children:"Status"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-3",children:"Value (TZS)"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-3",children:"Days OH"}),t.jsx("th",{className:"w-8"})]})}),t.jsx("tbody",{children:o.stock.map(w=>t.jsxs("tr",{className:"border-b border-gray-50 hover:bg-gray-50 transition",children:[t.jsxs("td",{className:"px-4 py-3",children:[t.jsx(we,{to:`/app/items/${w.item_id}`,className:"text-sm font-medium text-gray-900 hover:text-green-600",children:w.item_name}),t.jsxs("p",{className:"text-xs text-gray-400",children:[w.item_code,"  ",w.uom]})]}),!p.camp_id&&t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-gray-600",children:w.camp_code})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:`text-sm font-semibold ${w.stock_status==="out"||w.stock_status==="critical"?"text-red-600":w.stock_status==="low"?"text-amber-600":"text-gray-900"}`,children:w.current_qty.toLocaleString()})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:"text-sm text-gray-400",children:w.par_level??""})}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx(Ye,{variant:w.stock_status,children:w.stock_status})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:"text-sm text-gray-600",children:Math.round(w.current_value).toLocaleString()})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:"text-sm text-gray-400",children:w.days_stock_on_hand??""})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(we,{to:`/app/items/${w.item_id}`,children:t.jsx(ot,{size:16,className:"text-gray-400"})})})]},w.id))})]})}),t.jsx("div",{className:"lg:hidden divide-y divide-gray-100",children:o.stock.map(w=>t.jsxs(we,{to:`/app/items/${w.item_id}`,className:"flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition",children:[t.jsx("div",{className:`w-2 h-10 rounded-full ${C[w.stock_status]||"bg-gray-300"}`}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:w.item_name}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.jsx("span",{className:"text-xs text-gray-400",children:w.item_code}),!p.camp_id&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsx("span",{className:"text-xs text-gray-400",children:w.camp_code})]})]})]}),t.jsxs("div",{className:"text-right flex-shrink-0",children:[t.jsx("p",{className:`text-sm font-bold ${w.stock_status==="out"||w.stock_status==="critical"?"text-red-600":"text-gray-900"}`,children:w.current_qty.toLocaleString()}),t.jsx("p",{className:"text-xs text-gray-400",children:w.uom})]}),t.jsx(ot,{size:16,className:"text-gray-400 flex-shrink-0"})]},w.id))}),t.jsx("div",{className:"px-4 pb-4",children:t.jsx(sl,{page:o.pagination.page,totalPages:o.pagination.total_pages,total:o.pagination.total,perPage:o.pagination.per_page,onChange:w=>g(k=>({...k,page:w}))})})]})})]})}function Jn({label:l,value:i,color:o,onClick:d,active:x}){const f={gray:"border-gray-200",green:"border-green-200 hover:border-green-400",amber:"border-amber-200 hover:border-amber-400",red:"border-red-200 hover:border-red-400",blue:"border-blue-200 hover:border-blue-400"};return t.jsxs("button",{onClick:d,disabled:!d,className:`bg-white rounded-xl border p-3 text-center transition ${x?"ring-2 ring-green-500 border-green-500":f[o]||f.gray} ${d?"cursor-pointer":"cursor-default"}`,children:[t.jsx("p",{className:"text-lg font-bold text-gray-900",children:i}),t.jsx("p",{className:"text-xs text-gray-500",children:l})]})}const ej=[{key:"",label:"All"},{key:"submitted",label:"Submitted"},{key:"pending_review",label:"Pending"},{key:"queried",label:"Queried"},{key:"stores_approved",label:"Approved"},{key:"stores_rejected",label:"Rejected"},{key:"dispatching",label:"Dispatching"},{key:"received",label:"Received"}];function tj(){Ie();const{campId:l}=ya(),[i,o]=u.useState(null),[d,x]=u.useState(!0),[f,h]=u.useState(""),[v,p]=u.useState({status:"",search:"",page:1});u.useEffect(()=>{g()},[v,l]);async function g(){x(!0),h("");try{const y={page:v.page,per_page:20,status:v.status,search:v.search};l&&(y.camp_id=l);const z=await tn.list(y);o(z)}catch(y){h(y.message)}finally{x(!1)}}function j(y){return y?new Date(y).toLocaleDateString("en-GB",{day:"numeric",month:"short"}):""}function b(y){return y?`TZS ${Math.round(y).toLocaleString()}`:""}return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Orders"}),t.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[i?.pagination?.total||0," orders"]})]}),t.jsxs(we,{to:"/app/orders/new","data-guide":"new-order-btn",className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-lg text-sm font-medium transition",children:[t.jsx(Ve,{size:18}),"New Order"]})]}),t.jsx("div",{"data-guide":"order-status-tabs",className:"flex gap-1.5 overflow-x-auto pb-2 mb-4 -mx-4 px-4 lg:mx-0 lg:px-0 scrollbar-none",children:ej.map(y=>{const z=y.key?i?.status_counts?.[y.key]||0:i?.pagination?.total||0;return t.jsxs("button",{onClick:()=>p(S=>({...S,status:y.key,page:1})),className:`inline-flex items-center justify-center gap-1.5 px-4 py-2.5 rounded-full text-xs font-semibold whitespace-nowrap transition-all min-h-0 ${v.status===y.key?"bg-green-600 text-white shadow-sm":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,style:{minHeight:"auto"},children:[y.label,z>0&&t.jsx("span",{className:`text-[10px] leading-none px-1.5 py-0.5 rounded-full ${v.status===y.key?"bg-green-700/50 text-white":"bg-gray-200 text-gray-500"}`,children:z})]},y.key)})}),t.jsx("div",{className:"mb-4","data-guide":"order-search",children:t.jsx(xr,{value:v.search,onChange:y=>p(z=>({...z,search:y,page:1})),placeholder:"Search by order number or camp..."})}),f&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm",children:[f,t.jsx("button",{onClick:g,className:"ml-2 underline",children:"Retry"})]}),d&&!i&&t.jsx(dt,{message:"Loading orders..."}),i&&t.jsx("div",{"data-guide":"orders-list",className:"bg-white rounded-xl border border-gray-200",children:i.orders.length===0?t.jsx(nl,{icon:_t,title:"No orders",message:v.status?`No ${v.status.replace(/_/g," ")} orders`:"Create your first order",action:t.jsxs(we,{to:"/app/orders/new",className:"inline-flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition",children:[t.jsx(Ve,{size:16})," New Order"]})}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"hidden lg:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-100",children:[t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Order #"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Camp"}),t.jsx("th",{className:"text-center text-xs font-medium text-gray-500 px-4 py-3",children:"Status"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-3",children:"Items"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-3",children:"Value"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Created"}),t.jsx("th",{className:"w-8"})]})}),t.jsx("tbody",{children:i.orders.map(y=>t.jsxs("tr",{className:"border-b border-gray-50 hover:bg-gray-50 transition",children:[t.jsxs("td",{className:"px-4 py-3",children:[t.jsx(we,{to:`/app/orders/${y.id}`,className:"text-sm font-mono font-medium text-gray-900 hover:text-green-600",children:y.order_number}),y.flagged_items>0&&t.jsx("span",{className:"ml-1 text-xs text-amber-500",title:`${y.flagged_items} flagged`,children:""})]}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("span",{className:"text-sm text-gray-600",children:y.camp_code}),t.jsx("span",{className:"text-xs text-gray-400 ml-1",children:y.camp_name})]}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx(Ye,{variant:y.status})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:"text-sm text-gray-900",children:y.total_items})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:"text-sm text-gray-600",children:b(y.total_value)})}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("span",{className:"text-sm text-gray-500",children:j(y.created_at)}),t.jsxs("span",{className:"text-xs text-gray-400 ml-1",children:["by ",y.created_by]})]}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(we,{to:`/app/orders/${y.id}`,children:t.jsx(ot,{size:16,className:"text-gray-400"})})})]},y.id))})]})}),t.jsx("div",{className:"lg:hidden divide-y divide-gray-100",children:i.orders.map(y=>t.jsxs(we,{to:`/app/orders/${y.id}`,className:"flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[t.jsx("span",{className:"text-sm font-mono font-medium text-gray-900",children:y.order_number}),t.jsx(Ye,{variant:y.status})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.jsx("span",{className:"text-xs text-gray-500",children:y.camp_name}),t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsxs("span",{className:"text-xs text-gray-500",children:[y.total_items," items"]}),t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsx("span",{className:"text-xs text-gray-500",children:j(y.created_at)})]})]}),t.jsx("div",{className:"text-right flex-shrink-0",children:t.jsx("p",{className:"text-sm font-semibold text-gray-900",children:b(y.total_value)})}),t.jsx(ot,{size:16,className:"text-gray-400 flex-shrink-0"})]},y.id))}),t.jsx("div",{className:"px-4 pb-4",children:t.jsx(sl,{page:i.pagination.page,totalPages:i.pagination.total_pages,total:i.pagination.total,perPage:i.pagination.per_page,onChange:y=>p(z=>({...z,page:y}))})})]})})]})}function aj(){const l=Ie(),i=Os(),[o,d]=u.useState([]),[x,f]=u.useState(""),[h,v]=u.useState(!1),[p,g]=u.useState(""),[j,b]=u.useState(""),[y,z]=u.useState([]),[S,O]=u.useState(!1),[C,w]=u.useState(!1),k=u.useRef(null),M=u.useRef(null);u.useEffect(()=>{j.length>=2?(M.current&&clearTimeout(M.current),M.current=setTimeout(()=>$(),300)):z([])},[j]);async function $(){O(!0);try{const se=await Qi.list({search:j,per_page:15,active:1}),ne=new Set(o.map(J=>J.item_id));z(se.items.filter(J=>!ne.has(J.id)))}catch(se){console.error("Search failed:",se)}finally{O(!1)}}function L(se){d(ne=>[...ne,{item_id:se.id,item_code:se.item_code,item_name:se.name,group_code:se.group_code,uom:se.stock_uom,price:se.last_purchase_price||se.weighted_avg_cost||0,qty:1}]),b(""),z([]),w(!1)}function te(se,ne){ne<1||d(J=>J.map((fe,Q)=>Q===se?{...fe,qty:ne}:fe))}function X(se){d(ne=>ne.filter((J,fe)=>fe!==se))}const ge=o.reduce((se,ne)=>se+ne.qty*ne.price,0);async function K(){if(o.length===0){g("Add at least one item to your order");return}g(""),v(!0);try{const se=await tn.create({notes:x||null,lines:o.map(ne=>({item_id:ne.item_id,qty:ne.qty}))});i(`/app/orders/${se.order.id}`)}catch(se){g(se.message)}finally{v(!1)}}return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx(we,{to:"/app/orders",className:"p-2 hover:bg-gray-100 rounded-lg transition",children:t.jsx(tl,{size:20,className:"text-gray-600"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"New Order"}),t.jsxs("p",{className:"text-sm text-gray-500",children:[l?.camp_name||"Your Camp","  ",o.length," items"]})]})]}),p&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm flex items-center gap-2",children:[t.jsx(jt,{size:16}),p]}),t.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4 mb-4",children:t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs("div",{className:"relative flex-1",children:[t.jsx(Vt,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{ref:k,type:"text",value:j,onChange:se=>{b(se.target.value),w(!0)},onFocus:()=>w(!0),placeholder:"Search items to add...",className:"w-full pl-10 pr-4 py-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none"}),j&&t.jsx("button",{onClick:()=>{b(""),z([]),w(!1)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t.jsx(Te,{size:16})})]})}),C&&(y.length>0||S)&&t.jsxs("div",{className:"absolute left-0 right-0 top-full mt-1 bg-white border border-gray-200 rounded-xl shadow-lg z-20 max-h-72 overflow-y-auto",children:[S&&t.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 text-sm text-gray-500",children:[t.jsx(qe,{size:16,className:"animate-spin"})," Searching..."]}),y.map(se=>t.jsxs("button",{onClick:()=>L(se),className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-green-50 transition text-left border-b border-gray-50 last:border-0",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[t.jsx("span",{className:"text-xs font-mono text-gray-400",children:se.item_code}),t.jsx(Ye,{variant:se.abc_class,children:se.abc_class})]}),t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:se.name}),t.jsxs("p",{className:"text-xs text-gray-400",children:[se.group_name,"  ",se.stock_uom]})]}),t.jsx(Ve,{size:18,className:"text-green-600 flex-shrink-0"})]},se.id)),!S&&y.length===0&&j.length>=2&&t.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"No items found"})]})]})}),o.length===0?t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center",children:[t.jsx(_t,{size:40,className:"mx-auto text-gray-300 mb-3"}),t.jsx("p",{className:"text-gray-500 text-sm",children:"Search and add items to your order above"})]}):t.jsx("div",{className:"bg-white rounded-xl border border-gray-200 mb-4",children:t.jsx("div",{className:"divide-y divide-gray-100",children:o.map((se,ne)=>t.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:se.item_name}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.jsx("span",{className:"text-xs font-mono text-gray-400",children:se.item_code}),t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsx("span",{className:"text-xs text-gray-400",children:se.uom}),se.price>0&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsxs("span",{className:"text-xs text-gray-500",children:["TZS ",Math.round(se.qty*se.price).toLocaleString()]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[t.jsx("button",{onClick:()=>te(ne,se.qty-1),className:"w-9 h-9 flex items-center justify-center rounded-lg bg-gray-100 hover:bg-gray-200 transition",children:t.jsx(Wa,{size:16})}),t.jsx("span",{className:"w-14 h-9 flex items-center justify-center text-sm font-bold text-gray-900 bg-gray-50 rounded-lg border border-gray-200",children:se.qty}),t.jsx("button",{onClick:()=>te(ne,se.qty+1),className:"w-9 h-9 flex items-center justify-center rounded-lg bg-gray-100 hover:bg-gray-200 transition",children:t.jsx(Ve,{size:16})})]}),t.jsx("button",{onClick:()=>X(ne),className:"p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition flex-shrink-0",children:t.jsx(Ts,{size:16})})]},se.item_id))})}),o.length>0&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Notes (optional)"}),t.jsx("textarea",{value:x,onChange:se=>f(se.target.value),placeholder:"Any special instructions or notes...",rows:2,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none resize-none"})]}),o.length>0&&t.jsx("div",{className:"sticky bottom-16 lg:bottom-0 bg-white border border-gray-200 rounded-xl p-4 shadow-lg",children:t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm text-gray-500",children:[o.length," items"]}),t.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["TZS ",Math.round(ge).toLocaleString()]})]}),t.jsx("button",{onClick:K,disabled:h,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white px-6 py-3 rounded-xl text-sm font-semibold transition",children:h?t.jsxs(t.Fragment,{children:[t.jsx(qe,{size:18,className:"animate-spin"}),"Submitting..."]}):t.jsxs(t.Fragment,{children:[t.jsx(_t,{size:18}),"Submit Order"]})})]})})]})}function sj(){const{id:l}=$i(),i=Ie(),[o,d]=u.useState(null),[x,f]=u.useState(!0),[h,v]=u.useState(""),[p,g]=u.useState(!1),[j,b]=u.useState({}),[y,z]=u.useState(""),[S,O]=u.useState(!1),[C,w]=u.useState(""),[k,M]=u.useState(!1);u.useEffect(()=>{$()},[l]);async function $(){f(!0);try{const Q=await tn.get(l);d(Q);const ce={};Q.lines.forEach(q=>{ce[q.id]={action:"approved",approved_qty:q.requested_qty,note:""}}),b(ce)}catch(Q){v(Q.message)}finally{f(!1)}}const L=ln(i?.role)&&o?.order?.status&&["submitted","pending_review","queried"].includes(o.order.status);function te(Q,ce,q){b(W=>({...W,[Q]:{...W[Q],[ce]:q}}))}async function X(){O(!0);try{const Q=o.lines.map(ce=>({line_id:ce.id,action:"approved"}));await tn.approve(l,Q),await $(),g(!1)}catch(Q){v(Q.message)}finally{O(!1)}}async function ge(){if(!y.trim()){v("Please provide a reason for rejection");return}O(!0);try{await tn.reject(l,y),await $(),g(!1)}catch(Q){v(Q.message)}finally{O(!1)}}async function K(){O(!0);try{const Q=Object.entries(j).map(([ce,q])=>({line_id:parseInt(ce),action:q.action,approved_qty:q.action==="adjusted"?q.approved_qty:void 0,note:q.note||void 0}));await tn.approve(l,Q),await $(),g(!1)}catch(Q){v(Q.message)}finally{O(!1)}}async function se(){if(C.trim()){M(!0);try{await tn.query(l,C),w(""),await $()}catch(Q){v(Q.message)}finally{M(!1)}}}if(x)return t.jsx(dt,{message:"Loading order..."});if(h&&!o)return t.jsxs("div",{className:"text-center py-16",children:[t.jsx("p",{className:"text-red-600 mb-4",children:h}),t.jsx(we,{to:"/app/orders",className:"text-green-600 font-medium",children:"Back to Orders"})]});if(!o)return null;const ne=o.order,J=Q=>Q?`TZS ${Math.round(Q).toLocaleString()}`:"",fe=Q=>Q?new Date(Q).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"";return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx(we,{to:"/app/orders",className:"p-2 hover:bg-gray-100 rounded-lg transition",children:t.jsx(tl,{size:20,className:"text-gray-600"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[t.jsx("span",{className:"text-sm font-mono text-gray-400",children:ne.order_number}),t.jsx(Ye,{variant:ne.status})]}),t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:ne.camp_name})]}),L&&!p&&t.jsx("button",{onClick:()=>g(!0),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-lg text-sm font-medium transition",children:"Review Order"})]}),h&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm",children:[h,t.jsx("button",{onClick:()=>v(""),className:"ml-2 underline",children:"Dismiss"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400",children:"Items"}),t.jsx("p",{className:"text-lg font-bold text-gray-900",children:ne.total_items})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400",children:"Value"}),t.jsx("p",{className:"text-lg font-bold text-gray-900",children:J(ne.total_value)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400",children:"Flagged"}),t.jsx("p",{className:`text-lg font-bold ${ne.flagged_items>0?"text-amber-600":"text-gray-400"}`,children:ne.flagged_items})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400",children:"Created"}),t.jsx("p",{className:"text-sm text-gray-700",children:fe(ne.created_at)}),t.jsxs("p",{className:"text-xs text-gray-400",children:["by ",ne.created_by]})]})]}),ne.notes&&t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[t.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Notes"}),t.jsx("p",{className:"text-sm text-gray-700",children:ne.notes})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[t.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:t.jsx("h2",{className:"font-semibold text-gray-900",children:"Order Lines"})}),t.jsx("div",{className:"hidden lg:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-100",children:[t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-2",children:"Item"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-2",children:"Req"}),ne.status!=="submitted"&&ne.status!=="draft"&&t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-2",children:"Approved"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-2",children:"Camp Stock"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-2",children:"HO Stock"}),t.jsx("th",{className:"text-center text-xs font-medium text-gray-500 px-4 py-2",children:"Status"}),p&&t.jsx("th",{className:"text-center text-xs font-medium text-gray-500 px-4 py-2",children:"Action"})]})}),t.jsx("tbody",{children:o.lines.map(Q=>t.jsxs("tr",{className:"border-b border-gray-50",children:[t.jsxs("td",{className:"px-4 py-3",children:[t.jsx(we,{to:`/app/items/${Q.item_id}`,className:"text-sm font-medium text-gray-900 hover:text-green-600",children:Q.item_name}),t.jsxs("p",{className:"text-xs text-gray-400",children:[Q.item_code,"  ",Q.uom]})]}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:"text-sm font-semibold text-gray-900",children:Q.requested_qty})}),ne.status!=="submitted"&&ne.status!=="draft"&&t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:`text-sm font-semibold ${Q.stores_action==="rejected"?"text-red-600":Q.stores_action==="adjusted"?"text-amber-600":"text-green-600"}`,children:Q.approved_qty??""})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:"text-sm text-gray-500",children:Q.camp_stock})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:`text-sm ${Q.ho_stock<=0?"text-red-600 font-medium":"text-gray-500"}`,children:Q.ho_stock})}),t.jsxs("td",{className:"px-4 py-3 text-center",children:[t.jsx(Ye,{variant:Q.validation_status==="flagged"?"danger":Q.validation_status==="review"?"warning":"success",children:Q.validation_status}),Q.validation_note&&t.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",title:Q.validation_note,children:[t.jsx(jt,{size:10,className:"inline"})," ",Q.validation_note.substring(0,30),"..."]})]}),p&&t.jsxs("td",{className:"px-4 py-3",children:[t.jsxs("select",{value:j[Q.id]?.action||"approved",onChange:ce=>te(Q.id,"action",ce.target.value),className:"text-xs px-2 py-1 border border-gray-300 rounded-lg",children:[t.jsx("option",{value:"approved",children:"Approve"}),t.jsx("option",{value:"adjusted",children:"Adjust"}),t.jsx("option",{value:"rejected",children:"Reject"})]}),j[Q.id]?.action==="adjusted"&&t.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[t.jsx("button",{type:"button",onClick:()=>te(Q.id,"approved_qty",Math.max(0,(j[Q.id]?.approved_qty||0)-1)),className:"w-7 h-7 flex items-center justify-center rounded bg-gray-100 hover:bg-gray-200 text-xs",children:""}),t.jsx("span",{className:"w-10 text-center text-xs font-bold",children:j[Q.id]?.approved_qty||0}),t.jsx("button",{type:"button",onClick:()=>te(Q.id,"approved_qty",(j[Q.id]?.approved_qty||0)+1),className:"w-7 h-7 flex items-center justify-center rounded bg-gray-100 hover:bg-gray-200 text-xs",children:"+"})]})]})]},Q.id))})]})}),t.jsx("div",{className:"lg:hidden divide-y divide-gray-100",children:o.lines.map(Q=>t.jsxs("div",{className:"px-4 py-3",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:Q.item_name}),t.jsxs("p",{className:"text-xs text-gray-400",children:[Q.item_code,"  ",Q.uom]})]}),t.jsxs("div",{className:"text-right flex-shrink-0",children:[t.jsxs("p",{className:"text-sm font-bold text-gray-900",children:["x",Q.requested_qty]}),Q.approved_qty!=null&&Q.approved_qty!==Q.requested_qty&&t.jsxs("p",{className:"text-xs text-amber-600",children:[" ",Q.approved_qty]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx(Ye,{variant:Q.validation_status==="flagged"?"danger":Q.validation_status==="review"?"warning":"success",children:Q.validation_status}),t.jsxs("span",{className:"text-xs text-gray-400",children:["Camp: ",Q.camp_stock]}),t.jsxs("span",{className:"text-xs text-gray-400",children:["HO: ",Q.ho_stock]})]}),p&&t.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[t.jsxs("select",{value:j[Q.id]?.action||"approved",onChange:ce=>te(Q.id,"action",ce.target.value),className:"text-xs px-2 py-1.5 border border-gray-300 rounded-lg",children:[t.jsx("option",{value:"approved",children:"Approve"}),t.jsx("option",{value:"adjusted",children:"Adjust"}),t.jsx("option",{value:"rejected",children:"Reject"})]}),j[Q.id]?.action==="adjusted"&&t.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[t.jsx("button",{type:"button",onClick:()=>te(Q.id,"approved_qty",Math.max(0,(j[Q.id]?.approved_qty||0)-1)),className:"w-7 h-7 flex items-center justify-center rounded bg-gray-100 hover:bg-gray-200 text-xs",children:""}),t.jsx("span",{className:"w-10 text-center text-xs font-bold",children:j[Q.id]?.approved_qty||0}),t.jsx("button",{type:"button",onClick:()=>te(Q.id,"approved_qty",(j[Q.id]?.approved_qty||0)+1),className:"w-7 h-7 flex items-center justify-center rounded bg-gray-100 hover:bg-gray-200 text-xs",children:"+"})]})]})]},Q.id))})]}),p&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[t.jsx("textarea",{value:y,onChange:Q=>z(Q.target.value),placeholder:"Review notes (required for rejection)...",rows:2,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none resize-none mb-3"}),t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsxs("button",{onClick:X,disabled:S,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition",children:[t.jsx(Yt,{size:16})," Approve All"]}),t.jsxs("button",{onClick:K,disabled:S,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition",children:[S?t.jsx(qe,{size:16,className:"animate-spin"}):t.jsx(Yt,{size:16}),"Submit Review"]}),t.jsxs("button",{onClick:ge,disabled:S,className:"flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition",children:[t.jsx(Te,{size:16})," Reject All"]}),t.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition",children:"Cancel"})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[t.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[t.jsx(Cs,{size:16})," Timeline"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(jd,{label:"Created",date:ne.created_at,by:ne.created_by}),ne.submitted_at&&t.jsx(jd,{label:"Submitted",date:ne.submitted_at}),ne.stores_reviewed_at&&t.jsx(jd,{label:"Reviewed",date:ne.stores_reviewed_at,by:ne.stores_manager}),ne.stores_notes&&t.jsx("div",{className:"ml-5 pl-3 border-l-2 border-gray-200",children:t.jsx("p",{className:"text-xs text-gray-500 italic",children:ne.stores_notes})})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[t.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[t.jsx(r1,{size:16})," Messages"]}),o.queries.length===0?t.jsx("p",{className:"text-sm text-gray-400 text-center py-3",children:"No messages"}):t.jsx("div",{className:"space-y-3 mb-3",children:o.queries.map(Q=>t.jsxs("div",{className:`rounded-lg p-3 text-sm ${Q.sender_role==="stores_manager"||Q.sender_role==="director"?"bg-blue-50 text-blue-900":"bg-gray-50 text-gray-700"}`,children:[t.jsxs("p",{className:"font-medium text-xs mb-1",children:[Q.sender,"  ",Q.sender_role?.replace(/_/g," ")]}),t.jsx("p",{children:Q.message}),t.jsx("p",{className:"text-xs opacity-60 mt-1",children:new Date(Q.created_at).toLocaleDateString("en-GB",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})})]},Q.id))}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:C,onChange:Q=>w(Q.target.value),placeholder:"Type a message...",className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",onKeyDown:Q=>Q.key==="Enter"&&se()}),t.jsx("button",{onClick:se,disabled:k||!C.trim(),className:"p-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-300 text-white rounded-lg transition",children:k?t.jsx(qe,{size:18,className:"animate-spin"}):t.jsx(oh,{size:18})})]})]})]})]})]})}function jd({label:l,date:i,by:o}){return t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 mt-1.5 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:l}),t.jsxs("p",{className:"text-xs text-gray-400",children:[i?new Date(i).toLocaleDateString("en-GB",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):"",o&&`  ${o}`]})]})]})}const nj=[{key:"",label:"All"},{key:"dispatched",label:"Dispatched"},{key:"in_transit",label:"In Transit"},{key:"delivered",label:"Delivered"}];function lj(){Ie();const{campId:l}=ya(),[i,o]=u.useState(null),[d,x]=u.useState(!0),[f,h]=u.useState(""),[v,p]=u.useState({status:"",search:"",page:1});u.useEffect(()=>{g()},[v,l]);async function g(){x(!0),h("");try{const y={page:v.page,per_page:20,status:v.status,search:v.search};l&&(y.camp_id=l);const z=await Pf.list(y);o(z)}catch(y){h(y.message)}finally{x(!1)}}function j(y){return y?new Date(y).toLocaleDateString("en-GB",{day:"numeric",month:"short"}):""}function b(y){return y?`TZS ${Math.round(y).toLocaleString()}`:""}return t.jsxs("div",{children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Dispatch Notes"}),t.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[i?.pagination?.total||0," dispatches"]})]})}),t.jsx("div",{"data-guide":"dispatch-status-tabs",className:"flex gap-1.5 overflow-x-auto pb-2 mb-4 -mx-4 px-4 lg:mx-0 lg:px-0 scrollbar-none",children:nj.map(y=>{const z=y.key?i?.status_counts?.[y.key]||0:i?.pagination?.total||0;return t.jsxs("button",{onClick:()=>p(S=>({...S,status:y.key,page:1})),className:`inline-flex items-center justify-center gap-1.5 px-4 py-2.5 rounded-full text-xs font-semibold whitespace-nowrap transition-all ${v.status===y.key?"bg-green-600 text-white shadow-sm":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,style:{minHeight:"auto"},children:[y.label,z>0&&t.jsx("span",{className:`text-[10px] leading-none px-1.5 py-0.5 rounded-full ${v.status===y.key?"bg-green-700/50 text-white":"bg-gray-200 text-gray-500"}`,children:z})]},y.key)})}),t.jsx("div",{className:"mb-4","data-guide":"dispatch-search",children:t.jsx(xr,{value:v.search,onChange:y=>p(z=>({...z,search:y,page:1})),placeholder:"Search by dispatch or order number..."})}),f&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm",children:[f,t.jsx("button",{onClick:g,className:"ml-2 underline",children:"Retry"})]}),d&&!i&&t.jsx(dt,{message:"Loading dispatches..."}),i&&t.jsx("div",{"data-guide":"dispatch-list",className:"bg-white rounded-xl border border-gray-200",children:i.dispatches.length===0?t.jsx(nl,{icon:mr,title:"No dispatches",message:v.status?`No ${v.status} dispatches`:"No dispatch notes yet"}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"hidden lg:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-100",children:[t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Dispatch #"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Order #"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Camp"}),t.jsx("th",{className:"text-center text-xs font-medium text-gray-500 px-4 py-3",children:"Status"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-3",children:"Items"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-3",children:"Value"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Date"}),t.jsx("th",{className:"w-8"})]})}),t.jsx("tbody",{children:i.dispatches.map(y=>t.jsxs("tr",{className:"border-b border-gray-50 hover:bg-gray-50 transition",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsx(we,{to:`/app/dispatch/${y.id}`,className:"text-sm font-mono font-medium text-gray-900 hover:text-green-600",children:y.dispatch_number})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(we,{to:`/app/orders/${y.order_id}`,className:"text-sm font-mono text-blue-600 hover:text-blue-800",children:y.order_number})}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("span",{className:"text-sm text-gray-600",children:y.camp_code}),t.jsx("span",{className:"text-xs text-gray-400 ml-1",children:y.camp_name})]}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx(Ye,{variant:y.status})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:"text-sm text-gray-900",children:y.total_items})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:"text-sm text-gray-600",children:b(y.total_value)})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-gray-500",children:j(y.dispatched_at||y.created_at)})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(we,{to:`/app/dispatch/${y.id}`,children:t.jsx(ot,{size:16,className:"text-gray-400"})})})]},y.id))})]})}),t.jsx("div",{className:"lg:hidden divide-y divide-gray-100",children:i.dispatches.map(y=>t.jsxs(we,{to:`/app/dispatch/${y.id}`,className:"flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[t.jsx("span",{className:"text-sm font-mono font-medium text-gray-900",children:y.dispatch_number}),t.jsx(Ye,{variant:y.status})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.jsx("span",{className:"text-xs text-gray-500",children:y.camp_name}),t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsxs("span",{className:"text-xs text-gray-500",children:[y.total_items," items"]}),t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsx("span",{className:"text-xs text-gray-500",children:j(y.dispatched_at||y.created_at)})]})]}),t.jsx("div",{className:"text-right flex-shrink-0",children:t.jsx("p",{className:"text-sm font-semibold text-gray-900",children:b(y.total_value)})}),t.jsx(ot,{size:16,className:"text-gray-400 flex-shrink-0"})]},y.id))}),t.jsx("div",{className:"px-4 pb-4",children:t.jsx(sl,{page:i.pagination.page,totalPages:i.pagination.total_pages,total:i.pagination.total,perPage:i.pagination.per_page,onChange:y=>p(z=>({...z,page:y}))})})]})})]})}function Ws({label:l,value:i}){return t.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-50 last:border-0",children:[t.jsx("span",{className:"text-sm text-gray-500",children:l}),t.jsx("span",{className:"text-sm font-medium text-gray-900 text-right",children:i||""})]})}function rj(){const{id:l}=$i(),[i,o]=u.useState(null),[d,x]=u.useState(!0),[f,h]=u.useState("");u.useEffect(()=>{v()},[l]);async function v(){x(!0),h("");try{const y=await Pf.get(l);o(y)}catch(y){h(y.message)}finally{x(!1)}}function p(y){return y?new Date(y).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):""}function g(y){return!y&&y!==0?"":`TZS ${Math.round(y).toLocaleString()}`}if(d)return t.jsx(dt,{message:"Loading dispatch..."});if(f)return t.jsx("div",{className:"p-4",children:t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg text-sm",children:[f,t.jsx("button",{onClick:v,className:"ml-2 underline",children:"Retry"})]})});if(!i)return null;const{dispatch:j,lines:b}=i;return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx(we,{to:"/app/dispatch",className:"p-2 -ml-2 hover:bg-gray-100 rounded-lg transition",children:t.jsx(tl,{size:20,className:"text-gray-600"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h1",{className:"text-lg font-bold text-gray-900 font-mono",children:j.dispatch_number}),t.jsx(Ye,{variant:j.status})]}),t.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[j.camp_name,"  ",p(j.dispatched_at)]})]})]}),t.jsxs("div",{className:"lg:grid lg:grid-cols-3 lg:gap-6",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3 text-center",children:[t.jsx(pa,{size:18,className:"text-gray-400 mx-auto mb-1"}),t.jsx("p",{className:"text-lg font-bold text-gray-900",children:j.total_items}),t.jsx("p",{className:"text-xs text-gray-500",children:"Items"})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3 text-center",children:[t.jsx($v,{size:18,className:"text-gray-400 mx-auto mb-1"}),t.jsx("p",{className:"text-sm font-bold text-gray-900 font-mono",children:j.order_number}),t.jsx("p",{className:"text-xs text-gray-500",children:"Order"})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3 text-center",children:[t.jsx(s1,{size:18,className:"text-gray-400 mx-auto mb-1"}),t.jsx("p",{className:"text-sm font-bold text-gray-900",children:j.camp_code}),t.jsx("p",{className:"text-xs text-gray-500",children:"Destination"})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[t.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:t.jsxs("h2",{className:"text-sm font-semibold text-gray-900",children:["Dispatch Items (",b.length,")"]})}),t.jsx("div",{className:"hidden lg:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-100",children:[t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-2",children:"Item"}),t.jsx("th",{className:"text-center text-xs font-medium text-gray-500 px-4 py-2",children:"Requested"}),t.jsx("th",{className:"text-center text-xs font-medium text-gray-500 px-4 py-2",children:"Approved"}),t.jsx("th",{className:"text-center text-xs font-medium text-gray-500 px-4 py-2",children:"Dispatched"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-2",children:"Unit Cost"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-2",children:"Value"})]})}),t.jsx("tbody",{children:b.map(y=>t.jsxs("tr",{className:"border-b border-gray-50",children:[t.jsxs("td",{className:"px-4 py-2.5",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:y.item_name}),t.jsxs("p",{className:"text-xs text-gray-400",children:[y.item_code,"  ",y.uom]})]}),t.jsx("td",{className:"px-4 py-2.5 text-center",children:t.jsx("span",{className:"text-sm text-gray-500",children:y.requested_qty??""})}),t.jsx("td",{className:"px-4 py-2.5 text-center",children:t.jsx("span",{className:"text-sm text-gray-500",children:y.approved_qty??""})}),t.jsx("td",{className:"px-4 py-2.5 text-center",children:t.jsx("span",{className:"text-sm font-semibold text-gray-900",children:y.dispatched_qty})}),t.jsx("td",{className:"px-4 py-2.5 text-right",children:t.jsx("span",{className:"text-sm text-gray-500",children:g(y.unit_cost)})}),t.jsx("td",{className:"px-4 py-2.5 text-right",children:t.jsx("span",{className:"text-sm font-medium text-gray-900",children:g(y.line_value)})})]},y.id))}),t.jsx("tfoot",{children:t.jsxs("tr",{className:"border-t border-gray-200 bg-gray-50",children:[t.jsx("td",{colSpan:5,className:"px-4 py-2.5 text-right text-sm font-semibold text-gray-700",children:"Total"}),t.jsx("td",{className:"px-4 py-2.5 text-right text-sm font-bold text-gray-900",children:g(j.total_value)})]})})]})}),t.jsxs("div",{className:"lg:hidden divide-y divide-gray-100",children:[b.map(y=>t.jsx("div",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:y.item_name}),t.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:[y.item_code,"  ",y.uom]})]}),t.jsxs("div",{className:"text-right ml-3",children:[t.jsx("p",{className:"text-sm font-semibold text-gray-900",children:y.dispatched_qty}),t.jsx("p",{className:"text-xs text-gray-500",children:g(y.line_value)})]})]})},y.id)),t.jsxs("div",{className:"px-4 py-3 bg-gray-50 flex justify-between",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Total"}),t.jsx("span",{className:"text-sm font-bold text-gray-900",children:g(j.total_value)})]})]})]})]}),t.jsx("div",{className:"mt-4 lg:mt-0",children:t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 space-y-0",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Dispatch Details"}),t.jsx(Ws,{label:"Dispatch #",value:j.dispatch_number}),t.jsx(Ws,{label:"Status",value:t.jsx(Ye,{variant:j.status})}),t.jsx(Ws,{label:"Destination",value:`${j.camp_code}  ${j.camp_name}`}),t.jsx(Ws,{label:"Dispatched By",value:j.dispatched_by}),t.jsx(Ws,{label:"Dispatch Date",value:p(j.dispatched_at)}),t.jsx(Ws,{label:"Vehicle",value:j.vehicle_number}),t.jsx(Ws,{label:"Order",value:t.jsx(we,{to:`/app/orders/${j.order_id}`,className:"text-blue-600 hover:text-blue-800 font-mono",children:j.order_number})}),j.notes&&t.jsxs("div",{className:"pt-2",children:[t.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Notes"}),t.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 rounded-lg p-2",children:j.notes})]})]})})]})]})}const ij=[{key:"",label:"All"},{key:"pending",label:"Pending"},{key:"confirmed",label:"Confirmed"}];function cj(){Ie();const{campId:l}=ya(),[i,o]=u.useState(null),[d,x]=u.useState(!0),[f,h]=u.useState(""),[v,p]=u.useState({status:"",search:"",page:1});u.useEffect(()=>{g()},[v,l]);async function g(){x(!0),h("");try{const b={page:v.page,per_page:20,status:v.status};l&&(b.camp_id=l);const y=await kd.list(b);o(y)}catch(b){h(b.message)}finally{x(!1)}}function j(b){return b?new Date(b).toLocaleDateString("en-GB",{day:"numeric",month:"short"}):""}return t.jsxs("div",{children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Goods Receipt"}),t.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[i?.pagination?.total||0," receipts"]})]})}),t.jsx("div",{"data-guide":"receive-status-tabs",className:"flex gap-1.5 overflow-x-auto pb-2 mb-4 -mx-4 px-4 lg:mx-0 lg:px-0 scrollbar-none",children:ij.map(b=>t.jsx("button",{onClick:()=>p(y=>({...y,status:b.key,page:1})),className:`inline-flex items-center justify-center gap-1.5 px-4 py-2.5 rounded-full text-xs font-semibold whitespace-nowrap transition-all ${v.status===b.key?"bg-green-600 text-white shadow-sm":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,style:{minHeight:"auto"},children:b.label},b.key))}),t.jsx("div",{className:"mb-4",children:t.jsx(xr,{value:v.search,onChange:b=>p(y=>({...y,search:b,page:1})),placeholder:"Search by receipt or dispatch number..."})}),f&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm",children:[f,t.jsx("button",{onClick:g,className:"ml-2 underline",children:"Retry"})]}),d&&!i&&t.jsx(dt,{message:"Loading receipts..."}),i&&t.jsx("div",{"data-guide":"receive-list",className:"bg-white rounded-xl border border-gray-200",children:i.receipts.length===0?t.jsx(nl,{icon:Es,title:"No receipts",message:v.status?`No ${v.status} receipts`:"No goods receipts yet"}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"hidden lg:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-100",children:[t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Receipt #"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Dispatch #"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Camp"}),t.jsx("th",{className:"text-center text-xs font-medium text-gray-500 px-4 py-3",children:"Status"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Received By"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Date"}),t.jsx("th",{className:"w-8"})]})}),t.jsx("tbody",{children:i.receipts.map(b=>t.jsxs("tr",{className:"border-b border-gray-50 hover:bg-gray-50 transition",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsx(we,{to:`/app/receive/${b.id}`,className:"text-sm font-mono font-medium text-gray-900 hover:text-green-600",children:b.receipt_number})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm font-mono text-gray-500",children:b.dispatch_number||""})}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("span",{className:"text-sm text-gray-600",children:b.camp_code}),t.jsx("span",{className:"text-xs text-gray-400 ml-1",children:b.camp_name})]}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx(Ye,{variant:b.status})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-gray-500",children:b.received_by||""})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-gray-500",children:j(b.received_date||b.created_at)})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(we,{to:`/app/receive/${b.id}`,children:t.jsx(ot,{size:16,className:"text-gray-400"})})})]},b.id))})]})}),t.jsx("div",{className:"lg:hidden divide-y divide-gray-100",children:i.receipts.map(b=>t.jsxs(we,{to:`/app/receive/${b.id}`,className:"flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[t.jsx("span",{className:"text-sm font-mono font-medium text-gray-900",children:b.receipt_number}),t.jsx(Ye,{variant:b.status})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.jsx("span",{className:"text-xs text-gray-500",children:b.camp_name}),t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsx("span",{className:"text-xs text-gray-500",children:j(b.received_date||b.created_at)}),b.dispatch_number&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsxs("span",{className:"text-xs text-gray-400",children:["Disp: ",b.dispatch_number]})]})]})]}),t.jsx(ot,{size:16,className:"text-gray-400 flex-shrink-0"})]},b.id))}),t.jsx("div",{className:"px-4 pb-4",children:t.jsx(sl,{page:i.pagination.page,totalPages:i.pagination.total_pages,total:i.pagination.total,perPage:i.pagination.per_page,onChange:b=>p(y=>({...y,page:b}))})})]})})]})}function oj(){const{id:l}=$i(),i=Ie(),[o,d]=u.useState(null),[x,f]=u.useState(!0),[h,v]=u.useState(""),[p,g]=u.useState(!1),[j,b]=u.useState({}),[y,z]=u.useState(""),[S,O]=u.useState(!1);u.useEffect(()=>{C()},[l]);async function C(){f(!0);try{const K=await kd.get(l);d(K);const se={};K.lines.forEach(ne=>{se[ne.id]={received_qty:ne.received_qty!==null?ne.received_qty:ne.dispatched_qty,condition_status:ne.condition_status||"good",notes:ne.notes||""}}),b(se)}catch(K){v(K.message)}finally{f(!1)}}function w(K,se,ne){b(J=>({...J,[K]:{...J[K],[se]:ne}}))}async function k(){O(!0),v("");try{const K=Object.entries(j).map(([se,ne])=>({line_id:parseInt(se),received_qty:parseFloat(ne.received_qty)||0,condition_status:ne.condition_status,notes:ne.notes||null}));await kd.confirm(l,K),g(!1),await C()}catch(K){v(K.message)}finally{O(!1)}}function M(){const K={};o.lines.forEach(se=>{K[se.id]={received_qty:se.dispatched_qty,condition_status:"good",notes:""}}),b(K)}if(x)return t.jsx(dt,{message:"Loading receipt..."});if(h&&!o)return t.jsxs("div",{className:"text-center py-16",children:[t.jsx("p",{className:"text-red-600 mb-4",children:h}),t.jsx(we,{to:"/app/receive",className:"text-green-600 font-medium",children:"Back to Receipts"})]});if(!o)return null;const $=o.receipt,te=!($.status==="confirmed")&&["camp_storekeeper","camp_manager","stores_manager","admin"].includes(i?.role),X=K=>K?`TZS ${Math.round(K).toLocaleString()}`:"",ge=K=>K?new Date(K).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"";return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx(we,{to:"/app/receive",className:"p-2 hover:bg-gray-100 rounded-lg transition",children:t.jsx(tl,{size:20,className:"text-gray-600"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[t.jsx("span",{className:"text-sm font-mono text-gray-400",children:$.receipt_number}),t.jsx(Ye,{variant:$.status})]}),t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:$.camp_name})]}),te&&!p&&t.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-lg text-sm font-medium transition",children:[t.jsx(Es,{size:18}),"Confirm Receipt"]})]}),h&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm flex items-center gap-2",children:[t.jsx(jt,{size:16}),h,t.jsx("button",{onClick:()=>v(""),className:"ml-auto underline",children:"Dismiss"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[t.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400",children:"Items"}),t.jsx("p",{className:"text-lg font-bold text-gray-900",children:o.lines.length})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400",children:"Total Value"}),t.jsx("p",{className:"text-lg font-bold text-gray-900",children:X($.total_value)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400",children:"Dispatch"}),t.jsx("p",{className:"text-sm text-gray-700 font-mono",children:$.dispatch_number||""})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400",children:"Received"}),t.jsx("p",{className:"text-sm text-gray-700",children:ge($.received_date||$.created_at)})]})]})}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[t.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 flex items-center justify-between",children:[t.jsx("h2",{className:"font-semibold text-gray-900",children:"Receipt Lines"}),p&&t.jsx("button",{onClick:M,className:"text-sm text-green-600 hover:text-green-700 font-medium",children:"Accept all as dispatched"})]}),t.jsx("div",{className:"hidden lg:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-100",children:[t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-2",children:"Item"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-2",children:"Dispatched"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-2",children:"Received"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-2",children:"Unit Cost"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-2",children:"Value"}),p&&t.jsx("th",{className:"text-center text-xs font-medium text-gray-500 px-4 py-2",children:"Condition"})]})}),t.jsx("tbody",{children:o.lines.map(K=>t.jsxs("tr",{className:"border-b border-gray-50",children:[t.jsxs("td",{className:"px-4 py-3",children:[t.jsx(we,{to:`/app/items/${K.item_id}`,className:"text-sm font-medium text-gray-900 hover:text-green-600",children:K.item_name}),t.jsxs("p",{className:"text-xs text-gray-400",children:[K.item_code,"  ",K.uom]})]}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:"text-sm font-semibold text-gray-900",children:K.dispatched_qty})}),t.jsx("td",{className:"px-4 py-3 text-right",children:p?t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{type:"button",onClick:()=>w(K.id,"received_qty",Math.max(0,parseFloat(j[K.id]?.received_qty||0)-1)),className:"w-7 h-7 flex items-center justify-center rounded bg-gray-100 hover:bg-gray-200 text-xs",children:""}),t.jsx("span",{className:"w-12 text-center text-sm font-bold",children:j[K.id]?.received_qty??""}),t.jsx("button",{type:"button",onClick:()=>w(K.id,"received_qty",parseFloat(j[K.id]?.received_qty||0)+1),className:"w-7 h-7 flex items-center justify-center rounded bg-gray-100 hover:bg-gray-200 text-xs",children:"+"})]}):t.jsx("span",{className:`text-sm font-semibold ${K.received_qty!==null&&K.received_qty<K.dispatched_qty?"text-amber-600":"text-green-600"}`,children:K.received_qty!==null?K.received_qty:""})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:"text-sm text-gray-500",children:X(K.unit_cost)})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:"text-sm text-gray-600",children:X(K.total_value)})}),p&&t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsxs("select",{value:j[K.id]?.condition_status||"good",onChange:se=>w(K.id,"condition_status",se.target.value),className:"text-xs px-2 py-1 border border-gray-300 rounded-lg",children:[t.jsx("option",{value:"good",children:"Good"}),t.jsx("option",{value:"damaged",children:"Damaged"}),t.jsx("option",{value:"short",children:"Short"})]})})]},K.id))})]})}),t.jsx("div",{className:"lg:hidden divide-y divide-gray-100",children:o.lines.map(K=>t.jsxs("div",{className:"px-4 py-3",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:K.item_name}),t.jsxs("p",{className:"text-xs text-gray-400",children:[K.item_code,"  ",K.uom]})]}),t.jsxs("div",{className:"text-right flex-shrink-0",children:[t.jsxs("p",{className:"text-xs text-gray-400",children:["Dispatched: ",K.dispatched_qty]}),!p&&t.jsxs("p",{className:`text-sm font-bold ${K.received_qty!==null&&K.received_qty<K.dispatched_qty?"text-amber-600":"text-green-600"}`,children:["Received: ",K.received_qty!==null?K.received_qty:""]})]})]}),p&&t.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{type:"button",onClick:()=>w(K.id,"received_qty",Math.max(0,parseFloat(j[K.id]?.received_qty||0)-1)),className:"w-7 h-7 flex items-center justify-center rounded bg-gray-100 hover:bg-gray-200 text-xs",children:""}),t.jsx("span",{className:"w-12 text-center text-sm font-bold",children:j[K.id]?.received_qty??""}),t.jsx("button",{type:"button",onClick:()=>w(K.id,"received_qty",parseFloat(j[K.id]?.received_qty||0)+1),className:"w-7 h-7 flex items-center justify-center rounded bg-gray-100 hover:bg-gray-200 text-xs",children:"+"})]}),t.jsxs("select",{value:j[K.id]?.condition_status||"good",onChange:se=>w(K.id,"condition_status",se.target.value),className:"text-xs px-2 py-1.5 border border-gray-300 rounded-lg",children:[t.jsx("option",{value:"good",children:"Good"}),t.jsx("option",{value:"damaged",children:"Damaged"}),t.jsx("option",{value:"short",children:"Short"})]})]}),K.notes&&t.jsx("p",{className:"text-xs text-gray-400 mt-1 italic",children:K.notes})]},K.id))})]}),p&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[t.jsx("textarea",{value:y,onChange:K=>z(K.target.value),placeholder:"Receipt notes (optional)...",rows:2,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none resize-none mb-3"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:k,disabled:S,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white px-4 py-2.5 rounded-lg text-sm font-medium transition",children:S?t.jsxs(t.Fragment,{children:[t.jsx(qe,{size:16,className:"animate-spin"})," Confirming..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Yt,{size:16})," Confirm Receipt"]})}),t.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2.5 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition",children:"Cancel"})]})]})]}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Receipt Info"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(en,{label:"Camp",value:`${$.camp_code}  ${$.camp_name}`}),t.jsx(en,{label:"Dispatch #",value:$.dispatch_number||""}),$.order_number&&t.jsx(en,{label:"Order #",value:t.jsx(we,{to:`/app/orders/${$.order_id}`,className:"text-green-600 hover:underline font-mono text-sm",children:$.order_number})}),t.jsx(en,{label:"Received By",value:$.received_by||""}),t.jsx(en,{label:"Dispatched By",value:$.dispatched_by||""}),t.jsx(en,{label:"Status",value:t.jsx(Ye,{variant:$.status})}),t.jsx(en,{label:"Date",value:ge($.received_date||$.created_at)})]}),$.notes&&t.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-100",children:[t.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Notes"}),t.jsx("p",{className:"text-sm text-gray-700",children:$.notes})]})]})})]})]})}function en({label:l,value:i}){return t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0",children:l}),t.jsx("span",{className:"text-sm text-gray-900 text-right",children:i})]})}const dj=[{key:"",label:"All Types"},{key:"kitchen",label:"Kitchen"},{key:"housekeeping",label:"Housekeeping"},{key:"bar",label:"Bar"},{key:"maintenance",label:"Maintenance"},{key:"guest",label:"Guest"},{key:"office",label:"Office"},{key:"other",label:"Other"}];function uj(){Ie();const{campId:l}=ya(),[i,o]=u.useState(null),[d,x]=u.useState(!0),[f,h]=u.useState(""),[v,p]=u.useState({type:"",page:1});u.useEffect(()=>{g()},[v,l]);async function g(){x(!0),h("");try{const y={page:v.page,per_page:20,type:v.type};l&&(y.camp_id=l);const z=await Cd.list(y);o(z)}catch(y){h(y.message)}finally{x(!1)}}function j(y){return y?new Date(y).toLocaleDateString("en-GB",{day:"numeric",month:"short"}):""}function b(y){return y?`TZS ${Math.round(y).toLocaleString()}`:""}return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Issue Vouchers"}),t.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[i?.pagination?.total||0," vouchers"]})]}),t.jsxs(we,{to:"/app/issue/new","data-guide":"new-issue-btn",className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-lg text-sm font-medium transition",children:[t.jsx(Ve,{size:18}),"New Issue"]})]}),t.jsx("div",{"data-guide":"issue-type-tabs",className:"flex gap-1.5 overflow-x-auto pb-2 mb-4 -mx-4 px-4 lg:mx-0 lg:px-0 scrollbar-none",children:dj.map(y=>t.jsx("button",{onClick:()=>p(z=>({...z,type:y.key,page:1})),className:`inline-flex items-center justify-center gap-1.5 px-4 py-2.5 rounded-full text-xs font-semibold whitespace-nowrap transition-all ${v.type===y.key?"bg-green-600 text-white shadow-sm":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,style:{minHeight:"auto"},children:y.label},y.key))}),f&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm",children:[f,t.jsx("button",{onClick:g,className:"ml-2 underline",children:"Retry"})]}),d&&!i&&t.jsx(dt,{message:"Loading issue vouchers..."}),i&&t.jsx("div",{className:"bg-white rounded-xl border border-gray-200",children:i.vouchers.length===0?t.jsx(nl,{icon:zs,title:"No issue vouchers",message:v.type?`No ${v.type} issues found`:"Create your first issue voucher",action:t.jsxs(we,{to:"/app/issue/new",className:"inline-flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition",children:[t.jsx(Ve,{size:16})," New Issue"]})}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"hidden lg:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-100",children:[t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Voucher #"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Camp"}),t.jsx("th",{className:"text-center text-xs font-medium text-gray-500 px-4 py-3",children:"Type"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Cost Center"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Received By"}),t.jsx("th",{className:"text-right text-xs font-medium text-gray-500 px-4 py-3",children:"Value"}),t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 px-4 py-3",children:"Date"}),t.jsx("th",{className:"w-8"})]})}),t.jsx("tbody",{children:i.vouchers.map(y=>t.jsxs("tr",{className:"border-b border-gray-50 hover:bg-gray-50 transition",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm font-mono font-medium text-gray-900",children:y.voucher_number})}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("span",{className:"text-sm text-gray-600",children:y.camp_code}),t.jsx("span",{className:"text-xs text-gray-400 ml-1",children:y.camp_name})]}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx(Ye,{variant:y.issue_type,children:y.issue_type})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-gray-500",children:y.cost_center||""})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-gray-500",children:y.received_by_name||""})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsx("span",{className:"text-sm text-gray-900",children:b(y.total_value)})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-gray-500",children:j(y.issue_date||y.created_at)})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(ot,{size:16,className:"text-gray-400"})})]},y.id))})]})}),t.jsx("div",{className:"lg:hidden divide-y divide-gray-100",children:i.vouchers.map(y=>t.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[t.jsx("span",{className:"text-sm font-mono font-medium text-gray-900",children:y.voucher_number}),t.jsx(Ye,{variant:y.issue_type,children:y.issue_type})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.jsx("span",{className:"text-xs text-gray-500",children:y.camp_name}),t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsx("span",{className:"text-xs text-gray-500",children:y.received_by_name||""}),t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsx("span",{className:"text-xs text-gray-500",children:j(y.issue_date||y.created_at)})]})]}),t.jsx("div",{className:"text-right flex-shrink-0",children:t.jsx("p",{className:"text-sm font-semibold text-gray-900",children:b(y.total_value)})}),t.jsx(ot,{size:16,className:"text-gray-400 flex-shrink-0"})]},y.id))}),t.jsx("div",{className:"px-4 pb-4",children:t.jsx(sl,{page:i.pagination.page,totalPages:i.pagination.total_pages,total:i.pagination.total,perPage:i.pagination.per_page,onChange:y=>p(z=>({...z,page:y}))})})]})})]})}let lr=0,Ed=0;function As(){lr++,lr===1&&(Ed=window.scrollY,document.body.classList.add("overflow-locked"),document.body.style.top=`-${Ed}px`)}function Ds(){lr=Math.max(0,lr-1),lr===0&&(document.body.classList.remove("overflow-locked"),document.body.style.top="",window.scrollTo(0,Ed))}function mj({item:l,onClose:i,onAddIngredients:o,onSkip:d}){const[x,f]=u.useState([]),[h,v]=u.useState(null),[p,g]=u.useState(null),[j,b]=u.useState(!0),[y,z]=u.useState(!1),[S,O]=u.useState(!1),[C,w]=u.useState(null),[k,M]=u.useState(!1),[$,L]=u.useState({}),[te,X]=u.useState([]),[ge,K]=u.useState(null),[se,ne]=u.useState({}),[J,fe]=u.useState(!1),[Q,ce]=u.useState(!1),[q,W]=u.useState(""),[ie,me]=u.useState([]),[be,E]=u.useState(!1),G=u.useRef(null),Z=u.useRef(null);u.useEffect(()=>(As(),()=>Ds()),[]),u.useEffect(()=>()=>{Z.current&&clearTimeout(Z.current),G.current&&clearTimeout(G.current)},[]),u.useEffect(()=>{l?.name&&(b(!0),$t.searchRecipes(l.name).then(_=>{f(_.recipes||[]),_.recipes?.length>0&&(A(_.recipes[0].id),v(_.recipes[0].id))}).catch(_=>console.error("Recipe search failed:",_)).finally(()=>b(!1)))},[l?.name]),u.useEffect(()=>{if(q.length<2){me([]);return}G.current&&clearTimeout(G.current),G.current=setTimeout(async()=>{E(!0);try{const _=await $t.searchIngredients(q);me(_.items||[])}catch(_){console.error("Search failed:",_)}finally{E(!1)}},300)},[q]);async function A(_){z(!0),L({}),X([]),ne({}),K(null);try{const F=await $t.recipe(_);g(F)}catch(F){console.error("Failed to load recipe:",F)}finally{z(!1)}}async function le(){M(!0);try{const _=await $t.suggestRecipe(l.name);w(_.recipes||[])}catch(_){console.error("AI suggestion failed:",_)}finally{M(!1)}}function ue(){S||(O(!0),Z.current=setTimeout(()=>{i()},250))}async function he(_){if(se[_]){K(F=>F===_?null:_);return}K(_),fe(!0);try{const F=await $t.suggestAlternatives(_,p?.recipe?.name);ne(xe=>({...xe,[_]:F.alternatives||[]}))}catch(F){console.error("Failed to get alternatives:",F),ne(xe=>({...xe,[_]:[]}))}finally{fe(!1)}}function Ue(_,F){L(xe=>({...xe,[_]:{item_id:F.item_id,name:F.name,stock_qty:F.stock_qty,uom:F.uom}})),K(null)}function Ce(_){L(F=>{const xe={...F};return delete xe[_],xe})}function rt(_){te.find(F=>F.item_id===_.id)||(X(F=>[...F,{item_id:_.id,name:_.name,qty:1,uom:_.uom,stock_qty:_.stock_qty}]),W(""),me([]),ce(!1))}function Ot(_,F){F<=0?X(xe=>xe.filter(_e=>_e.item_id!==_)):X(xe=>xe.map(_e=>_e.item_id===_?{..._e,qty:F}:_e))}function Rt(){const _=(p?.ingredients||[]).map(F=>{const xe=$[F.item_id];return{item_id:xe?xe.item_id:F.item_id,item_name:xe?xe.name:F.item_name,item_code:F.item_code,uom:xe?xe.uom:F.uom,qty:F.qty_per_serving,is_substitution:!!xe,original_name:xe?F.item_name:null}});te.forEach(F=>{_.push({item_id:F.item_id,item_name:F.name,uom:F.uom,qty:F.qty,is_extra:!0})}),o(_,p?.recipe),ue()}const wt=p?.ingredients||[],Ae=p?.recipe||null,re=wt.some(_=>_.stock_qty<=0);return l?Rs.createPortal(t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`fixed inset-0 bg-black/40 z-[10010] ${S?"animate-backdrop-out":"animate-backdrop-in"}`,onClick:ue}),t.jsxs("div",{className:`fixed inset-x-0 bottom-0 z-[10011] bg-white rounded-t-2xl shadow-2xl max-h-[90dvh] overflow-hidden flex flex-col ${S?"animate-slide-down":"animate-slide-up"}`,children:[t.jsx("div",{className:"flex justify-center pt-2 pb-1 flex-shrink-0",children:t.jsx("div",{className:"w-10 h-1 rounded-full bg-gray-300"})}),t.jsxs("div",{className:"flex items-start justify-between px-5 pt-2 pb-3 border-b border-gray-100 flex-shrink-0",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(aa,{size:18,className:"text-orange-500 flex-shrink-0"}),t.jsx("h2",{className:"text-lg font-bold text-gray-900 truncate",children:Ae?Ae.name:`Recipes for ${l.name}`})]}),Ae&&t.jsxs("div",{className:"flex items-center gap-3 mt-1.5 flex-wrap",children:[Ae.category&&t.jsx("span",{className:"text-[10px] bg-orange-50 text-orange-700 px-2 py-0.5 rounded-full capitalize",children:Ae.category}),Ae.cuisine&&t.jsx("span",{className:"text-[10px] bg-blue-50 text-blue-700 px-2 py-0.5 rounded-full",children:Ae.cuisine}),Ae.serves&&t.jsxs("span",{className:"text-[10px] bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full flex items-center gap-1",children:[t.jsx(Sa,{size:8})," ",Ae.serves," servings"]}),Ae.prep_time_minutes&&t.jsxs("span",{className:"text-[10px] bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full flex items-center gap-1",children:[t.jsx(Cs,{size:8})," ",Ae.prep_time_minutes+(Ae.cook_time_minutes||0),"min"]})]}),!Ae&&!j&&x.length===0&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"No stored recipes found for this item."})]}),t.jsx("button",{onClick:ue,className:"p-2 hover:bg-gray-100 rounded-full text-gray-400 transition flex-shrink-0 ml-2",children:t.jsx(Te,{size:18})})]}),t.jsx("div",{className:"flex-1 overflow-y-auto px-5 py-4 scroll-touch",children:j?t.jsxs("div",{className:"flex items-center justify-center py-12",children:[t.jsx(qe,{size:24,className:"animate-spin text-orange-600"}),t.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"Searching recipes..."})]}):x.length===0&&!Ae?t.jsxs("div",{className:"text-center py-6",children:[t.jsx(Pn,{size:32,className:"mx-auto text-gray-300 mb-2"}),t.jsxs("p",{className:"text-sm text-gray-500 mb-1",children:['No recipe found for "',l.name,'"']}),t.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"Ask AI to suggest a recipe, or skip to add the item directly."}),!C&&t.jsx("button",{onClick:le,disabled:k,className:"inline-flex items-center gap-2 px-4 py-2.5 bg-amber-50 border border-amber-200 text-amber-800 rounded-xl text-sm font-semibold hover:bg-amber-100 transition mb-3",children:k?t.jsxs(t.Fragment,{children:[t.jsx(qe,{size:14,className:"animate-spin"})," Thinking..."]}):t.jsxs(t.Fragment,{children:[t.jsx(nn,{size:14})," Ask AI for Recipe"]})}),C&&C.length>0&&t.jsxs("div",{className:"text-left mt-2 space-y-2",children:[t.jsx("h3",{className:"text-xs font-semibold text-amber-700 uppercase tracking-wider",children:"AI Suggested Recipes"}),C.map((_,F)=>t.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3",children:[t.jsx("p",{className:"text-sm font-bold text-gray-900",children:_.name}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:_.description}),t.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[t.jsx("span",{className:"text-[10px] bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded-full capitalize",children:_.category}),_.serves&&t.jsxs("span",{className:"text-[10px] text-gray-400",children:[_.serves," servings"]}),_.prep_time_minutes&&t.jsxs("span",{className:"text-[10px] text-gray-400",children:[_.prep_time_minutes+(_.cook_time_minutes||0),"min"]})]}),_.ingredients&&t.jsx("div",{className:"mt-2 space-y-0.5",children:_.ingredients.map((xe,_e)=>t.jsxs("div",{className:"text-[10px] text-gray-600 flex items-center gap-1",children:[t.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${xe.is_primary?"bg-orange-500":"bg-gray-300"}`}),xe.qty," ",xe.uom," ",xe.name]},_e))})]},F))]}),C&&C.length===0&&t.jsx("p",{className:"text-xs text-gray-400",children:"AI couldn't suggest a recipe for this item."})]}):t.jsxs(t.Fragment,{children:[x.length>1&&t.jsx("div",{className:"flex gap-2 mb-3 overflow-x-auto pb-1 scroll-touch",children:x.map(_=>t.jsx("button",{onClick:()=>{v(_.id),A(_.id)},className:`flex-shrink-0 px-3 py-1.5 rounded-full text-xs font-semibold transition whitespace-nowrap ${h===_.id?"bg-orange-600 text-white shadow-sm":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:_.name},_.id))}),y?t.jsxs("div",{className:"flex items-center justify-center py-8",children:[t.jsx(qe,{size:20,className:"animate-spin text-orange-600"}),t.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"Loading recipe..."})]}):wt.length===0?t.jsxs("div",{className:"text-center py-6",children:[t.jsx(aa,{size:28,className:"mx-auto text-gray-300 mb-2"}),t.jsx("p",{className:"text-sm text-gray-500",children:"No ingredients defined for this recipe."})]}):t.jsxs(t.Fragment,{children:[Ae?.description&&t.jsx("p",{className:"text-xs text-gray-500 mb-3",children:Ae.description}),t.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Ingredients"}),t.jsx("div",{className:"space-y-2 mb-4",children:wt.map(_=>{const F=_.stock_qty<=0,xe=_.stock_status==="low"||_.stock_status==="critical",_e=$[_.item_id],Zt=ge===_.item_name;return t.jsxs("div",{children:[t.jsx("div",{className:`bg-white rounded-xl border p-3 ${_e?"border-blue-300 bg-blue-50/30":F?"border-red-200 bg-red-50/30":xe?"border-amber-200 bg-amber-50/30":"border-gray-200"}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${_e?"bg-blue-500":F?"bg-red-500":xe?"bg-amber-500":"bg-green-500"}`}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("p",{className:`text-sm font-medium truncate ${F&&!_e?"text-red-700 line-through":"text-gray-900"}`,children:_.item_name}),_.is_primary&&t.jsx("span",{className:"text-[9px] bg-orange-100 text-orange-700 px-1.5 py-0.5 rounded-full font-medium flex-shrink-0",children:"Primary"})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.jsxs("span",{className:"text-[10px] text-gray-400",children:[_.qty_per_serving," ",_.uom,"/serving"]}),_.notes&&t.jsx("span",{className:"text-[10px] text-gray-400 italic",children:_.notes}),F?t.jsx("span",{className:"text-[10px] bg-red-100 text-red-600 px-1.5 py-0.5 rounded-full",children:"Out of stock"}):t.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${xe?"bg-amber-100 text-amber-700":"bg-green-100 text-green-700"}`,children:[_.stock_qty," ",_.uom]})]}),_e&&t.jsxs("div",{className:"flex items-center gap-1.5 mt-1.5",children:[t.jsx(sr,{size:10,className:"text-blue-500"}),t.jsxs("span",{className:"text-[11px] text-blue-700 font-medium",children:["Using: ",_e.name]}),t.jsxs("span",{className:"text-[10px] text-blue-500",children:["(",_e.stock_qty," ",_e.uom,")"]}),t.jsx("button",{onClick:()=>Ce(_.item_id),className:"text-blue-400 hover:text-red-500 ml-1",children:t.jsx(Te,{size:10})})]})]}),F&&!_e&&t.jsxs("button",{onClick:()=>he(_.item_name),className:"flex items-center gap-1 px-2 py-1.5 text-[10px] font-semibold text-amber-700 bg-amber-50 border border-amber-200 rounded-lg hover:bg-amber-100 transition flex-shrink-0",children:[t.jsx(nn,{size:10}),"Suggest"]}),!F&&!_e&&t.jsx(Yt,{size:16,className:"text-green-500 flex-shrink-0"})]})}),Zt&&t.jsxs("div",{className:"ml-5 mt-1 bg-amber-50 border border-amber-200 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[t.jsx(nn,{size:12,className:"text-amber-600"}),t.jsx("span",{className:"text-xs font-semibold text-amber-800",children:"AI Suggested Alternatives"})]}),J?t.jsxs("div",{className:"flex items-center gap-2 py-2 text-xs text-amber-600",children:[t.jsx(qe,{size:12,className:"animate-spin"}),"Finding alternatives..."]}):(se[_.item_name]||[]).length===0?t.jsx("p",{className:"text-xs text-amber-600",children:"No suitable alternatives found."}):t.jsx("div",{className:"space-y-1.5",children:(se[_.item_name]||[]).map(xt=>t.jsxs("button",{onClick:()=>Ue(_.item_id,xt),className:"w-full flex items-center gap-2 p-2 bg-white rounded-lg border border-amber-200 hover:border-amber-400 transition text-left",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-xs font-medium text-gray-900",children:xt.name}),t.jsx("p",{className:"text-[10px] text-gray-500",children:xt.reason})]}),t.jsxs("span",{className:"text-[10px] bg-green-100 text-green-700 px-1.5 py-0.5 rounded-full flex-shrink-0",children:[xt.stock_qty," ",xt.uom]})]},xt.item_id))})]})]},_.item_id)})}),te.length>0&&t.jsxs("div",{className:"mb-4",children:[t.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Added Ingredients"}),t.jsx("div",{className:"space-y-1.5",children:te.map(_=>t.jsxs("div",{className:"flex items-center gap-3 bg-blue-50 border border-blue-200 rounded-xl p-3",children:[t.jsx(Ve,{size:12,className:"text-blue-500 flex-shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:_.name}),t.jsxs("span",{className:"text-[10px] text-gray-400",children:[_.stock_qty," ",_.uom," in stock"]})]}),t.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[t.jsx("button",{onClick:()=>Ot(_.item_id,_.qty-1),className:"w-6 h-6 flex items-center justify-center rounded bg-blue-100 hover:bg-blue-200 text-blue-700",children:t.jsx(Wa,{size:10})}),t.jsx("span",{className:"w-6 text-center text-xs font-bold",children:_.qty}),t.jsx("button",{onClick:()=>Ot(_.item_id,_.qty+1),className:"w-6 h-6 flex items-center justify-center rounded bg-blue-100 hover:bg-blue-200 text-blue-700",children:t.jsx(Ve,{size:10})})]})]},_.item_id))})]}),re&&Object.keys($).length<wt.filter(_=>_.stock_qty<=0).length&&t.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3 mb-4 flex items-start gap-2",children:[t.jsx(jt,{size:14,className:"text-amber-600 flex-shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-amber-800",children:"Some ingredients are out of stock"}),t.jsx("p",{className:"text-[10px] text-amber-600 mt-0.5",children:'Tap "Suggest" for AI alternatives, or add ingredients manually.'})]})]})]}),t.jsx("div",{className:"mt-2 mb-4",children:Q?t.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-3",children:[t.jsxs("div",{className:"relative mb-2",children:[t.jsx(Vt,{size:14,className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",value:q,onChange:_=>W(_.target.value),placeholder:"Search stock items...",autoFocus:!0,className:"w-full pl-8 pr-8 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none"}),t.jsx("button",{onClick:()=>{ce(!1),W(""),me([])},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t.jsx(Te,{size:14})})]}),be&&t.jsxs("div",{className:"flex items-center gap-2 py-2 text-xs text-gray-500",children:[t.jsx(qe,{size:12,className:"animate-spin"})," Searching..."]}),ie.length>0&&t.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1",children:ie.map(_=>t.jsxs("button",{onClick:()=>rt(_),className:"w-full flex items-center gap-2 p-2 bg-white rounded-lg border border-gray-200 hover:border-orange-300 transition text-left",children:[t.jsx(pa,{size:12,className:"text-gray-400 flex-shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-xs font-medium text-gray-900 truncate",children:_.name}),t.jsx("span",{className:"text-[10px] text-gray-400",children:_.group_name})]}),t.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full flex-shrink-0 ${_.stock_qty>0?"bg-green-100 text-green-700":"bg-red-100 text-red-600"}`,children:_.stock_qty>0?`${_.stock_qty} ${_.uom}`:"Out"})]},_.id))}),q.length>=2&&!be&&ie.length===0&&t.jsx("p",{className:"text-xs text-gray-400 text-center py-2",children:"No items found"})]}):t.jsxs("button",{onClick:()=>ce(!0),className:"w-full flex items-center justify-center gap-2 py-2.5 text-sm text-gray-600 border border-dashed border-gray-300 rounded-xl hover:border-orange-400 hover:text-orange-700 transition",children:[t.jsx(Vt,{size:14}),"Search & add ingredient"]})})]})}),t.jsx("div",{className:"flex-shrink-0 border-t border-gray-100 px-5 py-4 bg-white",children:t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>{d(),ue()},className:"flex-1 flex items-center justify-center gap-2 bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 rounded-xl font-semibold text-sm transition",children:"Skip Recipe"}),wt.length>0&&t.jsxs("button",{onClick:Rt,className:"flex-1 flex items-center justify-center gap-2 bg-orange-600 hover:bg-orange-700 text-white py-3 rounded-xl font-bold text-sm transition shadow-md",children:[t.jsx(aa,{size:16}),"Use Recipe"]})]})})]})]}),document.body):null}const xj=[{value:"kitchen",label:"Kitchen"},{value:"housekeeping",label:"Housekeeping"},{value:"bar",label:"Bar"},{value:"maintenance",label:"Maintenance"},{value:"guest",label:"Guest"},{value:"office",label:"Office"},{value:"other",label:"Other"}],fj=["Kitchen","F&B","Housekeeping","Front Office","Bar","Maintenance","Laundry","Garden","Administration","Security"],hj=["101","102","103","104","105","106","107","108","201","202","203","204","205","206","207","208"],pj=[1,2,3,4,5,6,7,8,10,12,15,20,25,30,40,50];function gj(){const l=Ie(),i=Os(),[o,d]=u.useState([]),[x,f]=u.useState("kitchen"),[h,v]=u.useState(""),[p,g]=u.useState(""),[j,b]=u.useState(""),[y,z]=u.useState(""),[S,O]=u.useState(""),[C,w]=u.useState(""),[k,M]=u.useState(!1),[$,L]=u.useState(""),[te,X]=u.useState([]),[ge,K]=u.useState([]),[se,ne]=u.useState(""),[J,fe]=u.useState([]),[Q,ce]=u.useState(!1),[q,W]=u.useState(!1),ie=u.useRef(null),me=u.useRef(null),[be,E]=u.useState(!1),[G,Z]=u.useState([]),[A,le]=u.useState(null),[ue,he]=u.useState([]),[Ue,Ce]=u.useState(!1),rt=["FD","FM","FY","FV","FF"];u.useEffect(()=>{async function I(){try{const[Ne,st]=await Promise.all([Cd.list({per_page:10,page:1}),an.list()]);Ne.cost_centers&&(X(Ne.cost_centers),Ne.cost_centers.length>0&&v(String(Ne.cost_centers[0].id)));const Y=(st.users||[]).filter(ve=>ve.is_active);K(Y)}catch(Ne){console.error("Failed to load data:",Ne)}}I()},[]),u.useEffect(()=>{x==="kitchen"&&!Ue&&$t.suggestedItems("issue").then(I=>{he(I.frequent_items||[]),Ce(!0)}).catch(()=>Ce(!0))},[x,Ue]),u.useEffect(()=>{se.length>=2?(me.current&&clearTimeout(me.current),me.current=setTimeout(()=>Ot(),300)):fe([])},[se]);async function Ot(){ce(!0);try{const I=await Qi.list({search:se,per_page:15,active:1}),Ne=new Set(o.map(st=>st.item_id));fe(I.items.filter(st=>!Ne.has(st.id)))}catch(I){console.error("Search failed:",I)}finally{ce(!1)}}function Rt(I){if(x==="kitchen"&&rt.includes(I.group_code)){le(I),ne(""),fe([]),W(!1);return}wt(I)}function wt(I){d(Ne=>[...Ne,{item_id:I.id,item_code:I.item_code,item_name:I.name,group_code:I.group_code,uom:I.stock_uom||I.uom,price:I.last_purchase_price||I.weighted_avg_cost||0,qty:1,notes:""}]),ne(""),fe([]),W(!1)}function Ae(I,Ne){const st=new Set(o.map(ve=>ve.item_id)),Y=I.filter(ve=>!st.has(ve.item_id)).map(ve=>({item_id:ve.item_id,item_code:ve.item_code||"",item_name:ve.item_name,group_code:"",uom:ve.uom||"",price:0,qty:ve.qty||1,notes:Ne?`Recipe: ${Ne.name}`:""}));d(ve=>[...ve,...Y])}function re(){A&&wt(A)}function _(I){if(!o.some(st=>st.item_id===I.item_id)){if(rt.includes(I.group_code||"")){le({id:I.item_id,name:I.name,item_code:I.item_code,group_code:I.group_code,stock_uom:I.uom});return}d(st=>[...st,{item_id:I.item_id,item_code:I.item_code||"",item_name:I.name,group_code:I.group_code||"",uom:I.uom||"",price:0,qty:1,notes:""}])}}function F(I,Ne){Ne<.5||d(st=>st.map((Y,ve)=>ve===I?{...Y,qty:Ne}:Y))}function xe(I){d(Ne=>Ne.filter((st,Y)=>Y!==I))}function _e(I){Z(Ne=>{const st=Ne.includes(I)?Ne.filter(Y=>Y!==I):[...Ne,I];return z(st.join(", ")),st})}const Zt=o.reduce((I,Ne)=>I+Ne.qty*Ne.price,0);async function xt(){if(o.length===0){L("Add at least one item");return}if(!p.trim()){L("Select the person receiving the items");return}if(!h){L("Select a cost center");return}L(""),M(!0);try{const I=await Cd.create({issue_type:x,cost_center_id:parseInt(h),received_by_name:p.trim(),department:j||null,room_numbers:y||null,guest_count:S?parseInt(S):null,notes:C||null,lines:o.map(Ne=>({item_id:Ne.item_id,qty:Ne.qty,notes:Ne.notes||null}))});$t.logPattern(o.map(Ne=>({item_id:Ne.item_id,qty:Ne.qty})),"issue",I?.voucher?.id).catch(()=>{}),i("/app/issue")}catch(I){L(I.message)}finally{M(!1)}}const ba=["guest","housekeeping"].includes(x);return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx(we,{to:"/app/issue",className:"p-2 hover:bg-gray-100 rounded-lg transition",children:t.jsx(tl,{size:20,className:"text-gray-600"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"New Issue Voucher"}),t.jsxs("p",{className:"text-sm text-gray-500",children:[l?.camp_name||"Your Camp","  ",o.length," items"]})]})]}),$&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm flex items-center gap-2",children:[t.jsx(jt,{size:16}),$]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 mb-4",children:[t.jsx("h2",{className:"font-semibold text-gray-900 mb-3",children:"Issue Details"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Issue Type *"}),t.jsx("select",{value:x,onChange:I=>f(I.target.value),className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:xj.map(I=>t.jsx("option",{value:I.value,children:I.label},I.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Cost Center *"}),t.jsxs("select",{value:h,onChange:I=>v(I.target.value),className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[t.jsx("option",{value:"",children:"Select cost center"}),te.map(I=>t.jsxs("option",{value:I.id,children:[I.code,"  ",I.name]},I.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Received By *"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:p,onChange:I=>g(I.target.value),className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none appearance-none bg-white",children:[t.jsx("option",{value:"",children:" Select person "}),ge.map(I=>t.jsxs("option",{value:I.name,children:[I.name," (",I.role?.replace(/_/g," "),")"]},I.id))]}),t.jsx(vt,{size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Department"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:j,onChange:I=>b(I.target.value),className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none appearance-none bg-white",children:[t.jsx("option",{value:"",children:" Select department "}),fj.map(I=>t.jsx("option",{value:I,children:I},I))]}),t.jsx(vt,{size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),ba&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Room Numbers"}),t.jsxs("button",{type:"button",onClick:()=>E(!be),className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg text-left bg-white flex items-center justify-between",children:[t.jsx("span",{className:G.length?"text-gray-900":"text-gray-400",children:G.length?G.join(", "):"Tap to select rooms"}),t.jsx(vt,{size:16,className:"text-gray-400"})]}),be&&t.jsx("div",{className:"mt-1 p-2 bg-white border border-gray-200 rounded-lg shadow-lg grid grid-cols-4 gap-1.5",children:hj.map(I=>t.jsx("button",{type:"button",onClick:()=>_e(I),className:`px-2 py-1.5 text-xs rounded-lg font-medium transition ${G.includes(I)?"bg-green-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:I},I))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Guest Count"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:S,onChange:I=>O(I.target.value),className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none appearance-none bg-white",children:[t.jsx("option",{value:"",children:" Select "}),pj.map(I=>t.jsxs("option",{value:I,children:[I," guest",I>1?"s":""]},I))]}),t.jsx(vt,{size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]})]})]})]}),x==="kitchen"&&ue.length>0&&o.length===0&&t.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-4 mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(nn,{size:14,className:"text-orange-600"}),t.jsx("h3",{className:"text-xs font-semibold text-orange-800 uppercase tracking-wider",children:"Your Frequent Items"})]}),t.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1 scroll-touch",children:ue.slice(0,8).map(I=>t.jsxs("button",{onClick:()=>_(I),className:"flex-shrink-0 flex items-center gap-1.5 px-3 py-2 bg-white border border-orange-200 rounded-lg hover:border-orange-400 transition text-left",children:[t.jsx(nr,{size:10,className:"text-orange-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-gray-900 whitespace-nowrap",children:I.name}),t.jsxs("p",{className:"text-[9px] text-gray-400",children:[I.times_ordered,"x ordered  ",I.stock_qty," ",I.uom]})]})]},I.item_id))})]}),t.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4 mb-4",children:t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs("div",{className:"relative flex-1",children:[t.jsx(Vt,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{ref:ie,type:"text",value:se,onChange:I=>{ne(I.target.value),W(!0)},onFocus:()=>W(!0),placeholder:"Search items to issue...",className:"w-full pl-10 pr-4 py-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none"}),se&&t.jsx("button",{onClick:()=>{ne(""),fe([]),W(!1)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t.jsx(Te,{size:16})})]})}),q&&(J.length>0||Q)&&t.jsxs("div",{className:"absolute left-0 right-0 top-full mt-1 bg-white border border-gray-200 rounded-xl shadow-lg z-20 max-h-72 overflow-y-auto",children:[Q&&t.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 text-sm text-gray-500",children:[t.jsx(qe,{size:16,className:"animate-spin"})," Searching..."]}),J.map(I=>t.jsxs("button",{onClick:()=>Rt(I),className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-green-50 transition text-left border-b border-gray-50 last:border-0",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[t.jsx("span",{className:"text-xs font-mono text-gray-400",children:I.item_code}),t.jsx(Ye,{variant:I.abc_class,children:I.abc_class})]}),t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:I.name}),t.jsxs("p",{className:"text-xs text-gray-400",children:[I.group_name,"  ",I.stock_uom]})]}),x==="kitchen"&&rt.includes(I.group_code)?t.jsx(aa,{size:18,className:"text-orange-500 flex-shrink-0"}):t.jsx(Ve,{size:18,className:"text-green-600 flex-shrink-0"})]},I.id)),!Q&&J.length===0&&se.length>=2&&t.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"No items found"})]})]})}),o.length===0?t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center",children:[t.jsx(zs,{size:40,className:"mx-auto text-gray-300 mb-3"}),t.jsx("p",{className:"text-gray-500 text-sm",children:"Search and add items to issue above"})]}):t.jsx("div",{className:"bg-white rounded-xl border border-gray-200 mb-4",children:t.jsx("div",{className:"divide-y divide-gray-100",children:o.map((I,Ne)=>t.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:I.item_name}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5 flex-wrap",children:[I.item_code&&t.jsx("span",{className:"text-xs font-mono text-gray-400",children:I.item_code}),I.uom&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsx("span",{className:"text-xs text-gray-400",children:I.uom})]}),I.notes?.startsWith("Recipe:")&&t.jsxs("span",{className:"text-[9px] bg-orange-50 text-orange-600 px-1.5 py-0.5 rounded-full flex items-center gap-0.5",children:[t.jsx(aa,{size:8})," ",I.notes]}),I.price>0&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-xs text-gray-300",children:""}),t.jsxs("span",{className:"text-xs text-gray-500",children:["TZS ",Math.round(I.qty*I.price).toLocaleString()]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[t.jsx("button",{onClick:()=>F(Ne,I.qty-(I.qty>1?1:.5)),className:"w-9 h-9 flex items-center justify-center rounded-lg bg-gray-100 hover:bg-gray-200 transition",children:t.jsx(Wa,{size:16})}),t.jsx("span",{className:"w-14 h-9 flex items-center justify-center text-sm font-bold text-gray-900 bg-gray-50 rounded-lg border border-gray-200",children:I.qty}),t.jsx("button",{onClick:()=>F(Ne,I.qty+1),className:"w-9 h-9 flex items-center justify-center rounded-lg bg-gray-100 hover:bg-gray-200 transition",children:t.jsx(Ve,{size:16})})]}),t.jsx("button",{onClick:()=>xe(Ne),className:"p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition flex-shrink-0",children:t.jsx(Ts,{size:16})})]},I.item_id))})}),o.length>0&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (optional)"}),t.jsx("textarea",{value:C,onChange:I=>w(I.target.value),placeholder:"Any special notes for this issue...",rows:2,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none resize-none"})]}),o.length>0&&t.jsx("div",{className:"sticky bottom-16 lg:bottom-0 bg-white border border-gray-200 rounded-xl p-4 shadow-lg",children:t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm text-gray-500",children:[o.length," items  ",x]}),t.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["TZS ",Math.round(Zt).toLocaleString()]})]}),t.jsx("button",{onClick:xt,disabled:k,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white px-6 py-3 rounded-xl text-sm font-semibold transition",children:k?t.jsxs(t.Fragment,{children:[t.jsx(qe,{size:18,className:"animate-spin"}),"Creating..."]}):t.jsxs(t.Fragment,{children:[t.jsx(zs,{size:18}),"Create Issue Voucher"]})})]})}),A&&t.jsx(mj,{item:A,onClose:()=>le(null),onAddIngredients:Ae,onSkip:re})]})}function Ki({children:l,className:i=""}){return t.jsx("div",{className:`bg-white rounded-xl border border-gray-200 ${i}`,children:l})}const yj=[{key:"summary",label:"Overview",icon:""},{key:"low_stock",label:"Low Stock",icon:""},{key:"projections",label:"Projections",icon:""},{key:"dead_stock",label:"Dead Stock",icon:""},{key:"excess",label:"Excess",icon:""}],bj={out:"bg-red-100 text-red-800",critical:"bg-red-100 text-red-700",low:"bg-amber-100 text-amber-800",ok:"bg-green-100 text-green-800",excess:"bg-blue-100 text-blue-800"};function vj(){const{user:l}=Ie(),[i,o]=u.useState("summary"),[d,x]=u.useState(null),[f,h]=u.useState(null),[v,p]=u.useState(!0),[g,j]=u.useState(""),[b,y]=u.useState(14),[z,S]=u.useState(60),O=["camp_storekeeper","camp_manager"].includes(l?.role)?l?.camp_id:null;u.useEffect(()=>{C()},[]),u.useEffect(()=>{i!=="summary"&&w()},[i,b,z]);async function C(){try{p(!0);const k=await Fn.summary(O);x(k.alerts)}catch(k){j(k.message)}finally{p(!1)}}async function w(){try{p(!0),j("");let k;switch(i){case"low_stock":k=await Fn.lowStock(O);break;case"projections":k=await Fn.projections(b,O);break;case"dead_stock":k=await Fn.deadStock(z,O);break;case"excess":k=await Fn.excess(O);break}h(k)}catch(k){j(k.message)}finally{p(!1)}}return v&&!d?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600"})}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Stock Alerts & Projections"}),t.jsx("button",{onClick:()=>{C(),i!=="summary"&&w()},className:"text-sm text-emerald-600 hover:text-emerald-700 font-medium",children:" Refresh"})]}),g&&t.jsx("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg text-sm",children:g}),t.jsx("div",{"data-guide":"alerts-tabs",className:"flex overflow-x-auto gap-1 bg-gray-100 p-1 rounded-lg",children:yj.map(k=>t.jsxs("button",{onClick:()=>o(k.key),className:`flex-shrink-0 px-3 py-2 rounded-md text-sm font-medium transition-colors ${i===k.key?"bg-white text-emerald-700 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[t.jsx("span",{className:"mr-1",children:k.icon}),k.label,k.key!=="summary"&&d&&t.jsxs("span",{className:"ml-1 text-xs",children:["(",k.key==="low_stock"?d.low_stock+d.out_of_stock:k.key==="projections"?d.stockout_7days:k.key==="dead_stock"?d.dead_stock:k.key==="excess"?d.excess_stock:0,")"]})]},k.key))}),i==="summary"&&d&&t.jsx(jj,{summary:d,onNavigate:o}),i==="low_stock"&&!v&&f&&t.jsx(Nj,{data:f}),i==="projections"&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm text-gray-600",children:"Forecast horizon:"}),t.jsxs("select",{value:b,onChange:k=>y(Number(k.target.value)),className:"border border-gray-300 rounded-md px-2 py-1 text-sm",children:[t.jsx("option",{value:7,children:"7 days"}),t.jsx("option",{value:14,children:"14 days"}),t.jsx("option",{value:30,children:"30 days"}),t.jsx("option",{value:60,children:"60 days"}),t.jsx("option",{value:90,children:"90 days"})]})]}),!v&&f&&t.jsx(Sj,{data:f})]}),i==="dead_stock"&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm text-gray-600",children:"No movement for:"}),t.jsxs("select",{value:z,onChange:k=>S(Number(k.target.value)),className:"border border-gray-300 rounded-md px-2 py-1 text-sm",children:[t.jsx("option",{value:30,children:"30+ days"}),t.jsx("option",{value:60,children:"60+ days"}),t.jsx("option",{value:90,children:"90+ days"}),t.jsx("option",{value:180,children:"180+ days"})]})]}),!v&&f&&t.jsx(_j,{data:f})]}),i==="excess"&&!v&&f&&t.jsx(wj,{data:f}),v&&i!=="summary"&&t.jsx("div",{className:"flex items-center justify-center h-32",children:t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-emerald-600"})})]})}function jj({summary:l,onNavigate:i}){const o=[{label:"Critical / Low Stock",value:l.low_stock,sub:`${l.critical} critical`,color:"text-amber-600",bg:"bg-amber-50",icon:"",tab:"low_stock"},{label:"Out of Stock",value:l.out_of_stock,color:"text-red-600",bg:"bg-red-50",icon:"",tab:"low_stock"},{label:"Stock-out in 7 days",value:l.stockout_7days,sub:"Based on avg usage",color:"text-orange-600",bg:"bg-orange-50",icon:"",tab:"projections"},{label:"Dead Stock",value:l.dead_stock,sub:"60+ days no movement",color:"text-gray-600",bg:"bg-gray-50",icon:"",tab:"dead_stock"},{label:"Excess Stock",value:l.excess_stock,sub:"Above max level",color:"text-blue-600",bg:"bg-blue-50",icon:"",tab:"excess"},{label:"Total Alerts",value:l.total_alerts,color:"text-purple-600",bg:"bg-purple-50",icon:""}];return t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:o.map((d,x)=>t.jsxs("button",{onClick:()=>d.tab&&i(d.tab),className:`${d.bg} rounded-xl p-4 text-left transition-transform hover:scale-[1.02] ${d.tab?"cursor-pointer":""}`,children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"text-lg",children:d.icon}),t.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase",children:d.label})]}),t.jsx("div",{className:`text-2xl font-bold ${d.color}`,children:d.value}),d.sub&&t.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:d.sub})]},x))})}function Nj({data:l}){return l.items?.length?t.jsxs("div",{className:"space-y-2",children:[t.jsxs("p",{className:"text-sm text-gray-500",children:[l.count," items below threshold"]}),t.jsx("div",{className:"space-y-2",children:l.items.map((i,o)=>t.jsxs(Ki,{className:"p-3",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${i.stock_status==="out"?"bg-red-500":i.stock_status==="critical"?"bg-red-400":"bg-amber-400"}`}),t.jsx("span",{className:"font-medium text-gray-900 text-sm truncate",children:i.item_name}),i.is_critical&&t.jsx("span",{className:"text-xs text-red-600 font-medium",children:"CRITICAL"})]}),t.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-500",children:[t.jsx("span",{children:i.item_code}),t.jsx("span",{children:i.camp_code}),t.jsx("span",{children:i.group_code})]})]}),t.jsx("div",{className:"text-right",children:t.jsx("span",{className:`inline-block px-2 py-0.5 rounded-full text-xs font-medium ${bj[i.stock_status]}`,children:i.stock_status})})]}),t.jsxs("div",{className:"mt-2 grid grid-cols-4 gap-2 text-xs",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-gray-400",children:"On Hand"}),t.jsxs("div",{className:"font-semibold",children:[i.current_qty," ",i.uom]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-gray-400",children:"Par Level"}),t.jsx("div",{className:"font-semibold",children:i.par_level??"-"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-gray-400",children:"Daily Use"}),t.jsx("div",{className:"font-semibold",children:i.avg_daily_usage??"-"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-gray-400",children:"Days Left"}),t.jsx("div",{className:`font-semibold ${i.days_left!==null&&i.days_left<=3?"text-red-600":i.days_left!==null&&i.days_left<=7?"text-amber-600":""}`,children:i.days_left!==null?`${i.days_left}d`:"-"})]})]}),i.reorder_qty&&t.jsxs("div",{className:"mt-2 bg-emerald-50 text-emerald-700 text-xs rounded px-2 py-1",children:["Suggested reorder: ",t.jsxs("strong",{children:[i.reorder_qty," ",i.uom]})]})]},o))})]}):t.jsx(Ji,{message:"No low stock items found"})}function Sj({data:l}){return l.items?.length?t.jsxs("div",{className:"space-y-2",children:[t.jsxs("p",{className:"text-sm text-gray-500",children:[l.count," items will stock out within ",l.days_horizon," days"]}),t.jsx("div",{className:"space-y-2",children:l.items.map((i,o)=>t.jsxs(Ki,{className:"p-3",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-medium text-gray-900 text-sm truncate",children:i.item_name}),i.is_critical&&t.jsx("span",{className:"text-xs text-red-600 font-medium",children:"CRITICAL"})]}),t.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-500",children:[t.jsx("span",{children:i.item_code}),t.jsxs("span",{children:[i.camp_code,"  ",i.camp_name]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:`text-lg font-bold ${i.days_until_stockout<=3?"text-red-600":i.days_until_stockout<=7?"text-amber-600":"text-orange-500"}`,children:[i.days_until_stockout,"d"]}),t.jsx("div",{className:"text-[10px] text-gray-400",children:"until out"})]})]}),t.jsxs("div",{className:"mt-2 flex items-center gap-4 text-xs",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-400",children:"Stock: "}),t.jsxs("span",{className:"font-medium",children:[i.current_qty," ",i.uom]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-400",children:"Usage: "}),t.jsxs("span",{className:"font-medium",children:[i.avg_daily_usage,"/day"]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-400",children:"Out by: "}),t.jsx("span",{className:"font-medium text-red-600",children:i.projected_stockout_date})]})]}),t.jsx("div",{className:"mt-2 h-1.5 bg-gray-100 rounded-full overflow-hidden",children:t.jsx("div",{className:`h-full rounded-full transition-all ${i.days_until_stockout<=3?"bg-red-500":i.days_until_stockout<=7?"bg-amber-500":"bg-orange-400"}`,style:{width:`${Math.max(5,Math.min(100,i.days_until_stockout/l.days_horizon*100))}%`}})}),t.jsxs("div",{className:"mt-1 bg-blue-50 text-blue-700 text-xs rounded px-2 py-1",children:["Reorder suggestion: ",t.jsxs("strong",{children:[i.suggested_reorder_qty," ",i.uom]})]})]},o))})]}):t.jsx(Ji,{message:`No items projected to run out within ${l.days_horizon} days`})}function _j({data:l}){return l.items?.length?t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("p",{className:"text-sm text-gray-500",children:[l.count," items with no movement"]}),t.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Total value: ",t.jsxs("span",{className:"text-red-600",children:["TZS ",Number(l.total_value).toLocaleString()]})]})]}),t.jsx("div",{className:"space-y-2",children:l.items.map((i,o)=>t.jsxs(Ki,{className:"p-3",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-900 text-sm",children:i.item_name}),t.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:[i.item_code,"  ",i.camp_code,"  ",i.group_code]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"text-lg font-bold text-gray-400",children:[i.days_no_movement,"d"]}),t.jsx("div",{className:"text-[10px] text-gray-400",children:"no movement"})]})]}),t.jsxs("div",{className:"mt-2 flex items-center gap-4 text-xs",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-400",children:"Qty: "}),t.jsxs("span",{className:"font-medium",children:[i.current_qty," ",i.uom]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-400",children:"Value: "}),t.jsxs("span",{className:"font-medium",children:["TZS ",Number(i.current_value).toLocaleString()]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-400",children:"Last issue: "}),t.jsx("span",{className:"font-medium",children:i.last_issue_date||"Never"})]})]})]},o))})]}):t.jsx(Ji,{message:`No items with ${l.min_days}+ days of no movement`})}function wj({data:l}){return l.items?.length?t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("p",{className:"text-sm text-gray-500",children:[l.count," items above max level"]}),t.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Excess value: ",t.jsxs("span",{className:"text-blue-600",children:["TZS ",Number(l.total_excess_value).toLocaleString()]})]})]}),t.jsx("div",{className:"space-y-2",children:l.items.map((i,o)=>t.jsxs(Ki,{className:"p-3",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-900 text-sm",children:i.item_name}),t.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:[i.item_code,"  ",i.camp_code,"  ",i.group_code]})]}),t.jsx(Ye,{variant:"info",children:"excess"})]}),t.jsxs("div",{className:"mt-2 grid grid-cols-4 gap-2 text-xs",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-gray-400",children:"On Hand"}),t.jsxs("div",{className:"font-semibold",children:[i.current_qty," ",i.uom]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-gray-400",children:"Max Level"}),t.jsx("div",{className:"font-semibold",children:i.max_level??"-"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-gray-400",children:"Excess Qty"}),t.jsx("div",{className:"font-semibold text-blue-600",children:i.excess_qty??"-"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-gray-400",children:"Days Stock"}),t.jsx("div",{className:"font-semibold",children:i.days_stock_on_hand?`${i.days_stock_on_hand}d`:"-"})]})]})]},o))})]}):t.jsx(Ji,{message:"No excess stock items found"})}function Ji({message:l}){return t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"text-4xl mb-2",children:""}),t.jsx("div",{className:"text-gray-500",children:l})]})}const hf=[{key:"stock_summary",label:"Stock Summary",desc:"Stock levels and values by camp"},{key:"movement_history",label:"Movement History",desc:"All stock movements in period"},{key:"order_summary",label:"Order Summary",desc:"Orders overview by camp"},{key:"consumption",label:"Consumption",desc:"Issue/consumption analysis"}];function kj(){Ie();const{camps:l}=ya(),[i,o]=u.useState("stock_summary"),[d,x]=u.useState(""),[f,h]=u.useState(new Date(new Date().setDate(1)).toISOString().slice(0,10)),[v,p]=u.useState(new Date().toISOString().slice(0,10)),[g,j]=u.useState(null),[b,y]=u.useState(!1),[z,S]=u.useState("");async function O(){y(!0),S(""),j(null);try{const C={date_from:f,date_to:v};d&&(C.camp_id=d);const w=await Yb.get(i,C);j(w)}catch(C){S(C.message)}finally{y(!1)}}return t.jsxs("div",{className:"space-y-4",children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Reports"}),t.jsx("div",{"data-guide":"report-filters",className:"bg-white rounded-xl border border-gray-200 p-4",children:t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Report Type"}),t.jsx("select",{"data-guide":"report-type-select",value:i,onChange:C=>o(C.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",children:hf.map(C=>t.jsx("option",{value:C.key,children:C.label},C.key))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Camp"}),t.jsxs("select",{value:d,onChange:C=>x(C.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[t.jsx("option",{value:"",children:"All Camps"}),l?.map(C=>t.jsxs("option",{value:C.id,children:[C.code,"  ",C.name]},C.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"From"}),t.jsx("input",{type:"date",value:f,onChange:C=>h(C.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"To"}),t.jsx("input",{type:"date",value:v,onChange:C=>p(C.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm"})]}),t.jsx("div",{className:"flex items-end",children:t.jsx("button",{onClick:O,disabled:b,"data-guide":"report-generate-btn",className:"w-full bg-emerald-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-emerald-700 disabled:opacity-50",children:b?"Loading...":"Generate"})})]})}),z&&t.jsx("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg text-sm",children:z}),b&&t.jsx(dt,{message:"Generating report..."}),g&&!b&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h2",{className:"font-semibold text-gray-900",children:hf.find(C=>C.key===g.report_type)?.label}),t.jsxs("span",{className:"text-xs text-gray-500",children:[g.period?.from," to ",g.period?.to]})]}),g.data?.length===0?t.jsx("div",{className:"text-center py-8 text-gray-400",children:"No data found for selected period"}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsx("tr",{className:"border-b border-gray-100",children:Object.keys(g.data[0]||{}).map(C=>t.jsx("th",{className:"text-left text-xs font-medium text-gray-500 pb-2 px-2 whitespace-nowrap",children:C.replace(/_/g," ")},C))})}),t.jsx("tbody",{children:g.data.map((C,w)=>t.jsx("tr",{className:"border-b border-gray-50",children:Object.values(C).map((k,M)=>t.jsx("td",{className:"py-2 px-2 whitespace-nowrap",children:typeof k=="number"?Number(k).toLocaleString():k||"-"},M))},w))})]})}),t.jsxs("div",{className:"mt-3 text-xs text-gray-400",children:[g.data?.length," rows"]})]})]})}const Cj=["camp_storekeeper","camp_manager","chef","housekeeping","stores_manager","procurement_officer","accountant","director","admin"];function zj(){const l=Ie(),{state:i}=cn(),o=i.camps||[],[d,x]=u.useState([]),[f,h]=u.useState(!0),[v,p]=u.useState(""),[g,j]=u.useState(!1),[b,y]=u.useState({username:"",name:"",role:"camp_storekeeper",password:"",camp_id:"",pin:""}),[z,S]=u.useState(!1);u.useEffect(()=>{O()},[]);async function O(){try{h(!0);const k=await an.list();x(k.users||[])}catch(k){p(k.message)}finally{h(!1)}}async function C(k){k.preventDefault(),S(!0),p("");try{await an.create({...b,camp_id:b.camp_id?Number(b.camp_id):null}),j(!1),y({username:"",name:"",role:"camp_storekeeper",password:"",camp_id:"",pin:""}),O()}catch(M){p(M.message)}finally{S(!1)}}async function w(k){try{await an.update(k.id,{is_active:!k.is_active}),O()}catch(M){p(M.message)}}return f?t.jsx(dt,{message:"Loading users..."}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"User Management"}),l?.role==="admin"&&t.jsx("button",{onClick:()=>j(!g),"data-guide":"new-user-btn",className:"bg-emerald-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-emerald-700",children:g?"Cancel":"+ New User"})]}),v&&t.jsx("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg text-sm",children:v}),g&&t.jsxs("form",{onSubmit:C,"data-guide":"user-create-form",className:"bg-white rounded-xl border border-gray-200 p-4 space-y-3",children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Full Name"}),t.jsx("input",{value:b.name,onChange:k=>y({...b,name:k.target.value}),required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Username"}),t.jsx("input",{value:b.username,onChange:k=>y({...b,username:k.target.value}),required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Password"}),t.jsx("input",{type:"password",value:b.password,onChange:k=>y({...b,password:k.target.value}),required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Role"}),t.jsx("select",{value:b.role,onChange:k=>y({...b,role:k.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",children:Cj.map(k=>t.jsx("option",{value:k,children:k.replace(/_/g," ")},k))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Camp"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:b.camp_id,onChange:k=>y({...b,camp_id:k.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm appearance-none bg-white",children:[t.jsx("option",{value:"",children:" Head Office "}),o.map(k=>t.jsxs("option",{value:k.id,children:[k.code,"  ",k.name]},k.id))]}),t.jsx(vt,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"PIN (optional)"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm font-mono tracking-widest bg-gray-50 min-h-[38px] flex items-center",children:b.pin?"".repeat(b.pin.length):t.jsx("span",{className:"text-gray-400",children:"No PIN"})}),b.pin&&t.jsx("button",{type:"button",onClick:()=>y({...b,pin:""}),className:"text-xs text-red-500 hover:text-red-700",children:"Clear"})]}),b.pin.length<4&&t.jsx("div",{className:"grid grid-cols-5 gap-1 mt-1.5",children:[1,2,3,4,5,6,7,8,9,0].map(k=>t.jsx("button",{type:"button",onClick:()=>b.pin.length<4&&y({...b,pin:b.pin+String(k)}),className:"h-8 text-sm font-medium bg-gray-100 hover:bg-gray-200 rounded-lg transition",children:k},k))})]})]}),t.jsx("button",{type:"submit",disabled:z,className:"bg-emerald-600 text-white px-6 py-2 rounded-lg text-sm font-medium hover:bg-emerald-700 disabled:opacity-50",children:z?"Creating...":"Create User"})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[t.jsx("div",{className:"hidden md:block overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[t.jsx("th",{className:"text-left px-4 py-3 font-medium text-gray-500",children:"Name"}),t.jsx("th",{className:"text-left px-4 py-3 font-medium text-gray-500",children:"Username"}),t.jsx("th",{className:"text-left px-4 py-3 font-medium text-gray-500",children:"Role"}),t.jsx("th",{className:"text-left px-4 py-3 font-medium text-gray-500",children:"Camp"}),t.jsx("th",{className:"text-center px-4 py-3 font-medium text-gray-500",children:"PIN"}),t.jsx("th",{className:"text-center px-4 py-3 font-medium text-gray-500",children:"Status"}),l?.role==="admin"&&t.jsx("th",{className:"text-center px-4 py-3 font-medium text-gray-500",children:"Action"})]})}),t.jsx("tbody",{children:d.map(k=>t.jsxs("tr",{className:"border-b border-gray-50 hover:bg-gray-50",children:[t.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:k.name}),t.jsx("td",{className:"px-4 py-3 text-gray-500 font-mono text-xs",children:k.username}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full",children:k.role?.replace(/_/g," ")})}),t.jsx("td",{className:"px-4 py-3 text-gray-500",children:k.camp_code||"HO"}),t.jsx("td",{className:"px-4 py-3 text-center",children:k.pin_enabled?"":""}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx(Ye,{variant:k.is_active?"success":"danger",children:k.is_active?"Active":"Inactive"})}),l?.role==="admin"&&t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx("button",{onClick:()=>w(k),className:`text-xs px-3 py-1 rounded-full ${k.is_active?"text-red-600 hover:bg-red-50":"text-green-600 hover:bg-green-50"}`,children:k.is_active?"Deactivate":"Activate"})})]},k.id))})]})}),t.jsx("div",{className:"md:hidden divide-y divide-gray-100",children:d.map(k=>t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:k.name}),t.jsxs("p",{className:"text-xs text-gray-500",children:[k.username,"  ",k.camp_code||"HO"]})]}),t.jsx(Ye,{variant:k.is_active?"success":"danger",children:k.is_active?"Active":"Inactive"})]}),t.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[t.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full",children:k.role?.replace(/_/g," ")}),k.pin_enabled&&t.jsx("span",{className:"text-xs text-gray-400",children:"PIN enabled"})]})]},k.id))})]}),t.jsxs("p",{className:"text-xs text-gray-400 text-center",children:[d.length," users total"]})]})}function Ej(){const l=Ie(),{dispatch:i}=cn(),{campId:o,camps:d}=ya(),x=ln(l?.role);function f(){localStorage.removeItem("kcl_token"),localStorage.removeItem("kcl_stores"),window.location.hash="#/login",window.location.reload()}function h(v){const p=parseInt(v.target.value)||null;i({type:"SELECT_CAMP",payload:p})}return t.jsxs("div",{className:"max-w-2xl",children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-6",children:"Settings"}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-4",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-5",children:[t.jsx("div",{className:"w-14 h-14 bg-green-100 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-green-700 font-bold text-xl",children:l?.name?.charAt(0)||"?"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:l?.name}),t.jsxs("p",{className:"text-sm text-gray-500",children:["@",l?.username]})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(Nd,{icon:U1,label:"Role",value:l?.role?.replace(/_/g," ")}),t.jsx(Nd,{icon:ov,label:"Camp",value:l?.camp_name||"Head Office"}),t.jsx(Nd,{icon:C1,label:"Approval Limit",value:l?.approval_limit?`TZS ${Math.round(l.approval_limit).toLocaleString()}`:"None"})]})]}),x&&d.length>1&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-4",children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"View Camp"}),t.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"As a manager, you can switch between camps to view their stock, orders, and issues."}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:o||"",onChange:h,className:"w-full px-4 py-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none appearance-none bg-white",children:[t.jsx("option",{value:"",children:"All Camps (Head Office View)"}),d.map(v=>t.jsxs("option",{value:v.id,children:[v.code,"  ",v.name]},v.id))]}),t.jsx(vt,{size:18,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-4",children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"About"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-500",children:"Application"}),t.jsx("span",{className:"text-gray-900 font-medium",children:"KCL Stores"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-500",children:"Version"}),t.jsx("span",{className:"text-gray-900 font-medium",children:"1.0.0"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-500",children:"Organisation"}),t.jsx("span",{className:"text-gray-900 font-medium",children:"Karibu Camps Limited"})]})]})]}),t.jsxs("button",{onClick:f,className:"w-full flex items-center justify-center gap-2 bg-red-50 text-red-600 hover:bg-red-100 px-4 py-3 rounded-xl text-sm font-medium transition",children:[t.jsx(Kd,{size:18}),"Sign Out"]})]})}function Nd({icon:l,label:i,value:o}){return t.jsxs("div",{className:"flex items-center gap-3 py-2",children:[t.jsx("div",{className:"w-8 h-8 bg-gray-50 rounded-lg flex items-center justify-center flex-shrink-0",children:t.jsx(l,{size:16,className:"text-gray-400"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-xs text-gray-400",children:i}),t.jsx("p",{className:"text-sm font-medium text-gray-900 capitalize",children:o})]})]})}const pf=[{value:"bar",label:"Bar",icon:fa,color:"bg-purple-500",costCenter:"BAR"},{value:"restaurant",label:"Restaurant",icon:Pn,color:"bg-orange-500",costCenter:"KITCHEN"},{value:"kitchen",label:"Kitchen",icon:zv,color:"bg-amber-500",costCenter:"KITCHEN"},{value:"rooms",label:"Rooms",icon:av,color:"bg-blue-500",costCenter:"ROOMS"},{value:"guest",label:"Guest",icon:Sa,color:"bg-green-500",costCenter:"ROOMS"},{value:"staff",label:"Staff",icon:Sa,color:"bg-gray-500",costCenter:"STAFF"},{value:"maintenance",label:"Maintenance",icon:Q1,color:"bg-red-500",costCenter:"MAINT"}],gf=["BA","BJ"],Tj=Array.from({length:20},(l,i)=>String(i+1)),Oj=[1,2,3,4,5,6,7,8,10,12,15,20,25,30,40,50],Rj=["101","102","103","104","105","106","107","108","201","202","203","204","205","206","207","208"];function Aj(){const l=Ie(),[i,o]=u.useState("service"),[d,x]=u.useState(null),[f,h]=u.useState([]),[v,p]=u.useState(null),[g,j]=u.useState([]),[b,y]=u.useState([]),[z,S]=u.useState(!1),[O,C]=u.useState(""),[w,k]=u.useState(!1),[M,$]=u.useState(null),[L,te]=u.useState("");u.useRef(null);const[X,ge]=u.useState(""),[K,se]=u.useState(""),[ne,J]=u.useState(""),[fe,Q]=u.useState(""),[ce,q]=u.useState(""),[W,ie]=u.useState(!1),[me,be]=u.useState([]),[E,G]=u.useState([]),[Z,A]=u.useState(!1),[le,ue]=u.useState(null),[he,Ue]=u.useState([]),[Ce,rt]=u.useState(!1);u.useEffect(()=>{Ot()},[]),u.useEffect(()=>{async function Y(){try{const ve=await an.list();be((ve.users||[]).filter(Ge=>Ge.is_active))}catch(ve){console.error("Failed to load staff:",ve)}}Y()},[]);async function Ot(){try{const Y=await tr.today();ue(Y.today)}catch(Y){console.error("Failed to load today stats:",Y)}}async function Rt(Y){S(!0);try{const[ve,Ge]=await Promise.all([tr.categories(),tr.items({limit:100})]);let ft=ve.categories||[],dn=Ge.items||[];Y.value==="bar"&&(ft=ft.filter(ll=>gf.includes(ll.code)),dn=dn.filter(ll=>gf.includes(ll.group_code))),h(ft),j(dn),p(null)}catch(ve){C(ve.message)}finally{S(!1)}}async function wt(){try{const Y=await tr.recent({limit:15});Ue(Y.transactions||[]),rt(!0)}catch(Y){C(Y.message)}}function Ae(Y){x(Y),o("items"),te(""),Rt(Y)}const re=f,_=u.useMemo(()=>{let Y=g;if(v&&(Y=Y.filter(ve=>ve.group_code===v)),L.trim()){const ve=L.toLowerCase();Y=Y.filter(Ge=>Ge.name.toLowerCase().includes(ve)||Ge.item_code?.toLowerCase().includes(ve)||Ge.group_name?.toLowerCase().includes(ve))}return Y},[g,v,L]);function F(Y){y(ve=>ve.find(ft=>ft.id===Y.id)?ve.map(ft=>ft.id===Y.id?{...ft,qty:ft.qty+1}:ft):[...ve,{...Y,qty:1}])}function xe(Y,ve){ve<=0?y(Ge=>Ge.filter(ft=>ft.id!==Y)):y(Ge=>Ge.map(ft=>ft.id===Y?{...ft,qty:ve}:ft))}function _e(Y){y(ve=>ve.filter(Ge=>Ge.id!==Y))}function Zt(Y){G(ve=>{const Ge=ve.includes(Y)?ve.filter(ft=>ft!==Y):[...ve,Y];return J(Ge.join(", ")),Ge})}const xt=b.reduce((Y,ve)=>Y+ve.qty*ve.price,0),ba=b.reduce((Y,ve)=>Y+ve.qty,0);async function I(){if(b.length!==0){k(!0),C("");try{const Y=pf.find(Ge=>Ge.value===d?.value),ve=await tr.create({service_type:d.value,cost_center:Y?.costCenter||"BAR",received_by:fe.trim()||"Walk-in",table_number:X||null,guest_count:K?parseInt(K):null,room_numbers:ne||null,notes:ce||null,items:b.map(Ge=>({id:Ge.id,qty:Ge.qty,notes:null}))});$({...ve.transaction,items:[...b],service:d,time:new Date().toLocaleTimeString()}),o("receipt"),y([]),ge(""),se(""),J(""),Q(""),q(""),G([]),A(!1),ie(!1),Ot()}catch(Y){C(Y.message)}finally{k(!1)}}}function Ne(){o("service"),x(null),p(null),j([]),h([]),y([]),te(""),$(null),C(""),rt(!1)}function st(){i==="cart"?o("items"):i==="items"&&(o("service"),x(null),j([]),h([]))}return i==="receipt"&&M?t.jsx("div",{className:"max-w-md mx-auto",children:t.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 overflow-hidden",children:[t.jsxs("div",{className:"bg-green-600 text-white text-center py-6 px-4",children:[t.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-3",children:t.jsx(ih,{size:32})}),t.jsx("h2",{className:"text-lg font-bold",children:"Transaction Complete"}),t.jsx("p",{className:"text-green-100 text-sm mt-1",children:M.voucher_number})]}),t.jsxs("div",{className:"p-4 space-y-3",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-500",children:"Service"}),t.jsx("span",{className:"font-medium",children:M.service?.label})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-500",children:"Time"}),t.jsx("span",{className:"font-medium",children:M.time})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-500",children:"Items"}),t.jsx("span",{className:"font-medium",children:M.items_count})]}),t.jsx("div",{className:"border-t border-dashed border-gray-200 pt-3 mt-3",children:M.items.map(Y=>t.jsxs("div",{className:"flex justify-between text-sm py-1",children:[t.jsxs("span",{className:"text-gray-700",children:[Y.qty,"x ",Y.name]}),t.jsxs("span",{className:"text-gray-600",children:["TZS ",Math.round(Y.qty*Y.price).toLocaleString()]})]},Y.id))}),t.jsxs("div",{className:"border-t border-gray-200 pt-3 flex justify-between",children:[t.jsx("span",{className:"font-bold text-gray-900",children:"Total"}),t.jsxs("span",{className:"font-bold text-gray-900 text-lg",children:["TZS ",Math.round(M.total_value).toLocaleString()]})]})]}),t.jsxs("div",{className:"p-4 border-t border-gray-100 space-y-2",children:[t.jsx("button",{onClick:Ne,className:"w-full bg-green-600 text-white py-3 rounded-xl font-semibold text-sm hover:bg-green-700 transition",children:"New Transaction"}),t.jsx("button",{onClick:()=>{o("service"),x(null)},className:"w-full bg-gray-100 text-gray-700 py-3 rounded-xl font-semibold text-sm hover:bg-gray-200 transition",children:"Back to POS Home"})]})]})}):Ce?t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("button",{onClick:()=>rt(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition",children:t.jsx(Oa,{size:20,className:"text-gray-600"})}),t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Recent Transactions"})]}),t.jsx("div",{className:"space-y-2",children:he.length===0?t.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center text-gray-400",children:"No recent transactions"}):he.map(Y=>t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-mono text-xs text-gray-400",children:Y.voucher_number}),t.jsxs("p",{className:"font-medium text-gray-900 text-sm mt-0.5",children:[Y.cost_center||Y.issue_type,"  ",Y.received_by]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"font-bold text-gray-900",children:["TZS ",Math.round(Y.total_value).toLocaleString()]}),t.jsxs("p",{className:"text-xs text-gray-400",children:[Y.line_count," items"]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-gray-400",children:[t.jsx(Cs,{size:12}),t.jsx("span",{children:new Date(Y.created_at).toLocaleString()}),Y.notes&&t.jsxs("span",{className:"text-gray-300",children:[" ",Y.notes]})]})]},Y.id))})]}):t.jsxs("div",{className:"h-full",children:[O&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm flex items-center gap-2",children:[t.jsx(jt,{size:16}),t.jsx("span",{className:"flex-1",children:O}),t.jsx("button",{onClick:()=>C(""),children:t.jsx(Te,{size:16})})]}),i==="service"&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"POS Terminal"}),t.jsx("p",{className:"text-sm text-gray-500",children:l?.camp_name||"Your Camp"})]}),t.jsxs("button",{onClick:wt,"data-guide":"pos-history-btn",className:"flex items-center gap-2 text-sm text-gray-600 hover:text-gray-900 bg-white border border-gray-200 px-3 py-2 rounded-lg transition",children:[t.jsx(Cs,{size:16})," History"]})]}),le&&t.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3 text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:le.transactions}),t.jsx("p",{className:"text-xs text-gray-500",children:"Today's Sales"})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3 text-center",children:[t.jsx("p",{className:"text-lg font-bold text-green-600",children:le.value>0?`TZS ${Math.round(le.value).toLocaleString()}`:"-"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Today's Value"})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3 text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:le.guests||0}),t.jsx("p",{className:"text-xs text-gray-500",children:"Guests Served"})]})]}),t.jsx("h2",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Select Service Type"}),t.jsx("div",{"data-guide":"pos-service-types",className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:pf.map(Y=>t.jsxs("button",{onClick:()=>Ae(Y),className:"bg-white rounded-xl border border-gray-200 p-4 text-center hover:border-green-300 hover:shadow-md transition group",children:[t.jsx("div",{className:`w-12 h-12 ${Y.color} rounded-xl flex items-center justify-center mx-auto mb-2 group-hover:scale-110 transition`,children:t.jsx(Y.icon,{size:24,className:"text-white"})}),t.jsx("p",{className:"font-medium text-gray-900 text-sm",children:Y.label})]},Y.value))}),b.length>0&&t.jsx("div",{className:"mt-6 bg-green-50 border border-green-200 rounded-xl p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(_t,{size:20,className:"text-green-600"}),t.jsxs("span",{className:"font-medium text-green-800",children:[ba," items in cart"]})]}),t.jsxs("span",{className:"font-bold text-green-800",children:["TZS ",Math.round(xt).toLocaleString()]})]})})]}),i==="items"&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("button",{onClick:st,className:"p-2 hover:bg-gray-100 rounded-lg transition",children:t.jsx(Oa,{size:20,className:"text-gray-600"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h1",{className:"text-lg font-bold text-gray-900",children:d?.label}),t.jsxs("p",{className:"text-xs text-gray-500",children:[_.length," items  Tap to add"]})]}),b.length>0&&t.jsxs("button",{onClick:()=>o("cart"),className:"relative p-2 bg-green-100 rounded-lg transition hover:bg-green-200",children:[t.jsx(_t,{size:20,className:"text-green-700"}),t.jsx("span",{className:"absolute -top-1 -right-1 bg-green-600 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center font-bold",children:ba})]})]}),t.jsxs("div",{className:"relative mb-3",children:[t.jsx(Vt,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",value:L,onChange:Y=>te(Y.target.value),placeholder:"Search items...",className:"w-full pl-10 pr-10 py-2.5 text-sm border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none"}),L&&t.jsx("button",{onClick:()=>te(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:t.jsx(Te,{size:16})})]}),re.length>1&&t.jsxs("div",{className:"flex gap-2 mb-3 overflow-x-auto pb-1 scroll-touch",children:[t.jsxs("button",{onClick:()=>p(null),className:`flex-shrink-0 px-3 py-1.5 rounded-full text-xs font-semibold transition ${v?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-green-600 text-white shadow-sm"}`,children:["All (",g.length,")"]}),re.map(Y=>{const ve=g.filter(Ge=>Ge.group_code===Y.code).length;return t.jsxs("button",{onClick:()=>p(Y.code),className:`flex-shrink-0 px-3 py-1.5 rounded-full text-xs font-semibold transition whitespace-nowrap ${v===Y.code?"bg-green-600 text-white shadow-sm":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[Y.name," (",ve,")"]},Y.id)})]}),z?t.jsx(dt,{message:"Loading items..."}):_.length===0?t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center",children:[t.jsx(Hv,{size:40,className:"mx-auto text-gray-300 mb-3"}),t.jsx("p",{className:"text-gray-500 text-sm",children:L?"No items match your search":"No items available"}),L&&t.jsx("button",{onClick:()=>te(""),className:"mt-2 text-sm text-green-600 font-medium",children:"Clear search"})]}):t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:_.map(Y=>{const ve=b.find(Ge=>Ge.id===Y.id);return t.jsxs("button",{onClick:()=>F(Y),className:`bg-white rounded-xl border p-3 text-left transition relative ${ve?"border-green-400 shadow-sm":Y.stock_qty<=0?"border-red-200 opacity-60":"border-gray-200 hover:border-green-300 hover:shadow-sm"}`,disabled:Y.stock_qty<=0,children:[ve&&t.jsx("span",{className:"absolute -top-1.5 -right-1.5 bg-green-600 text-white text-xs w-6 h-6 rounded-full flex items-center justify-center font-bold",children:ve.qty}),t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate leading-tight",children:Y.name}),t.jsxs("div",{className:"flex items-center gap-1 mt-1.5",children:[t.jsx("span",{className:"text-[10px] font-mono text-gray-400",children:Y.group_code}),t.jsx("span",{className:"text-[10px] text-gray-300",children:""}),t.jsx("span",{className:"text-[10px] text-gray-400",children:Y.uom})]}),t.jsxs("div",{className:"flex items-center justify-between mt-2",children:[Y.price>0?t.jsxs("span",{className:"text-xs font-semibold text-gray-700",children:["TZS ",Math.round(Y.price).toLocaleString()]}):t.jsx("span",{className:"text-xs text-gray-400",children:"No price"}),Y.stock_qty>0?t.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${Y.stock_status==="low"||Y.stock_status==="critical"?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:Y.stock_qty}):t.jsx("span",{className:"text-[10px] bg-red-100 text-red-600 px-1.5 py-0.5 rounded-full",children:"Out"})]})]},Y.id)})}),b.length>0&&t.jsx("div",{className:"sticky bottom-16 lg:bottom-0 mt-4",children:t.jsxs("button",{onClick:()=>o("cart"),className:"w-full bg-green-600 text-white py-3.5 rounded-xl flex items-center justify-center gap-3 font-semibold text-sm shadow-lg hover:bg-green-700 transition",children:[t.jsx(_t,{size:20}),t.jsxs("span",{children:["View Cart (",ba,")"]}),t.jsxs("span",{className:"bg-white/20 px-3 py-0.5 rounded-full",children:["TZS ",Math.round(xt).toLocaleString()]})]})})]}),i==="cart"&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("button",{onClick:st,className:"p-2 hover:bg-gray-100 rounded-lg transition",children:t.jsx(Oa,{size:20,className:"text-gray-600"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Cart"}),t.jsxs("p",{className:"text-xs text-gray-500",children:[d?.label,"  ",ba," items"]})]}),t.jsx("button",{onClick:()=>{y([]),st()},className:"text-xs text-red-500 hover:text-red-700 bg-red-50 px-3 py-1.5 rounded-lg",children:"Clear All"})]}),b.length===0?t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center",children:[t.jsx(_t,{size:40,className:"mx-auto text-gray-300 mb-3"}),t.jsx("p",{className:"text-gray-500 text-sm",children:"Cart is empty"}),t.jsx("button",{onClick:st,className:"mt-3 text-sm text-green-600 font-medium hover:text-green-700",children:"Browse items"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"bg-white rounded-xl border border-gray-200 mb-4",children:t.jsx("div",{className:"divide-y divide-gray-100",children:b.map(Y=>t.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:Y.name}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.jsx("span",{className:"text-xs text-gray-400",children:Y.uom}),Y.price>0&&t.jsxs("span",{className:"text-xs text-gray-500",children:["TZS ",Math.round(Y.qty*Y.price).toLocaleString()]})]})]}),t.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[t.jsx("button",{onClick:()=>xe(Y.id,Y.qty-1),className:"w-8 h-8 flex items-center justify-center rounded-lg bg-gray-100 hover:bg-gray-200",children:t.jsx(Wa,{size:14})}),t.jsx("span",{className:"w-8 h-8 flex items-center justify-center text-sm font-bold",children:Y.qty}),t.jsx("button",{onClick:()=>xe(Y.id,Y.qty+1),className:"w-8 h-8 flex items-center justify-center rounded-lg bg-gray-100 hover:bg-gray-200",children:t.jsx(Ve,{size:14})})]}),t.jsx("button",{onClick:()=>_e(Y.id),className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:t.jsx(Ts,{size:14})})]},Y.id))})}),t.jsxs("button",{onClick:()=>ie(!W),className:"w-full bg-white rounded-xl border border-gray-200 p-3 mb-4 flex items-center justify-between text-sm text-gray-600 hover:bg-gray-50 transition",children:[t.jsx("span",{children:"Add details (table, guest, notes)"}),t.jsx(ot,{size:16,className:`transition ${W?"rotate-90":""}`})]}),W&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 mb-4 space-y-3",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Table #"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:X,onChange:Y=>ge(Y.target.value),className:"w-full appearance-none bg-white px-3 py-2 pr-8 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[t.jsx("option",{value:"",children:"Select table"}),Tj.map(Y=>t.jsxs("option",{value:Y,children:["Table ",Y]},Y))]}),t.jsx(vt,{size:14,className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Guest Count"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:K,onChange:Y=>se(Y.target.value),className:"w-full appearance-none bg-white px-3 py-2 pr-8 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[t.jsx("option",{value:"",children:"Select"}),Oj.map(Y=>t.jsxs("option",{value:Y,children:[Y," ",Y===1?"guest":"guests"]},Y))]}),t.jsx(vt,{size:14,className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Received By"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:fe,onChange:Y=>Q(Y.target.value),className:"w-full appearance-none bg-white px-3 py-2 pr-8 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[t.jsx("option",{value:"",children:"Select staff"}),me.map(Y=>t.jsx("option",{value:Y.full_name||Y.username,children:Y.full_name||Y.username},Y.id))]}),t.jsx(vt,{size:14,className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Room #s"}),t.jsxs("button",{type:"button",onClick:()=>A(!Z),className:"w-full flex items-center justify-between px-3 py-2 text-sm border border-gray-300 rounded-lg bg-white hover:bg-gray-50 transition text-left",children:[t.jsx("span",{className:E.length>0?"text-gray-900 truncate":"text-gray-400",children:E.length>0?E.join(", "):"Select rooms"}),t.jsx(vt,{size:14,className:`text-gray-400 flex-shrink-0 transition ${Z?"rotate-180":""}`})]})]})]}),Z&&t.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50",children:[t.jsx("p",{className:"text-xs text-gray-500 mb-2 font-medium",children:"Tap rooms to select"}),t.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:Rj.map(Y=>t.jsx("button",{type:"button",onClick:()=>Zt(Y),className:`px-2 py-1.5 text-xs font-medium rounded-lg transition ${E.includes(Y)?"bg-green-600 text-white shadow-sm":"bg-white text-gray-700 border border-gray-200 hover:border-green-300"}`,children:Y},Y))}),E.length>0&&t.jsx("button",{type:"button",onClick:()=>{G([]),J("")},className:"mt-2 text-xs text-red-500 hover:text-red-700",children:"Clear rooms"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Notes"}),t.jsx("input",{type:"text",value:ce,onChange:Y=>q(Y.target.value),placeholder:"Special requests...",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none"})]})]}),t.jsx("div",{className:"sticky bottom-16 lg:bottom-0 bg-white border border-gray-200 rounded-xl p-4 shadow-lg",children:t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm text-gray-500",children:[ba," items"]}),t.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["TZS ",Math.round(xt).toLocaleString()]})]}),t.jsx("button",{onClick:I,disabled:w,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white px-8 py-3.5 rounded-xl font-bold text-sm transition shadow-md",children:w?t.jsxs(t.Fragment,{children:[t.jsx(qe,{size:18,className:"animate-spin"}),"Processing..."]}):t.jsxs(t.Fragment,{children:[t.jsx(nh,{size:18}),"Checkout"]})})]})})]})]})]})}function Dj({item:l,onClose:i,onAddToCart:o}){const[d,x]=u.useState(null),[f,h]=u.useState(!0),[v,p]=u.useState(!1),[g,j]=u.useState({}),[b,y]=u.useState([]),[z,S]=u.useState(null),[O,C]=u.useState({}),[w,k]=u.useState(!1),[M,$]=u.useState(!1),[L,te]=u.useState(""),[X,ge]=u.useState([]),[K,se]=u.useState(!1),ne=u.useRef(null),J=u.useRef(null);u.useEffect(()=>(As(),()=>Ds()),[]),u.useEffect(()=>()=>{J.current&&clearTimeout(J.current),ne.current&&clearTimeout(ne.current)},[]),u.useEffect(()=>{l?.id&&(h(!0),ws.item(l.id).then(A=>{x(A)}).catch(A=>console.error("Failed to load recipe:",A)).finally(()=>h(!1)))},[l?.id]),u.useEffect(()=>{if(L.length<2){ge([]);return}ne.current&&clearTimeout(ne.current),ne.current=setTimeout(async()=>{se(!0);try{const A=await ws.searchIngredients(L);ge(A.items||[])}catch(A){console.error("Search failed:",A)}finally{se(!1)}},300)},[L]);function fe(){v||(p(!0),J.current=setTimeout(()=>{i()},250))}async function Q(A){if(O[A]){S(le=>le===A?null:A);return}S(A),k(!0);try{const le=await ws.suggestAlternatives(A,l?.name);C(ue=>({...ue,[A]:le.alternatives||[]}))}catch(le){console.error("Failed to get alternatives:",le),C(ue=>({...ue,[A]:[]}))}finally{k(!1)}}function ce(A,le){j(ue=>({...ue,[A]:{item_id:le.item_id,name:le.name,stock_qty:le.stock_qty,uom:le.uom}})),S(null)}function q(A){j(le=>{const ue={...le};return delete ue[A],ue})}function W(A){b.find(le=>le.item_id===A.id)||(y(le=>[...le,{item_id:A.id,name:A.name,qty:1,uom:A.uom,stock_qty:A.stock_qty}]),te(""),ge([]),$(!1))}function ie(A,le){le<=0?y(ue=>ue.filter(he=>he.item_id!==A)):y(ue=>ue.map(he=>he.item_id===A?{...he,qty:le}:he))}function me(){o(l,{substitutions:g,extraIngredients:b}),fe()}const be=d?.ingredients||[],E=d?.item||l,G=be.some(A=>A.stock_qty<=0),Z=E?.description||l?.description||"";return l?Rs.createPortal(t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`fixed inset-0 bg-black/40 z-[10010] ${v?"animate-backdrop-out":"animate-backdrop-in"}`,onClick:fe}),t.jsxs("div",{className:`fixed inset-x-0 bottom-0 z-[10011] bg-white rounded-t-2xl shadow-2xl max-h-[90dvh] overflow-hidden flex flex-col ${v?"animate-slide-down":"animate-slide-up"}`,children:[t.jsx("div",{className:"flex justify-center pt-2 pb-1 flex-shrink-0",children:t.jsx("div",{className:"w-10 h-1 rounded-full bg-gray-300"})}),t.jsxs("div",{className:"flex items-start justify-between px-5 pt-2 pb-3 border-b border-gray-100 flex-shrink-0",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[l.is_cocktail&&t.jsx(fa,{size:18,className:"text-purple-500 flex-shrink-0"}),l.is_mocktail&&t.jsx(In,{size:18,className:"text-green-500 flex-shrink-0"}),t.jsx("h2",{className:"text-lg font-bold text-gray-900 truncate",children:l.name})]}),Z&&t.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:Z}),t.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[E?.glass_type&&t.jsx("span",{className:"text-[10px] bg-amber-50 text-amber-700 px-2 py-0.5 rounded-full",children:E.glass_type}),E?.garnish&&t.jsx("span",{className:"text-[10px] bg-green-50 text-green-700 px-2 py-0.5 rounded-full",children:E.garnish}),E?.serving_size_ml&&t.jsxs("span",{className:"text-[10px] bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full",children:[E.serving_size_ml,"ml"]})]})]}),t.jsx("button",{onClick:fe,className:"p-2 hover:bg-gray-100 rounded-full text-gray-400 transition flex-shrink-0 ml-2",children:t.jsx(Te,{size:18})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto px-5 py-4 scroll-touch",children:[f?t.jsxs("div",{className:"flex items-center justify-center py-12",children:[t.jsx(qe,{size:24,className:"animate-spin text-amber-600"}),t.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"Loading recipe..."})]}):be.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(eh,{size:32,className:"mx-auto text-gray-300 mb-2"}),t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"No recipe defined"}),t.jsx("p",{className:"text-xs text-gray-400",children:"This drink doesn't have ingredient mappings yet."}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"You can still add it to your order."})]}):t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Recipe Ingredients"}),t.jsx("div",{className:"space-y-2 mb-4",children:be.map(A=>{const le=A.stock_qty<=0,ue=A.stock_status==="low"||A.stock_status==="critical",he=g[A.item_id],Ue=z===A.item_name;return t.jsxs("div",{children:[t.jsx("div",{className:`bg-white rounded-xl border p-3 ${he?"border-blue-300 bg-blue-50/30":le?"border-red-200 bg-red-50/30":ue?"border-amber-200 bg-amber-50/30":"border-gray-200"}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${he?"bg-blue-500":le?"bg-red-500":ue?"bg-amber-500":"bg-green-500"}`}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("p",{className:`text-sm font-medium truncate ${le&&!he?"text-red-700 line-through":"text-gray-900"}`,children:A.item_name}),A.is_primary&&t.jsx("span",{className:"text-[9px] bg-purple-100 text-purple-700 px-1.5 py-0.5 rounded-full font-medium flex-shrink-0",children:"Primary"})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.jsxs("span",{className:"text-[10px] text-gray-400",children:[A.qty_per_serving," ",A.uom,"/serving"]}),le?t.jsx("span",{className:"text-[10px] bg-red-100 text-red-600 px-1.5 py-0.5 rounded-full",children:"Out of stock"}):t.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${ue?"bg-amber-100 text-amber-700":"bg-green-100 text-green-700"}`,children:[A.stock_qty," ",A.uom]})]}),he&&t.jsxs("div",{className:"flex items-center gap-1.5 mt-1.5",children:[t.jsx(sr,{size:10,className:"text-blue-500"}),t.jsxs("span",{className:"text-[11px] text-blue-700 font-medium",children:["Using: ",he.name]}),t.jsxs("span",{className:"text-[10px] text-blue-500",children:["(",he.stock_qty," ",he.uom,")"]}),t.jsx("button",{onClick:()=>q(A.item_id),className:"text-blue-400 hover:text-red-500 ml-1",children:t.jsx(Te,{size:10})})]})]}),le&&!he&&t.jsxs("button",{onClick:()=>Q(A.item_name),className:"flex items-center gap-1 px-2 py-1.5 text-[10px] font-semibold text-amber-700 bg-amber-50 border border-amber-200 rounded-lg hover:bg-amber-100 transition flex-shrink-0",children:[t.jsx(nn,{size:10}),"Suggest"]}),!le&&!he&&t.jsx(Yt,{size:16,className:"text-green-500 flex-shrink-0"})]})}),Ue&&t.jsxs("div",{className:"ml-5 mt-1 bg-amber-50 border border-amber-200 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[t.jsx(nn,{size:12,className:"text-amber-600"}),t.jsx("span",{className:"text-xs font-semibold text-amber-800",children:"AI Suggested Alternatives"})]}),w?t.jsxs("div",{className:"flex items-center gap-2 py-2 text-xs text-amber-600",children:[t.jsx(qe,{size:12,className:"animate-spin"}),"Finding alternatives..."]}):(O[A.item_name]||[]).length===0?t.jsx("p",{className:"text-xs text-amber-600",children:"No suitable alternatives found in stock."}):t.jsx("div",{className:"space-y-1.5",children:(O[A.item_name]||[]).map(Ce=>t.jsxs("button",{onClick:()=>ce(A.item_id,Ce),className:"w-full flex items-center gap-2 p-2 bg-white rounded-lg border border-amber-200 hover:border-amber-400 transition text-left",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-xs font-medium text-gray-900",children:Ce.name}),t.jsx("p",{className:"text-[10px] text-gray-500",children:Ce.reason})]}),t.jsxs("span",{className:"text-[10px] bg-green-100 text-green-700 px-1.5 py-0.5 rounded-full flex-shrink-0",children:[Ce.stock_qty," ",Ce.uom]})]},Ce.item_id))})]})]},A.item_id)})}),b.length>0&&t.jsxs("div",{className:"mb-4",children:[t.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Added Ingredients"}),t.jsx("div",{className:"space-y-1.5",children:b.map(A=>t.jsxs("div",{className:"flex items-center gap-3 bg-blue-50 border border-blue-200 rounded-xl p-3",children:[t.jsx(Ve,{size:12,className:"text-blue-500 flex-shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:A.name}),t.jsxs("span",{className:"text-[10px] text-gray-400",children:[A.stock_qty," ",A.uom," in stock"]})]}),t.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[t.jsx("button",{onClick:()=>ie(A.item_id,A.qty-1),className:"w-6 h-6 flex items-center justify-center rounded bg-blue-100 hover:bg-blue-200 text-blue-700",children:t.jsx(Wa,{size:10})}),t.jsx("span",{className:"w-6 text-center text-xs font-bold",children:A.qty}),t.jsx("button",{onClick:()=>ie(A.item_id,A.qty+1),className:"w-6 h-6 flex items-center justify-center rounded bg-blue-100 hover:bg-blue-200 text-blue-700",children:t.jsx(Ve,{size:10})})]})]},A.item_id))})]})]}),t.jsx("div",{className:"mt-2 mb-4",children:M?t.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-3",children:[t.jsxs("div",{className:"relative mb-2",children:[t.jsx(Vt,{size:14,className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",value:L,onChange:A=>te(A.target.value),placeholder:"Search stock items...",autoFocus:!0,className:"w-full pl-8 pr-8 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none"}),t.jsx("button",{onClick:()=>{$(!1),te(""),ge([])},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t.jsx(Te,{size:14})})]}),K&&t.jsxs("div",{className:"flex items-center gap-2 py-2 text-xs text-gray-500",children:[t.jsx(qe,{size:12,className:"animate-spin"})," Searching..."]}),X.length>0&&t.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1",children:X.map(A=>t.jsxs("button",{onClick:()=>W(A),className:"w-full flex items-center gap-2 p-2 bg-white rounded-lg border border-gray-200 hover:border-amber-300 transition text-left",children:[t.jsx(pa,{size:12,className:"text-gray-400 flex-shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-xs font-medium text-gray-900 truncate",children:A.name}),t.jsx("span",{className:"text-[10px] text-gray-400",children:A.group_name})]}),t.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full flex-shrink-0 ${A.stock_qty>0?"bg-green-100 text-green-700":"bg-red-100 text-red-600"}`,children:A.stock_qty>0?`${A.stock_qty} ${A.uom}`:"Out"})]},A.id))}),L.length>=2&&!K&&X.length===0&&t.jsx("p",{className:"text-xs text-gray-400 text-center py-2",children:"No items found"})]}):t.jsxs("button",{onClick:()=>$(!0),className:"w-full flex items-center justify-center gap-2 py-2.5 text-sm text-gray-600 border border-dashed border-gray-300 rounded-xl hover:border-amber-400 hover:text-amber-700 transition",children:[t.jsx(Vt,{size:14}),"Search & add ingredient"]})}),G&&Object.keys(g).length<be.filter(A=>A.stock_qty<=0).length&&t.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3 mb-4 flex items-start gap-2",children:[t.jsx(jt,{size:14,className:"text-amber-600 flex-shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-amber-800",children:"Some ingredients are out of stock"}),t.jsx("p",{className:"text-[10px] text-amber-600 mt-0.5",children:'Tap "Suggest" to find AI-recommended alternatives, or add ingredients manually.'})]})]})]}),t.jsx("div",{className:"flex-shrink-0 border-t border-gray-100 px-5 py-4 bg-white",children:t.jsxs("button",{onClick:me,className:"w-full flex items-center justify-center gap-2 bg-amber-700 hover:bg-amber-800 text-white py-3.5 rounded-xl font-bold text-sm transition shadow-md",children:[t.jsx(Ve,{size:18}),"Add to Order"]})})]})]}),document.body):null}const ar={available:{bg:"bg-green-100",text:"text-green-700",label:"In Stock"},low:{bg:"bg-amber-100",text:"text-amber-700",label:"Low Stock"},critical:{bg:"bg-orange-100",text:"text-orange-700",label:"Critical"},out:{bg:"bg-red-100",text:"text-red-700",label:"Out of Stock"},unknown:{bg:"bg-gray-100",text:"text-gray-500",label:"Unknown"}},Mj={available:Xd,low:uh,critical:cr,out:Te,unknown:cr},Lj=Array.from({length:20},(l,i)=>String(i+1)),qj=[1,2,3,4,5,6,7,8,10,12,15,20,25,30,40,50];function Uj(){const l=Ie(),[i,o]=u.useState("menu"),[d,x]=u.useState([]),[f,h]=u.useState([]),[v,p]=u.useState(!0),[g,j]=u.useState(""),[b,y]=u.useState([]),[z,S]=u.useState(!1),[O,C]=u.useState(null),[w,k]=u.useState(null),[M,$]=u.useState(""),[L,te]=u.useState(""),[X,ge]=u.useState(""),[K,se]=u.useState(""),[ne,J]=u.useState(""),[fe,Q]=u.useState(!1),[ce,q]=u.useState([]),[W,ie]=u.useState(null),[me,be]=u.useState([]),[E,G]=u.useState(null),[Z,A]=u.useState(!1);u.useEffect(()=>{le()},[]);async function le(){p(!0);try{const[_,F,xe]=await Promise.all([ws.categories(),ws.items({}),an.list()]);x(_.categories||[]),h(F.menu_items||[]),q((xe.users||[]).filter(_e=>_e.is_active))}catch(_){j(_.message)}finally{p(!1)}}async function ue(){A(!0);try{const[_,F]=await Promise.all([ws.depletion({days:7}),ws.stockStatus()]);be(_.alerts||[]),G(F.summary||null)}catch(_){j(_.message)}finally{A(!1),o("alerts")}}const he=f.filter(_=>!(w&&_.category_code!==w||M==="cocktail"&&!_.is_cocktail||M==="mocktail"&&!_.is_mocktail)),Ue={};he.forEach(_=>{const F=_.category_name;Ue[F]||(Ue[F]={name:_.category_name,code:_.category_code,pricing:_.pricing_type,items:[]}),Ue[F].items.push(_)});function Ce(_){if(_.stock?.status!=="out"){if(_.is_cocktail||_.is_mocktail){ie(_);return}rt(_)}}function rt(_){_.stock?.status!=="out"&&y(F=>F.find(_e=>_e.id===_.id)?F.map(_e=>_e.id===_.id?{..._e,qty:_e.qty+1}:_e):[...F,{..._,qty:1}])}function Ot(_,F){rt(_)}function Rt(_,F){F<=0?y(xe=>xe.filter(_e=>_e.id!==_)):y(xe=>xe.map(_e=>_e.id===_?{..._e,qty:F}:_e))}function wt(_){y(F=>F.filter(xe=>xe.id!==_))}const Ae=b.reduce((_,F)=>_+F.qty,0);async function re(){if(b.length!==0){S(!0),j("");try{const _=await ws.order({received_by:K.trim()||"Bar Guest",table_number:L||null,guest_count:X?parseInt(X):null,notes:ne||null,items:b.map(F=>({menu_item_id:F.id,qty:F.qty}))});C({..._.order,cartItems:[...b],time:new Date().toLocaleTimeString()}),o("receipt"),y([]),te(""),ge(""),se(""),J(""),Q(!1)}catch(_){j(_.message)}finally{S(!1)}}}return i==="receipt"&&O?t.jsx("div",{className:"max-w-md mx-auto",children:t.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 overflow-hidden",children:[t.jsxs("div",{className:"bg-amber-700 text-white text-center py-6 px-4",children:[t.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-3",children:t.jsx(ih,{size:32})}),t.jsx("h2",{className:"text-lg font-bold",children:"Bar Order Complete"}),t.jsx("p",{className:"text-amber-200 text-sm mt-1",children:O.voucher_number})]}),t.jsxs("div",{className:"p-4 space-y-3",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-500",children:"Time"}),t.jsx("span",{className:"font-medium",children:O.time})]}),t.jsx("div",{className:"border-t border-dashed border-gray-200 pt-3",children:O.cartItems.map(_=>t.jsxs("div",{className:"flex justify-between text-sm py-1",children:[t.jsxs("span",{className:"text-gray-700",children:[_.qty,"x ",_.name]}),_.price_usd&&t.jsxs("span",{className:"text-gray-600",children:["$",(_.qty*_.price_usd).toFixed(2)]})]},_.id))}),O.total_value>0&&t.jsxs("div",{className:"border-t border-gray-200 pt-3 flex justify-between",children:[t.jsx("span",{className:"font-bold text-gray-900",children:"Cost Value"}),t.jsxs("span",{className:"font-bold text-gray-900",children:["TZS ",Math.round(O.total_value).toLocaleString()]})]})]}),t.jsx("div",{className:"p-4 border-t border-gray-100 space-y-2",children:t.jsx("button",{onClick:()=>{o("menu"),C(null)},className:"w-full bg-amber-700 text-white py-3 rounded-xl font-semibold text-sm hover:bg-amber-800 transition",children:"New Order"})})]})}):i==="alerts"?t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Menu Stock Alerts"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Depletion warnings for bar menu items"})]}),t.jsx("button",{onClick:()=>o("menu"),className:"text-sm text-amber-700 bg-amber-50 px-3 py-2 rounded-lg hover:bg-amber-100",children:"Back to Menu"})]}),E&&t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-2 mb-4",children:Object.entries(E).map(([_,F])=>{const xe=ar[_]||ar.unknown;return t.jsxs("div",{className:`rounded-xl border p-3 text-center ${xe.bg}`,children:[t.jsx("p",{className:`text-2xl font-bold ${xe.text}`,children:F}),t.jsx("p",{className:"text-xs text-gray-600 capitalize",children:_})]},_)})}),Z?t.jsx(dt,{message:"Checking stock levels..."}):me.length===0?t.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-6 text-center",children:[t.jsx(Xd,{size:40,className:"mx-auto text-green-500 mb-2"}),t.jsx("p",{className:"font-medium text-green-800",children:"All menu items are well-stocked"})]}):t.jsx("div",{className:"space-y-2",children:me.map(_=>{const F=ar[_.status]||ar.unknown,xe=Mj[_.status]||cr;return t.jsxs("div",{className:`rounded-xl border p-4 ${F.bg} border-opacity-50`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(xe,{size:20,className:F.text}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-medium text-gray-900",children:_.name}),t.jsx("p",{className:"text-xs text-gray-600",children:_.category})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${F.bg} ${F.text}`,children:F.label}),_.stock?.servings_possible!=null&&t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["~",_.stock.servings_possible," servings left"]})]})]}),_.stock?.limiting_ingredient&&t.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Limited by: ",_.stock.limiting_ingredient]})]},_.id)})})]}):i==="cart"?t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Bar Order"}),t.jsxs("p",{className:"text-xs text-gray-500",children:[Ae," drinks"]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>o("menu"),className:"text-sm text-gray-600 bg-gray-100 px-3 py-2 rounded-lg",children:"Add More"}),b.length>0&&t.jsx("button",{onClick:()=>{y([]),o("menu")},className:"text-xs text-red-500 bg-red-50 px-3 py-2 rounded-lg",children:"Clear"})]})]}),g&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm flex items-center gap-2",children:[t.jsx(jt,{size:16}),t.jsx("span",{className:"flex-1",children:g}),t.jsx("button",{onClick:()=>j(""),children:t.jsx(Te,{size:16})})]}),b.length===0?t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center",children:[t.jsx(fa,{size:40,className:"mx-auto text-gray-300 mb-3"}),t.jsx("p",{className:"text-gray-500 text-sm",children:"No drinks in order"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"bg-white rounded-xl border border-gray-200 mb-4",children:t.jsx("div",{className:"divide-y divide-gray-100",children:b.map(_=>t.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:_.name}),t.jsx("p",{className:"text-xs text-gray-400",children:_.category_name}),_.price_usd&&t.jsxs("p",{className:"text-xs text-amber-700 font-medium",children:["$",_.price_usd," each"]})]}),t.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[t.jsx("button",{onClick:()=>Rt(_.id,_.qty-1),className:"w-8 h-8 flex items-center justify-center rounded-lg bg-gray-100 hover:bg-gray-200",children:t.jsx(Wa,{size:14})}),t.jsx("span",{className:"w-8 h-8 flex items-center justify-center text-sm font-bold",children:_.qty}),t.jsx("button",{onClick:()=>Rt(_.id,_.qty+1),className:"w-8 h-8 flex items-center justify-center rounded-lg bg-gray-100 hover:bg-gray-200",children:t.jsx(Ve,{size:14})})]}),t.jsx("button",{onClick:()=>wt(_.id),className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:t.jsx(Ts,{size:14})})]},_.id))})}),t.jsxs("button",{onClick:()=>Q(!fe),className:"w-full bg-white rounded-xl border border-gray-200 p-3 mb-4 flex items-center justify-between text-sm text-gray-600",children:[t.jsx("span",{children:"Order details (table, guest, notes)"}),fe?t.jsx(ah,{size:16}):t.jsx(vt,{size:16})]}),fe&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 mb-4 grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Table #"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:L,onChange:_=>te(_.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg outline-none focus:ring-2 focus:ring-amber-500 appearance-none bg-white",children:[t.jsx("option",{value:"",children:" Select "}),Lj.map(_=>t.jsxs("option",{value:_,children:["Table ",_]},_))]}),t.jsx(vt,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Guests"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:X,onChange:_=>ge(_.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg outline-none focus:ring-2 focus:ring-amber-500 appearance-none bg-white",children:[t.jsx("option",{value:"",children:" Select "}),qj.map(_=>t.jsxs("option",{value:_,children:[_," guest",_>1?"s":""]},_))]}),t.jsx(vt,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Served By"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:K,onChange:_=>se(_.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg outline-none focus:ring-2 focus:ring-amber-500 appearance-none bg-white",children:[t.jsx("option",{value:"",children:" Select "}),ce.map(_=>t.jsx("option",{value:_.name,children:_.name},_.id))]}),t.jsx(vt,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Notes"}),t.jsx("input",{type:"text",value:ne,onChange:_=>J(_.target.value),placeholder:"Special requests...",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg outline-none focus:ring-2 focus:ring-amber-500"})]})]}),t.jsx("div",{className:"sticky bottom-16 lg:bottom-0 bg-white border border-gray-200 rounded-xl p-4 shadow-lg",children:t.jsx("button",{onClick:re,disabled:z,className:"w-full flex items-center justify-center gap-2 bg-amber-700 hover:bg-amber-800 disabled:bg-amber-400 text-white py-3.5 rounded-xl font-bold text-sm transition",children:z?t.jsxs(t.Fragment,{children:[t.jsx(qe,{size:18,className:"animate-spin"})," Placing Order..."]}):t.jsxs(t.Fragment,{children:[t.jsx(nh,{size:18})," Place Bar Order (",Ae," drinks)"]})})})]})]}):t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[t.jsx(fa,{size:24,className:"text-amber-700"}),"Drinks Menu"]}),t.jsx("p",{className:"text-sm text-gray-500",children:l?.camp_name||"Karibu Camps"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:ue,"data-guide":"bar-stock-alerts-btn",className:"flex items-center gap-1.5 text-sm text-orange-700 bg-orange-50 border border-orange-200 px-3 py-2 rounded-lg hover:bg-orange-100 transition",children:[t.jsx(uh,{size:16})," Stock Alerts"]}),b.length>0&&t.jsxs("button",{onClick:()=>o("cart"),className:"relative flex items-center gap-1.5 text-sm text-white bg-amber-700 px-3 py-2 rounded-lg hover:bg-amber-800 transition",children:[t.jsx(_t,{size:16}),t.jsx("span",{className:"absolute -top-1.5 -right-1.5 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center font-bold",children:Ae})]})]})]}),g&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm flex items-center gap-2",children:[t.jsx(jt,{size:16}),t.jsx("span",{className:"flex-1",children:g}),t.jsx("button",{onClick:()=>j(""),children:t.jsx(Te,{size:16})})]}),t.jsxs("div",{"data-guide":"bar-menu-categories",className:"flex gap-2 mb-3 overflow-x-auto pb-1",children:[t.jsx("button",{onClick:()=>{k(null),$("")},className:`flex-shrink-0 px-3 py-1.5 rounded-full text-xs font-medium transition ${!w&&!M?"bg-amber-700 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"All"}),t.jsxs("button",{onClick:()=>{k(null),$("cocktail")},className:`flex-shrink-0 px-3 py-1.5 rounded-full text-xs font-medium transition flex items-center gap-1 ${M==="cocktail"?"bg-purple-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[t.jsx(fa,{size:12})," Cocktails"]}),t.jsxs("button",{onClick:()=>{k(null),$("mocktail")},className:`flex-shrink-0 px-3 py-1.5 rounded-full text-xs font-medium transition flex items-center gap-1 ${M==="mocktail"?"bg-green-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[t.jsx(In,{size:12})," Mocktails"]}),d.filter(_=>!["COCKTAIL","MOCKTAIL"].includes(_.code)).map(_=>t.jsx("button",{onClick:()=>{k(_.code),$("")},className:`flex-shrink-0 px-3 py-1.5 rounded-full text-xs font-medium transition whitespace-nowrap ${w===_.code?"bg-amber-700 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:_.name},_.code))]}),v?t.jsx(dt,{message:"Loading menu..."}):t.jsx("div",{className:"space-y-6",children:Object.values(Ue).map(_=>t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("h2",{className:"text-sm font-bold text-amber-800 uppercase tracking-wider",children:_.name}),_.pricing==="exclusive"&&t.jsx("span",{className:"text-[10px] bg-amber-100 text-amber-700 px-2 py-0.5 rounded-full font-medium",children:"Exclusive"}),t.jsx("div",{className:"flex-1 h-px bg-amber-200"})]}),t.jsx("div",{className:"space-y-1",children:_.items.map(F=>{const xe=b.find(ba=>ba.id===F.id),_e=F.stock?.status||"unknown",Zt=ar[_e],xt=_e==="out";return t.jsxs("div",{className:`bg-white rounded-xl border p-3 flex items-center gap-3 transition ${xe?"border-amber-400 shadow-sm":xt?"border-red-200 opacity-60":"border-gray-200 hover:border-amber-200"}`,children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:F.name}),F.is_cocktail&&t.jsx(fa,{size:12,className:"text-purple-500 flex-shrink-0"}),F.is_mocktail&&t.jsx(In,{size:12,className:"text-green-500 flex-shrink-0"})]}),F.description&&t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:F.description}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[F.price_usd&&t.jsxs("span",{className:"text-xs font-bold text-amber-800",children:["$",F.price_usd]}),t.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${Zt.bg} ${Zt.text}`,children:F.stock?.servings_possible!=null?`${F.stock.servings_possible} servings`:Zt.label}),F.stock?.days_remaining!=null&&t.jsxs("span",{className:"text-[10px] text-gray-400",children:[F.stock.days_remaining,"d left"]})]})]}),xe?t.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[t.jsx("button",{onClick:()=>Rt(F.id,xe.qty-1),className:"w-8 h-8 flex items-center justify-center rounded-lg bg-amber-100 hover:bg-amber-200 text-amber-800",children:t.jsx(Wa,{size:14})}),t.jsx("span",{className:"w-7 text-center text-sm font-bold text-amber-800",children:xe.qty}),t.jsx("button",{onClick:()=>Rt(F.id,xe.qty+1),className:"w-8 h-8 flex items-center justify-center rounded-lg bg-amber-100 hover:bg-amber-200 text-amber-800",children:t.jsx(Ve,{size:14})})]}):t.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(F.is_cocktail||F.is_mocktail)&&t.jsx("button",{onClick:()=>ie(F),className:"w-8 h-8 flex items-center justify-center rounded-lg bg-purple-50 text-purple-500 hover:bg-purple-100 transition",title:"View Recipe",children:t.jsx(eh,{size:14})}),t.jsx("button",{onClick:()=>Ce(F),disabled:xt,className:`w-9 h-9 flex items-center justify-center rounded-xl transition ${xt?"bg-gray-100 text-gray-300 cursor-not-allowed":"bg-amber-50 text-amber-700 hover:bg-amber-100"}`,children:t.jsx(Ve,{size:18})})]})]},F.id)})})]},_.code))}),b.length>0&&i==="menu"&&t.jsx("div",{className:"sticky bottom-16 lg:bottom-0 mt-4",children:t.jsxs("button",{onClick:()=>o("cart"),className:"w-full bg-amber-700 text-white py-3.5 rounded-xl flex items-center justify-center gap-3 font-semibold text-sm shadow-lg hover:bg-amber-800 transition",children:[t.jsx(_t,{size:20}),t.jsxs("span",{children:["View Order (",Ae," drinks)"]})]})}),W&&t.jsx(Dj,{item:W,onClose:()=>ie(null),onAddToCart:Ot})]})}const xh=[{value:"",label:"All"},{value:"breakfast",label:"Breakfast"},{value:"lunch",label:"Lunch"},{value:"dinner",label:"Dinner"},{value:"appetizer",label:"Appetizer"},{value:"soup",label:"Soup"},{value:"salad",label:"Salad"},{value:"main_course",label:"Main Course"},{value:"side",label:"Side"},{value:"dessert",label:"Dessert"},{value:"beverage",label:"Beverage"},{value:"bread",label:"Bread"},{value:"sauce",label:"Sauce"}],Bj=[{value:"easy",label:"Easy"},{value:"medium",label:"Medium"},{value:"hard",label:"Hard"}];function Hj(){Ie();const[l,i]=u.useState([]),[o,d]=u.useState(!0),[x,f]=u.useState(""),[h,v]=u.useState(""),[p,g]=u.useState(""),[j,b]=u.useState(null),[y,z]=u.useState(null),[S,O]=u.useState(!1),[C,w]=u.useState(!1),[k,M]=u.useState(null),[$,L]=u.useState(null),[te,X]=u.useState(!1);u.useEffect(()=>{ge()},[]);async function ge(){d(!0),f("");try{const ce=await $t.recipes();i(ce.recipes||[])}catch(ce){f(ce.message)}finally{d(!1)}}async function K(ce){if(j===ce){b(null),z(null);return}b(ce),O(!0);try{const q=await $t.recipe(ce);z(q)}catch(q){f(q.message)}finally{O(!1)}}async function se(){if($){X(!0);try{await $t.deleteRecipe($),i(ce=>ce.filter(q=>q.id!==$)),j===$&&(b(null),z(null)),L(null)}catch(ce){f(ce.message)}finally{X(!1)}}}function ne(ce){M(ce),w(!0)}function J(){M(null),w(!0)}function fe(ce){ge(),j===ce?.id&&(K(ce.id),setTimeout(()=>K(ce.id),100)),w(!1)}const Q=l.filter(ce=>{if(p&&ce.category!==p)return!1;if(h){const q=h.toLowerCase();return ce.name.toLowerCase().includes(q)||(ce.cuisine||"").toLowerCase().includes(q)||(ce.category||"").toLowerCase().includes(q)}return!0});return o?t.jsx(dt,{}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[t.jsx(al,{size:24,className:"text-orange-500"}),"Kitchen Recipes"]}),t.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"Manage master recipes & ingredients"})]}),t.jsxs("button",{onClick:J,className:"flex items-center gap-2 bg-orange-600 hover:bg-orange-700 text-white px-4 py-2.5 rounded-xl text-sm font-semibold transition shadow-sm",children:[t.jsx(Ve,{size:16}),"New Recipe"]})]}),x&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg text-sm flex items-center gap-2",children:[t.jsx(jt,{size:16}),t.jsx("span",{className:"flex-1",children:x}),t.jsx("button",{onClick:()=>f(""),children:t.jsx(Te,{size:16})})]}),t.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-3",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(Vt,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",value:h,onChange:ce=>v(ce.target.value),placeholder:"Search recipes...",className:"w-full pl-9 pr-8 py-2.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none"}),h&&t.jsx("button",{onClick:()=>v(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t.jsx(Te,{size:14})})]}),t.jsx("select",{value:p,onChange:ce=>g(ce.target.value),className:`px-3 py-2.5 rounded-lg text-sm font-medium border transition appearance-none cursor-pointer min-w-[120px] ${p?"bg-orange-50 border-orange-200 text-orange-700":"bg-gray-50 border-gray-200 text-gray-600"}`,children:xh.map(ce=>t.jsx("option",{value:ce.value,children:ce.label},ce.value))})]})}),t.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[t.jsxs("span",{children:[Q.length," recipe",Q.length!==1?"s":""]}),p&&t.jsxs("button",{onClick:()=>g(""),className:"text-orange-600 hover:text-orange-700 font-medium flex items-center gap-1",children:[t.jsx(Te,{size:12})," Clear filter"]})]}),Q.length===0?t.jsxs("div",{className:"bg-gradient-to-br from-orange-50 via-amber-50 to-yellow-50 rounded-xl border border-orange-100 p-8 text-center",children:[t.jsx("div",{className:"w-20 h-20 bg-white rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-sm",children:t.jsx(aa,{size:36,className:"text-orange-500"})}),t.jsx("h3",{className:"text-lg font-bold text-gray-900",children:h||p?"No recipes found":"No Recipes Yet"}),t.jsx("p",{className:"text-gray-500 text-sm mt-2 max-w-md mx-auto",children:h||p?"Try adjusting your search or filter.":"Create your first recipe to start building your kitchen menu library."}),!h&&!p&&t.jsxs("button",{onClick:J,className:"mt-4 inline-flex items-center gap-2 bg-orange-600 hover:bg-orange-700 text-white px-6 py-3 rounded-xl text-sm font-semibold transition",children:[t.jsx(Ve,{size:18}),"Create First Recipe"]})]}):t.jsxs("div",{className:"space-y-3",children:[Q.map(ce=>t.jsx(Gj,{recipe:ce,isExpanded:j===ce.id,detail:j===ce.id?y:null,detailLoading:S&&j===ce.id,onToggle:()=>K(ce.id),onEdit:()=>ne(ce),onDelete:()=>L(ce.id)},ce.id)),t.jsxs("button",{onClick:J,className:"w-full flex items-center justify-center gap-2 py-4 border-2 border-dashed border-gray-300 rounded-xl text-gray-500 hover:border-orange-400 hover:text-orange-600 hover:bg-orange-50 transition font-semibold text-sm",children:[t.jsx(Ve,{size:18}),"New Recipe"]})]}),$&&t.jsx($j,{recipe:l.find(ce=>ce.id===$),loading:te,onConfirm:se,onCancel:()=>L(null)}),C&&t.jsx(Yj,{recipe:k,onClose:()=>w(!1),onSaved:fe}),t.jsx("button",{onClick:J,className:"lg:hidden fixed bottom-24 right-4 z-50 w-14 h-14 bg-orange-600 hover:bg-orange-700 text-white rounded-full shadow-lg flex items-center justify-center transition",children:t.jsx(Ve,{size:24})})]})}function Gj({recipe:l,isExpanded:i,detail:o,detailLoading:d,onToggle:x,onEdit:f,onDelete:h}){const v=o?.ingredients||[],p=o?.recipe?.instructions;let g=[];if(p)try{g=typeof p=="string"?JSON.parse(p):Array.isArray(p)?p:[]}catch{g=[]}return t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[t.jsxs("button",{onClick:x,className:"w-full flex items-center gap-3 p-4 text-left hover:bg-gray-50 transition",children:[t.jsx("div",{className:"w-11 h-11 rounded-xl bg-orange-100 flex items-center justify-center flex-shrink-0",children:t.jsx(aa,{size:22,className:"text-orange-600"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"font-bold text-gray-900 truncate",children:l.name}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5 flex-wrap",children:[l.category&&t.jsx("span",{className:"text-[10px] bg-orange-50 text-orange-700 px-2 py-0.5 rounded-full capitalize",children:l.category.replace("_"," ")}),l.cuisine&&t.jsx("span",{className:"text-[10px] bg-blue-50 text-blue-700 px-2 py-0.5 rounded-full",children:l.cuisine}),l.serves&&t.jsxs("span",{className:"text-[10px] bg-gray-100 text-gray-600 px-1.5 py-0.5 rounded-full flex items-center gap-0.5",children:[t.jsx(Sa,{size:8})," ",l.serves]}),l.ingredient_count>0&&t.jsxs("span",{className:"text-[10px] bg-gray-100 text-gray-600 px-1.5 py-0.5 rounded-full flex items-center gap-0.5",children:[t.jsx(pa,{size:8})," ",l.ingredient_count]})]})]}),t.jsx("div",{className:"flex items-center gap-1 flex-shrink-0",children:i?t.jsx(ah,{size:18,className:"text-gray-400"}):t.jsx(vt,{size:18,className:"text-gray-400"})})]}),i&&t.jsx("div",{className:"border-t border-gray-100 p-4 bg-gray-50/50",children:d?t.jsxs("div",{className:"flex items-center justify-center py-8",children:[t.jsx(qe,{size:20,className:"animate-spin text-orange-600"}),t.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"Loading recipe..."})]}):t.jsxs(t.Fragment,{children:[o?.recipe?.description&&t.jsx("p",{className:"text-sm text-gray-600 mb-3 italic",children:o.recipe.description}),t.jsxs("div",{className:"flex items-center gap-3 mb-4 flex-wrap",children:[o?.recipe?.serves&&t.jsxs("span",{className:"text-xs bg-white border border-gray-200 px-2.5 py-1 rounded-lg flex items-center gap-1",children:[t.jsx(Sa,{size:12,className:"text-gray-500"})," ",o.recipe.serves," servings"]}),o?.recipe?.prep_time_minutes>0&&t.jsxs("span",{className:"text-xs bg-white border border-gray-200 px-2.5 py-1 rounded-lg flex items-center gap-1",children:[t.jsx(Cs,{size:12,className:"text-gray-500"})," Prep ",o.recipe.prep_time_minutes,"min"]}),o?.recipe?.cook_time_minutes>0&&t.jsxs("span",{className:"text-xs bg-white border border-gray-200 px-2.5 py-1 rounded-lg flex items-center gap-1",children:[t.jsx(Cs,{size:12,className:"text-gray-500"})," Cook ",o.recipe.cook_time_minutes,"min"]}),o?.recipe?.difficulty&&t.jsx("span",{className:`text-xs px-2.5 py-1 rounded-lg capitalize ${o.recipe.difficulty==="easy"?"bg-green-50 text-green-700 border border-green-200":o.recipe.difficulty==="hard"?"bg-red-50 text-red-700 border border-red-200":"bg-amber-50 text-amber-700 border border-amber-200"}`,children:o.recipe.difficulty})]}),v.length>0&&t.jsxs("div",{className:"mb-4",children:[t.jsxs("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:["Ingredients (",v.length,")"]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1.5",children:v.map(j=>t.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg border border-gray-200 px-3 py-2",children:[t.jsx("span",{className:`w-1.5 h-1.5 rounded-full flex-shrink-0 ${j.is_primary?"bg-orange-500":"bg-gray-300"}`}),t.jsx("span",{className:"text-sm text-gray-900 truncate flex-1",children:j.item_name}),t.jsxs("span",{className:"text-xs text-gray-500 flex-shrink-0",children:[j.qty_per_serving," ",j.uom]}),j.stock_qty!==void 0&&t.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full flex-shrink-0 ${j.stock_qty>0?"bg-green-100 text-green-700":"bg-red-100 text-red-600"}`,children:j.stock_qty>0?`${j.stock_qty}`:"Out"})]},j.item_id||j.id))})]}),g.length>0&&t.jsxs("div",{className:"mb-4",children:[t.jsx("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Instructions"}),t.jsx("ol",{className:"space-y-2",children:g.map((j,b)=>t.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[t.jsx("span",{className:"w-5 h-5 rounded-full bg-orange-600 text-white text-[10px] flex items-center justify-center flex-shrink-0 mt-0.5 font-bold",children:b+1}),t.jsx("span",{className:"text-gray-700",children:j})]},b))})]}),t.jsxs("div",{className:"flex gap-2 pt-2 border-t border-gray-200",children:[t.jsxs("button",{onClick:f,className:"flex items-center gap-1.5 px-4 py-2 bg-orange-50 border border-orange-200 text-orange-700 rounded-lg text-sm font-medium hover:bg-orange-100 transition",children:[t.jsx(x1,{size:14})," Edit"]}),t.jsxs("button",{onClick:h,className:"flex items-center gap-1.5 px-4 py-2 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm font-medium hover:bg-red-100 transition",children:[t.jsx(Ts,{size:14})," Delete"]})]})]})})]})}function $j({recipe:l,loading:i,onConfirm:o,onCancel:d}){return Rs.createPortal(t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/40 z-[10010] animate-backdrop-in",onClick:d}),t.jsxs("div",{className:"fixed inset-x-4 top-1/2 -translate-y-1/2 z-[10011] bg-white rounded-2xl shadow-2xl max-w-sm mx-auto p-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-3",children:t.jsx(Ts,{size:24,className:"text-red-600"})}),t.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Delete Recipe?"}),t.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:['"',l?.name,`" will be removed. Existing menu plans using this recipe won't be affected.`]})]}),t.jsxs("div",{className:"flex gap-3 mt-5",children:[t.jsx("button",{onClick:d,disabled:i,className:"flex-1 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-semibold text-sm transition",children:"Cancel"}),t.jsxs("button",{onClick:o,disabled:i,className:"flex-1 py-2.5 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white rounded-xl font-bold text-sm transition flex items-center justify-center gap-2",children:[i?t.jsx(qe,{size:16,className:"animate-spin"}):t.jsx(Ts,{size:16}),"Delete"]})]})]})]}),document.body)}function Yj({recipe:l,onClose:i,onSaved:o}){const[d,x]=u.useState(!1),f=u.useRef(null),[h,v]=u.useState(l?.name||""),[p,g]=u.useState(l?.category||"main_course"),[j,b]=u.useState(l?.cuisine||""),[y,z]=u.useState(l?.serves||4),[S,O]=u.useState(l?.difficulty||"medium"),[C,w]=u.useState(l?.description||""),[k,M]=u.useState(l?.prep_time_minutes||0),[$,L]=u.useState(l?.cook_time_minutes||0),[te,X]=u.useState([]),[ge,K]=u.useState(!1),[se,ne]=u.useState([""]),[J,fe]=u.useState(""),[Q,ce]=u.useState([]),[q,W]=u.useState(!1),ie=u.useRef(null),[me,be]=u.useState(!1),[E,G]=u.useState(""),[Z,A]=u.useState(1);u.useEffect(()=>(As(),()=>Ds()),[]),u.useEffect(()=>()=>{f.current&&clearTimeout(f.current),ie.current&&clearTimeout(ie.current)},[]),u.useEffect(()=>{l?.id&&(K(!0),$t.recipe(l.id).then(re=>{const _=re.recipe||{};v(_.name||""),g(_.category||"main_course"),b(_.cuisine||""),z(_.serves||4),O(_.difficulty||"medium"),w(_.description||""),M(_.prep_time_minutes||0),L(_.cook_time_minutes||0);const F=(re.ingredients||[]).map(xe=>({item_id:xe.item_id,item_name:xe.item_name,qty_per_serving:xe.qty_per_serving,uom:xe.uom,is_primary:!!xe.is_primary,notes:xe.notes||""}));X(F);try{const xe=JSON.parse(_.instructions||"[]");ne(xe.length>0?xe:[""])}catch{ne([""])}}).catch(re=>G(re.message)).finally(()=>K(!1)))},[l?.id]),u.useEffect(()=>{if(J.length<2){ce([]);return}ie.current&&clearTimeout(ie.current),ie.current=setTimeout(async()=>{W(!0);try{const re=await $t.searchIngredients(J);ce(re.items||[])}catch(re){console.error("Ingredient search failed:",re)}finally{W(!1)}},300)},[J]);function le(){d||(x(!0),f.current=setTimeout(()=>i(),250))}function ue(re){te.find(_=>_.item_id===re.id)||(X(_=>[..._,{item_id:re.id,item_name:re.name,qty_per_serving:1,uom:re.uom||"pcs",is_primary:te.length===0,notes:""}]),fe(""),ce([]))}function he(re,_,F){X(xe=>xe.map(_e=>_e.item_id===re?{..._e,[_]:F}:_e))}function Ue(re){X(_=>_.filter(F=>F.item_id!==re))}function Ce(re){X(_=>_.map(F=>F.item_id===re?{...F,is_primary:!F.is_primary}:F))}function rt(re,_){ne(F=>F.map((xe,_e)=>_e===re?_:xe))}function Ot(){ne(re=>[...re,""])}function Rt(re){se.length<=1||ne(_=>_.filter((F,xe)=>xe!==re))}async function wt(){if(!h.trim()){G("Recipe name is required"),A(1);return}be(!0),G("");try{const re={...l?.id?{id:l.id}:{},name:h.trim(),category:p,cuisine:j.trim(),serves:parseInt(y)||4,difficulty:S,description:C.trim(),prep_time_minutes:parseInt(k)||0,cook_time_minutes:parseInt($)||0,instructions:JSON.stringify(se.filter(F=>F.trim())),ingredients:te.map(F=>({item_id:F.item_id,qty_per_serving:parseFloat(F.qty_per_serving)||0,is_primary:F.is_primary?1:0,notes:F.notes||""}))},_=await $t.saveRecipe(re);o(_)}catch(re){G(re.message)}finally{be(!1)}}const Ae=!!l?.id;return Rs.createPortal(t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`fixed inset-0 bg-black/40 z-[10010] ${d?"animate-backdrop-out":"animate-backdrop-in"}`,onClick:le}),t.jsxs("div",{className:`fixed inset-x-0 bottom-0 z-[10011] bg-white rounded-t-2xl shadow-2xl max-h-[92dvh] overflow-hidden flex flex-col ${d?"animate-slide-down":"animate-slide-up"}`,children:[t.jsx("div",{className:"flex justify-center pt-2 pb-1 flex-shrink-0",children:t.jsx("div",{className:"w-10 h-1 rounded-full bg-gray-300"})}),t.jsxs("div",{className:"flex items-center justify-between px-5 pt-2 pb-3 border-b border-gray-100 flex-shrink-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(aa,{size:18,className:"text-orange-500"}),t.jsx("h2",{className:"text-lg font-bold text-gray-900",children:Ae?"Edit Recipe":"New Recipe"})]}),t.jsx("button",{onClick:le,className:"p-2 hover:bg-gray-100 rounded-full text-gray-400 transition",children:t.jsx(Te,{size:18})})]}),t.jsx("div",{className:"flex border-b border-gray-100 flex-shrink-0",children:[{num:1,label:"Details"},{num:2,label:"Ingredients"},{num:3,label:"Instructions"}].map(re=>t.jsx("button",{onClick:()=>A(re.num),className:`flex-1 py-2.5 text-sm font-medium transition border-b-2 ${Z===re.num?"border-orange-500 text-orange-700":"border-transparent text-gray-500 hover:text-gray-700"}`,children:re.label},re.num))}),E&&t.jsxs("div",{className:"mx-5 mt-3 bg-red-50 text-red-700 px-4 py-2 rounded-lg text-sm flex items-center gap-2",children:[t.jsx(jt,{size:14}),t.jsx("span",{className:"flex-1",children:E}),t.jsx("button",{onClick:()=>G(""),children:t.jsx(Te,{size:14})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto px-5 py-4 scroll-touch",children:[Z===1&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Recipe Name *"}),t.jsx("input",{type:"text",value:h,onChange:re=>v(re.target.value),placeholder:"e.g. Camembert Bruschetta",className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Category"}),t.jsx("select",{value:p,onChange:re=>g(re.target.value),className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none",children:xh.filter(re=>re.value).map(re=>t.jsx("option",{value:re.value,children:re.label},re.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Cuisine"}),t.jsx("input",{type:"text",value:j,onChange:re=>b(re.target.value),placeholder:"e.g. French",className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none"})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Serves"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>z(Math.max(1,y-1)),className:"w-8 h-8 flex items-center justify-center rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-700",children:t.jsx(Wa,{size:14})}),t.jsx("span",{className:"w-8 text-center font-bold text-sm",children:y}),t.jsx("button",{onClick:()=>z(y+1),className:"w-8 h-8 flex items-center justify-center rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-700",children:t.jsx(Ve,{size:14})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Prep (min)"}),t.jsx("input",{type:"number",value:k||"",onChange:re=>M(re.target.value),placeholder:"0",className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Cook (min)"}),t.jsx("input",{type:"number",value:$||"",onChange:re=>L(re.target.value),placeholder:"0",className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Difficulty"}),t.jsx("div",{className:"flex gap-2",children:Bj.map(re=>t.jsx("button",{onClick:()=>O(re.value),className:`flex-1 py-2 rounded-lg text-sm font-medium transition ${S===re.value?re.value==="easy"?"bg-green-100 text-green-700 border border-green-200":re.value==="hard"?"bg-red-100 text-red-700 border border-red-200":"bg-amber-100 text-amber-700 border border-amber-200":"bg-gray-50 text-gray-600 border border-gray-200 hover:bg-gray-100"}`,children:re.label},re.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Description (optional)"}),t.jsx("textarea",{value:C,onChange:re=>w(re.target.value),placeholder:"Brief description of the dish...",rows:2,className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none resize-none"})]})]}),Z===2&&t.jsx("div",{className:"space-y-4",children:ge?t.jsxs("div",{className:"flex items-center justify-center py-8",children:[t.jsx(qe,{size:20,className:"animate-spin text-orange-600"}),t.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"Loading ingredients..."})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"relative",children:[t.jsx(Vt,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",value:J,onChange:re=>fe(re.target.value),placeholder:"Search stock items to add...",className:"w-full pl-9 pr-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none"})]}),q&&t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[t.jsx(qe,{size:12,className:"animate-spin"})," Searching..."]}),Q.length>0&&t.jsx("div",{className:"max-h-48 overflow-y-auto bg-white border border-gray-200 rounded-lg",children:Q.map(re=>{const _=te.some(F=>F.item_id===re.id);return t.jsxs("button",{onClick:()=>!_&&ue(re),disabled:_,className:`w-full flex items-center gap-2 px-3 py-2 text-left border-b border-gray-100 last:border-0 transition ${_?"bg-gray-50 opacity-50":"hover:bg-orange-50"}`,children:[t.jsx(pa,{size:12,className:"text-gray-400 flex-shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:re.name}),t.jsxs("span",{className:"text-[10px] text-gray-400",children:[re.group_name,"  ",re.uom]})]}),_?t.jsx(Yt,{size:14,className:"text-green-500 flex-shrink-0"}):t.jsx(Ve,{size:14,className:"text-orange-500 flex-shrink-0"})]},re.id)})}),te.length===0?t.jsxs("div",{className:"text-center py-6",children:[t.jsx(pa,{size:28,className:"mx-auto text-gray-300 mb-2"}),t.jsx("p",{className:"text-sm text-gray-500",children:"No ingredients added yet"}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Search stock items above to add ingredients"})]}):t.jsxs("div",{className:"space-y-2",children:[t.jsxs("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:["Recipe Ingredients (",te.length,")"]}),te.map(re=>t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:`w-2 h-2 rounded-full flex-shrink-0 ${re.is_primary?"bg-orange-500":"bg-gray-300"}`}),t.jsx("span",{className:"text-sm font-medium text-gray-900 flex-1 truncate",children:re.item_name}),t.jsx("button",{onClick:()=>Ce(re.item_id),className:`text-[10px] px-2 py-0.5 rounded-full font-medium transition ${re.is_primary?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-500 hover:bg-orange-50"}`,children:re.is_primary?"Primary":"Secondary"}),t.jsx("button",{onClick:()=>Ue(re.item_id),className:"text-gray-400 hover:text-red-500 p-1",children:t.jsx(Te,{size:14})})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"text-[10px] text-gray-400 block mb-0.5",children:"Qty/serving"}),t.jsx("input",{type:"number",step:"0.01",value:re.qty_per_serving,onChange:_=>he(re.item_id,"qty_per_serving",_.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none"})]}),t.jsxs("div",{className:"w-20",children:[t.jsx("label",{className:"text-[10px] text-gray-400 block mb-0.5",children:"Unit"}),t.jsx("input",{type:"text",value:re.uom,onChange:_=>he(re.item_id,"uom",_.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none"})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"text-[10px] text-gray-400 block mb-0.5",children:"Notes"}),t.jsx("input",{type:"text",value:re.notes,onChange:_=>he(re.item_id,"notes",_.target.value),placeholder:"optional",className:"w-full px-2 py-1.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none"})]})]})]},re.item_id))]})]})}),Z===3&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:["Steps (",se.filter(re=>re.trim()).length,")"]}),se.map((re,_)=>t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"w-6 h-6 rounded-full bg-orange-600 text-white text-[10px] flex items-center justify-center flex-shrink-0 mt-2 font-bold",children:_+1}),t.jsx("textarea",{value:re,onChange:F=>rt(_,F.target.value),placeholder:`Step ${_+1}...`,rows:2,className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none resize-none"}),se.length>1&&t.jsx("button",{onClick:()=>Rt(_),className:"text-gray-400 hover:text-red-500 p-1 mt-1.5",children:t.jsx(Te,{size:14})})]},_)),t.jsxs("button",{onClick:Ot,className:"w-full flex items-center justify-center gap-2 py-2.5 text-sm text-gray-600 border border-dashed border-gray-300 rounded-xl hover:border-orange-400 hover:text-orange-700 transition",children:[t.jsx(Ve,{size:14})," Add Step"]})]})]}),t.jsx("div",{className:"flex-shrink-0 border-t border-gray-100 px-5 py-4 bg-white",children:t.jsxs("div",{className:"flex gap-3",children:[Z>1&&t.jsx("button",{onClick:()=>A(Z-1),className:"flex-1 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-semibold text-sm transition",children:"Back"}),Z<3?t.jsx("button",{onClick:()=>A(Z+1),className:"flex-1 py-3 bg-orange-600 hover:bg-orange-700 text-white rounded-xl font-bold text-sm transition",children:"Next"}):t.jsx("button",{onClick:wt,disabled:me||!h.trim(),className:"flex-1 py-3 bg-orange-600 hover:bg-orange-700 disabled:bg-orange-400 text-white rounded-xl font-bold text-sm transition flex items-center justify-center gap-2",children:me?t.jsxs(t.Fragment,{children:[t.jsx(qe,{size:16,className:"animate-spin"})," Saving..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Yt,{size:16})," ",Ae?"Update Recipe":"Create Recipe"]})})]})})]})]}),document.body)}function fh(l){const i=l.getFullYear(),o=String(l.getMonth()+1).padStart(2,"0"),d=String(l.getDate()).padStart(2,"0");return`${i}-${o}-${d}`}function Td(){return fh(new Date)}function yf(l){return new Date(l+"T00:00:00").toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short",year:"numeric"})}function Vj(l){return l===Td()}function Qj(){const l=Ie(),{campId:i}=ya(),[o,d]=u.useState(Td()),[x,f]=u.useState([]),[h,v]=u.useState(!0),[p,g]=u.useState(""),[j,b]=u.useState(""),[y,z]=u.useState("name"),[S,O]=u.useState("asc"),[C,w]=u.useState(""),[k,M]=u.useState("");u.useEffect(()=>{$()},[o,i]);async function $(){v(!0),g("");try{const J={date:o};i&&(J.camp_id=i);const fe=await Vb.get(J);f(fe.items||[]),b(fe.camp_name||"")}catch(J){g(J.message)}finally{v(!1)}}function L(J){d(fe=>{const Q=new Date(fe+"T00:00:00");return Q.setDate(Q.getDate()+J),fh(Q)})}function te(){d(Td())}function X(J){y===J?O(fe=>fe==="asc"?"desc":"asc"):(z(J),O("desc"))}const ge=[...new Set(x.map(J=>J.group_code).filter(Boolean))].sort(),K=x.filter(J=>{if(C&&J.group_code!==C)return!1;if(k){const fe=k.toLowerCase();return J.name.toLowerCase().includes(fe)||J.item_code.toLowerCase().includes(fe)}return!0}).sort((J,fe)=>{const Q=S==="asc"?1:-1;return y==="name"?J.name.localeCompare(fe.name)*Q:((J[y]||0)-(fe[y]||0))*Q}),se={stock:K.reduce((J,fe)=>J+fe.stock,0),ordered:K.reduce((J,fe)=>J+fe.ordered,0),received:K.reduce((J,fe)=>J+fe.received,0),bar_issued:K.reduce((J,fe)=>J+fe.bar_issued,0),kitchen_issued:K.reduce((J,fe)=>J+fe.kitchen_issued,0)},ne=({field:J,label:fe,icon:Q})=>t.jsxs("button",{onClick:()=>X(J),className:`flex items-center gap-1 text-[10px] sm:text-xs font-medium uppercase tracking-wide ${y===J?"text-green-700":"text-gray-500"}`,children:[Q&&t.jsx(Q,{size:12,className:"hidden sm:block"}),fe,y===J&&t.jsx("span",{className:"text-[9px]",children:S==="asc"?"":""})]});return t.jsxs("div",{children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("div",{children:[t.jsxs("h1",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[t.jsx(ks,{size:22,className:"text-green-600"}),"Daily Overview"]}),t.jsx("p",{className:"text-sm text-gray-500",children:j||l?.camp_name||"All Camps"})]})}),t.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-3 mb-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("button",{onClick:()=>L(-1),className:"flex items-center gap-1 px-3 py-2 text-sm font-medium text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition",children:[t.jsx(Oa,{size:18}),t.jsx("span",{className:"hidden sm:inline",children:"Previous"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-lg font-bold text-gray-900",children:yf(o)}),Vj(o)?t.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full font-medium",children:"Today"}):t.jsx("button",{onClick:te,className:"text-xs text-green-600 hover:text-green-700 font-medium",children:"Go to Today"})]}),t.jsxs("button",{onClick:()=>L(1),className:"flex items-center gap-1 px-3 py-2 text-sm font-medium text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition",children:[t.jsx("span",{className:"hidden sm:inline",children:"Next"}),t.jsx(ot,{size:18})]})]})}),p&&t.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm flex items-center gap-2",children:[t.jsx(jt,{size:16}),p]}),t.jsxs("div",{className:"flex items-center gap-2 mb-3 overflow-x-auto pb-1",children:[t.jsxs("button",{onClick:()=>w(""),className:`flex-shrink-0 px-3 py-1.5 rounded-full text-xs font-medium transition ${C?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-green-600 text-white"}`,children:["All (",x.length,")"]}),ge.map(J=>{const fe=x.filter(Q=>Q.group_code===J).length;return t.jsxs("button",{onClick:()=>w(J),className:`flex-shrink-0 px-3 py-1.5 rounded-full text-xs font-medium transition whitespace-nowrap ${C===J?"bg-green-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[J," (",fe,")"]},J)})]}),t.jsxs("div",{className:"relative mb-4",children:[t.jsx(Vt,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",value:k,onChange:J=>M(J.target.value),placeholder:"Filter items...",className:"w-full pl-9 pr-8 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none"}),k&&t.jsx("button",{onClick:()=>M(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:t.jsx(Te,{size:14})})]}),h?t.jsx(dt,{message:"Loading daily overview..."}):K.length===0?t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center",children:[t.jsx(Ia,{size:40,className:"mx-auto text-gray-300 mb-3"}),t.jsx("p",{className:"text-gray-500 text-sm",children:"No items with activity for this date"})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-5 gap-2 mb-4",children:[t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-2.5 text-center",children:[t.jsx(Ia,{size:16,className:"mx-auto text-blue-500 mb-1"}),t.jsx("p",{className:"text-sm font-bold text-gray-900",children:Math.round(se.stock)}),t.jsx("p",{className:"text-[10px] text-gray-500",children:"Stock"})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-2.5 text-center",children:[t.jsx(_t,{size:16,className:"mx-auto text-green-500 mb-1"}),t.jsx("p",{className:"text-sm font-bold text-gray-900",children:Math.round(se.ordered)}),t.jsx("p",{className:"text-[10px] text-gray-500",children:"Ordered"})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-2.5 text-center",children:[t.jsx(Es,{size:16,className:"mx-auto text-purple-500 mb-1"}),t.jsx("p",{className:"text-sm font-bold text-gray-900",children:Math.round(se.received)}),t.jsx("p",{className:"text-[10px] text-gray-500",children:"Received"})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-2.5 text-center",children:[t.jsx(fa,{size:16,className:"mx-auto text-amber-600 mb-1"}),t.jsx("p",{className:"text-sm font-bold text-gray-900",children:Math.round(se.bar_issued)}),t.jsx("p",{className:"text-[10px] text-gray-500",children:"Bar"})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-2.5 text-center",children:[t.jsx(Pn,{size:16,className:"mx-auto text-orange-500 mb-1"}),t.jsx("p",{className:"text-sm font-bold text-gray-900",children:Math.round(se.kitchen_issued)}),t.jsx("p",{className:"text-[10px] text-gray-500",children:"Kitchen"})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[t.jsx("div",{className:"hidden md:block overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[t.jsx("th",{className:"text-left px-4 py-2.5",children:t.jsx(ne,{field:"name",label:"Item"})}),t.jsx("th",{className:"text-center px-3 py-2.5",children:t.jsx(ne,{field:"stock",label:"Stock",icon:Ia})}),t.jsx("th",{className:"text-center px-3 py-2.5",children:t.jsx(ne,{field:"ordered",label:"Ordered",icon:_t})}),t.jsx("th",{className:"text-center px-3 py-2.5",children:t.jsx(ne,{field:"received",label:"Received",icon:Es})}),t.jsx("th",{className:"text-center px-3 py-2.5",children:t.jsx(ne,{field:"bar_issued",label:"Bar",icon:fa})}),t.jsx("th",{className:"text-center px-3 py-2.5",children:t.jsx(ne,{field:"kitchen_issued",label:"Kitchen",icon:Pn})})]})}),t.jsx("tbody",{children:K.map(J=>t.jsxs("tr",{className:"border-b border-gray-50 hover:bg-gray-50",children:[t.jsxs("td",{className:"px-4 py-2.5",children:[t.jsx("p",{className:"font-medium text-gray-900",children:J.name}),t.jsxs("p",{className:"text-xs text-gray-400",children:[J.item_code,"  ",J.uom]})]}),t.jsx("td",{className:"text-center px-3 py-2.5",children:t.jsx("span",{className:`inline-flex items-center justify-center min-w-[2.5rem] px-2 py-0.5 rounded-full text-xs font-bold ${J.stock_status==="critical"||J.stock_status==="out"?"bg-red-100 text-red-700":J.stock_status==="low"?"bg-amber-100 text-amber-700":"bg-blue-50 text-blue-700"}`,children:J.stock})}),t.jsx("td",{className:"text-center px-3 py-2.5",children:J.ordered>0?t.jsx("span",{className:"inline-flex items-center justify-center min-w-[2.5rem] px-2 py-0.5 rounded-full text-xs font-bold bg-green-100 text-green-700",children:J.ordered}):t.jsx("span",{className:"text-xs text-gray-300",children:""})}),t.jsx("td",{className:"text-center px-3 py-2.5",children:J.received>0?t.jsx("span",{className:"inline-flex items-center justify-center min-w-[2.5rem] px-2 py-0.5 rounded-full text-xs font-bold bg-purple-100 text-purple-700",children:J.received}):t.jsx("span",{className:"text-xs text-gray-300",children:""})}),t.jsx("td",{className:"text-center px-3 py-2.5",children:J.bar_issued>0?t.jsx("span",{className:"inline-flex items-center justify-center min-w-[2.5rem] px-2 py-0.5 rounded-full text-xs font-bold bg-amber-100 text-amber-700",children:J.bar_issued}):t.jsx("span",{className:"text-xs text-gray-300",children:""})}),t.jsx("td",{className:"text-center px-3 py-2.5",children:J.kitchen_issued>0?t.jsx("span",{className:"inline-flex items-center justify-center min-w-[2.5rem] px-2 py-0.5 rounded-full text-xs font-bold bg-orange-100 text-orange-700",children:J.kitchen_issued}):t.jsx("span",{className:"text-xs text-gray-300",children:""})})]},J.id))})]})}),t.jsxs("div",{className:"md:hidden divide-y divide-gray-100",children:[t.jsx("div",{className:"grid grid-cols-5 gap-1 px-3 py-2 bg-gray-50 text-[9px] font-bold text-gray-500 uppercase text-center",children:t.jsxs("span",{className:"text-left col-span-5 mb-1 text-xs text-gray-700",children:[K.length," items"]})}),K.map(J=>t.jsxs("div",{className:"px-3 py-2.5",children:[t.jsx("div",{className:"flex items-center justify-between mb-1.5",children:t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:J.name}),t.jsxs("p",{className:"text-[10px] text-gray-400",children:[J.item_code,"  ",J.uom]})]})}),t.jsxs("div",{className:"grid grid-cols-5 gap-1.5",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("span",{className:`block text-xs font-bold rounded-md py-0.5 ${J.stock_status==="critical"||J.stock_status==="out"?"bg-red-100 text-red-700":J.stock_status==="low"?"bg-amber-100 text-amber-700":"bg-blue-50 text-blue-700"}`,children:J.stock}),t.jsx("span",{className:"text-[8px] text-gray-400 mt-0.5 block",children:"Stock"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("span",{className:`block text-xs font-bold rounded-md py-0.5 ${J.ordered>0?"bg-green-100 text-green-700":"bg-gray-50 text-gray-300"}`,children:J.ordered||""}),t.jsx("span",{className:"text-[8px] text-gray-400 mt-0.5 block",children:"Order"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("span",{className:`block text-xs font-bold rounded-md py-0.5 ${J.received>0?"bg-purple-100 text-purple-700":"bg-gray-50 text-gray-300"}`,children:J.received||""}),t.jsx("span",{className:"text-[8px] text-gray-400 mt-0.5 block",children:"Recd"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("span",{className:`block text-xs font-bold rounded-md py-0.5 ${J.bar_issued>0?"bg-amber-100 text-amber-700":"bg-gray-50 text-gray-300"}`,children:J.bar_issued||""}),t.jsx("span",{className:"text-[8px] text-gray-400 mt-0.5 block",children:"Bar"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("span",{className:`block text-xs font-bold rounded-md py-0.5 ${J.kitchen_issued>0?"bg-orange-100 text-orange-700":"bg-gray-50 text-gray-300"}`,children:J.kitchen_issued||""}),t.jsx("span",{className:"text-[8px] text-gray-400 mt-0.5 block",children:"Kitchen"})]})]})]},J.id))]})]}),t.jsxs("p",{className:"text-xs text-gray-400 text-center mt-3",children:[K.length," items shown  ",yf(o)]})]})]})}const Zj=[{value:"appetizer",label:"Appetizer"},{value:"soup",label:"Soup"},{value:"salad",label:"Salad"},{value:"main_course",label:"Main Course"},{value:"side",label:"Side"},{value:"dessert",label:"Dessert"},{value:"beverage",label:"Beverage"}],Xj=[{value:"lunch",label:"Lunch",icon:""},{value:"dinner",label:"Dinner",icon:""}],Kj={breakfast:"main_course",lunch:"main_course",dinner:"main_course",snack:"side",dessert:"dessert",sauce:"side",soup:"soup",salad:"salad",bread:"side",other:"main_course"};function Od(l){const i=l.getFullYear(),o=String(l.getMonth()+1).padStart(2,"0"),d=String(l.getDate()).padStart(2,"0");return`${i}-${o}-${d}`}function Jj(l){return new Date(l+"T00:00:00").toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short",year:"numeric"})}function Rd(){return Od(new Date)}function bf(l){return l===Rd()}function Fj(){Ie();const{campId:l}=ya(),[i,o]=u.useState(Rd()),[d,x]=u.useState("lunch"),[f,h]=u.useState(null),[v,p]=u.useState([]),[g,j]=u.useState(!0),[b,y]=u.useState(!1),[z,S]=u.useState(""),[O,C]=u.useState(!1),w=u.useRef(0),[k,M]=u.useState([]),[$,L]=u.useState(!1),[te,X]=u.useState(null),[ge,K]=u.useState(!1);u.useEffect(()=>{se()},[i,d,l]);async function se(){const Z=++w.current;S(""),y(!0);try{const A=await We.chefInit(i,d);if(w.current!==Z)return;h(A.plan),p(A.dishes||[]),A.recipes&&(M(A.recipes),L(!0))}catch{try{const[A,le]=await Promise.all([We.plan(i,d),$?null:$t.recipes()]);if(w.current!==Z)return;h(A.plan),p(A.dishes||[]),le?.recipes&&(M(le.recipes),L(!0))}catch(A){w.current===Z&&S(A.message)}}finally{w.current===Z&&(j(!1),y(!1),J(i,d))}}async function ne(){try{const Z=await We.plan(i,d);h(Z.plan),p(Z.dishes||[])}catch(Z){S(Z.message)}}function J(Z,A){for(const le of[-1,1]){const ue=new Date(Z+"T00:00:00");ue.setDate(ue.getDate()+le);const he=Od(ue);We.chefInit(he,A).catch(()=>{We.plan(he,A).catch(()=>{})})}}function fe(Z){o(A=>{const le=new Date(A+"T00:00:00");return le.setDate(le.getDate()+Z),Od(le)})}async function Q({course:Z,name:A,portions:le,recipeId:ue}){if(A.trim()){C(!0),S("");try{let he=f?.id;he||(he=(await We.createPlan(i,d,le)).plan_id);const Ce=(await We.addDish(he,Z,A.trim(),le,ue)).dish_id;if(ue&&Ce)try{await We.loadRecipe(Ce,ue,le)}catch(rt){console.error("Failed to auto-load recipe:",rt)}await ne()}catch(he){S(he.message)}finally{C(!1)}}}async function ce(Z){if(confirm("Remove this dish and all its ingredients?")){C(!0);try{await We.removeDish(Z),await ne()}catch(A){S(A.message)}finally{C(!1)}}}async function q(Z,A){if(!(A<1)){C(!0);try{await We.updatePortions(Z,A),await ne()}catch(le){S(le.message)}finally{C(!1)}}}async function W(Z){if(!(!f||Z<1)){C(!0);try{await We.updatePlanPax(f.id,Z),await ne()}catch(A){S(A.message)}finally{C(!1)}}}async function ie(){if(confirm("Confirm this menu plan? No further edits until reopened.")){C(!0);try{await We.confirmPlan(f.id),await ne()}catch(Z){S(Z.message)}finally{C(!1)}}}async function me(){C(!0);try{await We.reopenPlan(f.id),await ne()}catch(Z){S(Z.message)}finally{C(!1)}}const be=f?.status==="confirmed",E=!f||f?.status==="draft",G=v.reduce((Z,A)=>Z+A.ingredients.filter(le=>!le.is_removed).length,0);return t.jsxs("div",{className:"pb-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[t.jsx(aa,{size:22,className:"text-orange-600"}),"Menu Plan"]}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Plan daily meals with recipes"})]}),f&&t.jsxs("button",{onClick:()=>K(!0),className:"flex items-center gap-1.5 text-xs text-gray-600 bg-gray-100 px-3 py-1.5 rounded-full",children:[t.jsx(Vv,{size:14}),"Audit"]})]}),t.jsxs("div",{className:"flex items-center justify-between bg-white rounded-xl border border-gray-100 px-4 py-3 mb-3",children:[t.jsx("button",{onClick:()=>fe(-1),className:"p-2 rounded-lg hover:bg-gray-100 active:bg-gray-200",children:t.jsx(Oa,{size:20,className:"text-gray-600"})}),t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"flex items-center gap-1.5 justify-center",children:[t.jsx("p",{className:"text-sm font-semibold text-gray-900",children:Jj(i)}),b&&t.jsx(qe,{size:12,className:"animate-spin text-orange-400"})]}),bf(i)&&t.jsx("span",{className:"text-[10px] text-green-600 font-medium",children:"Today"}),!bf(i)&&t.jsx("button",{onClick:()=>o(Rd()),className:"text-[10px] text-orange-600 font-medium",children:"Go to Today"})]}),t.jsx("button",{onClick:()=>fe(1),className:"p-2 rounded-lg hover:bg-gray-100 active:bg-gray-200",children:t.jsx(ot,{size:20,className:"text-gray-600"})})]}),t.jsx("div",{className:"flex gap-2 mb-3",children:Xj.map(Z=>t.jsxs("button",{onClick:()=>x(Z.value),className:`flex-1 py-2.5 rounded-xl text-sm font-semibold transition-all ${d===Z.value?"bg-orange-500 text-white shadow-sm":"bg-white text-gray-600 border border-gray-200"}`,children:[Z.icon," ",Z.label]},Z.value))}),z&&t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl px-4 py-3 mb-3 flex items-center gap-2",children:[t.jsx(jt,{size:16,className:"text-red-500 shrink-0"}),t.jsx("p",{className:"text-sm text-red-700 flex-1",children:z}),t.jsx("button",{onClick:()=>S(""),children:t.jsx(Te,{size:16,className:"text-red-400"})})]}),f&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 px-4 py-2.5 mb-3 space-y-2",children:[t.jsx(Pj,{pax:f.portions,onSave:W,disabled:be||O}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`text-[10px] font-bold uppercase px-2 py-0.5 rounded-full ${be?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:f.status}),t.jsxs("span",{className:"text-[10px] text-gray-400",children:[v.length," dish",v.length!==1?"es":"",G>0&&`  ${G} ingredients`]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[f.status==="draft"&&t.jsxs("button",{onClick:ie,disabled:O||v.length===0,className:"text-xs text-green-700 font-semibold bg-green-50 px-2.5 py-1 rounded-lg flex items-center gap-1 disabled:opacity-40",children:[t.jsx(Zd,{size:13})," Confirm"]}),be&&t.jsxs("button",{onClick:me,disabled:O,className:"text-xs text-amber-700 font-medium bg-amber-50 px-2.5 py-1 rounded-lg flex items-center gap-1",children:[t.jsx(v1,{size:13})," Reopen"]})]})]})]}),g&&t.jsx(dt,{message:"Loading menu plan..."}),!g&&t.jsxs("div",{className:"space-y-2",children:[v.length===0&&!f&&!be&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 p-6 text-center mb-2",children:[t.jsx(aa,{size:36,className:"text-gray-300 mx-auto mb-2"}),t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"No menu plan yet"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Add a dish below to start planning"})]}),v.length===0&&f&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 p-6 text-center mb-2",children:[t.jsx(Pn,{size:32,className:"text-gray-300 mx-auto mb-2"}),t.jsx("p",{className:"text-sm text-gray-500",children:"No dishes yet"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Add dishes below to build the menu"})]}),v.map(Z=>t.jsx(Wj,{dish:Z,isConfirmed:be,onRemoveDish:()=>ce(Z.id),onRatePresentation:()=>X(Z),onUpdatePortions:A=>q(Z.id,A),saving:O},Z.id)),E&&!be&&t.jsx(Ij,{recipes:k,recipesLoaded:$,onAdd:Q,saving:O})]}),te&&t.jsx(e2,{dish:te,onRated:()=>{X(null),ne()},onClose:()=>X(null)}),ge&&f&&t.jsx(t2,{planId:f.id,onClose:()=>K(!1)})]})}function Ij({recipes:l,recipesLoaded:i,onAdd:o,saving:d}){const[x,f]=u.useState(!1),[h,v]=u.useState(""),[p,g]=u.useState(""),[j,b]=u.useState("main_course"),[y,z]=u.useState(20),S={};for(const w of l){const k=w.category||"other";S[k]||(S[k]=[]),S[k].push(w)}function O(w){const k=w.target.value;if(v(k),k){const M=l.find($=>String($.id)===String(k));M&&(g(M.name),b(Kj[M.category]||"main_course"))}else g("")}function C(){const w=p.trim();w&&(o({course:j,name:w,portions:y,recipeId:h?parseInt(h):null}),v(""),g(""),b("main_course"),z(20))}return x?t.jsxs("div",{className:"bg-white rounded-xl border-2 border-orange-200 overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-orange-50 border-b border-orange-100",children:[t.jsxs("h3",{className:"text-sm font-bold text-orange-800 flex items-center gap-2",children:[t.jsx(Ve,{size:16}),"Add Dish"]}),t.jsx("button",{onClick:()=>{f(!1),v(""),g("")},className:"text-orange-400 hover:text-orange-600",children:t.jsx(Te,{size:18})})]}),t.jsxs("div",{className:"px-4 py-3 space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[11px] font-medium text-gray-500 uppercase tracking-wide mb-1 block",children:"Pick Recipe"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:h,onChange:O,className:"w-full appearance-none bg-gray-50 border border-gray-200 rounded-lg px-3 py-2.5 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-200 focus:border-orange-400 pr-8",children:[t.jsx("option",{value:"",children:"-- Select a recipe or type name below --"}),Object.entries(S).map(([w,k])=>t.jsx("optgroup",{label:w.replace("_"," ").replace(/\b\w/g,M=>M.toUpperCase()),children:k.map(M=>t.jsxs("option",{value:M.id,children:[M.name," (",M.ingredient_count||0," ing)"]},M.id))},w))]}),t.jsx(vt,{size:16,className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[11px] font-medium text-gray-500 uppercase tracking-wide mb-1 block",children:"Dish Name"}),t.jsx("input",{type:"text",value:p,onChange:w=>{g(w.target.value),h&&v("")},placeholder:"e.g. Grilled Chicken with Herbs",className:"w-full border border-gray-200 rounded-lg px-3 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-orange-200 focus:border-orange-400"}),h&&t.jsxs("p",{className:"text-[10px] text-orange-600 mt-1 flex items-center gap-1",children:[t.jsx(al,{size:10})," Recipe ingredients will be auto-loaded"]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"text-[11px] font-medium text-gray-500 uppercase tracking-wide mb-1 block",children:"Course"}),t.jsxs("div",{className:"relative",children:[t.jsx("select",{value:j,onChange:w=>b(w.target.value),className:"w-full appearance-none bg-gray-50 border border-gray-200 rounded-lg px-3 py-2.5 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-orange-200 pr-8",children:Zj.map(w=>t.jsx("option",{value:w.value,children:w.label},w.value))}),t.jsx(vt,{size:14,className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),t.jsxs("div",{className:"w-28",children:[t.jsx("label",{className:"text-[11px] font-medium text-gray-500 uppercase tracking-wide mb-1 block",children:"Portions"}),t.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg overflow-hidden bg-gray-50",children:[t.jsx("button",{onClick:()=>z(Math.max(1,y-5)),className:"px-2 py-2.5 text-gray-600 hover:bg-gray-100 active:bg-gray-200",children:t.jsx(Wa,{size:14})}),t.jsx("input",{type:"number",value:y,onChange:w=>z(Math.max(1,parseInt(w.target.value)||1)),className:"w-full text-center text-sm font-semibold bg-transparent border-0 focus:outline-none py-2.5"}),t.jsx("button",{onClick:()=>z(y+5),className:"px-2 py-2.5 text-gray-600 hover:bg-gray-100 active:bg-gray-200",children:t.jsx(Ve,{size:14})})]})]})]}),t.jsxs("button",{onClick:C,disabled:!p.trim()||d,className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-2.5 rounded-lg text-sm font-semibold disabled:opacity-40 flex items-center justify-center gap-2 transition active:bg-orange-700",children:[d?t.jsx(qe,{size:16,className:"animate-spin"}):t.jsx(Ve,{size:16}),d?"Adding...":h?"Add with Recipe":"Add Dish"]})]})]}):t.jsxs("button",{onClick:()=>f(!0),className:"w-full flex items-center justify-center gap-2 py-4 border-2 border-dashed border-gray-300 rounded-xl text-gray-500 hover:border-orange-400 hover:text-orange-600 hover:bg-orange-50/50 transition font-semibold text-sm active:bg-orange-50",children:[t.jsx(Ve,{size:18}),"Add Dish"]})}function Pj({pax:l,onSave:i,disabled:o}){const[d,x]=u.useState(!1),[f,h]=u.useState(l),v=u.useRef(null);u.useEffect(()=>{h(l)},[l]),u.useEffect(()=>{d&&v.current&&v.current.select()},[d]);function p(){const g=parseInt(f)||0;g>0&&g!==l&&i(g),x(!1)}return d?t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Sa,{size:14,className:"text-orange-600 shrink-0"}),t.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Total Pax"}),t.jsx("input",{ref:v,type:"number",value:f,onChange:g=>h(g.target.value),onBlur:p,onKeyDown:g=>{g.key==="Enter"&&p(),g.key==="Escape"&&x(!1)},className:"w-20 text-center text-sm font-bold border border-orange-300 rounded-lg px-2 py-1 focus:outline-none focus:ring-2 focus:ring-orange-200",min:"1"}),t.jsx("button",{onClick:p,className:"text-green-600 p-1",children:t.jsx(Yt,{size:16})}),t.jsx("button",{onClick:()=>{h(l),x(!1)},className:"text-gray-400 p-1",children:t.jsx(Te,{size:14})})]}):t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Sa,{size:14,className:"text-orange-600 shrink-0"}),t.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Total Pax"}),t.jsx("button",{onClick:()=>!o&&x(!0),disabled:o,className:"text-sm font-bold text-orange-700 bg-orange-50 px-3 py-1 rounded-lg hover:bg-orange-100 active:bg-orange-200 disabled:opacity-40 disabled:pointer-events-none transition",children:l}),!o&&t.jsx("span",{className:"text-[10px] text-gray-400",children:"tap to edit"})]})}function Wj({dish:l,isConfirmed:i,onRemoveDish:o,onRatePresentation:d,onUpdatePortions:x,saving:f}){const h=l.portions||20,v=!!l.recipe_id,p=l.presentation_score>0,g=!!l.is_default,j=l.ingredients.filter(z=>!z.is_removed).length,b=l.ingredients.filter(z=>!z.is_removed&&z.is_primary).length,y=l.ingredients.filter(z=>!z.is_removed&&!z.is_primary).length;return t.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 overflow-hidden shadow-sm",children:[t.jsxs("div",{className:"flex items-center gap-2 px-3 py-3",children:[t.jsx(Pn,{size:15,className:"text-orange-500 shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("span",{className:"font-semibold text-sm text-gray-900 truncate block",children:l.dish_name}),j>0&&t.jsxs("span",{className:"text-[10px] text-gray-400",children:[b," daily  ",y," weekly ingredients"]})]}),g&&t.jsx("span",{className:"text-[9px] bg-blue-50 text-blue-600 px-1.5 py-0.5 rounded-full font-medium shrink-0",children:"Default"}),v&&t.jsx("span",{className:"text-[9px] bg-orange-50 text-orange-600 px-1.5 py-0.5 rounded-full flex items-center gap-0.5 shrink-0",children:t.jsx(al,{size:8})}),p&&t.jsxs("span",{className:"text-[10px] font-medium text-amber-700 bg-amber-50 px-1.5 py-0.5 rounded-full flex items-center gap-0.5 shrink-0",children:[t.jsx(nr,{size:9,className:"fill-amber-500 text-amber-500"})," ",l.presentation_score]}),t.jsxs("button",{onClick:()=>{if(i)return;const z=prompt("Portions:",h);z&&parseInt(z)>0&&parseInt(z)!==h&&x(parseInt(z))},className:`text-[10px] font-medium px-1.5 py-0.5 rounded-full flex items-center gap-0.5 ${i?"text-gray-500 bg-gray-50":"text-orange-700 bg-orange-50 active:bg-orange-100"}`,children:[t.jsx(Sa,{size:10})," ",h]}),t.jsx("button",{onClick:d,className:"text-amber-600 p-0.5 shrink-0",children:t.jsx(th,{size:15})}),!i&&!g&&t.jsx("button",{onClick:o,disabled:f,className:"text-red-400 p-0.5 shrink-0",children:t.jsx(Ts,{size:14})})]}),l.presentation_feedback&&t.jsx("div",{className:"px-3 py-2 bg-amber-50/50 border-t border-amber-100",children:t.jsx("p",{className:"text-[10px] text-amber-800",children:l.presentation_feedback})})]})}function e2({dish:l,onRated:i,onClose:o}){const[d,x]=u.useState(null),[f,h]=u.useState(null),[v,p]=u.useState(!1),[g,j]=u.useState(null),[b,y]=u.useState(""),[z,S]=u.useState(!1),O=u.useRef(null),C=u.useRef(null);u.useEffect(()=>(As(),()=>{Ds(),O.current&&clearTimeout(O.current),f&&URL.revokeObjectURL(f)}),[]);function w($){const L=$.target.files[0];L&&(x(L),h(URL.createObjectURL(L)),j(null),y(""))}async function k(){if(d){p(!0),y("");try{const L=(await We.uploadDishPhoto(d)).url,te=await We.ratePresentation(l.id,L);j(te.rating||te)}catch($){y($.message)}finally{p(!1)}}}function M(){S(!0),O.current=setTimeout(()=>{g?i():o()},280)}return Rs.createPortal(t.jsxs("div",{className:"fixed inset-0 z-[10010]",children:[t.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:M}),t.jsxs("div",{className:`absolute bottom-0 left-0 right-0 bg-white rounded-t-2xl max-h-[85dvh] flex flex-col ${z?"animate-slide-down":"animate-slide-up"}`,children:[t.jsx("div",{className:"flex justify-center pt-2 pb-1",children:t.jsx("div",{className:"w-10 h-1 rounded-full bg-gray-300"})}),t.jsxs("div",{className:"flex items-center justify-between px-5 py-3 border-b border-gray-100",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-bold text-gray-900 flex items-center gap-2",children:[t.jsx(nr,{size:16,className:"text-amber-500"}),"Rate Presentation"]}),t.jsx("p",{className:"text-[10px] text-gray-400 mt-0.5",children:l.dish_name})]}),t.jsx("button",{onClick:M,className:"p-1",children:t.jsx(Te,{size:18,className:"text-gray-400"})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto px-5 py-4 scroll-touch",children:[b&&t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl px-4 py-2 mb-3 text-sm text-red-700 flex items-center gap-2",children:[t.jsx(jt,{size:14}),b]}),!g&&t.jsxs("div",{className:"text-center",children:[f?t.jsxs("div",{className:"mb-4",children:[t.jsx("img",{src:f,alt:"Dish photo",className:"w-full max-w-xs mx-auto rounded-xl border border-gray-200 shadow-sm"}),t.jsx("button",{onClick:()=>{x(null),h(null)},className:"text-xs text-gray-500 hover:text-red-500 mt-2",children:"Change photo"})]}):t.jsxs("div",{onClick:()=>C.current?.click(),className:"bg-amber-50 border-2 border-dashed border-amber-300 rounded-xl p-8 mb-4 cursor-pointer hover:bg-amber-100 transition",children:[t.jsx(th,{size:40,className:"text-amber-400 mx-auto mb-3"}),t.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Tap to upload dish photo"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG, or WebP"})]}),t.jsx("input",{ref:C,type:"file",accept:"image/jpeg,image/png,image/webp",onChange:w,className:"hidden"}),t.jsx("p",{className:"text-[10px] text-gray-400 mt-2 max-w-xs mx-auto",children:"AI will rate plating, color, garnish and portion on a 1-5 scale"})]}),v&&t.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[t.jsx(qe,{size:28,className:"animate-spin text-amber-500 mb-3"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Analyzing presentation..."})]}),g&&t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"flex items-center justify-center gap-1 mb-3",children:[1,2,3,4,5].map($=>t.jsx(nr,{size:28,className:$<=(g.score||0)?"fill-amber-400 text-amber-400":"text-gray-200"},$))}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:[g.score,"/5"]}),g.feedback&&t.jsx("p",{className:"text-sm text-gray-600 bg-amber-50 rounded-xl px-4 py-3 mt-3 text-left",children:g.feedback}),g.tips&&g.tips.length>0&&t.jsxs("div",{className:"mt-3 text-left",children:[t.jsx("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Tips"}),t.jsx("ul",{className:"space-y-1.5",children:g.tips.map(($,L)=>t.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[t.jsx("span",{className:"w-4 h-4 rounded-full bg-amber-100 text-amber-700 text-[10px] flex items-center justify-center shrink-0 mt-0.5 font-bold",children:L+1}),t.jsx("span",{className:"text-gray-700",children:$})]},L))})]}),f&&t.jsx("img",{src:f,alt:"Rated dish",className:"w-32 h-32 object-cover rounded-xl mx-auto mt-4 border border-gray-200"})]})]}),t.jsx("div",{className:"px-5 py-3 border-t border-gray-100",children:g?t.jsxs("button",{onClick:M,className:"w-full bg-green-600 text-white py-2.5 rounded-xl text-sm font-semibold flex items-center justify-center gap-2",children:[t.jsx(Yt,{size:16})," Done"]}):t.jsxs("button",{onClick:k,disabled:!d||v,className:"w-full bg-amber-500 hover:bg-amber-600 text-white py-2.5 rounded-xl text-sm font-semibold disabled:opacity-40 flex items-center justify-center gap-2",children:[v?t.jsx(qe,{size:16,className:"animate-spin"}):t.jsx(nr,{size:16}),v?"Analyzing...":"Rate Presentation"]})})]})]}),document.body)}function t2({planId:l,onClose:i}){const[o,d]=u.useState([]),[x,f]=u.useState(!0),[h,v]=u.useState(!1),p=u.useRef(null);u.useEffect(()=>(As(),g(),()=>{Ds(),p.current&&clearTimeout(p.current)}),[]);async function g(){f(!0);try{const S=await We.audit(l);d(S.audit||[])}catch{d([])}finally{f(!1)}}function j(){v(!0),p.current=setTimeout(i,280)}function b(S){return{create_plan:"Created plan",update_portions:"Updated portions",change_meal:"Changed meal",add_dish:"Added dish",remove_dish:"Removed dish",ai_suggest:"AI suggested",add_ingredient:"Added ingredient",remove_ingredient:"Removed ingredient",modify_qty:"Modified quantity",confirm_plan:"Confirmed plan",reopen_plan:"Reopened plan",load_recipe:"Loaded recipe",rate_presentation:"Rated presentation"}[S]||S}function y(S){return S?new Date(S).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):""}function z(S){return S.includes("recipe")||S.includes("load")?"text-orange-600 bg-orange-50":S.includes("presentation")||S.includes("rate")?"text-amber-600 bg-amber-50":S.includes("add")?"text-green-600 bg-green-50":S.includes("remove")?"text-red-600 bg-red-50":S.includes("confirm")?"text-green-700 bg-green-50":S.includes("reopen")?"text-amber-700 bg-amber-50":S.includes("modify")||S.includes("update")?"text-blue-600 bg-blue-50":"text-gray-600 bg-gray-50"}return Rs.createPortal(t.jsxs("div",{className:"fixed inset-0 z-[10010]",children:[t.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:j}),t.jsxs("div",{className:`absolute bottom-0 left-0 right-0 bg-white rounded-t-2xl max-h-[85dvh] flex flex-col ${h?"animate-slide-down":"animate-slide-up"}`,children:[t.jsx("div",{className:"flex justify-center pt-2 pb-1",children:t.jsx("div",{className:"w-10 h-1 rounded-full bg-gray-300"})}),t.jsxs("div",{className:"flex items-center justify-between px-5 py-3 border-b border-gray-100",children:[t.jsxs("h3",{className:"text-sm font-bold text-gray-900 flex items-center gap-2",children:[t.jsx(sn,{size:16,className:"text-gray-600"}),"Audit Log"]}),t.jsx("button",{onClick:j,className:"p-1",children:t.jsx(Te,{size:18,className:"text-gray-400"})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto px-5 py-3 overscroll-contain scroll-touch",children:[x&&t.jsx(dt,{message:"Loading audit trail..."}),!x&&o.length===0&&t.jsx("p",{className:"text-center text-xs text-gray-400 py-8",children:"No audit entries"}),o.map((S,O)=>t.jsxs("div",{className:"flex gap-3 mb-3",children:[t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("div",{className:`w-2 h-2 rounded-full mt-1.5 shrink-0 ${S.action.includes("confirm")?"bg-green-500":S.action.includes("remove")?"bg-red-400":S.action.includes("recipe")||S.action.includes("load")?"bg-orange-500":S.action.includes("presentation")||S.action.includes("rate")?"bg-amber-500":"bg-gray-400"}`}),O<o.length-1&&t.jsx("div",{className:"w-px flex-1 bg-gray-200 mt-1"})]}),t.jsxs("div",{className:"flex-1 pb-2",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[t.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded ${z(S.action)}`,children:b(S.action)}),t.jsx("span",{className:"text-[10px] text-gray-400",children:y(S.created_at)})]}),t.jsx("p",{className:"text-[11px] text-gray-600",children:S.user_name}),S.dish_name&&t.jsx("p",{className:"text-[10px] text-gray-400",children:S.dish_name}),S.new_value&&t.jsxs("div",{className:"text-[10px] text-gray-400 mt-0.5",children:[S.new_value.qty!==void 0&&t.jsxs("span",{children:["Qty: ",S.old_value?.qty??""," \\u2192 ",S.new_value.qty]}),S.new_value.portions!==void 0&&t.jsxs("span",{children:["Portions: ",S.old_value?.portions??""," \\u2192 ",S.new_value.portions]}),S.new_value.dish_name&&t.jsxs("span",{children:["Dish: ",S.new_value.dish_name]}),S.new_value.status&&t.jsxs("span",{children:["Status: ",S.old_value?.status??""," \\u2192 ",S.new_value.status]}),S.new_value.reason&&t.jsxs("span",{children:["Reason: ",S.new_value.reason]}),S.new_value.score!==void 0&&t.jsxs("span",{children:["Score: ",S.new_value.score,"/5"]})]})]})]},S.id))]})]})]}),document.body)}const a2=[{value:"lunch",label:"Lunch",icon:""},{value:"dinner",label:"Dinner",icon:""}];function hh(l){const i=l.getFullYear(),o=String(l.getMonth()+1).padStart(2,"0"),d=String(l.getDate()).padStart(2,"0");return`${i}-${o}-${d}`}function Ad(){return hh(new Date)}function s2(l){return new Date(l+"T00:00:00").toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short",year:"numeric"})}function vf(l){return l===Ad()}function n2(){Ie();const{campId:l}=ya(),[i,o]=u.useState(Ad()),[d,x]=u.useState("lunch"),[f,h]=u.useState(null),[v,p]=u.useState([]),[g,j]=u.useState([]),[b,y]=u.useState(!0),[z,S]=u.useState("");u.useEffect(()=>{O()},[i,d,l]);async function O(){y(!0),S("");try{const M=await We.plan(i,d);h(M.plan),p(M.dishes||[]);const $=[];for(const L of M.dishes||[])for(const te of L.ingredients)te.is_removed||te.is_primary&&$.push({...te,dish_name:L.dish_name,dish_id:L.id});j($)}catch(M){S(M.message)}finally{y(!1)}}function C(M){o($=>{const L=new Date($+"T00:00:00");return L.setDate(L.getDate()+M),hh(L)})}async function w(M,$,L){const te=L===""?null:parseFloat(L);try{await We.updateDailyTracking(M,{[$]:te}),j(X=>X.map(ge=>ge.id===M?{...ge,[$]:te}:ge))}catch(X){S(X.message)}}async function k(M,$){const L=$===""?0:parseFloat($);try{await We.updateStock(M,L),j(te=>te.map(X=>X.item_id===M?{...X,stock_qty:L}:X))}catch(te){S(te.message)}}return t.jsxs("div",{className:"pb-8",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("div",{children:[t.jsxs("h1",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[t.jsx(sn,{size:22,className:"text-blue-600"}),"Daily Groceries"]}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Order & track daily ingredients"})]})}),t.jsxs("div",{className:"flex items-center justify-between bg-white rounded-xl border border-gray-100 px-4 py-3 mb-3",children:[t.jsx("button",{onClick:()=>C(-1),className:"p-1.5 rounded-lg hover:bg-gray-100 active:bg-gray-200",children:t.jsx(Oa,{size:20,className:"text-gray-600"})}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s2(i)}),vf(i)&&t.jsx("span",{className:"text-[10px] text-green-600 font-medium",children:"Today"}),!vf(i)&&t.jsx("button",{onClick:()=>o(Ad()),className:"text-[10px] text-blue-600 font-medium",children:"Go to Today"})]}),t.jsx("button",{onClick:()=>C(1),className:"p-1.5 rounded-lg hover:bg-gray-100 active:bg-gray-200",children:t.jsx(ot,{size:20,className:"text-gray-600"})})]}),t.jsx("div",{className:"flex gap-2 mb-3",children:a2.map(M=>t.jsxs("button",{onClick:()=>x(M.value),className:`flex-1 py-2.5 rounded-xl text-sm font-semibold transition-all ${d===M.value?"bg-blue-500 text-white shadow-sm":"bg-white text-gray-600 border border-gray-200"}`,children:[M.icon," ",M.label]},M.value))}),z&&t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl px-4 py-3 mb-3 flex items-center gap-2",children:[t.jsx(jt,{size:16,className:"text-red-500 shrink-0"}),t.jsx("p",{className:"text-sm text-red-700 flex-1",children:z}),t.jsx("button",{onClick:()=>S(""),children:t.jsx(Te,{size:16,className:"text-red-400"})})]}),b&&t.jsx(dt,{message:"Loading groceries..."}),!b&&t.jsxs(t.Fragment,{children:[!f&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 p-6 text-center",children:[t.jsx(sn,{size:36,className:"text-gray-300 mx-auto mb-2"}),t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"No menu plan for this day"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Create a menu plan first to see daily groceries"})]}),f&&g.length===0&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 p-6 text-center mb-3",children:[t.jsx(sn,{size:32,className:"text-gray-300 mx-auto mb-2"}),t.jsx("p",{className:"text-sm text-gray-500",children:"No daily ingredients yet"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Add daily ingredients from the add row below"})]}),f&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-100",children:[t.jsx(l2,{dishes:v,onAdded:O,onError:S}),g.length>0&&t.jsxs("div",{className:"grid grid-cols-[1fr_60px_60px_60px] gap-1 px-3 py-2 bg-gray-50 border-y border-gray-100 text-[10px] font-semibold text-gray-500 uppercase tracking-wider",children:[t.jsx("span",{children:"Item"}),t.jsx("span",{className:"text-center",children:"Stock"}),t.jsx("span",{className:"text-center",children:"Order"}),t.jsx("span",{className:"text-center",children:"Recv"})]}),g.map(M=>t.jsx(r2,{ingredient:M,onUpdate:w,onUpdateStock:k},M.id))]})]})]})}function l2({dishes:l,onAdded:i,onError:o}){const[d,x]=u.useState(!1),[f,h]=u.useState(""),[v,p]=u.useState([]),[g,j]=u.useState(!1),[b,y]=u.useState(null),[z,S]=u.useState(""),[O,C]=u.useState(""),[w,k]=u.useState(!1),M=u.useRef(null),$=u.useRef(null);u.useEffect(()=>{l.length>0&&!O&&C(String(l[0].id))},[l]),u.useEffect(()=>{if(!f.trim()||f.trim().length<2){p([]);return}return clearTimeout($.current),$.current=setTimeout(async()=>{j(!0);try{const X=await We.searchItems(f.trim());p(X.items||[])}catch{p([])}finally{j(!1)}},300),()=>clearTimeout($.current)},[f]);function L(X){y(X),h(X.name),p([])}async function te(){if(!(!b||!z||!O)){k(!0);try{await We.addIngredient(parseInt(O),b.id,parseFloat(z),b.uom||"kg"),y(null),h(""),S(""),p([]),i()}catch(X){o(X.message)}finally{k(!1)}}}return d?t.jsxs("div",{className:"border-b border-gray-100 px-3 py-3 bg-blue-50/30",children:[t.jsxs("div",{className:"relative mb-2",children:[t.jsx(Vt,{size:14,className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{ref:M,type:"text",value:f,onChange:X=>{h(X.target.value),y(null)},placeholder:"Search item...",className:"w-full pl-8 pr-8 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-200 focus:border-blue-400"}),t.jsx("button",{onClick:()=>{x(!1),h(""),y(null),p([])},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t.jsx(Te,{size:14})}),v.length>0&&!b&&t.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto z-50",children:v.map(X=>t.jsxs("button",{onClick:()=>L(X),className:"w-full text-left px-3 py-2.5 text-sm hover:bg-blue-50 border-b border-gray-50 last:border-0",children:[t.jsx("span",{className:"font-medium text-gray-900",children:X.name}),t.jsx("span",{className:"text-xs text-gray-400 ml-2",children:X.uom}),X.stock_qty!=null&&t.jsxs("span",{className:"text-xs text-gray-400 ml-1",children:[" Stock: ",X.stock_qty]})]},X.id))}),g&&t.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg px-3 py-2 text-xs text-gray-400 flex items-center gap-2",children:[t.jsx(qe,{size:12,className:"animate-spin"})," Searching..."]})]}),b&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"number",value:z,onChange:X=>S(X.target.value),placeholder:"Qty",className:"w-20 border border-gray-200 rounded-lg px-2 py-1.5 text-sm focus:outline-none focus:ring-2 focus:ring-blue-200"}),t.jsx("span",{className:"text-xs text-gray-500",children:b.uom||"kg"}),l.length>1&&t.jsx("select",{value:O,onChange:X=>C(X.target.value),className:"flex-1 border border-gray-200 rounded-lg px-2 py-1.5 text-xs text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-200 appearance-none bg-white",children:l.map(X=>t.jsx("option",{value:X.id,children:X.dish_name},X.id))}),t.jsxs("button",{onClick:te,disabled:!z||w,className:"bg-blue-500 text-white px-3 py-1.5 rounded-lg text-sm font-medium disabled:opacity-40 flex items-center gap-1",children:[w?t.jsx(qe,{size:14,className:"animate-spin"}):t.jsx(Yt,{size:14}),"Add"]})]})]}):t.jsxs("button",{onClick:()=>{x(!0),setTimeout(()=>M.current?.focus(),100)},className:"w-full flex items-center gap-2 px-3 py-3 text-sm text-gray-400 hover:text-blue-600 hover:bg-blue-50/50 transition border-b border-gray-100",children:[t.jsx(Ve,{size:16}),t.jsx("span",{children:"Add item..."})]})}function r2({ingredient:l,onUpdate:i,onUpdateStock:o}){const d=l,[x,f]=u.useState(d.stock_qty!=null?String(d.stock_qty):""),[h,v]=u.useState(d.ordered_qty??""),[p,g]=u.useState(d.received_qty??"");u.useEffect(()=>{f(d.stock_qty!=null?String(d.stock_qty):""),v(d.ordered_qty??""),g(d.received_qty??"")},[d.stock_qty,d.ordered_qty,d.received_qty]);function j(y,z,S){(z===""?null:parseFloat(z))!==(S??null)&&i(d.id,y,z)}function b(){const y=x===""?null:parseFloat(x),z=d.stock_qty!=null?d.stock_qty:null;y!==z&&o(d.item_id,x)}return t.jsxs("div",{className:"grid grid-cols-[1fr_60px_60px_60px] gap-1 px-3 py-2.5 border-b border-gray-50 items-center",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:d.item_name}),t.jsxs("p",{className:"text-[10px] text-gray-400 truncate",children:[d.dish_name,"  ",d.final_qty,d.uom]})]}),t.jsx("div",{children:t.jsx("input",{type:"number",value:x,onChange:y=>f(y.target.value),onBlur:b,placeholder:"",className:"w-full text-center text-xs border border-gray-200 rounded px-1 py-1 focus:outline-none focus:ring-1 focus:ring-blue-300 focus:border-blue-400"})}),t.jsx("div",{children:t.jsx("input",{type:"number",value:h,onChange:y=>v(y.target.value),onBlur:()=>j("ordered_qty",h,d.ordered_qty),placeholder:"",className:"w-full text-center text-xs border border-gray-200 rounded px-1 py-1 focus:outline-none focus:ring-1 focus:ring-blue-300 focus:border-blue-400"})}),t.jsx("div",{children:t.jsx("input",{type:"number",value:p,onChange:y=>g(y.target.value),onBlur:()=>j("received_qty",p,d.received_qty),placeholder:"",className:"w-full text-center text-xs border border-gray-200 rounded px-1 py-1 focus:outline-none focus:ring-1 focus:ring-blue-300 focus:border-blue-400"})})]})}function Jd(l){const i=l.getFullYear(),o=String(l.getMonth()+1).padStart(2,"0"),d=String(l.getDate()).padStart(2,"0");return`${i}-${o}-${d}`}function Dd(){return Jd(new Date)}function Md(l){const i=new Date(l+"T00:00:00"),o=i.getDay(),d=i.getDate()-o+(o===0?-6:1);return i.setDate(d),Jd(i)}function i2(l){const i=new Date(l+"T00:00:00"),o=new Date(l+"T00:00:00");o.setDate(o.getDate()+6);const d={day:"numeric",month:"short"};return`${i.toLocaleDateString("en-GB",d)}  ${o.toLocaleDateString("en-GB",d)}, ${o.getFullYear()}`}function jf(l){return l===Md(Dd())}function c2(){Ie();const{campId:l}=ya(),[i,o]=u.useState(()=>Md(Dd())),[d,x]=u.useState([]),[f,h]=u.useState(!0),[v,p]=u.useState("");u.useEffect(()=>{g()},[i,l]);async function g(){h(!0),p("");try{const z=await We.weeklyIngredients(i);x(z.ingredients||[])}catch(z){p(z.message)}finally{h(!1)}}function j(z){o(S=>{const O=new Date(S+"T00:00:00");return O.setDate(O.getDate()+z*7),Jd(O)})}async function b(z,S,O){const C=O===""?null:parseFloat(O);try{await We.updateWeeklyGrocery(i,z,{[S]:C}),x(w=>w.map(k=>k.item_id===z?{...k,[S]:C}:k))}catch(w){p(w.message)}}async function y(z,S){const O=S===""?0:parseFloat(S);try{await We.updateStock(z,O),x(C=>C.map(w=>w.item_id===z?{...w,stock_qty:O}:w))}catch(C){p(C.message)}}return t.jsxs("div",{className:"pb-8",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("div",{children:[t.jsxs("h1",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[t.jsx(ks,{size:22,className:"text-purple-600"}),"Weekly Groceries"]}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Common ingredients for the week"})]})}),t.jsxs("div",{className:"flex items-center justify-between bg-white rounded-xl border border-gray-100 px-4 py-3 mb-3",children:[t.jsx("button",{onClick:()=>j(-1),className:"p-1.5 rounded-lg hover:bg-gray-100 active:bg-gray-200",children:t.jsx(Oa,{size:20,className:"text-gray-600"})}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm font-semibold text-gray-900",children:i2(i)}),jf(i)&&t.jsx("span",{className:"text-[10px] text-green-600 font-medium",children:"This Week"}),!jf(i)&&t.jsx("button",{onClick:()=>o(Md(Dd())),className:"text-[10px] text-purple-600 font-medium",children:"Go to This Week"})]}),t.jsx("button",{onClick:()=>j(1),className:"p-1.5 rounded-lg hover:bg-gray-100 active:bg-gray-200",children:t.jsx(ot,{size:20,className:"text-gray-600"})})]}),v&&t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl px-4 py-3 mb-3 flex items-center gap-2",children:[t.jsx(jt,{size:16,className:"text-red-500 shrink-0"}),t.jsx("p",{className:"text-sm text-red-700 flex-1",children:v}),t.jsx("button",{onClick:()=>p(""),children:t.jsx(Te,{size:16,className:"text-red-400"})})]}),f&&t.jsx(dt,{message:"Loading weekly groceries..."}),!f&&t.jsxs("div",{className:"bg-white rounded-xl border border-gray-100",children:[t.jsx(o2,{weekStart:i,onAdded:g,onError:p}),d.length>0&&t.jsxs("div",{className:"grid grid-cols-[1fr_64px_64px_64px] gap-1 px-3 py-2 bg-gray-50 border-y border-gray-100 text-[10px] font-semibold text-gray-500 uppercase tracking-wider",children:[t.jsx("span",{children:"Item"}),t.jsx("span",{className:"text-center",children:"Stock"}),t.jsx("span",{className:"text-center",children:"Order"}),t.jsx("span",{className:"text-center",children:"Recv"})]}),d.map(z=>t.jsx(d2,{item:z,onUpdate:b,onUpdateStock:y},z.item_id)),d.length===0&&t.jsxs("div",{className:"p-6 text-center",children:[t.jsx(ks,{size:32,className:"text-gray-300 mx-auto mb-2"}),t.jsx("p",{className:"text-sm text-gray-500",children:"No weekly groceries projected"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Items will appear here from menu plans, or add manually above"})]})]})]})}function o2({weekStart:l,onAdded:i,onError:o}){const[d,x]=u.useState(!1),[f,h]=u.useState(""),[v,p]=u.useState([]),[g,j]=u.useState(!1),[b,y]=u.useState(null),[z,S]=u.useState(""),[O,C]=u.useState(!1),w=u.useRef(null),k=u.useRef(null);u.useEffect(()=>{if(!f.trim()||f.trim().length<2){p([]);return}return clearTimeout(k.current),k.current=setTimeout(async()=>{j(!0);try{const L=await We.searchItems(f.trim());p(L.items||[])}catch{p([])}finally{j(!1)}},300),()=>clearTimeout(k.current)},[f]);function M(L){y(L),h(L.name),p([])}async function $(){if(!(!b||!z)){C(!0);try{await We.addWeeklyGrocery(l,b.id,parseFloat(z)),y(null),h(""),S(""),p([]),i()}catch(L){o(L.message)}finally{C(!1)}}}return d?t.jsxs("div",{className:"border-b border-gray-100 px-3 py-3 bg-purple-50/30",children:[t.jsxs("div",{className:"relative mb-2",children:[t.jsx(Vt,{size:14,className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{ref:w,type:"text",value:f,onChange:L=>{h(L.target.value),y(null)},placeholder:"Search item...",className:"w-full pl-8 pr-8 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-200 focus:border-purple-400"}),t.jsx("button",{onClick:()=>{x(!1),h(""),y(null),p([])},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t.jsx(Te,{size:14})}),v.length>0&&!b&&t.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto z-50",children:v.map(L=>t.jsxs("button",{onClick:()=>M(L),className:"w-full text-left px-3 py-2.5 text-sm hover:bg-purple-50 border-b border-gray-50 last:border-0",children:[t.jsx("span",{className:"font-medium text-gray-900",children:L.name}),t.jsx("span",{className:"text-xs text-gray-400 ml-2",children:L.uom}),L.stock_qty!=null&&t.jsxs("span",{className:"text-xs text-gray-400 ml-1",children:[" Stock: ",L.stock_qty]})]},L.id))}),g&&t.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg px-3 py-2 text-xs text-gray-400 flex items-center gap-2",children:[t.jsx(qe,{size:12,className:"animate-spin"})," Searching..."]})]}),b&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"number",value:z,onChange:L=>S(L.target.value),placeholder:"Qty",className:"w-20 border border-gray-200 rounded-lg px-2 py-1.5 text-sm focus:outline-none focus:ring-2 focus:ring-purple-200"}),t.jsx("span",{className:"text-xs text-gray-500",children:b.uom||"kg"}),t.jsxs("button",{onClick:$,disabled:!z||O,className:"bg-purple-500 text-white px-3 py-1.5 rounded-lg text-sm font-medium disabled:opacity-40 flex items-center gap-1",children:[O?t.jsx(qe,{size:14,className:"animate-spin"}):t.jsx(Yt,{size:14}),"Add"]})]})]}):t.jsxs("button",{onClick:()=>{x(!0),setTimeout(()=>w.current?.focus(),100)},className:"w-full flex items-center gap-2 px-3 py-3 text-sm text-gray-400 hover:text-purple-600 hover:bg-purple-50/50 transition border-b border-gray-100",children:[t.jsx(Ve,{size:16}),t.jsx("span",{children:"Add item..."})]})}function d2({item:l,onUpdate:i,onUpdateStock:o}){const[d,x]=u.useState(l.stock_qty!=null?String(l.stock_qty):""),[f,h]=u.useState(l.ordered_qty??""),[v,p]=u.useState(l.received_qty??"");u.useEffect(()=>{x(l.stock_qty!=null?String(l.stock_qty):""),h(l.ordered_qty??""),p(l.received_qty??"")},[l.stock_qty,l.ordered_qty,l.received_qty]);function g(b,y,z){(y===""?null:parseFloat(y))!==(z??null)&&i(l.item_id,b,y)}function j(){const b=d===""?null:parseFloat(d),y=l.stock_qty!=null?l.stock_qty:null;b!==y&&o(l.item_id,d)}return t.jsxs("div",{className:"grid grid-cols-[1fr_64px_64px_64px] gap-1 px-3 py-2.5 border-b border-gray-50 items-center",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:l.item_name}),t.jsxs("p",{className:"text-[10px] text-gray-400 truncate",children:["Projected: ",l.total_qty,l.uom,l.is_manual?"  manual":""]})]}),t.jsx("div",{children:t.jsx("input",{type:"number",value:d,onChange:b=>x(b.target.value),onBlur:j,placeholder:"",className:"w-full text-center text-xs border border-gray-200 rounded px-1 py-1 focus:outline-none focus:ring-1 focus:ring-purple-300 focus:border-purple-400"})}),t.jsx("div",{children:t.jsx("input",{type:"number",value:f,onChange:b=>h(b.target.value),onBlur:()=>g("ordered_qty",f,l.ordered_qty),placeholder:"",className:"w-full text-center text-xs border border-gray-200 rounded px-1 py-1 focus:outline-none focus:ring-1 focus:ring-purple-300 focus:border-purple-400"})}),t.jsx("div",{children:t.jsx("input",{type:"number",value:v,onChange:b=>p(b.target.value),onBlur:()=>g("received_qty",v,l.received_qty),placeholder:"",className:"w-full text-center text-xs border border-gray-200 rounded px-1 py-1 focus:outline-none focus:ring-1 focus:ring-purple-300 focus:border-purple-400"})})]})}const Nf={stores:{accent:"#3b82f6",bg:"rgba(59, 130, 246, 0.12)"},kitchen:{accent:"#10b981",bg:"rgba(16, 185, 129, 0.12)"},housekeeping:{accent:"#8b5cf6",bg:"rgba(139, 92, 246, 0.12)"},fuel:{accent:"#f59e0b",bg:"rgba(245, 158, 11, 0.12)"},admin:{accent:"#64748b",bg:"rgba(100, 116, 139, 0.12)"},ho:{accent:"#06b6d4",bg:"rgba(6, 182, 212, 0.12)"}},za=["chef"],u2=[{id:"stores",label:"Stores",items:[{path:"/app",icon:Xi,label:"Dashboard",end:!0,access:"all",exclude:za},{path:"/app/stock",icon:Ia,label:"Stock Levels",access:"all",exclude:za},{path:"/app/items",icon:pa,label:"Items Catalog",access:"all",exclude:za},{path:"/app/issue",icon:zs,label:"Issue Goods",access:"all",exclude:za},{path:"/app/receive",icon:Es,label:"Receive Goods",access:"all",exclude:za},{path:"/app/orders",icon:_t,label:"Orders",access:"all",exclude:za},{path:"/app/dispatch",icon:mr,label:"Dispatch",access:"manager"},{path:"/app/daily",icon:ks,label:"Daily Overview",access:"all",exclude:za},{path:"/app/alerts",icon:ur,label:"Alerts",access:"all",exclude:za}]},{id:"kitchen",label:"Kitchen",items:[{path:"/app/menu-plan",icon:aa,label:"Menu Plan",roles:["chef","camp_manager","admin","director"]},{path:"/app/daily-groceries",icon:sn,label:"Daily Groceries",roles:["chef","camp_manager","admin","director"]},{path:"/app/weekly-groceries",icon:ks,label:"Weekly Groceries",roles:["chef","camp_manager","admin","director"]},{path:"/app/recipes",icon:al,label:"Recipes",access:"all"}]},{id:"stores",label:"Bar & POS",items:[{path:"/app/pos",icon:fa,label:"Point of Sale",access:"all",exclude:za},{path:"/app/bar-menu",icon:In,label:"Bar Menu",access:"all",exclude:za}]},{id:"admin",label:"Admin",items:[{path:"/app/reports",icon:Zi,label:"Reports",access:"manager"},{path:"/app/users",icon:Sa,label:"Users",roles:["admin","director","stores_manager"]},{path:"/app/settings",icon:dh,label:"Settings",access:"manager"}]}];function m2(l,i){return l.exclude&&l.exclude.includes(i)?!1:l.roles?l.roles.includes(i):l.access==="all"?!0:l.access==="manager"?ln(i):!0}function x2(){const l=Ie(),i=Qt(),[o,d]=u.useState(()=>localStorage.getItem("kcl_sidebar_collapsed")==="true");u.useEffect(()=>{localStorage.setItem("kcl_sidebar_collapsed",o),window.dispatchEvent(new CustomEvent("sidebar-toggle",{detail:{collapsed:o}}))},[o]);function x(){localStorage.removeItem("kcl_token"),localStorage.removeItem("kcl_stores"),window.location.hash="#/login",window.location.reload()}const f=u2.map(h=>({...h,items:h.items.filter(v=>m2(v,l?.role))})).filter(h=>h.items.length>0);return t.jsxs("aside",{className:`hidden lg:flex lg:flex-col lg:fixed lg:inset-y-0 transition-all duration-200 ease-out ${o?"lg:w-[68px]":"lg:w-[260px]"}`,style:{backgroundColor:"var(--sidebar-bg)",zIndex:"var(--z-sidebar)"},children:[t.jsxs("div",{className:"flex items-center gap-3 px-4 h-[60px] shrink-0",style:{borderBottom:"1px solid var(--sidebar-border)"},children:[t.jsx("div",{className:"w-9 h-9 bg-emerald-500 rounded-lg flex items-center justify-center shrink-0",children:t.jsx("span",{className:"text-white font-bold text-sm",children:"KC"})}),!o&&t.jsxs("div",{className:"min-w-0 overflow-hidden",children:[t.jsx("h1",{className:"font-semibold text-sm text-white truncate",children:"KCL Stores"}),t.jsx("p",{className:"text-[11px] truncate",style:{color:"var(--sidebar-text)"},children:"Karibu Camps"})]})]}),t.jsx("nav",{className:"flex-1 overflow-y-auto py-3 scrollbar-thin",children:f.map((h,v)=>{const p=Nf[h.id]||Nf.stores;return t.jsxs("div",{className:"mb-1",children:[!o&&t.jsx("div",{className:"px-4 py-1.5 text-[10px] font-semibold uppercase tracking-wider",style:{color:"var(--sidebar-section)"},children:h.label}),o&&v>0&&t.jsx("div",{className:"mx-3 my-1.5",style:{borderTop:"1px solid var(--sidebar-border)"}}),t.jsx("div",{className:"px-2 space-y-0.5",children:h.items.map(g=>{const j=g.end?i.pathname===g.path||i.pathname===g.path+"/":i.pathname.startsWith(g.path)&&g.path!=="/app";return t.jsxs(Hi,{to:g.path,end:g.end,title:o?g.label:void 0,className:`group flex items-center gap-3 rounded-lg text-[13px] font-medium transition-all duration-150 ${o?"justify-center px-0 py-2.5":"px-3 py-2"}`,style:{color:j?p.accent:"var(--sidebar-text)",backgroundColor:j?p.bg:"transparent",borderLeft:j&&!o?`3px solid ${p.accent}`:"3px solid transparent"},onMouseEnter:b=>{j||(b.currentTarget.style.backgroundColor="var(--sidebar-hover)",b.currentTarget.style.color="var(--sidebar-text-active)")},onMouseLeave:b=>{j||(b.currentTarget.style.backgroundColor="transparent",b.currentTarget.style.color="var(--sidebar-text)")},children:[t.jsx(g.icon,{size:o?20:18,className:"shrink-0"}),!o&&t.jsx("span",{className:"truncate",children:g.label})]},g.path)})})]},`${h.id}-${v}`)})}),t.jsxs("div",{className:"shrink-0",style:{borderTop:"1px solid var(--sidebar-border)"},children:[t.jsx("button",{onClick:()=>d(h=>!h),className:"mx-2 mt-2 mb-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-xs font-medium transition-colors compact-btn",style:{color:"var(--sidebar-text)",backgroundColor:"transparent"},onMouseEnter:h=>{h.currentTarget.style.backgroundColor="var(--sidebar-hover)"},onMouseLeave:h=>{h.currentTarget.style.backgroundColor="transparent"},children:o?t.jsx(ot,{size:16}):t.jsxs(t.Fragment,{children:[t.jsx(Oa,{size:16}),t.jsx("span",{children:"Collapse"})]})}),t.jsxs("div",{className:"px-3 py-2",children:[t.jsxs("div",{className:`flex items-center gap-3 ${o?"justify-center":""} mb-2`,children:[t.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center shrink-0 text-xs font-semibold",style:{backgroundColor:"rgba(16, 185, 129, 0.2)",color:"#6ee7b7"},children:l?.name?.charAt(0)||"?"}),!o&&t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-white truncate",children:l?.name}),t.jsx("p",{className:"text-[11px] truncate",style:{color:"var(--sidebar-text)"},children:l?.camp_name||"Head Office"})]})]}),t.jsxs("button",{onClick:x,title:o?"Sign Out":void 0,className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-xs font-medium transition-colors compact-btn ${o?"justify-center":""}`,style:{color:"#f87171"},onMouseEnter:h=>{h.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.1)"},onMouseLeave:h=>{h.currentTarget.style.backgroundColor="transparent"},children:[t.jsx(Kd,{size:16}),!o&&t.jsx("span",{children:"Sign Out"})]})]})]})]})}const Ea=["chef"],f2=[{path:"/app",icon:Xi,label:"Home",end:!0},{path:"/app/orders",icon:_t,label:"Orders"},{path:"/app/stock",icon:Ia,label:"Stock"},{path:"/app/pos",icon:fa,label:"POS"}],h2=[{path:"/app/menu-plan",icon:aa,label:"Menu",end:!0},{path:"/app/daily-groceries",icon:sn,label:"Daily"},{path:"/app/weekly-groceries",icon:ks,label:"Weekly"},{path:"/app/recipes",icon:al,label:"Recipes"}],p2=[{label:"Stores",color:"#3b82f6",items:[{path:"/app",icon:Xi,label:"Dashboard",end:!0,access:"all",exclude:Ea},{path:"/app/stock",icon:Ia,label:"Stock",access:"all",exclude:Ea},{path:"/app/items",icon:pa,label:"Items",access:"all",exclude:Ea},{path:"/app/issue",icon:zs,label:"Issue",access:"all",exclude:Ea},{path:"/app/receive",icon:Es,label:"Receive",access:"all",exclude:Ea},{path:"/app/orders",icon:_t,label:"Orders",access:"all",exclude:Ea},{path:"/app/dispatch",icon:mr,label:"Dispatch",access:"manager"},{path:"/app/daily",icon:ks,label:"Daily View",access:"all",exclude:Ea},{path:"/app/alerts",icon:ur,label:"Alerts",access:"all",exclude:Ea}]},{label:"Kitchen",color:"#10b981",items:[{path:"/app/menu-plan",icon:aa,label:"Menu Plan",roles:["chef","camp_manager","admin","director"]},{path:"/app/daily-groceries",icon:sn,label:"Daily Groc.",roles:["chef","camp_manager","admin","director"]},{path:"/app/weekly-groceries",icon:ks,label:"Weekly Groc.",roles:["chef","camp_manager","admin","director"]},{path:"/app/recipes",icon:al,label:"Recipes",access:"all"}]},{label:"Bar & POS",color:"#3b82f6",items:[{path:"/app/pos",icon:fa,label:"POS",access:"all",exclude:Ea},{path:"/app/bar-menu",icon:In,label:"Bar Menu",access:"all",exclude:Ea}]},{label:"Admin",color:"#64748b",items:[{path:"/app/reports",icon:Zi,label:"Reports",access:"manager"},{path:"/app/users",icon:Sa,label:"Users",roles:["admin","director","stores_manager"]},{path:"/app/settings",icon:dh,label:"Settings",access:"manager"}]}];function g2(l,i){return l.exclude&&l.exclude.includes(i)?!1:l.roles?l.roles.includes(i):l.access==="all"?!0:l.access==="manager"?ln(i):!0}function y2(){const[l,i]=u.useState(!1),[o,d]=u.useState(!1),x=Ie(),f=Qt(),h=u.useRef(null),v=x?.role==="chef"?h2:f2,g=!v.map(O=>O.path).some(O=>O==="/app"?f.pathname==="/app"||f.pathname==="/app/":f.pathname.startsWith(O));u.useEffect(()=>{if(l)return As(),()=>Ds()},[l]),u.useEffect(()=>()=>{h.current&&clearTimeout(h.current)},[]);function j(){o||(i(!0),d(!1))}function b(){!l||o||(d(!0),h.current=setTimeout(()=>{i(!1),d(!1)},200))}function y(){l?b():j()}function z(){localStorage.removeItem("kcl_token"),localStorage.removeItem("kcl_stores"),window.location.hash="#/login",window.location.reload()}const S=p2.map(O=>({...O,items:O.items.filter(C=>g2(C,x?.role))})).filter(O=>O.items.length>0);return t.jsxs(t.Fragment,{children:[t.jsx("nav",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white",style:{borderTop:"1px solid var(--border-default)",zIndex:"var(--z-mobilenav)"},children:t.jsxs("div",{className:"flex justify-around items-center h-16 px-1 safe-area-pb",children:[v.map(O=>t.jsxs(Hi,{to:O.path,end:O.end,onClick:b,className:({isActive:C})=>`flex flex-col items-center justify-center gap-0.5 px-2 py-1 rounded-lg min-w-[52px] transition-colors ${C&&!l?"text-emerald-600":"text-gray-400"}`,children:[t.jsx(O.icon,{size:22}),t.jsx("span",{className:"text-[10px] font-medium",children:O.label})]},O.path)),t.jsxs("button",{onClick:y,className:`flex flex-col items-center justify-center gap-0.5 px-2 py-1 rounded-lg min-w-[52px] transition-colors ${l||g?"text-emerald-600":"text-gray-400"}`,children:[t.jsx(rh,{size:22}),t.jsx("span",{className:"text-[10px] font-medium",children:"More"})]})]})}),l&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`lg:hidden fixed inset-0 ${o?"animate-backdrop-out":"animate-backdrop-in"}`,style:{backgroundColor:"var(--surface-overlay)",zIndex:"var(--z-drawer)"},onClick:b}),t.jsxs("div",{className:`lg:hidden fixed bottom-0 left-0 right-0 bg-white rounded-t-2xl overflow-hidden ${o?"animate-slide-down":"animate-slide-up"}`,style:{maxHeight:"85vh",boxShadow:"var(--shadow-xl)",zIndex:"calc(var(--z-drawer) + 1)"},children:[t.jsxs("div",{className:"flex items-center justify-between px-5 pt-3 pb-2",style:{borderBottom:"1px solid var(--border-light)"},children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-9 h-9 rounded-full flex items-center justify-center text-xs font-semibold",style:{backgroundColor:"var(--kcl-primary-light)",color:"var(--kcl-primary-dark)"},children:x?.name?.charAt(0)||"?"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-semibold text-gray-900",children:x?.name}),t.jsxs("p",{className:"text-[11px] text-gray-500",children:[x?.camp_name||"Head Office","  ",x?.role?.replace(/_/g," ")]})]})]}),t.jsx("button",{onClick:b,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg compact-btn",style:{minHeight:"auto"},children:t.jsx(Te,{size:20})})]}),t.jsx("div",{className:"overflow-y-auto scroll-touch",style:{maxHeight:"65vh"},children:S.map((O,C)=>t.jsxs("div",{className:"px-4 py-3",style:{borderBottom:C<S.length-1?"1px solid var(--border-light)":"none"},children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:O.color}}),t.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-wider text-gray-400",children:O.label})]}),t.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:O.items.map(w=>{const k=w.end?f.pathname===w.path:f.pathname.startsWith(w.path)&&w.path!=="/app";return t.jsxs(Hi,{to:w.path,onClick:b,className:`flex flex-col items-center gap-1 px-1.5 py-2.5 rounded-xl transition-colors ${k?"text-emerald-700":"text-gray-500"}`,style:{backgroundColor:k?"var(--kcl-primary-light)":"transparent"},children:[t.jsx(w.icon,{size:20}),t.jsx("span",{className:"text-[10px] font-medium text-center leading-tight",children:w.label})]},w.path)})})]},C))}),t.jsx("div",{className:"px-4 py-3 pb-6",style:{borderTop:"1px solid var(--border-light)"},children:t.jsxs("button",{onClick:z,className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 text-sm text-red-500 hover:bg-red-50 rounded-xl transition",children:[t.jsx(Kd,{size:16}),"Sign Out"]})})]})]})]})}function ph(){const[l,i]=u.useState(navigator.onLine),[o,d]=u.useState(0),[x,f]=u.useState("idle"),h=u.useCallback(async()=>{const v=await Kf();d(v)},[]);return u.useEffect(()=>{const v=()=>{i(!0),zd()},p=()=>i(!1),g=()=>f("syncing"),j=S=>{f(S.detail.synced>0?"done":"idle"),h(),S.detail.synced>0&&setTimeout(()=>f("idle"),3e3)},b=()=>f("error"),y=()=>h();window.addEventListener("online",v),window.addEventListener("offline",p),window.addEventListener("sync:start",g),window.addEventListener("sync:complete",j),window.addEventListener("sync:error",b),window.addEventListener("sync:item-synced",y),h();const z=setInterval(h,5e3);return()=>{window.removeEventListener("online",v),window.removeEventListener("offline",p),window.removeEventListener("sync:start",g),window.removeEventListener("sync:complete",j),window.removeEventListener("sync:error",b),window.removeEventListener("sync:item-synced",y),clearInterval(z)}},[h]),{isOnline:l,pendingSyncCount:o,syncState:x}}function b2(){const{isOnline:l,pendingSyncCount:i,syncState:o}=ph();return l?o==="syncing"?t.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-amber-50 rounded-lg",title:"Syncing...",children:[t.jsx(ch,{size:16,className:"text-amber-500 animate-spin"}),t.jsx("span",{className:"text-xs font-medium text-amber-600 hidden sm:inline",children:"Syncing"})]}):i>0?t.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-amber-50 rounded-lg",title:`${i} pending`,children:[t.jsxs("div",{className:"relative",children:[t.jsx(xf,{size:16,className:"text-amber-500"}),t.jsx("span",{className:"absolute -top-1 -right-1.5 w-3.5 h-3.5 bg-amber-500 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-[9px] font-bold text-white",children:i>9?"9+":i})})]}),t.jsxs("span",{className:"text-xs font-medium text-amber-600 hidden sm:inline",children:[i," pending"]})]}):o==="done"?t.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-green-50 rounded-lg",title:"All synced",children:[t.jsx(xf,{size:16,className:"text-green-500"}),t.jsx("span",{className:"text-xs font-medium text-green-600 hidden sm:inline",children:"Synced"})]}):null:t.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-red-50 rounded-lg",title:"You're offline",children:[t.jsx(mh,{size:16,className:"text-red-500"}),t.jsx("span",{className:"text-xs font-medium text-red-600 hidden sm:inline",children:"Offline"})]})}const Mi={"/app":["Dashboard"],"/app/stock":["Stores","Stock Levels"],"/app/items":["Stores","Items Catalog"],"/app/issue":["Stores","Issue Goods"],"/app/issue/new":["Stores","Issue Goods","New"],"/app/receive":["Stores","Receive Goods"],"/app/orders":["Stores","Orders"],"/app/orders/new":["Stores","Orders","New"],"/app/dispatch":["Stores","Dispatch"],"/app/daily":["Stores","Daily Overview"],"/app/alerts":["Stores","Alerts"],"/app/menu-plan":["Kitchen","Menu Plan"],"/app/daily-groceries":["Kitchen","Daily Groceries"],"/app/weekly-groceries":["Kitchen","Weekly Groceries"],"/app/recipes":["Kitchen","Recipes"],"/app/pos":["Bar & POS","Point of Sale"],"/app/bar-menu":["Bar & POS","Bar Menu"],"/app/reports":["Admin","Reports"],"/app/users":["Admin","Users"],"/app/settings":["Admin","Settings"]};function v2(l){if(Mi[l])return Mi[l];const i=l.split("/");for(;i.length>2;){i.pop();const o=i.join("/");if(Mi[o])return[...Mi[o],"Detail"]}return["Dashboard"]}function j2({onMobileMenuToggle:l}){const i=Ie(),{state:o,dispatch:d}=cn(),x=Qt(),[f,h]=u.useState(!1),v=u.useRef(null),p=o.camps.find(b=>b.id===o.selectedCampId),g=v2(x.pathname);u.useEffect(()=>{function b(y){v.current&&!v.current.contains(y.target)&&h(!1)}if(f)return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[f]);function j(b){d({type:"SELECT_CAMP",payload:b}),h(!1)}return t.jsxs("header",{className:"bg-white h-[56px] flex items-center justify-between px-4 lg:px-6 sticky top-0",style:{borderBottom:"1px solid var(--border-default)",zIndex:"var(--z-topbar)"},children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:l,className:"lg:hidden p-1.5 -ml-1.5 rounded-lg text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition compact-btn",children:t.jsx(rh,{size:22})}),t.jsx("div",{className:"lg:hidden w-8 h-8 bg-emerald-500 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-white font-bold text-xs",children:"KC"})}),t.jsx("nav",{className:"hidden lg:flex items-center gap-1 text-sm","aria-label":"Breadcrumb",children:g.map((b,y)=>t.jsxs("span",{className:"flex items-center gap-1",children:[y>0&&t.jsx(ot,{size:14,className:"text-gray-300"}),t.jsx("span",{className:y===g.length-1?"font-medium text-gray-900":"text-gray-400",children:b})]},y))})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[ln(i?.role)&&o.camps.length>0&&t.jsxs("div",{className:"relative",ref:v,children:[t.jsxs("button",{onClick:()=>h(!f),"data-guide":"camp-selector",className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg transition text-sm font-medium border",style:{backgroundColor:f?"#f1f5f9":"white",borderColor:"var(--border-default)",color:"var(--text-primary)"},children:[t.jsx("span",{className:"max-w-[120px] truncate",children:p?p.code:"All Camps"}),t.jsx(vt,{size:14,className:"text-gray-400 shrink-0"})]}),f&&t.jsxs("div",{className:"absolute top-full right-0 mt-1.5 bg-white rounded-lg overflow-hidden min-w-[200px]",style:{border:"1px solid var(--border-default)",boxShadow:"var(--shadow-lg)",zIndex:"var(--z-dropdown)"},children:[t.jsx("button",{onClick:()=>j(null),className:`w-full text-left px-4 py-2.5 text-sm transition ${o.selectedCampId?"text-gray-700 hover:bg-gray-50":"bg-emerald-50 text-emerald-700 font-medium"}`,children:"All Camps"}),o.camps.map(b=>t.jsxs("button",{onClick:()=>j(b.id),className:`w-full text-left px-4 py-2.5 text-sm transition ${o.selectedCampId===b.id?"bg-emerald-50 text-emerald-700 font-medium":"text-gray-700 hover:bg-gray-50"}`,children:[t.jsx("span",{className:"font-medium",children:b.code}),t.jsxs("span",{className:"text-gray-400 ml-1.5",children:[" ",b.name]})]},b.id))]})]}),!ln(i?.role)&&t.jsx("span",{className:"hidden sm:inline text-sm font-medium text-gray-500 px-2",children:i?.camp_name||"KCL Stores"}),t.jsx(b2,{}),t.jsxs("button",{"data-guide":"notifications-btn",className:"relative p-2 rounded-lg transition compact-btn",style:{color:"var(--text-tertiary)"},onMouseEnter:b=>{b.currentTarget.style.backgroundColor="#f1f5f9"},onMouseLeave:b=>{b.currentTarget.style.backgroundColor="transparent"},children:[t.jsx(ur,{size:20}),t.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full"})]}),t.jsxs("div",{className:"hidden lg:flex items-center gap-2 pl-2 ml-1",style:{borderLeft:"1px solid var(--border-light)"},children:[t.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-xs font-semibold",style:{backgroundColor:"var(--kcl-primary-light)",color:"var(--kcl-primary-dark)"},children:i?.name?.charAt(0)||"?"}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate leading-tight",children:i?.name}),t.jsx("p",{className:"text-[11px] text-gray-400 truncate leading-tight",children:i?.role?.replace(/_/g," ")})]})]})]})]})}function N2(){const{isOnline:l,pendingSyncCount:i,syncState:o}=ph();return o==="done"?t.jsxs("div",{className:"bg-green-50 border-b border-green-200 px-4 py-2 flex items-center justify-center gap-2",children:[t.jsx(Yt,{size:16,className:"text-green-600"}),t.jsx("span",{className:"text-sm text-green-700 font-medium",children:"All changes synced"})]}):l?o==="syncing"?t.jsxs("div",{className:"bg-blue-50 border-b border-blue-200 px-4 py-2 flex items-center justify-center gap-2",children:[t.jsx(ch,{size:16,className:"text-blue-600 animate-spin"}),t.jsxs("span",{className:"text-sm text-blue-700 font-medium",children:["Syncing ",i," item",i!==1?"s":"","..."]})]}):null:t.jsxs("div",{className:"bg-amber-50 border-b border-amber-200 px-4 py-2 flex items-center justify-center gap-2",children:[t.jsx(mh,{size:16,className:"text-amber-600"}),t.jsxs("span",{className:"text-sm text-amber-700 font-medium",children:["You're offline  changes will sync when connected",i>0&&` (${i} pending)`]})]})}const S2=u.createContext(null),_2={success:Zd,warning:jt,error:_v,info:Kv},w2={success:{bg:"#ecfdf5",border:"#a7f3d0",icon:"#059669",text:"#065f46"},warning:{bg:"#fffbeb",border:"#fde68a",icon:"#d97706",text:"#92400e"},error:{bg:"#fef2f2",border:"#fecaca",icon:"#dc2626",text:"#991b1b"},info:{bg:"#eff6ff",border:"#bfdbfe",icon:"#2563eb",text:"#1e40af"}};let k2=0;function C2({children:l}){const[i,o]=u.useState([]),d=u.useCallback((h,v="info",p=4e3)=>{const g=++k2;return o(j=>[...j,{id:g,message:h,type:v,exiting:!1}]),p>0&&setTimeout(()=>x(g),p),g},[]),x=u.useCallback(h=>{o(v=>v.map(p=>p.id===h?{...p,exiting:!0}:p)),setTimeout(()=>{o(v=>v.filter(p=>p.id!==h))},200)},[]),f=u.useMemo(()=>({success:(h,v)=>d(h,"success",v),warning:(h,v)=>d(h,"warning",v),error:(h,v)=>d(h,"error",v),info:(h,v)=>d(h,"info",v)}),[d]);return u.useEffect(()=>{window.__kcl_toast=f},[f]),t.jsxs(S2.Provider,{value:f,children:[l,t.jsx("div",{className:"fixed z-[100] pointer-events-none",style:{bottom:"80px",right:"16px",left:"16px",display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"8px"},children:i.map(h=>{const v=_2[h.type],p=w2[h.type];return t.jsxs("div",{className:`pointer-events-auto flex items-center gap-2.5 px-4 py-3 rounded-xl text-sm font-medium max-w-[360px] w-full sm:w-auto ${h.exiting?"animate-toast-out":"animate-toast-in"}`,style:{backgroundColor:p.bg,border:`1px solid ${p.border}`,color:p.text,boxShadow:"var(--shadow-lg)"},children:[t.jsx(v,{size:18,style:{color:p.icon},className:"shrink-0"}),t.jsx("span",{className:"flex-1",children:h.message}),t.jsx("button",{onClick:()=>x(h.id),className:"p-0.5 rounded opacity-60 hover:opacity-100 transition compact-btn",style:{minHeight:"auto"},children:t.jsx(Te,{size:14})})]},h.id)})})]})}const gh=u.createContext(null),Sf="karibu_guide_data";function Ui(){return typeof window>"u"?{x:200,y:400}:{x:window.innerWidth/2,y:window.innerHeight/2}}const z2={isPanelOpen:!1,activeGuide:null,currentStepIndex:0,isRunning:!1,targetRect:null,cursorPosition:Ui(),cursorVisible:!1,isReportFormOpen:!1,completedGuides:[],reports:[]};function E2(l,i){switch(i.type){case"OPEN_PANEL":return{...l,isPanelOpen:!0};case"CLOSE_PANEL":return{...l,isPanelOpen:!1};case"TOGGLE_PANEL":return{...l,isPanelOpen:!l.isPanelOpen};case"START_GUIDE":return{...l,activeGuide:i.payload,currentStepIndex:0,isRunning:!0,isPanelOpen:!1,cursorVisible:!1,targetRect:null,cursorPosition:Ui()};case"NEXT_STEP":{const o=l.currentStepIndex+1,d=l.activeGuide?.steps?.length||0;return o>=d?{...l,activeGuide:null,currentStepIndex:0,isRunning:!1,targetRect:null,cursorVisible:!1,cursorPosition:Ui(),completedGuides:l.activeGuide?[...new Set([...l.completedGuides,l.activeGuide.id])]:l.completedGuides}:{...l,currentStepIndex:o,cursorVisible:!1,targetRect:null}}case"PREV_STEP":return{...l,currentStepIndex:Math.max(0,l.currentStepIndex-1),cursorVisible:!1,targetRect:null};case"GO_TO_STEP":return{...l,currentStepIndex:i.payload,cursorVisible:!1,targetRect:null};case"SET_TARGET_RECT":return{...l,targetRect:i.payload};case"SET_CURSOR":return{...l,cursorPosition:i.payload,cursorVisible:!0};case"HIDE_CURSOR":return{...l,cursorVisible:!1};case"END_GUIDE":{const o=l.activeGuide&&l.currentStepIndex>=(l.activeGuide.steps?.length||0)-1;return{...l,activeGuide:null,currentStepIndex:0,isRunning:!1,targetRect:null,cursorVisible:!1,cursorPosition:Ui(),completedGuides:o&&l.activeGuide?[...new Set([...l.completedGuides,l.activeGuide.id])]:l.completedGuides}}case"OPEN_REPORT":return{...l,isReportFormOpen:!0};case"CLOSE_REPORT":return{...l,isReportFormOpen:!1};case"ADD_REPORT":return{...l,reports:[...l.reports,i.payload],isReportFormOpen:!1};case"LOAD_PERSISTED":return{...l,completedGuides:i.payload.completedGuides||[],reports:i.payload.reports||[]};default:return l}}function T2({children:l}){const[i,o]=u.useReducer(E2,z2);return u.useEffect(()=>{try{const d=localStorage.getItem(Sf);d&&o({type:"LOAD_PERSISTED",payload:JSON.parse(d)})}catch{}},[]),u.useEffect(()=>{try{localStorage.setItem(Sf,JSON.stringify({completedGuides:i.completedGuides,reports:i.reports}))}catch{}},[i.completedGuides,i.reports]),t.jsx(gh.Provider,{value:{state:i,dispatch:o},children:l})}function O2(){const l=u.useContext(gh);if(!l)throw new Error("useGuideContext must be used within GuideProvider");return l}function Fi(){const{state:l,dispatch:i}=O2(),o=Os(),d=Qt(),x=u.useCallback(()=>i({type:"OPEN_PANEL"}),[i]),f=u.useCallback(()=>i({type:"CLOSE_PANEL"}),[i]),h=u.useCallback(()=>i({type:"TOGGLE_PANEL"}),[i]),v=u.useCallback(te=>{i({type:"START_GUIDE",payload:te})},[i]),p=u.useCallback(()=>i({type:"NEXT_STEP"}),[i]),g=u.useCallback(()=>i({type:"PREV_STEP"}),[i]),j=u.useCallback(()=>i({type:"END_GUIDE"}),[i]),b=u.useCallback(te=>{i({type:"SET_TARGET_RECT",payload:te})},[i]),y=u.useCallback(te=>{i({type:"SET_CURSOR",payload:te})},[i]),z=u.useCallback(()=>i({type:"HIDE_CURSOR"}),[i]),S=u.useCallback(()=>i({type:"OPEN_REPORT"}),[i]),O=u.useCallback(()=>i({type:"CLOSE_REPORT"}),[i]),C=u.useCallback(te=>{i({type:"ADD_REPORT",payload:{...te,id:Date.now(),timestamp:new Date().toISOString(),page:d.pathname}})},[i,d]),w=u.useCallback(te=>{d.pathname!==te&&o(te)},[o,d]),k=l.activeGuide?.steps?.[l.currentStepIndex]||null,M=l.activeGuide?.steps?.length||0,$=l.currentStepIndex>=M-1,L=l.currentStepIndex===0;return{...l,currentStep:k,totalSteps:M,isLastStep:$,isFirstStep:L,openPanel:x,closePanel:f,togglePanel:h,startGuide:v,nextStep:p,prevStep:g,endGuide:j,setTargetRect:b,setCursor:y,hideCursor:z,openReport:S,closeReport:O,addReport:C,navigateToRoute:w}}function R2(){const{isRunning:l,isPanelOpen:i,togglePanel:o,endGuide:d}=Fi();return Ie()?.role==="chef"?null:l?t.jsx("button",{onClick:d,className:"fixed z-[9996] flex items-center justify-center w-12 h-12 rounded-full bg-red-500 hover:bg-red-600 text-white shadow-lg transition-all compact-btn",style:{bottom:88,right:20,minHeight:"auto"},title:"Exit guide",children:t.jsx(Te,{size:22})}):t.jsx("button",{onClick:o,className:"fixed z-[9996] flex items-center justify-center w-12 h-12 rounded-full text-white shadow-lg transition-all compact-btn",style:{bottom:88,right:20,minHeight:"auto",backgroundColor:i?"#15803d":"#16a34a",animation:i?"none":"guide-fab-pulse 3s ease-in-out infinite"},title:"Help & Guides",children:i?t.jsx(Te,{size:22}):t.jsx(sh,{size:22})})}const _f=768;function yh(){const[l,i]=u.useState(()=>typeof window<"u"?window.innerWidth<=_f:!1);return u.useEffect(()=>{const o=window.matchMedia(`(max-width: ${_f}px)`);function d(x){i(x.matches)}return o.addEventListener?o.addEventListener("change",d):o.addListener(d),i(o.matches),()=>{o.removeEventListener?o.removeEventListener("change",d):o.removeListener(d)}},[]),l}const A2=[{id:"app-overview",title:"App Overview Tour",description:"Get familiar with the KCL Stores dashboard and navigation",icon:"LayoutDashboard",category:"Navigation",keywords:["tour","overview","dashboard","start","begin","help","new","getting started"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-dashboard"]',title:"Dashboard",description:"This is your home page. It shows stock overview, pending orders, and quick stats for your camp.",placement:"right",route:"/app",advanceOn:"next-button"},{target:'[data-guide="nav-orders"]',title:"Orders",description:"Create purchase orders for your camp and track their approval status.",placement:"right",route:"/app",advanceOn:"next-button"},{target:'[data-guide="nav-stock"]',title:"Stock",description:"View current stock levels across all camps. Filter by category and see real-time balances.",placement:"right",route:"/app",advanceOn:"next-button"},{target:'[data-guide="nav-pos"]',title:"POS Terminal",description:"Point of Sale for issuing items directly. Browse categories, add to cart, and checkout.",placement:"right",route:"/app",advanceOn:"next-button"},{target:'[data-guide="nav-bar-menu"]',title:"Bar Menu",description:"The drinks menu with cocktails, beers, and spirits. Place bar orders with stock tracking.",placement:"right",route:"/app",advanceOn:"next-button"},{target:'[data-guide="nav-alerts"]',title:"Alerts",description:"Stock alerts show items running low, critical levels, and dead stock warnings.",placement:"right",route:"/app",advanceOn:"next-button"}]},{id:"navigate-features",title:"Navigate Between Features",description:"Quick tour of all main sections in the app",icon:"LayoutDashboard",category:"Navigation",keywords:["navigate","menu","sidebar","features","sections","where","find"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-items"]',title:"Inventory Items",description:"Browse all 1000+ inventory items with details, categories, and specifications.",placement:"right",route:"/app",advanceOn:"next-button"},{target:'[data-guide="nav-receive"]',title:"Receive Goods",description:"Confirm receipt of dispatched goods. Verify quantities against what was sent.",placement:"right",route:"/app",advanceOn:"next-button"},{target:'[data-guide="nav-issue"]',title:"Issue Vouchers",description:"Issue items to departments  kitchen, housekeeping, bar, maintenance, etc.",placement:"right",route:"/app",advanceOn:"next-button"},{target:'[data-guide="nav-recipes"]',title:"AI Recipes",description:"Get smart recipe suggestions based on ingredients currently in stock.",placement:"right",route:"/app",advanceOn:"next-button"}]}],D2=[{id:"create-new-order",title:"Create a New Order",description:"Learn how to create a purchase order from start to finish",icon:"ShoppingCart",category:"Orders",keywords:["order","purchase","buy","new order","create","request"],estimatedTime:"2 min",steps:[{target:'[data-guide="nav-orders"]',title:"Go to Orders",description:"Click on Orders in the sidebar to see all purchase orders.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="new-order-btn"]',title:"Start New Order",description:'Click "New Order" to begin creating a purchase order for your camp.',placement:"bottom",route:"/app/orders",advanceOn:"click"},{target:'[data-guide="order-search"]',title:"Search for Items",description:"Type the name of an item to search the inventory catalog. You can search by name or item code.",placement:"bottom",route:"/app/orders/new",advanceOn:"next-button"},{target:'[data-guide="order-cart"]',title:"Review Your Cart",description:"Items you add will appear here. Adjust quantities as needed before submitting.",placement:"top",route:"/app/orders/new",advanceOn:"next-button"},{target:'[data-guide="submit-order-btn"]',title:"Submit the Order",description:"When ready, click Submit to send your order for approval by the stores manager.",placement:"top",route:"/app/orders/new",advanceOn:"next-button"}]},{id:"approve-reject-order",title:"Approve or Reject an Order",description:"Review and approve/reject pending purchase orders",icon:"ShoppingCart",category:"Orders",keywords:["approve","reject","review","pending","order","authorization"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-orders"]',title:"Go to Orders",description:"Navigate to the Orders page to see all pending orders.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="status-tab-pending"]',title:"Filter Pending Orders",description:'Click "Pending" to see only orders waiting for your review.',placement:"bottom",route:"/app/orders",advanceOn:"next-button"},{target:'[data-guide="order-list-first"]',title:"Open an Order",description:"Click on any order to view its details, items, and quantities.",placement:"bottom",route:"/app/orders",advanceOn:"next-button"}]},{id:"view-order-history",title:"View Order History",description:"Filter and browse past orders by status and date",icon:"ShoppingCart",category:"Orders",keywords:["history","past","previous","view","order","filter","search"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-orders"]',title:"Go to Orders",description:"Navigate to the Orders page to see your order history.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="order-status-tabs"]',title:"Filter by Status",description:"Use these tabs to filter orders: All, Submitted, Pending, Approved, Received, etc.",placement:"bottom",route:"/app/orders",advanceOn:"next-button"},{target:'[data-guide="order-search-input"]',title:"Search Orders",description:"Search by order number or camp name to find a specific order quickly.",placement:"bottom",route:"/app/orders",advanceOn:"next-button"}]}],M2=[{id:"check-stock-levels",title:"Check Stock Levels",description:"View current stock balances across camps and categories",icon:"Boxes",category:"Stock & Items",keywords:["stock","balance","inventory","quantity","level","check","view","how much"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-stock"]',title:"Go to Stock",description:"Click Stock in the sidebar to view real-time stock levels.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="stock-camp-filter"]',title:"Select a Camp",description:"Choose a camp to see its specific stock. Managers can view any camp.",placement:"bottom",route:"/app/stock",advanceOn:"next-button"},{target:'[data-guide="stock-category-filter"]',title:"Filter by Category",description:"Filter by item category  Food, Beverages, Housekeeping, etc. Color badges show stock status.",placement:"bottom",route:"/app/stock",advanceOn:"next-button"}]},{id:"browse-inventory",title:"Browse Inventory Items",description:"Search and explore the full item catalog",icon:"Package",category:"Stock & Items",keywords:["items","catalog","browse","search","product","inventory","find"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-items"]',title:"Go to Items",description:"Click Items to browse the full inventory catalog  over 1000 items.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="items-search"]',title:"Search Items",description:"Search by item name or code. Results update as you type.",placement:"bottom",route:"/app/items",advanceOn:"next-button"},{target:'[data-guide="items-list-first"]',title:"View Item Details",description:"Click any item to see full details: unit of measure, category, pricing, and stock.",placement:"bottom",route:"/app/items",advanceOn:"next-button"}]},{id:"understanding-alerts",title:"Understanding Stock Alerts",description:"Learn to read and act on stock level warnings",icon:"Bell",category:"Stock & Items",keywords:["alert","warning","low","critical","out of stock","excess","dead"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-alerts"]',title:"Go to Alerts",description:"Click Alerts to see all stock level warnings across your camps.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="alerts-summary"]',title:"Alert Summary",description:"The summary shows counts: low stock (amber), critical (red), out of stock, and excess inventory.",placement:"bottom",route:"/app/alerts",advanceOn:"next-button"},{target:'[data-guide="alerts-tabs"]',title:"Filter Alert Types",description:"Switch between alert types to focus on what matters  low stock, dead stock, or excess items.",placement:"bottom",route:"/app/alerts",advanceOn:"next-button"}]}],L2=[{id:"make-pos-sale",title:"Make a POS Sale",description:"Use the Point of Sale to issue items quickly",icon:"Wine",category:"POS & Bar Menu",keywords:["pos","sale","sell","point of sale","checkout","issue","quick"],estimatedTime:"2 min",steps:[{target:'[data-guide="nav-pos"]',title:"Open POS",description:"Click POS in the sidebar to open the Point of Sale terminal.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="pos-categories"]',title:"Browse Categories",description:"Select a category to filter items  Food, Beverages, Housekeeping, etc.",placement:"bottom",route:"/app/pos",advanceOn:"next-button"},{target:'[data-guide="pos-items"]',title:"Add Items to Cart",description:"Tap any item to add it to your cart. Tap again to increase quantity.",placement:"bottom",route:"/app/pos",advanceOn:"next-button"},{target:'[data-guide="pos-cart"]',title:"Review Cart",description:"Check your items and quantities here. Adjust or remove items as needed.",placement:"top",route:"/app/pos",advanceOn:"next-button"},{target:'[data-guide="pos-checkout"]',title:"Checkout",description:"Click Checkout to complete the sale. This creates an issue voucher and deducts stock.",placement:"top",route:"/app/pos",advanceOn:"next-button"}]},{id:"place-bar-order",title:"Place a Bar Order",description:"Order drinks from the Karibu Camps bar menu",icon:"GlassWater",category:"POS & Bar Menu",keywords:["bar","drinks","cocktail","beer","menu","order","beverage","wine"],estimatedTime:"2 min",steps:[{target:'[data-guide="nav-bar-menu"]',title:"Open Bar Menu",description:"Click Bar Menu to see the full Karibu Camps drinks menu.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="bar-category-tabs"]',title:"Browse Categories",description:"Filter by drink type  Cocktails, Mocktails, Beers, Whisky, Gin, Vodka, and more.",placement:"bottom",route:"/app/bar-menu",advanceOn:"next-button"},{target:'[data-guide="bar-menu-items"]',title:"Select Drinks",description:"Each drink shows its stock status. Green means available, red means low or out. Click + to add.",placement:"bottom",route:"/app/bar-menu",advanceOn:"next-button"},{target:'[data-guide="bar-cart-btn"]',title:"View Cart & Order",description:"Click the cart button to review your drink selection and place the bar order.",placement:"top",route:"/app/bar-menu",advanceOn:"next-button"}]},{id:"bar-stock-alerts",title:"Check Bar Stock Alerts",description:"Monitor drink inventory and depletion warnings",icon:"GlassWater",category:"POS & Bar Menu",keywords:["bar","stock","alert","low","drinks","depletion","running out"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-bar-menu"]',title:"Open Bar Menu",description:"Go to the Bar Menu page to check drink stock levels.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="bar-alerts-tab"]',title:"Switch to Alerts",description:"Click the Alerts tab to see which drinks are running low or out of stock.",placement:"bottom",route:"/app/bar-menu",advanceOn:"next-button"},{target:'[data-guide="bar-alerts-summary"]',title:"Depletion Summary",description:"Summary cards show available, low, critical, and out-of-stock drink counts.",placement:"bottom",route:"/app/bar-menu",advanceOn:"next-button"}]}],q2=[{id:"track-dispatches",title:"View & Track Dispatches",description:"Monitor goods dispatched from stores to camps",icon:"Truck",category:"Dispatch & Receive",keywords:["dispatch","track","shipment","delivery","transit","sent"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-dispatch"]',title:"Go to Dispatch",description:"Click Dispatch to view all dispatch notes and their delivery status.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="dispatch-status-tabs"]',title:"Filter by Status",description:"Filter dispatches by status  Dispatched, In Transit, or Delivered.",placement:"bottom",route:"/app/dispatch",advanceOn:"next-button"},{target:'[data-guide="dispatch-list-first"]',title:"Open Dispatch Details",description:"Click on any dispatch to see item details, quantities, and delivery timeline.",placement:"bottom",route:"/app/dispatch",advanceOn:"next-button"}]},{id:"confirm-goods-received",title:"Confirm Goods Received",description:"Verify and confirm receipt of dispatched goods",icon:"PackageCheck",category:"Dispatch & Receive",keywords:["receive","confirm","goods","delivery","arrived","verify"],estimatedTime:"2 min",steps:[{target:'[data-guide="nav-receive"]',title:"Go to Receive",description:"Click Receive to see all goods receipt records.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="receive-status-tabs"]',title:"Filter Pending Receipts",description:'Click "Pending" to see deliveries waiting for your confirmation.',placement:"bottom",route:"/app/receive",advanceOn:"next-button"},{target:'[data-guide="receive-list-first"]',title:"Open Receipt",description:"Click a pending receipt to review items, verify quantities, and confirm.",placement:"bottom",route:"/app/receive",advanceOn:"next-button"}]},{id:"report-discrepancy",title:"Report a Discrepancy",description:"Flag when received quantities don't match the dispatch",icon:"PackageCheck",category:"Dispatch & Receive",keywords:["discrepancy","mismatch","wrong","quantity","shortage","damage","missing"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-receive"]',title:"Go to Receive",description:"Navigate to Receive to find the delivery with issues.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="receive-list-first"]',title:"Open the Receipt",description:"Click on the receipt you need to flag. Look for pending ones.",placement:"bottom",route:"/app/receive",advanceOn:"next-button"}]},{id:"create-issue-voucher",title:"Create an Issue Voucher",description:"Issue items to departments like kitchen, housekeeping, or bar",icon:"FileOutput",category:"Issue Vouchers",keywords:["issue","voucher","kitchen","housekeeping","bar","department","give","distribute"],estimatedTime:"2 min",steps:[{target:'[data-guide="nav-issue"]',title:"Go to Issue",description:"Click Issue in the sidebar to see all issue vouchers.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="new-issue-btn"]',title:"Start New Issue",description:'Click "New Issue" to create an issue voucher.',placement:"bottom",route:"/app/issue",advanceOn:"click"},{target:'[data-guide="issue-type-select"]',title:"Select Department",description:"Choose who you're issuing to  Kitchen, Housekeeping, Bar, Maintenance, etc.",placement:"bottom",route:"/app/issue/new",advanceOn:"next-button"},{target:'[data-guide="issue-item-search"]',title:"Search & Add Items",description:"Search for items, set quantities, and add them to the voucher.",placement:"bottom",route:"/app/issue/new",advanceOn:"next-button"},{target:'[data-guide="issue-submit-btn"]',title:"Submit Voucher",description:"Review and submit. This will deduct stock and create the issue record.",placement:"top",route:"/app/issue/new",advanceOn:"next-button"}]},{id:"view-issue-history",title:"View Issue History",description:"Browse past issue vouchers by department and date",icon:"FileOutput",category:"Issue Vouchers",keywords:["issue","history","past","voucher","records","previous"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-issue"]',title:"Go to Issue",description:"Navigate to the Issue page to see all issue vouchers.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="issue-type-tabs"]',title:"Filter by Department",description:"Use tabs to filter by issue type  Kitchen, Housekeeping, Bar, etc.",placement:"bottom",route:"/app/issue",advanceOn:"next-button"}]},{id:"ai-recipe-suggestions",title:"Get AI Recipe Suggestions",description:"Let AI suggest recipes based on ingredients in stock",icon:"Sparkles",category:"Recipes",keywords:["recipe","ai","suggest","cook","meal","ingredients","gemini"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-recipes"]',title:"Go to Recipes",description:"Click Recipes to access AI-powered recipe suggestions.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="recipe-generate"]',title:"Generate Recipes",description:"Select available ingredients and let the AI suggest recipes you can make with them.",placement:"bottom",route:"/app/recipes",advanceOn:"next-button"}]},{id:"generate-report",title:"Generate a Report",description:"Create consumption, stock, and variance reports",icon:"BarChart3",category:"Admin",keywords:["report","generate","consumption","variance","analysis","export","pdf"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-reports"]',title:"Go to Reports",description:"Click Reports in the sidebar. Available for managers and above.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="report-type-select"]',title:"Select Report Type",description:"Choose from: Consumption, Stock Valuation, Movement Summary, or Variance reports.",placement:"bottom",route:"/app/reports",advanceOn:"next-button"},{target:'[data-guide="report-date-filter"]',title:"Set Date Range",description:"Pick a date range for your report. Default is the current month.",placement:"bottom",route:"/app/reports",advanceOn:"next-button"},{target:'[data-guide="report-generate-btn"]',title:"Generate",description:"Click Generate to create the report. Results appear below.",placement:"bottom",route:"/app/reports",advanceOn:"next-button"}]},{id:"create-new-user",title:"Create a New User",description:"Add new staff members to the system",icon:"Users",category:"Admin",keywords:["user","create","add","staff","account","new user","employee"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-users"]',title:"Go to Users",description:"Click Users in the sidebar. Only available for admins and directors.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="add-user-btn"]',title:"Add User",description:'Click "Add User" to open the new user form.',placement:"bottom",route:"/app/users",advanceOn:"next-button"},{target:'[data-guide="user-form"]',title:"Fill User Details",description:"Enter name, username, password, select a role and assign to a camp.",placement:"bottom",route:"/app/users",advanceOn:"next-button"}]},{id:"edit-user-permissions",title:"Edit User Permissions",description:"Change roles and camp assignments for existing users",icon:"Users",category:"Admin",keywords:["user","edit","role","permission","change","update","camp"],estimatedTime:"1 min",steps:[{target:'[data-guide="nav-users"]',title:"Go to Users",description:"Navigate to User Management.",placement:"right",route:"/app",advanceOn:"click"},{target:'[data-guide="user-list-first"]',title:"Select a User",description:"Click on the user you want to edit. Find them in the list or use search.",placement:"bottom",route:"/app/users",advanceOn:"next-button"},{target:'[data-guide="user-role-select"]',title:"Change Role",description:"Update their role  admin, director, stores_manager, camp_storekeeper, chef, etc.",placement:"bottom",route:"/app/users",advanceOn:"next-button"}]}],Ld=[...A2,...D2,...M2,...L2,...q2];function U2(l){const i=l.toLowerCase().trim();return i?Ld.filter(o=>{const d=o.title.toLowerCase().includes(i),x=o.description.toLowerCase().includes(i),f=o.keywords.some(h=>h.toLowerCase().includes(i));return d||x||f}).sort((o,d)=>{const x=o.title.toLowerCase().includes(i)?2:0,f=d.title.toLowerCase().includes(i)?2:0,h=o.keywords.some(p=>p.toLowerCase().includes(i))?1:0,v=d.keywords.some(p=>p.toLowerCase().includes(i))?1:0;return f+v-(x+h)}):Ld}function B2(){const l={};for(const i of Ld)l[i.category]||(l[i.category]=[]),l[i.category].push(i);return l}const H2={LayoutDashboard:Xi,ShoppingCart:_t,Truck:mr,Boxes:Ia,Package:pa,PackageCheck:Es,FileOutput:zs,Wine:fa,GlassWater:In,Sparkles:nn,Bell:ur,BarChart3:Zi,Users:Sa},wf=["How do I create an order?","Where can I check stock levels?","How to use the bar menu?","How do I approve an order?","How to create an issue voucher?","Where are the stock alerts?","How to make a POS sale?","How to generate a report?"];function G2(){const{isPanelOpen:l,closePanel:i,startGuide:o,completedGuides:d,openReport:x}=Fi(),f=yh(),h=Qt(),[v,p]=u.useState(""),[g,j]=u.useState(0);u.useEffect(()=>{if(!l)return;const C=setInterval(()=>{j(w=>(w+1)%wf.length)},3e3);return()=>clearInterval(C)},[l]),u.useEffect(()=>{if(l)return As(),()=>Ds()},[l]);const b=u.useMemo(()=>v.trim()?U2(v):null,[v]),y=u.useMemo(()=>B2(),[]),z=u.useMemo(()=>{const C=h.pathname;return C.includes("order")?"Orders":C.includes("dispatch")?"Dispatch & Receive":C.includes("stock")||C.includes("items")?"Stock & Items":C.includes("pos")||C.includes("bar-menu")?"POS & Bar Menu":C.includes("issue")?"Issue Vouchers":C.includes("alert")?"Stock & Items":C.includes("report")||C.includes("user")?"Admin":C.includes("recipe")?"Recipes":"Navigation"},[h]);function S(C){p(""),o(C)}function O(C,w){if(!w.trim())return C;const k=new RegExp(`(${w.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return C.split(k).map(($,L)=>k.test($)?t.jsx("mark",{className:"bg-green-100 text-green-800 rounded px-0.5",children:$},L):$)}return l?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/20 z-[9994]",onClick:i,style:{animation:"guide-fade-in 0.2s ease forwards"}}),t.jsxs("div",{className:`fixed bg-white z-[9995] flex flex-col overflow-hidden ${f?"inset-x-0 bottom-0 rounded-t-2xl max-h-[85dvh]":"right-0 top-0 bottom-0 w-96 border-l border-gray-200"}`,style:{animation:f?"guide-slide-up 0.3s ease-out forwards":"guide-slide-right 0.3s ease-out forwards",boxShadow:"-4px 0 20px rgba(0,0,0,0.1)"},children:[f&&t.jsx("div",{className:"flex justify-center pt-2 pb-1",children:t.jsx("div",{className:"w-10 h-1 rounded-full bg-gray-300"})}),t.jsxs("div",{className:"px-5 pt-4 pb-3 border-b border-gray-100",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"How can we help?"}),t.jsx("button",{onClick:i,className:"compact-btn flex items-center justify-center w-8 h-8 rounded-full hover:bg-gray-100 text-gray-400 transition",style:{minHeight:"auto"},children:t.jsx(Te,{size:18})})]}),t.jsxs("div",{className:"relative",children:[t.jsx(Vt,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",value:v,onChange:C=>p(C.target.value),placeholder:wf[g],className:"w-full pl-9 pr-8 py-2.5 text-sm bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition"}),v&&t.jsx("button",{onClick:()=>p(""),className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 compact-btn",style:{minHeight:"auto",minWidth:"auto"},children:t.jsx(Te,{size:14})})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto px-5 py-3 scroll-touch",children:b!==null?b.length>0?t.jsxs("div",{children:[t.jsxs("p",{className:"text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-2",children:[b.length," result",b.length!==1?"s":""]}),b.map(C=>t.jsx(Sd,{guide:C,completed:d.includes(C.id),onSelect:S,highlightQuery:v,highlightMatch:O},C.id))]}):t.jsxs("div",{className:"text-center py-8",children:[t.jsx(cr,{size:32,className:"mx-auto text-gray-300 mb-2"}),t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"No guides found"}),t.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"Try different keywords"}),t.jsx("button",{onClick:()=>{p(""),x()},className:"text-xs text-green-600 hover:text-green-700 font-semibold underline compact-btn",style:{minHeight:"auto"},children:"Can't find help? Report it"})]}):t.jsxs(t.Fragment,{children:[y[z]&&t.jsxs("div",{className:"mb-4",children:[t.jsx("p",{className:"text-[10px] font-semibold text-green-600 uppercase tracking-wider mb-2",children:"For this page"}),y[z].map(C=>t.jsx(Sd,{guide:C,completed:d.includes(C.id),onSelect:S},C.id))]}),Object.entries(y).filter(([C])=>C!==z).map(([C,w])=>t.jsxs("div",{className:"mb-4",children:[t.jsx("p",{className:"text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-2",children:C}),w.map(k=>t.jsx(Sd,{guide:k,completed:d.includes(k.id),onSelect:S},k.id))]},C))]})}),t.jsx("div",{className:"px-5 py-3 border-t border-gray-100 bg-gray-50",children:t.jsxs("button",{onClick:x,className:"w-full flex items-center justify-center gap-2 py-2.5 text-sm text-gray-600 hover:text-green-700 font-medium transition compact-btn",style:{minHeight:"auto"},children:[t.jsx(cr,{size:15}),"Can't find what you need? Report it"]})})]})]}):null}function Sd({guide:l,completed:i,onSelect:o,highlightQuery:d,highlightMatch:x}){const f=H2[l.icon]||pa;return t.jsxs("button",{onClick:()=>o(l),className:"w-full flex items-center gap-3 p-3 mb-1.5 rounded-xl hover:bg-green-50 transition text-left group compact-btn",style:{minHeight:"auto"},children:[t.jsx("div",{className:`flex-shrink-0 w-9 h-9 rounded-lg flex items-center justify-center ${i?"bg-green-100 text-green-600":"bg-gray-100 text-gray-500 group-hover:bg-green-100 group-hover:text-green-600"}`,children:i?t.jsx(Xd,{size:18}):t.jsx(f,{size:18})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:x?x(l.title,d||""):l.title}),t.jsx("p",{className:"text-[11px] text-gray-500 truncate",children:x?x(l.description,d||""):l.description})]}),t.jsxs("div",{className:"flex-shrink-0 flex items-center gap-1.5",children:[t.jsxs("span",{className:"text-[10px] text-gray-400 flex items-center gap-0.5",children:[t.jsx(Cs,{size:10}),l.estimatedTime]}),t.jsx(h1,{size:14,className:"text-gray-300 group-hover:text-green-500 transition"})]})]})}function $2({targetRect:l,padding:i=8,onClick:o,clickThrough:d=!1}){const x=u.useRef(null),f=u.useRef(null),h=u.useId()?.replace(/:/g,"_")||"guide-mask";if(u.useEffect(()=>{if(!l)return;const b=l.left-i,y=l.top-i,z=l.width+i*2,S=l.height+i*2;x.current&&(x.current.setAttribute("x",b),x.current.setAttribute("y",y),x.current.setAttribute("width",z),x.current.setAttribute("height",S)),f.current&&(f.current.style.left=`${b}px`,f.current.style.top=`${y}px`,f.current.style.width=`${z}px`,f.current.style.height=`${S}px`)},[l,i]),!l)return null;const v=l.left-i,p=l.top-i,g=l.width+i*2,j=l.height+i*2;return t.jsxs("div",{className:"fixed inset-0",style:{zIndex:9997,pointerEvents:"none"},children:[t.jsxs("svg",{className:"absolute inset-0 w-full h-full",style:{pointerEvents:"none"},children:[t.jsx("defs",{children:t.jsxs("mask",{id:h,children:[t.jsx("rect",{width:"100%",height:"100%",fill:"white"}),t.jsx("rect",{ref:x,x:v,y:p,width:g,height:j,rx:"8",ry:"8",fill:"black",style:{transition:"x 0.4s cubic-bezier(0.4,0,0.2,1), y 0.4s cubic-bezier(0.4,0,0.2,1), width 0.4s cubic-bezier(0.4,0,0.2,1), height 0.4s cubic-bezier(0.4,0,0.2,1)"}})]})}),t.jsx("rect",{width:"100%",height:"100%",fill:"rgba(0,0,0,0.55)",mask:`url(#${h})`,onClick:d?void 0:o,style:{pointerEvents:d?"none":"auto",cursor:d?"default":"pointer"}})]}),t.jsx("div",{ref:f,className:"absolute rounded-lg pointer-events-none",style:{left:v,top:p,width:g,height:j,border:d?"2px solid rgba(22, 163, 74, 0.8)":"2px solid rgba(22, 163, 74, 0.6)",animation:d?"guide-coaching-pulse 1.4s ease-in-out infinite":"guide-spotlight-pulse 2s ease-in-out infinite",animationFillMode:"both",willChange:"box-shadow",boxShadow:d?"0 0 0 4px rgba(22, 163, 74, 0.15), inset 0 0 12px rgba(22, 163, 74, 0.08)":"none"}})]})}function Y2({position:l,visible:i,clicking:o,coaching:d=!1}){const x=yh();if(!i)return null;const f="0.5s",h="cubic-bezier(0.34, 1.56, 0.64, 1)";return x?t.jsxs("div",{className:"fixed pointer-events-none",style:{left:l.x-24,top:l.y-24,zIndex:1e4,transition:`left ${f} ${h}, top ${f} ${h}`,animation:"guide-cursor-fade-in 0.3s ease-out forwards",willChange:"left, top"},children:[t.jsx("div",{className:"absolute inset-0 rounded-full bg-green-500/20",style:{width:48,height:48,animation:d?"guide-coaching-tap-ring 1.2s ease-out infinite":"guide-tap-ring 1.5s ease-out infinite",animationFillMode:"both"}}),t.jsx("div",{className:"absolute rounded-full bg-green-500",style:{width:16,height:16,left:16,top:16,boxShadow:d?"0 0 12px rgba(22,163,74,0.6)":"0 0 8px rgba(22,163,74,0.5)"}}),t.jsx("span",{className:"absolute text-[10px] font-bold text-green-700 whitespace-nowrap",style:{left:52,top:14,animation:d?"guide-coaching-dot 1s ease-in-out infinite":void 0},children:d?"Tap here!":"Tap here"})]}):t.jsxs("div",{className:"fixed pointer-events-none",style:{left:l.x,top:l.y,zIndex:1e4,transition:`left ${f} ${h}, top ${f} ${h}`,animation:o?"guide-cursor-click 0.3s ease forwards":d?"guide-coaching-cursor-bounce 1.8s ease-in-out infinite":"guide-cursor-fade-in 0.3s ease-out forwards",willChange:"left, top"},children:[t.jsx("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.3))"},children:t.jsx("path",{d:"M5.5 2L20 12.5L12.5 13.5L9 21L5.5 2Z",fill:"#16a34a",stroke:"#ffffff",strokeWidth:"1.5",strokeLinejoin:"round"})}),d&&t.jsx("div",{className:"absolute rounded-full",style:{width:20,height:20,left:-3,top:-3,animation:"guide-coaching-click-ripple 1.8s ease-out infinite",border:"2px solid rgba(22, 163, 74, 0.5)"}})]})}function V2({current:l,total:i}){return t.jsx("div",{className:"flex items-center gap-1.5",children:Array.from({length:i},(o,d)=>t.jsx("div",{className:`rounded-full transition-all duration-300 ${d===l?"w-5 h-2 bg-green-500":d<l?"w-2 h-2 bg-green-300":"w-2 h-2 bg-gray-300"}`},d))})}function Q2({step:l,targetRect:i,currentIndex:o,totalSteps:d,onNext:x,onPrev:f,onEnd:h,isFirst:v,isLast:p,coaching:g=!1}){const j=u.useRef(null),[b,y]=u.useState({top:0,left:0,arrowSide:"top",arrowOffset:"50%"});return u.useEffect(()=>{if(!i||!j.current)return;const z=j.current.getBoundingClientRect(),S=window.innerWidth,O=window.innerHeight,C=14,w=16,k=l?.placement||"bottom";let M,$,L;if(k==="bottom"||k==="top"?($=i.left+i.width/2-z.width/2,k==="bottom"?(M=i.bottom+C,L="top"):(M=i.top-z.height-C,L="bottom")):k==="right"?($=i.right+C,M=i.top+i.height/2-z.height/2,L="left"):($=i.left-z.width-C,M=i.top+i.height/2-z.height/2,L="right"),M+z.height>O-w&&L==="top"){const X=i.top-z.height-C;X>=w&&(M=X,L="bottom")}else if(M<w&&L==="bottom"){const X=i.bottom+C;X+z.height<=O-w&&(M=X,L="top")}M=Math.max(w,Math.min(M,O-z.height-w)),$=Math.max(w,Math.min($,S-z.width-w));let te="50%";if(L==="top"||L==="bottom"){const X=i.left+i.width/2;te=`${Math.max(16,Math.min(X-$,z.width-16))}px`}y({top:M,left:$,arrowSide:L,arrowOffset:te})},[i,l]),!l||!i?null:t.jsxs("div",{ref:j,className:"fixed bg-white rounded-xl shadow-xl border border-gray-200 w-72 max-w-[calc(100vw-32px)]",style:{top:b.top,left:b.left,zIndex:10001,animation:"guide-tooltip-enter 0.3s ease-out forwards",transition:"top 0.5s ease, left 0.5s ease",touchAction:"manipulation",pointerEvents:"auto"},children:[t.jsx("div",{className:"absolute w-3 h-3 bg-white border-gray-200 rotate-45",style:{...b.arrowSide==="top"&&{top:-6,left:b.arrowOffset,marginLeft:-6,borderTop:"1px solid",borderLeft:"1px solid"},...b.arrowSide==="bottom"&&{bottom:-6,left:b.arrowOffset,marginLeft:-6,borderBottom:"1px solid",borderRight:"1px solid"},...b.arrowSide==="left"&&{left:-6,top:"50%",marginTop:-6,borderBottom:"1px solid",borderLeft:"1px solid"},...b.arrowSide==="right"&&{right:-6,top:"50%",marginTop:-6,borderTop:"1px solid",borderRight:"1px solid"}}}),t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2 pr-4",children:[g&&t.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-green-100 flex items-center justify-center",style:{animation:"guide-coaching-icon 1.5s ease-in-out infinite"},children:t.jsx(o1,{size:11,className:"text-green-600"})}),t.jsx("h4",{className:"text-sm font-bold text-gray-900",children:l.title})]}),t.jsx("button",{onClick:h,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition compact-btn",style:{minHeight:"auto"},children:t.jsx(Te,{size:16})})]}),t.jsx("p",{className:"text-xs text-gray-600 leading-relaxed mb-3",children:l.description}),g&&t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 mb-3 rounded-lg bg-green-50 border border-green-100",style:{animation:"guide-coaching-prompt 2s ease-in-out infinite"},children:[t.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500",style:{animation:"guide-coaching-dot 1s ease-in-out infinite"}}),t.jsx("span",{className:"text-[11px] font-semibold text-green-700",children:"Go ahead, click it!"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(V2,{current:o,total:d}),t.jsxs("div",{className:"flex items-center gap-1.5",children:[!v&&t.jsx("button",{onClick:f,className:"compact-btn flex items-center justify-center w-7 h-7 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-600 transition",style:{minHeight:"auto"},children:t.jsx(Oa,{size:14})}),g?!p&&t.jsxs("button",{onClick:x,className:"compact-btn flex items-center gap-1 px-3 py-1.5 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-500 text-xs font-medium transition",style:{minHeight:"auto"},children:["Skip",t.jsx(ot,{size:12})]}):t.jsx("button",{onClick:x,className:"compact-btn flex items-center gap-1 px-3 py-1.5 rounded-full bg-green-600 hover:bg-green-700 text-white text-xs font-semibold transition",style:{minHeight:"auto"},children:p?t.jsxs(t.Fragment,{children:[t.jsx(Yt,{size:12}),"Done"]}):t.jsxs(t.Fragment,{children:["Next",t.jsx(ot,{size:12})]})}),g&&p&&t.jsxs("button",{onClick:h,className:"compact-btn flex items-center gap-1 px-3 py-1.5 rounded-full bg-green-600 hover:bg-green-700 text-white text-xs font-semibold transition",style:{minHeight:"auto"},children:[t.jsx(Yt,{size:12}),"Done"]})]})]}),t.jsxs("p",{className:"text-[10px] text-gray-400 mt-2 text-center",children:["Step ",o+1," of ",d,g&&t.jsx("span",{className:"ml-1 text-green-500",children:"- watching your action"})]})]})]},`tooltip-step-${o}`)}function Z2(){const{isRunning:l,activeGuide:i,currentStepIndex:o,currentStep:d,totalSteps:x,isFirstStep:f,isLastStep:h,targetRect:v,cursorPosition:p,cursorVisible:g,nextStep:j,prevStep:b,endGuide:y,setTargetRect:z,setCursor:S}=Fi(),O=Os(),C=Qt(),w=u.useRef(null),k=u.useRef(null),M=u.useRef(null),$=u.useRef(null),L=u.useRef(!1),te=u.useRef(null),X=u.useRef(!1),ge=d?.advanceOn==="click";u.useEffect(()=>{te.current=d},[d]);const K=u.useCallback(()=>{X.current=!0,w.current&&(clearTimeout(w.current),w.current=null),k.current&&(k.current.el?.removeEventListener("click",k.current.fn,!0),k.current=null),M.current&&(M.current.disconnect(),M.current=null),$.current&&(clearInterval($.current),$.current=null),L.current=!1},[]);u.useEffect(()=>{if(l)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[l]),u.useEffect(()=>{if(!(!l||!d))return K(),X.current=!1,se(d),K},[l,o,i?.id]),u.useEffect(()=>{if(!l||!L.current)return;const W=te.current;if(W?.advanceOn==="click"&&W?.route){const ie=i?.steps?.[o+1];if(ie?.route&&C.pathname===ie.route){L.current=!1,K(),j();return}if(C.pathname!==W.route){L.current=!1,K(),j();return}}},[C.pathname,l]),u.useEffect(()=>{if(!l||!d)return;function W(){const ie=document.querySelector(d.target);if(ie){const me=ie.getBoundingClientRect();z({top:me.top,left:me.left,width:me.width,height:me.height,bottom:me.bottom,right:me.right})}}return window.addEventListener("scroll",W,{capture:!0,passive:!0}),window.addEventListener("resize",W,{passive:!0}),()=>{window.removeEventListener("scroll",W,{capture:!0}),window.removeEventListener("resize",W)}},[l,o]);async function se(W){if(W.route&&C.pathname!==W.route&&(O(W.route),await fe(500),X.current))return;const ie=await J(W.target,5e3);if(X.current)return;if(!ie){console.warn(`Guide target not found: ${W.target}`),h||j();return}if(ie.scrollIntoView({behavior:"smooth",block:"center"}),await fe(400),X.current)return;const me=ie.getBoundingClientRect();z({top:me.top,left:me.left,width:me.width,height:me.height,bottom:me.bottom,right:me.right});const be=me.left+me.width/2,E=me.top+me.height/2;S({x:be,y:E}),window.ResizeObserver&&(M.current=new ResizeObserver(()=>{if(X.current)return;const G=ie.getBoundingClientRect();z({top:G.top,left:G.left,width:G.width,height:G.height,bottom:G.bottom,right:G.right})}),M.current.observe(ie)),W.advanceOn==="click"&&ne(ie,W)}function ne(W,ie){const me=be=>{L.current=!0,setTimeout(()=>{L.current&&(L.current=!1,K(),j())},600)};if(W.addEventListener("click",me,{capture:!0,once:!0}),k.current={el:W,fn:me},ie.route){const be=window.location.hash||window.location.pathname;$.current=setInterval(()=>{(window.location.hash||window.location.pathname)!==be&&(clearInterval($.current),$.current=null,L.current&&(L.current=!1,K(),j()))},200)}}function J(W,ie=5e3){return new Promise(me=>{const be=Date.now();function E(){if(X.current)return me(null);const G=document.querySelector(W);if(G)return me(G);if(Date.now()-be>ie)return me(null);w.current=setTimeout(E,150)}E()})}function fe(W){return new Promise(ie=>{w.current=setTimeout(ie,W)})}function Q(){K(),h?y():j()}function ce(){K(),b()}function q(){K(),y()}return!l||!i?null:Rs.createPortal(t.jsxs(t.Fragment,{children:[t.jsx($2,{targetRect:v,onClick:q,clickThrough:ge}),t.jsx(Y2,{position:p,visible:g,coaching:ge}),t.jsx(Q2,{step:d,targetRect:v,currentIndex:o,totalSteps:x,onNext:Q,onPrev:ce,onEnd:q,isFirst:f,isLast:h,coaching:ge})]}),document.body)}const X2=[{key:"bug",label:"Bug Report",icon:iv,color:"text-red-500 bg-red-50"},{key:"feature",label:"Feature Request",icon:Iv,color:"text-amber-500 bg-amber-50"},{key:"help",label:"Help Not Found",icon:sh,color:"text-blue-500 bg-blue-50"}];function K2(){const{isReportFormOpen:l,closeReport:i,addReport:o}=Fi(),[d,x]=u.useState("help"),[f,h]=u.useState(""),[v,p]=u.useState(""),[g,j]=u.useState(!1),b=u.useRef(null);u.useEffect(()=>{if(l)return As(),()=>Ds()},[l]),u.useEffect(()=>()=>{b.current&&clearTimeout(b.current)},[]);function y(S){S.preventDefault(),!(!f.trim()||g)&&(o({type:d,title:f.trim(),description:v.trim()}),j(!0),b.current=setTimeout(()=>{j(!1),x("help"),h(""),p(""),i()},1800))}function z(){b.current&&clearTimeout(b.current),j(!1),x("help"),h(""),p(""),i()}return l?Rs.createPortal(t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/40 z-[10010]",onClick:z,style:{animation:"guide-fade-in 0.2s ease forwards"}}),t.jsx("div",{className:"fixed z-[10011] bg-white rounded-2xl shadow-2xl w-[90vw] max-w-md max-h-[85dvh] overflow-y-auto scroll-touch",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)",animation:"guide-tooltip-enter 0.3s ease-out forwards"},children:g?t.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-6",children:[t.jsx(Zd,{size:48,className:"text-green-500 mb-3"}),t.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:"Thank you!"}),t.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Your report has been saved. We'll look into it."})]}):t.jsxs("form",{onSubmit:y,children:[t.jsxs("div",{className:"flex items-center justify-between px-5 pt-5 pb-3",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Report an Issue"}),t.jsx("button",{type:"button",onClick:z,className:"compact-btn flex items-center justify-center w-8 h-8 rounded-full hover:bg-gray-100 text-gray-400 transition",style:{minHeight:"auto"},children:t.jsx(Te,{size:18})})]}),t.jsxs("div",{className:"px-5 pb-5 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2 block",children:"Type"}),t.jsx("div",{className:"flex gap-2",children:X2.map(S=>{const O=S.icon;return t.jsxs("button",{type:"button",onClick:()=>x(S.key),className:`flex-1 flex items-center gap-1.5 px-3 py-2.5 rounded-lg text-xs font-semibold transition border compact-btn ${d===S.key?`${S.color} border-current`:"bg-gray-50 text-gray-500 border-gray-200 hover:bg-gray-100"}`,style:{minHeight:"auto"},children:[t.jsx(O,{size:14}),S.label]},S.key)})})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1.5 block",children:["Title ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("input",{type:"text",value:f,onChange:S=>h(S.target.value),placeholder:"Brief summary of the issue...",required:!0,className:"w-full px-3 py-2.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1.5 block",children:"Description"}),t.jsx("textarea",{value:v,onChange:S=>p(S.target.value),placeholder:"Describe what you were trying to do and what went wrong...",rows:4,className:"w-full px-3 py-2.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none resize-none"})]}),t.jsxs("button",{type:"submit",disabled:!f.trim()||g,className:"w-full flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white py-3 rounded-lg text-sm font-semibold transition",children:[t.jsx(oh,{size:16}),"Submit Report"]})]})]})})]}),document.body):null}function J2(){const[l,i]=u.useState(()=>localStorage.getItem("kcl_sidebar_collapsed")==="true");return u.useEffect(()=>{function o(d){i(d.detail.collapsed)}return window.addEventListener("sidebar-toggle",o),()=>window.removeEventListener("sidebar-toggle",o)},[]),t.jsx(T2,{children:t.jsx(C2,{children:t.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"var(--surface-bg)"},children:[t.jsx(x2,{}),t.jsxs("div",{className:"lg:transition-all lg:duration-200 lg:ease-out",style:{"--sidebar-w":l?"68px":"260px"},children:[t.jsx("style",{children:`
              @media (min-width: 1024px) {
                .main-content { margin-left: var(--sidebar-w); }
              }
            `}),t.jsxs("div",{className:"main-content",children:[t.jsx(j2,{}),t.jsx(N2,{}),t.jsx("main",{className:"p-4 lg:p-6 pb-24 lg:pb-6 max-w-[1400px]",children:t.jsx($y,{})})]})]}),t.jsx(y2,{}),t.jsx(R2,{}),t.jsx(G2,{}),t.jsx(Z2,{}),t.jsx(K2,{})]})})})}function F2({children:l}){return Ie()?l:t.jsx(Yi,{to:"/login",replace:!0})}function I2(){return Ie()?.role==="chef"?t.jsx(Yi,{to:"/app/menu-plan",replace:!0}):t.jsx(F1,{})}function kf({children:l}){return Ie()?t.jsx(Yi,{to:"/app",replace:!0}):l}function P2(){return t.jsxs(Vy,{children:[t.jsx(Xe,{path:"/login",element:t.jsx(kf,{children:t.jsx(X1,{})})}),t.jsx(Xe,{path:"/pin-login",element:t.jsx(kf,{children:t.jsx(K1,{})})}),t.jsxs(Xe,{path:"/app",element:t.jsx(F2,{children:t.jsx(J2,{})}),children:[t.jsx(Xe,{index:!0,element:t.jsx(I2,{})}),t.jsx(Xe,{path:"items",element:t.jsx(I1,{})}),t.jsx(Xe,{path:"items/:id",element:t.jsx(P1,{})}),t.jsx(Xe,{path:"stock",element:t.jsx(W1,{})}),t.jsx(Xe,{path:"orders",element:t.jsx(tj,{})}),t.jsx(Xe,{path:"orders/new",element:t.jsx(aj,{})}),t.jsx(Xe,{path:"orders/:id",element:t.jsx(sj,{})}),t.jsx(Xe,{path:"dispatch",element:t.jsx(lj,{})}),t.jsx(Xe,{path:"dispatch/:id",element:t.jsx(rj,{})}),t.jsx(Xe,{path:"receive",element:t.jsx(cj,{})}),t.jsx(Xe,{path:"receive/:id",element:t.jsx(oj,{})}),t.jsx(Xe,{path:"issue",element:t.jsx(uj,{})}),t.jsx(Xe,{path:"issue/new",element:t.jsx(gj,{})}),t.jsx(Xe,{path:"alerts",element:t.jsx(vj,{})}),t.jsx(Xe,{path:"reports",element:t.jsx(kj,{})}),t.jsx(Xe,{path:"users",element:t.jsx(zj,{})}),t.jsx(Xe,{path:"settings",element:t.jsx(Ej,{})}),t.jsx(Xe,{path:"pos",element:t.jsx(Aj,{})}),t.jsx(Xe,{path:"bar-menu",element:t.jsx(Uj,{})}),t.jsx(Xe,{path:"recipes",element:t.jsx(Hj,{})}),t.jsx(Xe,{path:"daily",element:t.jsx(Qj,{})}),t.jsx(Xe,{path:"menu-plan",element:t.jsx(Fj,{})}),t.jsx(Xe,{path:"daily-groceries",element:t.jsx(n2,{})}),t.jsx(Xe,{path:"weekly-groceries",element:t.jsx(c2,{})})]}),t.jsx(Xe,{path:"*",element:t.jsx(Yi,{to:"/login",replace:!0})})]})}Vg.createRoot(document.getElementById("root")).render(t.jsx(u.StrictMode,{children:t.jsx(fb,{children:t.jsx(wb,{children:t.jsx(P2,{})})})}));Zb();const Cf=window.Capacitor?.isNativePlatform?.()||!1;"serviceWorker"in navigator&&!Cf?window.addEventListener("load",()=>{navigator.serviceWorker.register("./sw.js").catch(()=>{})}):Cf&&"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(l=>{l.forEach(i=>i.unregister())}).catch(()=>{});
